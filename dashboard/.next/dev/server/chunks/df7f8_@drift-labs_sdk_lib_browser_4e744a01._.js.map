{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/assert/assert.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assert = void 0;\nfunction assert(condition, error) {\n    if (!condition) {\n        throw new Error(error || 'Unspecified AssertionError');\n    }\n}\nexports.assert = assert;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,MAAM,GAAG,KAAK;AACtB,SAAS,OAAO,SAAS,EAAE,KAAK;IAC5B,IAAI,CAAC,WAAW;QACZ,MAAM,IAAI,MAAM,SAAS;IAC7B;AACJ;AACA,QAAQ,MAAM,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/factory/bigNum.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BigNum = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst assert_1 = require(\"../assert/assert\");\nconst numericConstants_1 = require(\"./../constants/numericConstants\");\nclass BigNum {\n    static setLocale(locale) {\n        BigNum.delim = (1.1).toLocaleString(locale).slice(1, 2) || '.';\n        BigNum.spacer = (1000).toLocaleString(locale).slice(1, 2) || ',';\n    }\n    constructor(val, precisionVal = new anchor_1.BN(0)) {\n        this.toString = (base, length) => this.val.toString(base, length);\n        this.val = new anchor_1.BN(val);\n        this.precision = new anchor_1.BN(precisionVal);\n    }\n    bigNumFromParam(bn) {\n        return anchor_1.BN.isBN(bn) ? BigNum.from(bn) : bn;\n    }\n    add(bn) {\n        (0, assert_1.assert)(bn.precision.eq(this.precision), 'Adding unequal precisions');\n        return BigNum.from(this.val.add(bn.val), this.precision);\n    }\n    sub(bn) {\n        (0, assert_1.assert)(bn.precision.eq(this.precision), 'Subtracting unequal precisions');\n        return BigNum.from(this.val.sub(bn.val), this.precision);\n    }\n    mul(bn) {\n        const mulVal = this.bigNumFromParam(bn);\n        return BigNum.from(this.val.mul(mulVal.val), this.precision.add(mulVal.precision));\n    }\n    /**\n     * Multiplies by another big number then scales the result down by the big number's precision so that we're in the same precision space\n     * @param bn\n     * @returns\n     */\n    scalarMul(bn) {\n        if (anchor_1.BN.isBN(bn))\n            return BigNum.from(this.val.mul(bn), this.precision);\n        return BigNum.from(this.val.mul(bn.val), this.precision.add(bn.precision)).shift(bn.precision.neg());\n    }\n    div(bn) {\n        if (anchor_1.BN.isBN(bn))\n            return BigNum.from(this.val.div(bn), this.precision);\n        return BigNum.from(this.val.div(bn.val), this.precision.sub(bn.precision));\n    }\n    /**\n     * Shift precision up or down\n     * @param exponent\n     * @param skipAdjustingPrecision\n     * @returns\n     */\n    shift(exponent, skipAdjustingPrecision = false) {\n        const shiftVal = typeof exponent === 'number' ? new anchor_1.BN(exponent) : exponent;\n        return BigNum.from(shiftVal.isNeg()\n            ? this.val.div(new anchor_1.BN(10).pow(shiftVal))\n            : this.val.mul(new anchor_1.BN(10).pow(shiftVal)), skipAdjustingPrecision ? this.precision : this.precision.add(shiftVal));\n    }\n    /**\n     * Shift to a target precision\n     * @param targetPrecision\n     * @returns\n     */\n    shiftTo(targetPrecision) {\n        return this.shift(targetPrecision.sub(this.precision));\n    }\n    /**\n     * Scale the number by a fraction\n     * @param numerator\n     * @param denominator\n     * @returns\n     */\n    scale(numerator, denominator) {\n        return this.mul(BigNum.from(new anchor_1.BN(numerator))).div(new anchor_1.BN(denominator));\n    }\n    toPercentage(denominator, precision) {\n        return this.shift(precision)\n            .shift(2, true)\n            .div(denominator)\n            .toPrecision(precision);\n    }\n    gt(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), 'Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter');\n        }\n        return this.val.gt(comparisonVal.val);\n    }\n    lt(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), 'Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter');\n        }\n        return this.val.lt(comparisonVal.val);\n    }\n    gte(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), 'Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter');\n        }\n        return this.val.gte(comparisonVal.val);\n    }\n    lte(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), 'Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter');\n        }\n        return this.val.lte(comparisonVal.val);\n    }\n    eq(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), 'Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter');\n        }\n        return this.val.eq(comparisonVal.val);\n    }\n    eqZero() {\n        return this.val.eq(numericConstants_1.ZERO);\n    }\n    gtZero() {\n        return this.val.gt(numericConstants_1.ZERO);\n    }\n    ltZero() {\n        return this.val.lt(numericConstants_1.ZERO);\n    }\n    gteZero() {\n        return this.val.gte(numericConstants_1.ZERO);\n    }\n    lteZero() {\n        return this.val.lte(numericConstants_1.ZERO);\n    }\n    abs() {\n        return new BigNum(this.val.abs(), this.precision);\n    }\n    neg() {\n        return new BigNum(this.val.neg(), this.precision);\n    }\n    /**\n     * Pretty print the underlying value in human-readable form. Depends on precision being correct for the output string to be correct\n     * @returns\n     */\n    print() {\n        (0, assert_1.assert)(this.precision.gte(numericConstants_1.ZERO), 'Tried to print a BN with precision lower than zero');\n        const isNeg = this.isNeg();\n        const plainString = this.abs().toString();\n        const precisionNum = this.precision.toNumber();\n        // make a string with at least the precisionNum number of zeroes\n        let printString = [\n            ...Array(this.precision.toNumber()).fill(0),\n            ...plainString.split(''),\n        ].join('');\n        // inject decimal\n        printString =\n            printString.substring(0, printString.length - precisionNum) +\n                BigNum.delim +\n                printString.substring(printString.length - precisionNum);\n        // remove leading zeroes\n        printString = printString.replace(/^0+/, '');\n        // add zero if leading delim\n        if (printString[0] === BigNum.delim)\n            printString = `0${printString}`;\n        // Add minus if negative\n        if (isNeg)\n            printString = `-${printString}`;\n        // remove trailing delim\n        if (printString[printString.length - 1] === BigNum.delim)\n            printString = printString.slice(0, printString.length - 1);\n        return printString;\n    }\n    prettyPrint(useTradePrecision, precisionOverride, decimalOverride) {\n        const [leftSide, rightSide] = this.printShort(useTradePrecision, precisionOverride).split(BigNum.delim);\n        let formattedLeftSide = leftSide;\n        let formattedRightSide = rightSide;\n        // Apply decimal override if specified\n        if (decimalOverride !== undefined) {\n            if (decimalOverride === 0) {\n                formattedRightSide = undefined;\n            }\n            else {\n                // If no decimal part exists, create one with zeros\n                const currentRightSide = rightSide || '';\n                // Pad with zeros if needed or truncate if too long\n                formattedRightSide = currentRightSide\n                    .padEnd(decimalOverride, '0')\n                    .substring(0, decimalOverride);\n            }\n        }\n        const isNeg = formattedLeftSide.includes('-');\n        if (isNeg) {\n            formattedLeftSide = formattedLeftSide.replace('-', '');\n        }\n        let index = formattedLeftSide.length - 3;\n        while (index >= 1) {\n            const formattedLeftSideArray = formattedLeftSide.split('');\n            formattedLeftSideArray.splice(index, 0, BigNum.spacer);\n            formattedLeftSide = formattedLeftSideArray.join('');\n            index -= 3;\n        }\n        return `${isNeg ? '-' : ''}${formattedLeftSide}${formattedRightSide ? `${BigNum.delim}${formattedRightSide}` : ''}`;\n    }\n    /**\n     * Print and remove unnecessary trailing zeroes\n     * @returns\n     */\n    printShort(useTradePrecision, precisionOverride) {\n        const printVal = precisionOverride\n            ? this.toPrecision(precisionOverride)\n            : useTradePrecision\n                ? this.toTradePrecision()\n                : this.print();\n        if (!printVal.includes(BigNum.delim))\n            return printVal;\n        return printVal.replace(/0+$/g, '').replace(/\\.$/, '').replace(/,$/, '');\n    }\n    debug() {\n        console.log(`${this.toString()} | ${this.print()} | ${this.precision.toString()}`);\n    }\n    /**\n     * Pretty print with the specified number of decimal places\n     * @param fixedPrecision\n     * @returns\n     */\n    toFixed(fixedPrecision, rounded = false) {\n        if (rounded) {\n            return this.toRounded(fixedPrecision).toFixed(fixedPrecision);\n        }\n        const printString = this.print();\n        const [leftSide, rightSide] = printString.split(BigNum.delim);\n        const filledRightSide = [\n            ...(rightSide !== null && rightSide !== void 0 ? rightSide : '').slice(0, fixedPrecision),\n            ...Array(fixedPrecision).fill('0'),\n        ]\n            .slice(0, fixedPrecision)\n            .join('');\n        return `${leftSide}${BigNum.delim}${filledRightSide}`;\n    }\n    getZeroes(count) {\n        return new Array(Math.max(count, 0)).fill('0').join('');\n    }\n    toRounded(roundingPrecision) {\n        const printString = this.toString();\n        let shouldRoundUp = false;\n        const roundingDigitChar = printString[roundingPrecision];\n        if (roundingDigitChar) {\n            const roundingDigitVal = Number(roundingDigitChar);\n            if (roundingDigitVal >= 5)\n                shouldRoundUp = true;\n        }\n        if (shouldRoundUp) {\n            const valueWithRoundedPrecisionAdded = this.add(BigNum.from(new anchor_1.BN(10).pow(new anchor_1.BN(printString.length - roundingPrecision)), this.precision));\n            const roundedUpPrintString = valueWithRoundedPrecisionAdded.toString().slice(0, roundingPrecision) +\n                this.getZeroes(printString.length - roundingPrecision);\n            return BigNum.from(roundedUpPrintString, this.precision);\n        }\n        else {\n            const roundedDownPrintString = printString.slice(0, roundingPrecision) +\n                this.getZeroes(printString.length - roundingPrecision);\n            return BigNum.from(roundedDownPrintString, this.precision);\n        }\n    }\n    /**\n     * Pretty print to the specified number of significant figures\n     * @param fixedPrecision\n     * @returns\n     */\n    toPrecision(fixedPrecision, trailingZeroes = false, rounded = false) {\n        if (rounded) {\n            return this.toRounded(fixedPrecision).toPrecision(fixedPrecision, trailingZeroes);\n        }\n        const isNeg = this.isNeg();\n        const printString = this.abs().print();\n        const thisString = this.abs().toString();\n        // Handle small numbers (those with leading zeros after decimal)\n        if (printString.includes(BigNum.delim)) {\n            const [leftSide, rightSide] = printString.split(BigNum.delim);\n            if (leftSide === '0' && rightSide) {\n                // Count leading zeros\n                let leadingZeros = 0;\n                for (let i = 0; i < rightSide.length; i++) {\n                    if (rightSide[i] === '0') {\n                        leadingZeros++;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                // Get significant digits starting after leading zeros\n                const significantPart = rightSide.slice(leadingZeros);\n                let significantDigits = significantPart.slice(0, fixedPrecision);\n                // Remove trailing zeros if not requested\n                if (!trailingZeroes) {\n                    significantDigits = significantDigits.replace(/0+$/, '');\n                }\n                // Only return result if we have significant digits\n                if (significantDigits.length > 0) {\n                    const result = `${isNeg ? '-' : ''}0${BigNum.delim}${rightSide.slice(0, leadingZeros)}${significantDigits}`;\n                    return result;\n                }\n            }\n        }\n        let precisionPrintString = printString.slice(0, fixedPrecision + 1);\n        if (!printString.includes(BigNum.delim) &&\n            thisString.length < fixedPrecision) {\n            const precisionMismatch = fixedPrecision - thisString.length;\n            return BigNum.from((isNeg ? '-' : '') + thisString + this.getZeroes(precisionMismatch), precisionMismatch).toPrecision(fixedPrecision, trailingZeroes);\n        }\n        if (!precisionPrintString.includes(BigNum.delim) ||\n            precisionPrintString[precisionPrintString.length - 1] === BigNum.delim) {\n            precisionPrintString = printString.slice(0, fixedPrecision);\n        }\n        const pointsOfPrecision = precisionPrintString.replace(BigNum.delim, '').length;\n        if (pointsOfPrecision < fixedPrecision) {\n            precisionPrintString = [\n                ...precisionPrintString.split(''),\n                ...Array(fixedPrecision - pointsOfPrecision).fill('0'),\n            ].join('');\n        }\n        if (!precisionPrintString.includes(BigNum.delim)) {\n            const delimFullStringLocation = printString.indexOf(BigNum.delim);\n            let skipExponent = false;\n            if (delimFullStringLocation === -1) {\n                // no decimal, not missing any precision\n                skipExponent = true;\n            }\n            if (precisionPrintString[precisionPrintString.length - 1] === BigNum.delim) {\n                // decimal is at end of string, not missing any precision, do nothing\n                skipExponent = true;\n            }\n            if (printString.indexOf(BigNum.delim) === fixedPrecision) {\n                // decimal is at end of string, not missing any precision, do nothing\n                skipExponent = true;\n            }\n            if (!skipExponent) {\n                const exponent = delimFullStringLocation - fixedPrecision;\n                if (trailingZeroes) {\n                    precisionPrintString = `${precisionPrintString}${Array(exponent)\n                        .fill('0')\n                        .join('')}`;\n                }\n                else {\n                    precisionPrintString = `${precisionPrintString}e${exponent}`;\n                }\n            }\n        }\n        return `${isNeg ? '-' : ''}${precisionPrintString}`;\n    }\n    toTradePrecision(rounded = false) {\n        return this.toPrecision(6, true, rounded);\n    }\n    /**\n     * Print dollar formatted value. Defaults to fixed decimals two unless a given precision is given.\n     * @param useTradePrecision\n     * @param precisionOverride\n     * @returns\n     */\n    toNotional(useTradePrecision, precisionOverride, decimalOverride) {\n        var _a;\n        const prefix = `${this.lt(BigNum.zero()) ? `-` : ``}$`;\n        const usingCustomPrecision = true && (useTradePrecision || precisionOverride || decimalOverride);\n        let val = usingCustomPrecision\n            ? this.prettyPrint(useTradePrecision, precisionOverride, decimalOverride)\n            : BigNum.fromPrint(this.toFixed(2), new anchor_1.BN(2)).prettyPrint();\n        // Append trailing zeroes out to 2 decimal places if not using custom precision\n        if (!usingCustomPrecision) {\n            const [_, rightSide] = val.split(BigNum.delim);\n            const trailingLength = (_a = rightSide === null || rightSide === void 0 ? void 0 : rightSide.length) !== null && _a !== void 0 ? _a : 0;\n            if (trailingLength === 0) {\n                val = `${val}${BigNum.delim}00`;\n            }\n            else if (trailingLength === 1) {\n                val = `${val}0`;\n            }\n        }\n        return `${prefix}${val.replace('-', '')}`;\n    }\n    toMillified(precision = 3, rounded = false, type = 'financial') {\n        if (rounded) {\n            return this.toRounded(precision).toMillified(precision);\n        }\n        const isNeg = this.isNeg();\n        const stringVal = this.abs().print();\n        const [leftSide] = stringVal.split(BigNum.delim);\n        if (!leftSide) {\n            return this.shift(new anchor_1.BN(precision)).toPrecision(precision, true);\n        }\n        if (leftSide.length <= precision) {\n            return this.toPrecision(precision);\n        }\n        if (leftSide.length <= 3) {\n            return this.shift(new anchor_1.BN(precision)).toPrecision(precision, true);\n        }\n        const unitTicks = type === 'financial'\n            ? ['', 'K', 'M', 'B', 'T', 'Q']\n            : ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];\n        // TODO -- handle nubers which are larger than the max unit tick\n        const unitNumber = Math.floor((leftSide.length - 1) / 3);\n        const unit = unitTicks[unitNumber];\n        let leadDigits = leftSide.slice(0, precision);\n        if (leadDigits.length < precision) {\n            leadDigits = [\n                ...leadDigits.split(''),\n                ...Array(precision - leadDigits.length).fill('0'),\n            ].join('');\n        }\n        const decimalLocation = leftSide.length - 3 * unitNumber;\n        let leadString = '';\n        if (decimalLocation >= precision) {\n            leadString = `${leadDigits}`;\n        }\n        else {\n            leadString = `${leadDigits.slice(0, decimalLocation)}${BigNum.delim}${leadDigits.slice(decimalLocation)}`;\n        }\n        return `${isNeg ? '-' : ''}${leadString}${unit}`;\n    }\n    toJSON() {\n        return {\n            val: this.val.toString(),\n            precision: this.precision.toString(),\n        };\n    }\n    isNeg() {\n        return this.lt(numericConstants_1.ZERO, true);\n    }\n    isPos() {\n        return !this.isNeg();\n    }\n    /**\n     * Get the numerical value of the BigNum. This can break if the BigNum is too large.\n     * @returns\n     */\n    toNum() {\n        let printedValue = this.print();\n        // Must convert any non-US delimiters and spacers to US format before using parseFloat\n        if (BigNum.delim !== '.' || BigNum.spacer !== ',') {\n            printedValue = printedValue\n                .split('')\n                .map((char) => {\n                if (char === BigNum.delim)\n                    return '.';\n                if (char === BigNum.spacer)\n                    return ',';\n                return char;\n            })\n                .join('');\n        }\n        return parseFloat(printedValue);\n    }\n    static fromJSON(json) {\n        return BigNum.from(new anchor_1.BN(json.val), new anchor_1.BN(json.precision));\n    }\n    /**\n     * Create a BigNum instance\n     * @param val\n     * @param precision\n     * @returns\n     */\n    static from(val = numericConstants_1.ZERO, precision) {\n        (0, assert_1.assert)(new anchor_1.BN(precision).lt(new anchor_1.BN(100)), 'Tried to create a bignum with precision higher than 10^100');\n        return new BigNum(val, precision);\n    }\n    /**\n     * Create a BigNum instance from a printed BigNum\n     * @param val\n     * @param precisionOverride\n     * @returns\n     */\n    static fromPrint(val, precisionShift) {\n        var _a, _b;\n        // Handle empty number edge cases\n        if (!val)\n            return BigNum.from(numericConstants_1.ZERO, precisionShift);\n        if (!val.replace(BigNum.delim, '')) {\n            return BigNum.from(numericConstants_1.ZERO, precisionShift);\n        }\n        if (val.includes('e'))\n            val = (+val).toFixed((_a = precisionShift === null || precisionShift === void 0 ? void 0 : precisionShift.toNumber()) !== null && _a !== void 0 ? _a : 9); // prevent small numbers e.g. 3.1e-8, use assume max precision 9 as default\n        const sides = val.split(BigNum.delim);\n        const rightSide = sides[1];\n        const leftSide = sides[0].replace(/\\s/g, '');\n        const bnInput = `${leftSide !== null && leftSide !== void 0 ? leftSide : ''}${rightSide !== null && rightSide !== void 0 ? rightSide : ''}`;\n        const rawBn = new anchor_1.BN(bnInput);\n        const rightSideLength = (_b = rightSide === null || rightSide === void 0 ? void 0 : rightSide.length) !== null && _b !== void 0 ? _b : 0;\n        const totalShift = precisionShift\n            ? precisionShift.sub(new anchor_1.BN(rightSideLength))\n            : numericConstants_1.ZERO;\n        return BigNum.from(rawBn, precisionShift).shift(totalShift, true);\n    }\n    static max(a, b) {\n        return a.gt(b) ? a : b;\n    }\n    static min(a, b) {\n        return a.lt(b) ? a : b;\n    }\n    static zero(precision) {\n        return BigNum.from(0, precision);\n    }\n}\nexports.BigNum = BigNum;\nBigNum.delim = '.';\nBigNum.spacer = ',';\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/factory/oracleClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOracleClient = void 0;\nconst types_1 = require(\"../types\");\nconst pythClient_1 = require(\"../oracles/pythClient\");\n// import { SwitchboardClient } from '../oracles/switchboardClient';\nconst quoteAssetOracleClient_1 = require(\"../oracles/quoteAssetOracleClient\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst prelaunchOracleClient_1 = require(\"../oracles/prelaunchOracleClient\");\nconst switchboardClient_1 = require(\"../oracles/switchboardClient\");\nconst pythPullClient_1 = require(\"../oracles/pythPullClient\");\nconst switchboardOnDemandClient_1 = require(\"../oracles/switchboardOnDemandClient\");\nconst pythLazerClient_1 = require(\"../oracles/pythLazerClient\");\nfunction getOracleClient(oracleSource, connection, program) {\n    if ((0, types_1.isVariant)(oracleSource, 'pyth')) {\n        return new pythClient_1.PythClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythPull')) {\n        return new pythPullClient_1.PythPullClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pyth1K')) {\n        return new pythClient_1.PythClient(connection, new anchor_1.BN(1000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pyth1KPull')) {\n        return new pythPullClient_1.PythPullClient(connection, new anchor_1.BN(1000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pyth1M')) {\n        return new pythClient_1.PythClient(connection, new anchor_1.BN(1000000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pyth1MPull')) {\n        return new pythPullClient_1.PythPullClient(connection, new anchor_1.BN(1000000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythStableCoin')) {\n        return new pythClient_1.PythClient(connection, undefined, true);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythStableCoinPull')) {\n        return new pythPullClient_1.PythPullClient(connection, undefined, true);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'switchboard')) {\n        return new switchboardClient_1.SwitchboardClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'prelaunch')) {\n        return new prelaunchOracleClient_1.PrelaunchOracleClient(connection, program);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'quoteAsset')) {\n        return new quoteAssetOracleClient_1.QuoteAssetOracleClient();\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'switchboardOnDemand')) {\n        return new switchboardOnDemandClient_1.SwitchboardOnDemandClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythLazer')) {\n        return new pythLazerClient_1.PythLazerClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythLazer1K')) {\n        return new pythLazerClient_1.PythLazerClient(connection, new anchor_1.BN(1000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythLazer1M')) {\n        return new pythLazerClient_1.PythLazerClient(connection, new anchor_1.BN(1000000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, 'pythLazerStableCoin')) {\n        return new pythLazerClient_1.PythLazerClient(connection, undefined, true);\n    }\n    throw new Error(`Unknown oracle source ${oracleSource}`);\n}\nexports.getOracleClient = getOracleClient;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,eAAe,GAAG,KAAK;AAC/B,MAAM;AACN,MAAM;AACN,oEAAoE;AACpE,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,SAAS,gBAAgB,YAAY,EAAE,UAAU,EAAE,OAAO;IACtD,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,SAAS;QAC9C,OAAO,IAAI,aAAa,UAAU,CAAC;IACvC;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,aAAa;QAClD,OAAO,IAAI,iBAAiB,cAAc,CAAC;IAC/C;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,WAAW;QAChD,OAAO,IAAI,aAAa,UAAU,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IACnE;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,eAAe;QACpD,OAAO,IAAI,iBAAiB,cAAc,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IAC3E;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,WAAW;QAChD,OAAO,IAAI,aAAa,UAAU,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IACnE;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,eAAe;QACpD,OAAO,IAAI,iBAAiB,cAAc,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IAC3E;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,mBAAmB;QACxD,OAAO,IAAI,aAAa,UAAU,CAAC,YAAY,WAAW;IAC9D;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,uBAAuB;QAC5D,OAAO,IAAI,iBAAiB,cAAc,CAAC,YAAY,WAAW;IACtE;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,gBAAgB;QACrD,OAAO,IAAI,oBAAoB,iBAAiB,CAAC;IACrD;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,cAAc;QACnD,OAAO,IAAI,wBAAwB,qBAAqB,CAAC,YAAY;IACzE;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,eAAe;QACpD,OAAO,IAAI,yBAAyB,sBAAsB;IAC9D;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,wBAAwB;QAC7D,OAAO,IAAI,4BAA4B,yBAAyB,CAAC;IACrE;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,cAAc;QACnD,OAAO,IAAI,kBAAkB,eAAe,CAAC;IACjD;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,gBAAgB;QACrD,OAAO,IAAI,kBAAkB,eAAe,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IAC7E;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,gBAAgB;QACrD,OAAO,IAAI,kBAAkB,eAAe,CAAC,YAAY,IAAI,SAAS,EAAE,CAAC;IAC7E;IACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,cAAc,wBAAwB;QAC7D,OAAO,IAAI,kBAAkB,eAAe,CAAC,YAAY,WAAW;IACxE;IACA,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,cAAc;AAC3D;AACA,QAAQ,eAAe,GAAG","ignoreList":[0]}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/numericConstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MARGIN_PRECISION = exports.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO = exports.PRICE_TO_QUOTE_PRECISION = exports.PRICE_DIV_PEG = exports.AMM_TO_QUOTE_PRECISION_RATIO = exports.BASE_PRECISION_EXP = exports.BASE_PRECISION = exports.AMM_RESERVE_PRECISION = exports.PEG_PRECISION = exports.FUNDING_RATE_BUFFER_PRECISION = exports.FUNDING_RATE_PRECISION = exports.PRICE_PRECISION = exports.QUOTE_PRECISION = exports.LIQUIDATION_FEE_PRECISION = exports.SPOT_MARKET_IMF_PRECISION = exports.SPOT_MARKET_IMF_PRECISION_EXP = exports.SPOT_MARKET_BALANCE_PRECISION = exports.SPOT_MARKET_BALANCE_PRECISION_EXP = exports.SPOT_MARKET_WEIGHT_PRECISION = exports.SPOT_MARKET_UTILIZATION_PRECISION = exports.SPOT_MARKET_UTILIZATION_PRECISION_EXP = exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION = exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP = exports.SPOT_MARKET_RATE_PRECISION = exports.SPOT_MARKET_RATE_PRECISION_EXP = exports.AMM_RESERVE_PRECISION_EXP = exports.PEG_PRECISION_EXP = exports.FUNDING_RATE_PRECISION_EXP = exports.PRICE_PRECISION_EXP = exports.FUNDING_RATE_BUFFER_PRECISION_EXP = exports.QUOTE_PRECISION_EXP = exports.CONCENTRATION_PRECISION = exports.PERCENTAGE_PRECISION = exports.PERCENTAGE_PRECISION_EXP = exports.MAX_LEVERAGE_ORDER_SIZE = exports.MAX_LEVERAGE = exports.TEN_MILLION = exports.BN_MAX = exports.TEN_THOUSAND = exports.TEN = exports.NINE = exports.EIGHT = exports.SEVEN = exports.SIX = exports.FIVE = exports.FOUR = exports.THREE = exports.TWO = exports.ONE = exports.ZERO = void 0;\nexports.MIN_I64 = exports.MAX_I64 = exports.GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE = exports.MAX_PREDICTION_PRICE = exports.FUEL_START_TS = exports.FUEL_WINDOW = exports.DUST_POSITION_SIZE = exports.SLOT_TIME_ESTIMATE_MS = exports.IDLE_TIME_SLOTS = exports.ACCOUNT_AGE_DELETION_CUTOFF_SECONDS = exports.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT = exports.OPEN_ORDER_MARGIN_REQUIREMENT = exports.LAMPORTS_EXP = exports.LAMPORTS_PRECISION = exports.GOV_SPOT_MARKET_INDEX = exports.QUOTE_SPOT_MARKET_INDEX = exports.ONE_YEAR = exports.ONE_HOUR = exports.FIVE_MINUTE = exports.PRICE_TIMES_AMM_TO_QUOTE_PRECISION_RATIO = exports.FUNDING_RATE_OFFSET_DENOMINATOR = exports.LIQUIDATION_PCT_PRECISION = exports.BID_ASK_SPREAD_PRECISION = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst bigNum_1 = require(\"../factory/bigNum\");\nexports.ZERO = new anchor_1.BN(0);\nexports.ONE = new anchor_1.BN(1);\nexports.TWO = new anchor_1.BN(2);\nexports.THREE = new anchor_1.BN(3);\nexports.FOUR = new anchor_1.BN(4);\nexports.FIVE = new anchor_1.BN(5);\nexports.SIX = new anchor_1.BN(6);\nexports.SEVEN = new anchor_1.BN(7);\nexports.EIGHT = new anchor_1.BN(8);\nexports.NINE = new anchor_1.BN(9);\nexports.TEN = new anchor_1.BN(10);\nexports.TEN_THOUSAND = new anchor_1.BN(10000);\nexports.BN_MAX = new anchor_1.BN(Number.MAX_SAFE_INTEGER);\nexports.TEN_MILLION = exports.TEN_THOUSAND.mul(exports.TEN_THOUSAND);\nexports.MAX_LEVERAGE = new anchor_1.BN(5);\nexports.MAX_LEVERAGE_ORDER_SIZE = new anchor_1.BN('18446744073709551615');\nexports.PERCENTAGE_PRECISION_EXP = new anchor_1.BN(6);\nexports.PERCENTAGE_PRECISION = new anchor_1.BN(10).pow(exports.PERCENTAGE_PRECISION_EXP);\nexports.CONCENTRATION_PRECISION = exports.PERCENTAGE_PRECISION;\nexports.QUOTE_PRECISION_EXP = new anchor_1.BN(6);\nexports.FUNDING_RATE_BUFFER_PRECISION_EXP = new anchor_1.BN(3);\nexports.PRICE_PRECISION_EXP = new anchor_1.BN(6);\nexports.FUNDING_RATE_PRECISION_EXP = exports.PRICE_PRECISION_EXP.add(exports.FUNDING_RATE_BUFFER_PRECISION_EXP);\nexports.PEG_PRECISION_EXP = new anchor_1.BN(6);\nexports.AMM_RESERVE_PRECISION_EXP = new anchor_1.BN(9);\nexports.SPOT_MARKET_RATE_PRECISION_EXP = new anchor_1.BN(6);\nexports.SPOT_MARKET_RATE_PRECISION = new anchor_1.BN(10).pow(exports.SPOT_MARKET_RATE_PRECISION_EXP);\nexports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP = new anchor_1.BN(10);\nexports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION = new anchor_1.BN(10).pow(exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP);\nexports.SPOT_MARKET_UTILIZATION_PRECISION_EXP = new anchor_1.BN(6);\nexports.SPOT_MARKET_UTILIZATION_PRECISION = new anchor_1.BN(10).pow(exports.SPOT_MARKET_UTILIZATION_PRECISION_EXP);\nexports.SPOT_MARKET_WEIGHT_PRECISION = new anchor_1.BN(10000);\nexports.SPOT_MARKET_BALANCE_PRECISION_EXP = new anchor_1.BN(9);\nexports.SPOT_MARKET_BALANCE_PRECISION = new anchor_1.BN(10).pow(exports.SPOT_MARKET_BALANCE_PRECISION_EXP);\nexports.SPOT_MARKET_IMF_PRECISION_EXP = new anchor_1.BN(6);\nexports.SPOT_MARKET_IMF_PRECISION = new anchor_1.BN(10).pow(exports.SPOT_MARKET_IMF_PRECISION_EXP);\nexports.LIQUIDATION_FEE_PRECISION = new anchor_1.BN(1000000);\nexports.QUOTE_PRECISION = new anchor_1.BN(10).pow(exports.QUOTE_PRECISION_EXP);\nexports.PRICE_PRECISION = new anchor_1.BN(10).pow(exports.PRICE_PRECISION_EXP);\nexports.FUNDING_RATE_PRECISION = new anchor_1.BN(10).pow(exports.FUNDING_RATE_PRECISION_EXP);\nexports.FUNDING_RATE_BUFFER_PRECISION = new anchor_1.BN(10).pow(exports.FUNDING_RATE_BUFFER_PRECISION_EXP);\nexports.PEG_PRECISION = new anchor_1.BN(10).pow(exports.PEG_PRECISION_EXP);\nexports.AMM_RESERVE_PRECISION = new anchor_1.BN(10).pow(exports.AMM_RESERVE_PRECISION_EXP);\nexports.BASE_PRECISION = exports.AMM_RESERVE_PRECISION;\nexports.BASE_PRECISION_EXP = exports.AMM_RESERVE_PRECISION_EXP;\nexports.AMM_TO_QUOTE_PRECISION_RATIO = exports.AMM_RESERVE_PRECISION.div(exports.QUOTE_PRECISION); // 10^3\nexports.PRICE_DIV_PEG = exports.PRICE_PRECISION.div(exports.PEG_PRECISION); //10^1\nexports.PRICE_TO_QUOTE_PRECISION = exports.PRICE_PRECISION.div(exports.QUOTE_PRECISION); // 10^1\nexports.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO = exports.AMM_RESERVE_PRECISION.mul(exports.PEG_PRECISION).div(exports.QUOTE_PRECISION); // 10^9\nexports.MARGIN_PRECISION = exports.TEN_THOUSAND;\nexports.BID_ASK_SPREAD_PRECISION = new anchor_1.BN(1000000); // 10^6\nexports.LIQUIDATION_PCT_PRECISION = exports.TEN_THOUSAND;\nexports.FUNDING_RATE_OFFSET_DENOMINATOR = new anchor_1.BN(5000);\nexports.PRICE_TIMES_AMM_TO_QUOTE_PRECISION_RATIO = exports.PRICE_PRECISION.mul(exports.AMM_TO_QUOTE_PRECISION_RATIO);\nexports.FIVE_MINUTE = new anchor_1.BN(60 * 5);\nexports.ONE_HOUR = new anchor_1.BN(60 * 60);\nexports.ONE_YEAR = new anchor_1.BN(31536000);\nexports.QUOTE_SPOT_MARKET_INDEX = 0;\nexports.GOV_SPOT_MARKET_INDEX = 15;\nexports.LAMPORTS_PRECISION = new anchor_1.BN(web3_js_1.LAMPORTS_PER_SOL);\nexports.LAMPORTS_EXP = new anchor_1.BN(Math.log10(web3_js_1.LAMPORTS_PER_SOL));\nexports.OPEN_ORDER_MARGIN_REQUIREMENT = exports.QUOTE_PRECISION.div(new anchor_1.BN(100));\nexports.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT = new anchor_1.BN(-25).mul(exports.QUOTE_PRECISION);\nexports.ACCOUNT_AGE_DELETION_CUTOFF_SECONDS = 60 * 60 * 24 * 13; // 13 days\nexports.IDLE_TIME_SLOTS = 9000;\nexports.SLOT_TIME_ESTIMATE_MS = 400;\nexports.DUST_POSITION_SIZE = exports.QUOTE_PRECISION.divn(100); // Dust position is any position smaller than 1c\nexports.FUEL_WINDOW = new anchor_1.BN(60 * 60 * 24 * 28); // 28 days\nexports.FUEL_START_TS = new anchor_1.BN(1723147200); // unix timestamp\nexports.MAX_PREDICTION_PRICE = exports.PRICE_PRECISION;\nexports.GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE = 99;\n// integer constants\nexports.MAX_I64 = bigNum_1.BigNum.fromPrint('9223372036854775807').val;\nexports.MIN_I64 = bigNum_1.BigNum.fromPrint('-9223372036854775808').val;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/perpMarkets.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PerpMarkets = exports.MainnetPerpMarkets = exports.DevnetPerpMarkets = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst types_1 = require(\"../types\");\nexports.DevnetPerpMarkets = [\n    {\n        fullName: 'Solana',\n        category: ['L1', 'Infra'],\n        symbol: 'SOL-PERP',\n        baseAssetSymbol: 'SOL',\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey('3m6i4RFWEDw2Ft4tFHPJtYgmpPe21k56M3FHeWYrgGBz'),\n        launchTs: 1655751353000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',\n        pythLazerId: 6,\n    },\n    {\n        fullName: 'Bitcoin',\n        category: ['L1', 'Payment'],\n        symbol: 'BTC-PERP',\n        baseAssetSymbol: 'BTC',\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey('35MbvS1Juz2wf7GsyHrkCw8yfKciRLxVpEhfZDZFrB4R'),\n        launchTs: 1655751353000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',\n        pythLazerId: 1,\n    },\n    {\n        fullName: 'Ethereum',\n        category: ['L1', 'Infra'],\n        symbol: 'ETH-PERP',\n        baseAssetSymbol: 'ETH',\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey('93FG52TzNKCnMiasV14Ba34BYcHDb9p4zK4GjZnLwqWR'),\n        launchTs: 1637691133472,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',\n        pythLazerId: 2,\n    },\n    {\n        fullName: 'Aptos',\n        category: ['L1', 'Infra'],\n        symbol: 'APT-PERP',\n        baseAssetSymbol: 'APT',\n        marketIndex: 3,\n        oracle: new web3_js_1.PublicKey('79EWaCYU9jiQN8SbvVzGFAhAncUZYp3PjNg7KxmN5cLE'),\n        launchTs: 1675610186000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5',\n        pythLazerId: 28,\n    },\n    {\n        fullName: 'Bonk',\n        category: ['Meme', 'Dog'],\n        symbol: '1MBONK-PERP',\n        baseAssetSymbol: '1MBONK',\n        marketIndex: 4,\n        oracle: new web3_js_1.PublicKey('BERaNi6cpEresbq6HC1EQGaB1H1UjvEo4NGnmYSSJof4'),\n        launchTs: 1677068931000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER_1M,\n        pythFeedId: '0x72b021217ca3fe68922a19aaf990109cb9d84e9ad004b4d2025ad6f529314419',\n        pythLazerId: 9,\n    },\n    {\n        fullName: 'Polygon',\n        category: ['L2', 'Infra'],\n        symbol: 'POL-PERP',\n        baseAssetSymbol: 'POL',\n        marketIndex: 5,\n        oracle: new web3_js_1.PublicKey('BrzyDgwELy4jjjsqLQpBeUxzrsueYyMhuWpYBaUYcXvi'),\n        launchTs: 1677690149000, //todo\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xffd11c5a1cfd42f80afb2df4d9f264c15f956d68153335374ec10722edd70472',\n        pythLazerId: 32,\n    },\n    {\n        fullName: 'Arbitrum',\n        category: ['L2', 'Infra'],\n        symbol: 'ARB-PERP',\n        baseAssetSymbol: 'ARB',\n        marketIndex: 6,\n        oracle: new web3_js_1.PublicKey('8ocfAdqVRnzvfdubQaTxar4Kz5HJhNbPNmkLxswqiHUD'),\n        launchTs: 1679501812000, //todo\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x3fa4252848f9f0a1480be62745a4629d9eb1322aebab8a791e344b3b9c1adcf5',\n        pythLazerId: 37,\n    },\n    {\n        fullName: 'Doge',\n        category: ['Meme', 'Dog'],\n        symbol: 'DOGE-PERP',\n        baseAssetSymbol: 'DOGE',\n        marketIndex: 7,\n        oracle: new web3_js_1.PublicKey('23y63pHVwKfYSCDFdiGRaGbTYWoyr8UzhUE7zukyf6gK'),\n        launchTs: 1680808053000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c',\n        pythLazerId: 13,\n    },\n    {\n        fullName: 'Binance Coin',\n        category: ['Exchange'],\n        symbol: 'BNB-PERP',\n        baseAssetSymbol: 'BNB',\n        marketIndex: 8,\n        oracle: new web3_js_1.PublicKey('Dk8eWjuQHMbxJAwB9Sg7pXQPH4kgbg8qZGcUrWcD9gTm'),\n        launchTs: 1680808053000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f',\n        pythLazerId: 15,\n    },\n    {\n        fullName: 'Sui',\n        category: ['L1'],\n        symbol: 'SUI-PERP',\n        baseAssetSymbol: 'SUI',\n        marketIndex: 9,\n        oracle: new web3_js_1.PublicKey('HBordkz5YxjzNURmKUY4vfEYFG9fZyZNeNF1VDLMoemT'),\n        launchTs: 1683125906000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744',\n        pythLazerId: 11,\n    },\n    {\n        fullName: 'Pepe',\n        category: ['Meme'],\n        symbol: '1MPEPE-PERP',\n        baseAssetSymbol: '1MPEPE',\n        marketIndex: 10,\n        oracle: new web3_js_1.PublicKey('CLxofhtzvLiErpn25wvUzpZXEqBhuZ6WMEckEraxyuGt'),\n        launchTs: 1683781239000,\n        oracleSource: types_1.OracleSource.PYTH_1M_PULL,\n        pythFeedId: '0xd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4',\n        pythLazerId: 4,\n    },\n    {\n        fullName: 'OP',\n        category: ['L2', 'Infra'],\n        symbol: 'OP-PERP',\n        baseAssetSymbol: 'OP',\n        marketIndex: 11,\n        oracle: new web3_js_1.PublicKey('C9Zi2Y3Mt6Zt6pcFvobN3N29HcrzKujPAPBDDTDRcUa2'),\n        launchTs: 1686091480000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x385f64d993f7b77d8182ed5003d97c60aa3361f3cecfe711544d2d59165e9bdf',\n        pythLazerId: 41,\n    },\n    {\n        fullName: 'RENDER',\n        category: ['Infra'],\n        symbol: 'RENDER-PERP',\n        baseAssetSymbol: 'RENDER',\n        marketIndex: 12,\n        oracle: new web3_js_1.PublicKey('8TQztfGcNjHGRusX4ejQQtPZs3Ypczt9jWF6pkgQMqUX'),\n        launchTs: 1687201081000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x3d4a2bd9535be6ce8059d75eadeba507b043257321aa544717c56fa19b49e35d',\n        pythLazerId: 34,\n    },\n    {\n        fullName: 'XRP',\n        category: ['Payments'],\n        symbol: 'XRP-PERP',\n        baseAssetSymbol: 'XRP',\n        marketIndex: 13,\n        oracle: new web3_js_1.PublicKey('9757epAjXWCWQH98kyK9vzgehd1XDVEf7joNHUaKk3iV'),\n        launchTs: 1689270550000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8',\n        pythLazerId: 14,\n    },\n    {\n        fullName: 'HNT',\n        category: ['IoT'],\n        symbol: 'HNT-PERP',\n        baseAssetSymbol: 'HNT',\n        marketIndex: 14,\n        oracle: new web3_js_1.PublicKey('9b1rcK9RUPK2vAqwNYCYEG34gUVpS2WGs2YCZZy2X5Tb'),\n        launchTs: 1692294955000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x649fdd7ec08e8e2a20f425729854e90293dcbe2376abc47197a14da6ff339756',\n    },\n    {\n        fullName: 'INJ',\n        category: ['L1', 'Exchange'],\n        symbol: 'INJ-PERP',\n        baseAssetSymbol: 'INJ',\n        marketIndex: 15,\n        oracle: new web3_js_1.PublicKey('BfXcyDWJmYADa5eZD7gySSDd6giqgjvm7xsAhQ239SUD'),\n        launchTs: 1698074659000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x7a5bc1d2b56ad029048cd63964b3ad2776eadf812edc1a43a31406cb54bff592',\n        pythLazerId: 46,\n    },\n    {\n        fullName: 'LINK',\n        category: ['Oracle'],\n        symbol: 'LINK-PERP',\n        baseAssetSymbol: 'LINK',\n        marketIndex: 16,\n        oracle: new web3_js_1.PublicKey('Gwvob7yoLMgQRVWjScCRyQFMsgpRKrSAYisYEyjDJwEp'),\n        launchTs: 1698074659000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221',\n        pythLazerId: 19,\n    },\n    {\n        fullName: 'Rollbit',\n        category: ['Exchange'],\n        symbol: 'RLB-PERP',\n        baseAssetSymbol: 'RLB',\n        marketIndex: 17,\n        oracle: new web3_js_1.PublicKey('4CyhPqyVK3UQHFWhEpk91Aw4WbBsN3JtyosXH6zjoRqG'),\n        launchTs: 1699265968000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x2f2d17abbc1e781bd87b4a5d52c8b2856886f5c482fa3593cebf6795040ab0b6',\n    },\n    {\n        fullName: 'Pyth',\n        category: ['Oracle'],\n        symbol: 'PYTH-PERP',\n        baseAssetSymbol: 'PYTH',\n        marketIndex: 18,\n        oracle: new web3_js_1.PublicKey('GqkCu7CbsPVz1H6W6AAHuReqbJckYG59TXz7Y5HDV7hr'),\n        launchTs: 1700542800000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x0bbf28e9a841a1cc788f6a361b17ca072d0ea3098a1e5df1c3922d06719579ff',\n        pythLazerId: 3,\n    },\n    {\n        fullName: 'Celestia',\n        category: ['Data'],\n        symbol: 'TIA-PERP',\n        baseAssetSymbol: 'TIA',\n        marketIndex: 19,\n        oracle: new web3_js_1.PublicKey('C6LHPUrgjrgo5eNUitC8raNEdEttfoRhmqdJ3BHVBJhi'),\n        launchTs: 1701880540000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x09f7c1d7dfbb7df2b8fe3d3d87ee94a2259d212da4f30c1f0540d066dfa44723',\n        pythLazerId: 48,\n    },\n    {\n        fullName: 'Jito',\n        category: ['MEV'],\n        symbol: 'JTO-PERP',\n        baseAssetSymbol: 'JTO',\n        marketIndex: 20,\n        oracle: new web3_js_1.PublicKey('Ffq6ACJ17NAgaxC6ocfMzVXL3K61qxB2xHg6WUawWPfP'),\n        launchTs: 1701967240000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xb43660a5f790c69354b0729a5ef9d50d68f1df92107540210b9cccba1f947cc2',\n        pythLazerId: 91,\n    },\n    {\n        fullName: 'SEI',\n        category: ['L1'],\n        symbol: 'SEI-PERP',\n        baseAssetSymbol: 'SEI',\n        marketIndex: 21,\n        oracle: new web3_js_1.PublicKey('EVyoxFo5jWpv1vV7p6KVjDWwVqtTqvrZ4JMFkieVkVsD'),\n        launchTs: 1703173331000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb',\n        pythLazerId: 51,\n    },\n    {\n        fullName: 'AVAX',\n        category: ['Rollup', 'Infra'],\n        symbol: 'AVAX-PERP',\n        baseAssetSymbol: 'AVAX',\n        marketIndex: 22,\n        oracle: new web3_js_1.PublicKey('FgBGHNex4urrBmNbSj8ntNQDGqeHcWewKtkvL6JE6dEX'),\n        launchTs: 1704209558000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7',\n        pythLazerId: 18,\n    },\n    {\n        fullName: 'Wormhole',\n        category: ['Bridge'],\n        symbol: 'W-PERP',\n        baseAssetSymbol: 'W',\n        marketIndex: 23,\n        oracle: new web3_js_1.PublicKey('J9nrFWjDUeDVZ4BhhxsbQXWgLcLEgQyNBrCbwSADmJdr'),\n        launchTs: 1709852537000,\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        pythFeedId: '0xeff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389',\n        pythLazerId: 102,\n    },\n    {\n        fullName: 'Kamino',\n        category: ['Lending'],\n        symbol: 'KMNO-PERP',\n        baseAssetSymbol: 'KMNO',\n        marketIndex: 24,\n        oracle: new web3_js_1.PublicKey('7aqj2wH1BH8XT3QQ3MWtvt3My7RAGf5Stm3vx5fiysJz'),\n        launchTs: 1711475936000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xb17e5bc5de742a8a378b54c9c75442b7d51e30ada63f28d9bd28d3c0e26511a0',\n    },\n    {\n        fullName: 'Wen',\n        category: ['Solana', 'Meme'],\n        symbol: '1KWEN-PERP',\n        baseAssetSymbol: '1KWEN',\n        marketIndex: 25,\n        oracle: new web3_js_1.PublicKey('F47c7aJgYkfKXQ9gzrJaEpsNwUKHprysregTWXrtYLFp'),\n        launchTs: 1720572064000,\n        oracleSource: types_1.OracleSource.PYTH_1K_PULL,\n        pythFeedId: '0x5169491cd7e2a44c98353b779d5eb612e4ac32e073f5cc534303d86307c2f1bc',\n    },\n    {\n        fullName: 'TRUMP-WIN-2024',\n        category: ['Prediction', 'Election'],\n        symbol: 'TRUMP-WIN-2024-PREDICT',\n        baseAssetSymbol: 'TRUMP-WIN-2024',\n        marketIndex: 26,\n        oracle: new web3_js_1.PublicKey('3TVuLmEGBRfVgrmFRtYTheczXaaoRBwcHw1yibZHSeNA'),\n        launchTs: 1722214583000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n    },\n    {\n        fullName: 'KAMALA-POPULAR-VOTE-2024',\n        category: ['Prediction', 'Election'],\n        symbol: 'KAMALA-POPULAR-VOTE-2024-PREDICT',\n        baseAssetSymbol: 'KAMALA-POPULAR-VOTE',\n        marketIndex: 27,\n        oracle: new web3_js_1.PublicKey('GU6CA7a2KCyhpfqZNb36UAfc9uzKBM8jHjGdt245QhYX'),\n        launchTs: 1722214583000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n    },\n    {\n        fullName: 'RANDOM-2024',\n        category: ['Prediction'],\n        symbol: 'RANDOM-2024-PREDICT',\n        baseAssetSymbol: 'RANDOM-2024',\n        marketIndex: 28,\n        oracle: new web3_js_1.PublicKey('sDAQaZQJQ4RXAxH3x526mbEXyQZT15ktkL84d7hmk7M'),\n        launchTs: 1729622442000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n    },\n];\nexports.MainnetPerpMarkets = [\n    {\n        fullName: 'Solana',\n        category: ['L1', 'Infra', 'Solana'],\n        symbol: 'SOL-PERP',\n        baseAssetSymbol: 'SOL',\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey('3m6i4RFWEDw2Ft4tFHPJtYgmpPe21k56M3FHeWYrgGBz'),\n        launchTs: 1667560505000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',\n        pythLazerId: 6,\n    },\n    {\n        fullName: 'Bitcoin',\n        category: ['L1', 'Payment'],\n        symbol: 'BTC-PERP',\n        baseAssetSymbol: 'BTC',\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey('35MbvS1Juz2wf7GsyHrkCw8yfKciRLxVpEhfZDZFrB4R'),\n        launchTs: 1670347281000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',\n        pythLazerId: 1,\n    },\n    {\n        fullName: 'Ethereum',\n        category: ['L1', 'Infra'],\n        symbol: 'ETH-PERP',\n        baseAssetSymbol: 'ETH',\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey('93FG52TzNKCnMiasV14Ba34BYcHDb9p4zK4GjZnLwqWR'),\n        launchTs: 1670347281000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',\n        pythLazerId: 2,\n    },\n    {\n        fullName: 'Aptos',\n        category: ['L1', 'Infra'],\n        symbol: 'APT-PERP',\n        baseAssetSymbol: 'APT',\n        marketIndex: 3,\n        oracle: new web3_js_1.PublicKey('CXZhzKePYajrZgZyrzgvHYFKK3c5tNgDrRobAgySo8Nb'),\n        launchTs: 1675802661000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x03ae4db29ed4ae33d323568895aa00337e658e348b37509f5372ae51f0af00d5',\n        pythLazerId: 28,\n    },\n    {\n        fullName: 'Bonk',\n        category: ['Meme', 'Solana'],\n        symbol: '1MBONK-PERP',\n        baseAssetSymbol: '1MBONK',\n        marketIndex: 4,\n        oracle: new web3_js_1.PublicKey('BERaNi6cpEresbq6HC1EQGaB1H1UjvEo4NGnmYSSJof4'),\n        launchTs: 1677690149000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER_1M,\n        pythFeedId: '0x72b021217ca3fe68922a19aaf990109cb9d84e9ad004b4d2025ad6f529314419',\n        pythLazerId: 9,\n    },\n    {\n        fullName: 'Polygon',\n        category: ['L2', 'Infra'],\n        symbol: 'POL-PERP',\n        baseAssetSymbol: 'POL',\n        marketIndex: 5,\n        oracle: new web3_js_1.PublicKey('HDveCibToLf157NtUqShCEWX3GcF4Aq8Ngt2bst1s1cc'),\n        launchTs: 1677690149000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xffd11c5a1cfd42f80afb2df4d9f264c15f956d68153335374ec10722edd70472',\n        pythLazerId: 32,\n    },\n    {\n        fullName: 'Arbitrum',\n        category: ['L2', 'Infra'],\n        symbol: 'ARB-PERP',\n        baseAssetSymbol: 'ARB',\n        marketIndex: 6,\n        oracle: new web3_js_1.PublicKey('5DYEjGpr28q3EsLKAnLXiDq6UeaFgDFZ5Gdwgp5RmPAp'),\n        launchTs: 1679501812000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x3fa4252848f9f0a1480be62745a4629d9eb1322aebab8a791e344b3b9c1adcf5',\n        pythLazerId: 37,\n    },\n    {\n        fullName: 'Doge',\n        category: ['Meme', 'Dog'],\n        symbol: 'DOGE-PERP',\n        baseAssetSymbol: 'DOGE',\n        marketIndex: 7,\n        oracle: new web3_js_1.PublicKey('GqjDJZu9bNCebq5PTUbjRrgw1LK84GEexVjrfYJ76YXc'),\n        launchTs: 1680808053000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xdcef50dd0a4cd2dcc17e45df1676dcb336a11a61c69df7a0299b0150c672d25c',\n        pythLazerId: 13,\n    },\n    {\n        fullName: 'Binance Coin',\n        category: ['Exchange'],\n        symbol: 'BNB-PERP',\n        baseAssetSymbol: 'BNB',\n        marketIndex: 8,\n        oracle: new web3_js_1.PublicKey('A9J2j1pRB2aPqAbjUTtKy94niSCTuPUrpimfzvpZHKG1'),\n        launchTs: 1680808053000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x2f95862b045670cd22bee3114c39763a4a08beeb663b145d283c31d7d1101c4f',\n        pythLazerId: 15,\n    },\n    {\n        fullName: 'Sui',\n        category: ['L1'],\n        symbol: 'SUI-PERP',\n        baseAssetSymbol: 'SUI',\n        marketIndex: 9,\n        oracle: new web3_js_1.PublicKey('HmeJeBKgceqvSBd5XBXZUYECLabnbS1SefLkeJKH8ERK'),\n        launchTs: 1683125906000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744',\n        pythLazerId: 11,\n    },\n    {\n        fullName: 'Pepe',\n        category: ['Meme'],\n        symbol: '1MPEPE-PERP',\n        baseAssetSymbol: '1MPEPE',\n        marketIndex: 10,\n        oracle: new web3_js_1.PublicKey('Eo8x9Y1289GvsuYVwRS2R8HfiWRXxYofL1KYvHK2ZM2o'),\n        launchTs: 1683781239000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER_1M,\n        pythFeedId: '0xd69731a2e74ac1ce884fc3890f7ee324b6deb66147055249568869ed700882e4',\n        pythLazerId: 4,\n    },\n    {\n        fullName: 'OP',\n        category: ['L2', 'Infra'],\n        symbol: 'OP-PERP',\n        baseAssetSymbol: 'OP',\n        marketIndex: 11,\n        oracle: new web3_js_1.PublicKey('7GPbmQee2T4jMsJg99GuzWyMuzr8c2Uk7rAR9qvvQkzf'),\n        launchTs: 1686091480000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x385f64d993f7b77d8182ed5003d97c60aa3361f3cecfe711544d2d59165e9bdf',\n        pythLazerId: 41,\n    },\n    {\n        fullName: 'RENDER',\n        category: ['Infra', 'Solana'],\n        symbol: 'RENDER-PERP',\n        baseAssetSymbol: 'RENDER',\n        marketIndex: 12,\n        oracle: new web3_js_1.PublicKey('97EqsAGbTnShB7oYWAFFCVVAx8PWXgDYDhcpm99izNQ4'),\n        launchTs: 1687201081000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x3d4a2bd9535be6ce8059d75eadeba507b043257321aa544717c56fa19b49e35d',\n        pythLazerId: 34,\n    },\n    {\n        fullName: 'XRP',\n        category: ['Payments'],\n        symbol: 'XRP-PERP',\n        baseAssetSymbol: 'XRP',\n        marketIndex: 13,\n        oracle: new web3_js_1.PublicKey('92VexDMsSzYvVq7eiEoodEzZxCLqYnfGKpVTqpkX12FY'),\n        launchTs: 1689270550000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xec5d399846a9209f3fe5881d70aae9268c94339ff9817e8d18ff19fa05eea1c8',\n        pythLazerId: 14,\n    },\n    {\n        fullName: 'HNT',\n        category: ['IoT', 'Solana'],\n        symbol: 'HNT-PERP',\n        baseAssetSymbol: 'HNT',\n        marketIndex: 14,\n        oracle: new web3_js_1.PublicKey('AEPgc6qUTCT8AwdckPcGbJXtcM9bj8mGYAyHE4BscJtm'),\n        launchTs: 1692294955000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x649fdd7ec08e8e2a20f425729854e90293dcbe2376abc47197a14da6ff339756',\n        pythLazerId: 168,\n    },\n    {\n        fullName: 'INJ',\n        category: ['L1', 'Exchange'],\n        symbol: 'INJ-PERP',\n        baseAssetSymbol: 'INJ',\n        marketIndex: 15,\n        oracle: new web3_js_1.PublicKey('Ac442xcU276nb6gJFUCsNYAwAo6KWuw4xocxmG3nvDym'),\n        launchTs: 1698074659000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x7a5bc1d2b56ad029048cd63964b3ad2776eadf812edc1a43a31406cb54bff592',\n        pythLazerId: 46,\n    },\n    {\n        fullName: 'LINK',\n        category: ['Oracle'],\n        symbol: 'LINK-PERP',\n        baseAssetSymbol: 'LINK',\n        marketIndex: 16,\n        oracle: new web3_js_1.PublicKey('rwyPmfH5xsHdjPf6XsVxvyQEZogX2k4pmhaKEVvgseW'),\n        launchTs: 1698074659000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x8ac0c70fff57e9aefdf5edf44b51d62c2d433653cbb2cf5cc06bb115af04d221',\n        pythLazerId: 19,\n    },\n    {\n        fullName: 'Rollbit',\n        category: ['Exchange'],\n        symbol: 'RLB-PERP',\n        baseAssetSymbol: 'RLB',\n        marketIndex: 17,\n        oracle: new web3_js_1.PublicKey('4CyhPqyVK3UQHFWhEpk91Aw4WbBsN3JtyosXH6zjoRqG'),\n        launchTs: 1699265968000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x2f2d17abbc1e781bd87b4a5d52c8b2856886f5c482fa3593cebf6795040ab0b6',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'Pyth',\n        category: ['Oracle', 'Solana'],\n        symbol: 'PYTH-PERP',\n        baseAssetSymbol: 'PYTH',\n        marketIndex: 18,\n        oracle: new web3_js_1.PublicKey('6Sfx8ZAt6xaEgMXTahR6GrT7oYB6nFBMoVyCmMyHmeJV'),\n        launchTs: 1700542800000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x0bbf28e9a841a1cc788f6a361b17ca072d0ea3098a1e5df1c3922d06719579ff',\n        pythLazerId: 3,\n    },\n    {\n        fullName: 'Celestia',\n        category: ['Data'],\n        symbol: 'TIA-PERP',\n        baseAssetSymbol: 'TIA',\n        marketIndex: 19,\n        oracle: new web3_js_1.PublicKey('2rDfWydvqvMQjDuf7vQsgfpa6dLMZehrWrpoXitn6gPx'),\n        launchTs: 1701880540000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x09f7c1d7dfbb7df2b8fe3d3d87ee94a2259d212da4f30c1f0540d066dfa44723',\n        pythLazerId: 48,\n    },\n    {\n        fullName: 'Jito',\n        category: ['MEV', 'Solana'],\n        symbol: 'JTO-PERP',\n        baseAssetSymbol: 'JTO',\n        marketIndex: 20,\n        oracle: new web3_js_1.PublicKey('CGCz4mB8NsDddCq6BZToRUDUuktzsAfpKYh6ATgyyCGF'),\n        launchTs: 1701967240000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xb43660a5f790c69354b0729a5ef9d50d68f1df92107540210b9cccba1f947cc2',\n        pythLazerId: 91,\n    },\n    {\n        fullName: 'SEI',\n        category: ['L1'],\n        symbol: 'SEI-PERP',\n        baseAssetSymbol: 'SEI',\n        marketIndex: 21,\n        oracle: new web3_js_1.PublicKey('Edk1TWipQtsaD8nnBXYQV1CEAiQb1GFtEAKeFZCi2A4C'),\n        launchTs: 1703173331000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x53614f1cb0c031d4af66c04cb9c756234adad0e1cee85303795091499a4084eb',\n        pythLazerId: 51,\n    },\n    {\n        fullName: 'AVAX',\n        category: ['Rollup', 'Infra'],\n        symbol: 'AVAX-PERP',\n        baseAssetSymbol: 'AVAX',\n        marketIndex: 22,\n        oracle: new web3_js_1.PublicKey('5ASZLwk3GFCwZiDQ3XpmduRqNPEUGHXjELMX85u8McK3'),\n        launchTs: 1704209558000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x93da3352f9f1d105fdfe4971cfa80e9dd777bfc5d0f683ebb6e1294b92137bb7',\n        pythLazerId: 18,\n    },\n    {\n        fullName: 'WIF',\n        category: ['Meme', 'Dog', 'Solana'],\n        symbol: 'WIF-PERP',\n        baseAssetSymbol: 'WIF',\n        marketIndex: 23,\n        oracle: new web3_js_1.PublicKey('4QXWStoyEErTZFVsvKrvxuNa6QT8zpeA8jddZunSGvYE'),\n        launchTs: 1706219971000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x4ca4beeca86f0d164160323817a4e42b10010a724c2217c6ee41b54cd4cc61fc',\n        pythLazerId: 10,\n    },\n    {\n        fullName: 'JUP',\n        category: ['Exchange', 'Infra', 'Solana'],\n        symbol: 'JUP-PERP',\n        baseAssetSymbol: 'JUP',\n        marketIndex: 24,\n        oracle: new web3_js_1.PublicKey('DXqKSHyhTBKEW4qgnL7ycbf3Jca5hCvUgWHFYWsh4KJa'),\n        launchTs: 1706713201000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x0a0408d619e9380abad35060f9192039ed5042fa6f82301d0e48bb52be830996',\n        pythLazerId: 92,\n    },\n    {\n        fullName: 'Dymension',\n        category: ['Rollup', 'Infra'],\n        symbol: 'DYM-PERP',\n        baseAssetSymbol: 'DYM',\n        marketIndex: 25,\n        oracle: new web3_js_1.PublicKey('HWDqaKbbNrEsgWPLMeKG39AguefMbHsWcvNSthToXG2t'),\n        launchTs: 1708448765000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xa9f3b2a89c6f85a6c20a9518abde39b944e839ca49a0c92307c65974d3f14a57',\n        pythLazerId: 83,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'BITTENSOR',\n        category: ['AI', 'Infra'],\n        symbol: 'TAO-PERP',\n        baseAssetSymbol: 'TAO',\n        marketIndex: 26,\n        oracle: new web3_js_1.PublicKey('44fqbLqAkKK5kEj1FFvuEPYq56XoQQL3ABzCPrqsW3Cv'),\n        launchTs: 1709136669000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x410f41de235f2db824e562ea7ab2d3d3d4ff048316c61d629c0b93f58584e1af',\n        pythLazerId: 36,\n    },\n    {\n        fullName: 'Wormhole',\n        category: ['Bridge'],\n        symbol: 'W-PERP',\n        baseAssetSymbol: 'W',\n        marketIndex: 27,\n        oracle: new web3_js_1.PublicKey('CsFUXiA5dM4eCKjVBBy8tXhXzDkDRNoYjU5rjpHyfNEZ'),\n        launchTs: 1710418343000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xeff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389',\n        pythLazerId: 102,\n    },\n    {\n        fullName: 'Kamino',\n        category: ['Lending', 'Solana'],\n        symbol: 'KMNO-PERP',\n        baseAssetSymbol: 'KMNO',\n        marketIndex: 28,\n        oracle: new web3_js_1.PublicKey('6ua3DK1sHoYyNi15dsxy6RYwUcZPDDXfyChzaRMaheQF'),\n        launchTs: 1712240681000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xb17e5bc5de742a8a378b54c9c75442b7d51e30ada63f28d9bd28d3c0e26511a0',\n        pythLazerId: 464,\n    },\n    {\n        fullName: 'Tensor',\n        category: ['NFT', 'Solana'],\n        symbol: 'TNSR-PERP',\n        baseAssetSymbol: 'TNSR',\n        marketIndex: 29,\n        oracle: new web3_js_1.PublicKey('EX6r1GdfsgcUsY6cQ6YsToV4RGsb4HKpjrkokK2DrmsS'),\n        launchTs: 1712593532000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x05ecd4597cd48fe13d6cc3596c62af4f9675aee06e2e0b94c06d8bee2b659e05',\n        pythLazerId: 99,\n    },\n    {\n        fullName: 'Drift',\n        category: ['DEX', 'Solana'],\n        symbol: 'DRIFT-PERP',\n        baseAssetSymbol: 'DRIFT',\n        marketIndex: 30,\n        oracle: new web3_js_1.PublicKey('5VJou4ufN2vE11zyZUaLsKLTXhyzCTgiq6QDsts2YnnD'),\n        launchTs: 1716595200000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x5c1690b27bb02446db17cdda13ccc2c1d609ad6d2ef5bf4983a85ea8b6f19d07',\n        pythLazerId: 249,\n    },\n    {\n        fullName: 'Sanctum',\n        category: ['LST', 'Solana'],\n        symbol: 'CLOUD-PERP',\n        baseAssetSymbol: 'CLOUD',\n        marketIndex: 31,\n        oracle: new web3_js_1.PublicKey('9Ennia27iT83kNAk3JtRKxSMzuCzsVtT4MzuxpE7anME'),\n        launchTs: 1717597648000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x7358313661dcd4f842a1423aa4f7a05f009001c9113201c719621d3f1aa80a73',\n        pythLazerId: 404,\n    },\n    {\n        fullName: 'IO',\n        category: ['DePIN', 'Solana'],\n        symbol: 'IO-PERP',\n        baseAssetSymbol: 'IO',\n        marketIndex: 32,\n        oracle: new web3_js_1.PublicKey('8x84eFZVGD9C8vmQqnB9P8UDPMdDWduFaULspKUYGthP'),\n        launchTs: 1718021389000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x82595d1509b770fa52681e260af4dda9752b87316d7c048535d8ead3fa856eb1',\n        pythLazerId: 90,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'ZEX',\n        category: ['DEX', 'Solana'],\n        symbol: 'ZEX-PERP',\n        baseAssetSymbol: 'ZEX',\n        marketIndex: 33,\n        oracle: new web3_js_1.PublicKey('HVwBCaR4GEB1fHrp7xCTzbYoZXL3V8b1aek2swPrmGx3'),\n        launchTs: 1719415157000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x3d63be09d1b88f6dffe6585d0170670592124fd9fa4e0fe8a09ff18464f05e3a',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'POPCAT',\n        category: ['Meme', 'Solana'],\n        symbol: 'POPCAT-PERP',\n        baseAssetSymbol: 'POPCAT',\n        marketIndex: 34,\n        oracle: new web3_js_1.PublicKey('C5fiAmQyjdfDR4EGepZqnEL3fJwMBav5yoAk6XyKMF6u'),\n        launchTs: 1720013054000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xb9312a7ee50e189ef045aa3c7842e099b061bd9bdc99ac645956c3b660dc8cce',\n        pythLazerId: 130,\n    },\n    {\n        fullName: 'Wen',\n        category: ['Solana', 'Meme'],\n        symbol: '1KWEN-PERP',\n        baseAssetSymbol: '1KWEN',\n        marketIndex: 35,\n        oracle: new web3_js_1.PublicKey('F47c7aJgYkfKXQ9gzrJaEpsNwUKHprysregTWXrtYLFp'),\n        launchTs: 1720633344000,\n        oracleSource: types_1.OracleSource.PYTH_1K_PULL,\n        pythFeedId: '0x5169491cd7e2a44c98353b779d5eb612e4ac32e073f5cc534303d86307c2f1bc',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'TRUMP-WIN-2024-BET',\n        category: ['Prediction', 'Election'],\n        symbol: 'TRUMP-WIN-2024-BET',\n        baseAssetSymbol: 'TRUMP-WIN-2024',\n        marketIndex: 36,\n        oracle: new web3_js_1.PublicKey('7YrQUxmxGdbk8pvns9KcL5ojbZSL2eHj62hxRqggtEUR'),\n        launchTs: 1723996800000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'KAMALA-POPULAR-VOTE-2024-BET',\n        category: ['Prediction', 'Election'],\n        symbol: 'KAMALA-POPULAR-VOTE-2024-BET',\n        baseAssetSymbol: 'KAMALA-POPULAR-VOTE-2024',\n        marketIndex: 37,\n        oracle: new web3_js_1.PublicKey('AowFw1dCVjS8kngvTCoT3oshiUyL69k7P1uxqXwteWH4'),\n        launchTs: 1723996800000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'FED-CUT-50-SEPT-2024-BET',\n        category: ['Prediction', 'Election'],\n        symbol: 'FED-CUT-50-SEPT-2024-BET',\n        baseAssetSymbol: 'FED-CUT-50-SEPT-2024',\n        marketIndex: 38,\n        oracle: new web3_js_1.PublicKey('5QzgqAbEhJ1cPnLX4tSZEXezmW7sz7PPVVg2VanGi8QQ'),\n        launchTs: 1724250126000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'REPUBLICAN-POPULAR-AND-WIN-BET',\n        category: ['Prediction', 'Election'],\n        symbol: 'REPUBLICAN-POPULAR-AND-WIN-BET',\n        baseAssetSymbol: 'REPUBLICAN-POPULAR-AND-WIN',\n        marketIndex: 39,\n        oracle: new web3_js_1.PublicKey('BtUUSUc9rZSzBmmKhQq4no65zHQTzMFeVYss7xcMRD53'),\n        launchTs: 1724250126000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'BREAKPOINT-IGGYERIC-BET',\n        category: ['Prediction', 'Solana'],\n        symbol: 'BREAKPOINT-IGGYERIC-BET',\n        baseAssetSymbol: 'BREAKPOINT-IGGYERIC',\n        marketIndex: 40,\n        oracle: new web3_js_1.PublicKey('2ftYxoSupperd4ULxy9xyS2Az38wfAe7Lm8FCAPwjjVV'),\n        launchTs: 1724250126000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'DEMOCRATS-WIN-MICHIGAN-BET',\n        category: ['Prediction', 'Election'],\n        symbol: 'DEMOCRATS-WIN-MICHIGAN-BET',\n        baseAssetSymbol: 'DEMOCRATS-WIN-MICHIGAN',\n        marketIndex: 41,\n        oracle: new web3_js_1.PublicKey('8HTDLjhb2esGU5mu11v3pq3eWeFqmvKPkQNCnTTwKAyB'),\n        launchTs: 1725551484000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'TON',\n        category: ['L1'],\n        symbol: 'TON-PERP',\n        baseAssetSymbol: 'TON',\n        marketIndex: 42,\n        oracle: new web3_js_1.PublicKey('Cbhiaky9kxDsviokcQaS9qc4HmpAzLaGjfmdSah1qakL'),\n        launchTs: 1725551484000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x8963217838ab4cf5cadc172203c1f0b763fbaa45f346d8ee50ba994bbcac3026',\n        pythLazerId: 12,\n    },\n    {\n        fullName: 'LANDO-F1-SGP-WIN-BET',\n        category: ['Prediction', 'Sports'],\n        symbol: 'LANDO-F1-SGP-WIN-BET',\n        baseAssetSymbol: 'LANDO-F1-SGP-WIN',\n        marketIndex: 43,\n        oracle: new web3_js_1.PublicKey('DpJz7rjTJLxxnuqrqZTUjMWtnaMFAEfZUv5ATdb9HTh1'),\n        launchTs: 1726646453000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'MOTHER',\n        category: ['Solana', 'Meme'],\n        symbol: 'MOTHER-PERP',\n        baseAssetSymbol: 'MOTHER',\n        marketIndex: 44,\n        oracle: new web3_js_1.PublicKey('469WQgfJ6AJ3eJ8FUcdhiZawf7yNChA3hseTSyhFatHZ'),\n        launchTs: 1727291859000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x62742a997d01f7524f791fdb2dd43aaf0e567d765ebf8fd0406a994239e874d4',\n        pythLazerId: 501,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'MOODENG',\n        category: ['Solana', 'Meme'],\n        symbol: 'MOODENG-PERP',\n        baseAssetSymbol: 'MOODENG',\n        marketIndex: 45,\n        oracle: new web3_js_1.PublicKey('CVy5m6JqhEdjbz11idgVeb2KnH5NpFowKnYPVMdfc7FC'),\n        launchTs: 1727965864000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xffff73128917a90950cd0473fd2551d7cd274fd5a6cc45641881bbcc6ee73417',\n        pythLazerId: 500,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'WARWICK-FIGHT-WIN-BET',\n        category: ['Prediction', 'Sport'],\n        symbol: 'WARWICK-FIGHT-WIN-BET',\n        baseAssetSymbol: 'WARWICK-FIGHT-WIN',\n        marketIndex: 46,\n        oracle: new web3_js_1.PublicKey('Dz5Nvxo1hv7Zfyu11hy8e97twLMRKk6heTWCDGXytj7N'),\n        launchTs: 1727965864000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'DeBridge',\n        category: ['Bridge'],\n        symbol: 'DBR-PERP',\n        baseAssetSymbol: 'DBR',\n        marketIndex: 47,\n        oracle: new web3_js_1.PublicKey('53j4mz7cQV7mAZekKbV3n2L4bY7jY6eXdgaTkWDLYxq4'),\n        launchTs: 1728574493000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0xf788488fe2df341b10a498e0a789f03209c0938d9ed04bc521f8224748d6d236',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'WLF-5B-1W',\n        category: ['Prediction'],\n        symbol: 'WLF-5B-1W-BET',\n        baseAssetSymbol: 'WLF-5B-1W',\n        marketIndex: 48,\n        oracle: new web3_js_1.PublicKey('7LpRfPaWR7cQqN7CMkCmZjEQpWyqso5LGuKCvDXH5ZAr'),\n        launchTs: 1728574493000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'VRSTPN-WIN-F1-24-DRVRS-CHMP',\n        category: ['Prediction', 'Sport'],\n        symbol: 'VRSTPN-WIN-F1-24-DRVRS-CHMP-BET',\n        baseAssetSymbol: 'VRSTPN-WIN-F1-24-DRVRS-CHMP',\n        marketIndex: 49,\n        oracle: new web3_js_1.PublicKey('E36rvXEwysWeiToXCpWfHVADd8bzzyR4w83ZSSwxAxqG'),\n        launchTs: 1729209600000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'LNDO-WIN-F1-24-US-GP',\n        category: ['Prediction', 'Sport'],\n        symbol: 'LNDO-WIN-F1-24-US-GP-BET',\n        baseAssetSymbol: 'LNDO-WIN-F1-24-US-GP',\n        marketIndex: 50,\n        oracle: new web3_js_1.PublicKey('6AVy1y9SnJECnosQaiK2uY1kcT4ZEBf1F4DMvhxgvhUo'),\n        launchTs: 1729209600000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: '1KMEW',\n        category: ['Meme'],\n        symbol: '1KMEW-PERP',\n        baseAssetSymbol: '1KMEW',\n        marketIndex: 51,\n        oracle: new web3_js_1.PublicKey('138RQdT1frDTnEp989V7gUWoQ5yg382ns4ihjvgJLcz7'),\n        launchTs: 1729702915000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER_1K,\n        pythFeedId: '0x514aed52ca5294177f20187ae883cec4a018619772ddce41efcc36a6448f5d5d',\n        pythLazerId: 137,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'MICHI',\n        category: ['Meme'],\n        symbol: 'MICHI-PERP',\n        baseAssetSymbol: 'MICHI',\n        marketIndex: 52,\n        oracle: new web3_js_1.PublicKey('GHzvsMDMSiuyZoWhEAuM27MKFdN2Y4fA4wSDuSd6dLMA'),\n        launchTs: 1730402722000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x63a45218d6b13ffd28ca04748615511bf70eff80a3411c97d96b8ed74a6decab',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'GOAT',\n        category: ['Meme'],\n        symbol: 'GOAT-PERP',\n        baseAssetSymbol: 'GOAT',\n        marketIndex: 53,\n        oracle: new web3_js_1.PublicKey('4uBrnNZyD2wUkpzytuyfiEYp2eWA3WdxXSbWEQbZzs45'),\n        launchTs: 1731443152000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xf7731dc812590214d3eb4343bfb13d1b4cfa9b1d4e020644b5d5d8e07d60c66c',\n        pythLazerId: 437,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'FWOG',\n        category: ['Meme'],\n        symbol: 'FWOG-PERP',\n        baseAssetSymbol: 'FWOG',\n        marketIndex: 54,\n        oracle: new web3_js_1.PublicKey('5Z7uvkAsHNN6qqkQkwcKcEPYZqiMbFE9E24p7SpvfSrv'),\n        launchTs: 1731443152000,\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        pythFeedId: '0x656cc2a39dd795bdecb59de810d4f4d1e74c25fe4c42d0bf1c65a38d74df48e9',\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'PNUT',\n        category: ['Meme'],\n        symbol: 'PNUT-PERP',\n        baseAssetSymbol: 'PNUT',\n        marketIndex: 55,\n        oracle: new web3_js_1.PublicKey('Fbd2hz8Uz26gLm2Jrj7WSrhxusrh9VuSEWVpLBPJgMYX'),\n        launchTs: 1731443152000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x116da895807f81f6b5c5f01b109376e7f6834dc8b51365ab7cdfa66634340e54',\n        pythLazerId: 77,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'RAY',\n        category: ['DEX'],\n        symbol: 'RAY-PERP',\n        baseAssetSymbol: 'RAY',\n        marketIndex: 56,\n        oracle: new web3_js_1.PublicKey('6VXU2P9BJkuPkfA7FJVonBtAo1c2pGnHoV9rxsdZKZyb'),\n        launchTs: 1732721897000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x91568baa8beb53db23eb3fb7f22c6e8bd303d103919e19733f2bb642d3e7987a',\n        pythLazerId: 54,\n    },\n    {\n        fullName: 'SUPERBOWL-LIX-LIONS',\n        category: ['Prediction', 'Sport'],\n        symbol: 'SUPERBOWL-LIX-LIONS-BET',\n        baseAssetSymbol: 'SUPERBOWL-LIX-LIONS',\n        marketIndex: 57,\n        oracle: new web3_js_1.PublicKey('GfTeKKnBxeLSB1Hm24ArjduQM4yqaAgoGgiC99gq5E2P'),\n        launchTs: 1732721897000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'SUPERBOWL-LIX-CHIEFS',\n        category: ['Prediction', 'Sport'],\n        symbol: 'SUPERBOWL-LIX-CHIEFS-BET',\n        baseAssetSymbol: 'SUPERBOWL-LIX-CHIEFS',\n        marketIndex: 58,\n        oracle: new web3_js_1.PublicKey('EdB17Nyu4bnEBiSEfFrwvp4VCUvtq9eDJHc6Ujys3Jwd'),\n        launchTs: 1732721897000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'Hyperliquid',\n        category: ['DEX'],\n        symbol: 'HYPE-PERP',\n        baseAssetSymbol: 'HYPE',\n        marketIndex: 59,\n        oracle: new web3_js_1.PublicKey('3ivZ5AnnUhocgmjiWjT8kDV87S6PpEL3CEHcd3vn2itM'),\n        launchTs: 1733374800000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x4279e31cc369bbcc2faf022b382b080e32a8e689ff20fbc530d2a603eb6cd98b',\n        pythLazerId: 110,\n    },\n    {\n        fullName: 'LiteCoin',\n        category: ['Payment'],\n        symbol: 'LTC-PERP',\n        baseAssetSymbol: 'LTC',\n        marketIndex: 60,\n        oracle: new web3_js_1.PublicKey('CrW8rga5bEZP1KBnqoQmPUcnYjrCPYQFbrMja99QKxsK'),\n        launchTs: 1733374800000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x6e3f3fa8253588df9326580180233eb791e03b443a3ba7a1d892e73874e19a54',\n        pythLazerId: 26,\n    },\n    {\n        fullName: 'Magic Eden',\n        category: ['DEX'],\n        symbol: 'ME-PERP',\n        baseAssetSymbol: 'ME',\n        marketIndex: 61,\n        oracle: new web3_js_1.PublicKey('BboTg1yT114FQkqT6MM3P3G3CcCktuM2RePgU8Gr3K4A'),\n        launchTs: 1733839936000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x91519e3e48571e1232a85a938e714da19fe5ce05107f3eebb8a870b2e8020169',\n        pythLazerId: 93,\n    },\n    {\n        fullName: 'PENGU',\n        category: ['Meme'],\n        symbol: 'PENGU-PERP',\n        baseAssetSymbol: 'PENGU',\n        marketIndex: 62,\n        oracle: new web3_js_1.PublicKey('4A3KroGPjZxPAeBNF287V3NyRwV2q8iBi1vX7kHxTCh7'),\n        launchTs: 1734444000000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xbed3097008b9b5e3c93bec20be79cb43986b85a996475589351a21e67bae9b61',\n        pythLazerId: 97,\n    },\n    {\n        fullName: 'AI16Z',\n        category: ['AI'],\n        symbol: 'AI16Z-PERP',\n        baseAssetSymbol: 'AI16Z',\n        marketIndex: 63,\n        oracle: new web3_js_1.PublicKey('3BGheQVvYtBNpBKSUXSTjpyKQc3dh8iiwT91Aiq7KYCU'),\n        launchTs: 1736384970000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x2551eca7784671173def2c41e6f3e51e11cd87494863f1d208fdd8c64a1f85ae',\n        pythLazerId: 171,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'TRUMP',\n        category: ['Meme'],\n        symbol: 'TRUMP-PERP',\n        baseAssetSymbol: 'TRUMP',\n        marketIndex: 64,\n        oracle: new web3_js_1.PublicKey('FPQjZYvHRGy51guJ77p7n9u9b8eo1ktKRc2D2g5Vysth'),\n        launchTs: 1737219250000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x879551021853eec7a7dc827578e8e69da7e4fa8148339aa0d3d5296405be4b1a',\n        pythLazerId: 203,\n    },\n    {\n        fullName: 'MELANIA',\n        category: ['Meme'],\n        symbol: 'MELANIA-PERP',\n        baseAssetSymbol: 'MELANIA',\n        marketIndex: 65,\n        oracle: new web3_js_1.PublicKey('3RgNWYYcZCKf5uZfriK8ASUbGQErhH6YbpdvZQ7ZKDCf'),\n        launchTs: 1737360280000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x8fef7d52c7f4e3a6258d663f9d27e64a1b6fd95ab5f7d545dbf9a515353d0064',\n        pythLazerId: 145,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'BERA',\n        category: ['L1', 'EVM'],\n        symbol: 'BERA-PERP',\n        baseAssetSymbol: 'BERA',\n        marketIndex: 66,\n        oracle: new web3_js_1.PublicKey('r8eNLQ8jysUyk9rrWXuicwAoKZ7V3YngAB6737zfxmv'),\n        launchTs: 1738850177000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x962088abcfdbdb6e30db2e340c8cf887d9efb311b1f2f17b155a63dbb6d40265',\n        pythLazerId: 308,\n    },\n    {\n        fullName: 'NBAFINALS25-OKC',\n        category: ['Prediction', 'Sport'],\n        symbol: 'NBAFINALS25-OKC-BET',\n        baseAssetSymbol: 'NBAFINALS25-OKC',\n        marketIndex: 67,\n        oracle: new web3_js_1.PublicKey('HieNNSAy9tjtU2mLEcGtgCMViCeZ1881fX7tfezL7wdV'),\n        launchTs: 1739463226000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'NBAFINALS25-BOS',\n        category: ['Prediction', 'Sport'],\n        symbol: 'NBAFINALS25-BOS-BET',\n        baseAssetSymbol: 'NBAFINALS25-BOS',\n        marketIndex: 68,\n        oracle: new web3_js_1.PublicKey('HorrnsG8RBMv7dhzbgPX4wqcWbUTV5NwV8r59UwTu4CJ'),\n        launchTs: 1739463226000,\n        oracleSource: types_1.OracleSource.Prelaunch,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'KAITO',\n        category: ['AI'],\n        symbol: 'KAITO-PERP',\n        baseAssetSymbol: 'KAITO',\n        marketIndex: 69,\n        oracle: new web3_js_1.PublicKey('8M8mjNJ42k2Xi12Q1zRnQRC3xhggu3WGuftiu5VZZmsF'),\n        launchTs: 1739545901000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x7302dee641a08507c297a7b0c8b3efa74a48a3baa6c040acab1e5209692b7e59',\n        pythLazerId: 306,\n    },\n    {\n        fullName: 'Story Protocol',\n        category: ['L1'],\n        symbol: 'IP-PERP',\n        baseAssetSymbol: 'IP',\n        marketIndex: 70,\n        oracle: new web3_js_1.PublicKey('AZVVDFve8ijzLAm9z6W53GFsoWbcycFsdxCL7WUjMz8S'),\n        launchTs: 1740150623000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xb620ba83044577029da7e4ded7a2abccf8e6afc2a0d4d26d89ccdd39ec109025',\n        pythLazerId: 309,\n    },\n    {\n        fullName: 'Fart Coin',\n        category: ['Meme'],\n        symbol: 'FARTCOIN-PERP',\n        baseAssetSymbol: 'FARTCOIN',\n        marketIndex: 71,\n        oracle: new web3_js_1.PublicKey('2sZomfWMDuQLcFak3nuharXorHrZ3hK8iaML6ZGSHtso'),\n        launchTs: 1743086746000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythLazerId: 182,\n    },\n    {\n        fullName: 'Cardano',\n        category: ['L1'],\n        symbol: 'ADA-PERP',\n        baseAssetSymbol: 'ADA',\n        marketIndex: 72,\n        oracle: new web3_js_1.PublicKey('55722FS8VeAxRghz5h2ARJvNjkFiHyzkZ9BF7CEQWN6E'),\n        launchTs: 1743708559000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythLazerId: 16,\n    },\n    {\n        fullName: 'Pax Gold',\n        category: ['RWA'],\n        symbol: 'PAXG-PERP',\n        baseAssetSymbol: 'PAXG',\n        marketIndex: 73,\n        oracle: new web3_js_1.PublicKey('8FauFNbX2gvjkPLH8w2kntXCcSGCwZL2prZjHBpvq6aE'),\n        launchTs: 1744402932000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythLazerId: 163,\n    },\n    {\n        fullName: 'LAUNCHCOIN',\n        category: ['Meme'],\n        symbol: 'LAUNCHCOIN-PERP',\n        baseAssetSymbol: 'LAUNCHCOIN',\n        marketIndex: 74,\n        oracle: new web3_js_1.PublicKey('GAzR3C5cn7gGVvuqJB57wSYTPWP3n2Lw4mRJRxvTvqYy'),\n        launchTs: 1747318237000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        marketStatus: types_1.MarketStatus.DELISTED,\n    },\n    {\n        fullName: 'PUMP',\n        category: ['Launchpad'],\n        symbol: 'PUMP-PERP',\n        baseAssetSymbol: 'PUMP',\n        marketIndex: 75,\n        oracle: new web3_js_1.PublicKey('5r8RWTaRiMgr9Lph3FTUE3sGb1vymhpCrm83Bovjfcps'),\n        launchTs: 1747318237000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythLazerId: 1578,\n    },\n    {\n        fullName: 'ASTER',\n        category: ['DEX'],\n        symbol: 'ASTER-PERP',\n        baseAssetSymbol: 'ASTER',\n        marketIndex: 76,\n        oracle: new web3_js_1.PublicKey('E4tyjB3os4jVczLVQ258uxLdcwjuqmhcsPquVWgrpah4'),\n        launchTs: 1758632629000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xa903b5a82cb572397e3d47595d2889cf80513f5b4cf7a36b513ae10cc8b1e338',\n        pythLazerId: 2310,\n    },\n    {\n        fullName: 'PLASMA',\n        category: ['DEX'],\n        symbol: 'XPL-PERP',\n        baseAssetSymbol: 'XPL',\n        marketIndex: 77,\n        oracle: new web3_js_1.PublicKey('6kgE1KJcxTux4tkPLE8LL8GRyW2cAsvyZsDFWqCrhHVe'),\n        launchTs: 1758898862000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x9873512f5cb33c77ad7a5af098d74812c62111166be395fd0941c8cedb9b00d4',\n        pythLazerId: 2312,\n    },\n    {\n        fullName: 'Double Zero',\n        category: ['Infra'],\n        symbol: '2Z-PERP',\n        baseAssetSymbol: '2Z',\n        marketIndex: 78,\n        oracle: new web3_js_1.PublicKey('4HTDpcHAwBTHCJLNMwT35w4FGc4nfA4YhT1BkcZQwQ2m'),\n        launchTs: 1759412919000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xf2b3ab1c49e35e881003c3c0482d18b181a1560b697b844c24c8f85aba1cab95',\n        pythLazerId: 2316,\n    },\n    {\n        fullName: 'ZCash',\n        category: ['Privacy'],\n        symbol: 'ZEC-PERP',\n        baseAssetSymbol: 'ZEC',\n        marketIndex: 79,\n        oracle: new web3_js_1.PublicKey('BXunfRSyiQWJHv88qMvE42mpMpksWEC8Bf13p2msnRms'),\n        launchTs: 1760366017000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0xbe9b59d178f0d6a97ab4c343bff2aa69caa1eaae3e9048a65788c529b125bb24',\n        pythLazerId: 66,\n    },\n    {\n        fullName: 'Mantle',\n        category: ['L1'],\n        symbol: 'MNT-PERP',\n        baseAssetSymbol: 'MNT',\n        marketIndex: 80,\n        oracle: new web3_js_1.PublicKey('Gy7cJ4U1nxMA44XXC3hwqkpcxEB1mZTYiwJVkaqZfU7u'),\n        launchTs: 1760366017000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x4e3037c822d852d79af3ac80e35eb420ee3b870dca49f9344a38ef4773fb0585',\n        pythLazerId: 199,\n    },\n    {\n        fullName: '1KPUMP',\n        category: ['Launchpad'],\n        symbol: '1KPUMP-PERP',\n        baseAssetSymbol: '1KPUMP',\n        marketIndex: 81,\n        oracle: new web3_js_1.PublicKey('5r8RWTaRiMgr9Lph3FTUE3sGb1vymhpCrm83Bovjfcps'),\n        launchTs: 1760366017000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER_1K,\n        pythLazerId: 1578,\n    },\n    {\n        fullName: 'Meteroa',\n        category: ['Solana', 'DEX'],\n        symbol: 'MET-PERP',\n        baseAssetSymbol: 'MET',\n        marketIndex: 82,\n        oracle: new web3_js_1.PublicKey('HN7qfUNM5Q7gQTwyEucmYdCF4CjwUrspj3DbNQ4V8P52'),\n        launchTs: 1761225524000,\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythLazerId: 2382,\n    },\n];\nexports.PerpMarkets = {\n    devnet: exports.DevnetPerpMarkets,\n    'mainnet-beta': exports.MainnetPerpMarkets,\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2261, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/spotMarkets.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SpotMarkets = exports.MainnetSpotMarkets = exports.DevnetSpotMarkets = exports.WRAPPED_SOL_MINT = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst numericConstants_1 = require(\"./numericConstants\");\nconst types_1 = require(\"../types\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nexports.WRAPPED_SOL_MINT = new web3_js_1.PublicKey('So11111111111111111111111111111111111111112');\nexports.DevnetSpotMarkets = [\n    {\n        symbol: 'USDC',\n        marketIndex: 0,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9VCioxmni2gDLv11qufWzT3RDERhQE4iY5Gf7NTfYyAV'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('8zGuJQqwhZafTah7Uc7Z4tXRnguqkn5KLFAP8oV6PHe2'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',\n        pythLazerId: 7,\n    },\n    {\n        symbol: 'SOL',\n        marketIndex: 1,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('3m6i4RFWEDw2Ft4tFHPJtYgmpPe21k56M3FHeWYrgGBz'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey(exports.WRAPPED_SOL_MINT),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n        serumMarket: new web3_js_1.PublicKey('8N37SsnTu8RYxtjrV9SStjkkwVhmU8aCWhLvwduAPEKW'),\n        phoenixMarket: new web3_js_1.PublicKey('78ehDnHgbkFxqXZwdFxa8HK7saX58GymeX2wNGdkqYLp'),\n        pythFeedId: '0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',\n        pythLazerId: 6,\n    },\n    {\n        symbol: 'BTC',\n        marketIndex: 2,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('486kr3pmFPfTsS4aZgcsQ7kS4i9rjMsYYZup6HQNSTT4'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('3BZPwbcqB5kKScF3TEXxwNfx5ipV13kbRVDvfVp5c6fv'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        serumMarket: new web3_js_1.PublicKey('AGsmbVu3MS9u68GEYABWosQQCZwmLcBHu4pWEuBYH7Za'),\n        pythFeedId: '0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43',\n        pythLazerId: 1,\n    },\n    {\n        symbol: 'PYUSD',\n        marketIndex: 3,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('HpMoKp3TCd3QT4MWYUKk2zCBwmhr5Df45fB6wdxYqEeh'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('GLfF72ZCUnS6N9iDJw8kedHzd6WFVf3VbpwdKKy76FRk'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xc1da1b73d7f01e7ddd54b3766cf7fcd644395ad14f70aa706ec5384c59e76692',\n    },\n    {\n        symbol: 'Bonk',\n        marketIndex: 4,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('GojbSnJuPdKDT1ZuHuAM5t9oz6bxTo1xhUKpTua2F72p'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('7SekVZDmKCCDgTP8m6Hk4CfexFSru9RkwDCczmcwcsP6'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.FIVE),\n        precisionExp: numericConstants_1.FIVE,\n        pythFeedId: '0x72b021217ca3fe68922a19aaf990109cb9d84e9ad004b4d2025ad6f529314419',\n        pythLazerId: 9,\n    },\n    {\n        symbol: 'JLP',\n        marketIndex: 5,\n        poolId: 1,\n        oracle: new web3_js_1.PublicKey('5Mb11e5rt1Sp6A286B145E4TmgMzsM2UX9nCF2vas5bs'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('HGe9FejFyhWSx6zdvx2RjynX7rmoEXFiJiLU437NXemZ'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xc811abc82b4bad1f9bd711a2773ccaa935b03ecef974236942cec5e0eb845a3a',\n    },\n    {\n        symbol: 'USDC',\n        marketIndex: 6,\n        poolId: 1,\n        oracle: new web3_js_1.PublicKey('En8hkHLkRe9d9DraYmBTrus518BvmVH448YcvmrFM6Ce'),\n        oracleSource: types_1.OracleSource.PYTH_STABLE_COIN_PULL,\n        mint: new web3_js_1.PublicKey('8zGuJQqwhZafTah7Uc7Z4tXRnguqkn5KLFAP8oV6PHe2'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',\n        pythLazerId: 7,\n    },\n    {\n        symbol: 'GLXY',\n        marketIndex: 7,\n        poolId: 2,\n        oracle: new web3_js_1.PublicKey('4wFrjUQHzRBc6qjVtMDbt28aEVgn6GaNiWR6vEff4KxR'),\n        oracleSource: types_1.OracleSource.Prelaunch,\n        mint: new web3_js_1.PublicKey('2vVfXmcWXEaFzp7iaTVnQ4y1gR41S6tJQQMo1S5asJyC'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x67e031d1723e5c89e4a826d80b2f3b41a91b05ef6122d523b8829a02e0f563aa',\n    },\n    {\n        symbol: 'GLXY',\n        marketIndex: 8,\n        poolId: 2,\n        oracle: new web3_js_1.PublicKey('4wFrjUQHzRBc6qjVtMDbt28aEVgn6GaNiWR6vEff4KxR'),\n        oracleSource: types_1.OracleSource.Prelaunch,\n        mint: new web3_js_1.PublicKey('2vVfXmcWXEaFzp7iaTVnQ4y1gR41S6tJQQMo1S5asJyC'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x67e031d1723e5c89e4a826d80b2f3b41a91b05ef6122d523b8829a02e0f563aa',\n    },\n];\nexports.MainnetSpotMarkets = [\n    {\n        symbol: 'USDC',\n        marketIndex: 0,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9VCioxmni2gDLv11qufWzT3RDERhQE4iY5Gf7NTfYyAV'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v'),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP,\n        pythFeedId: '0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',\n        pythLazerId: 7,\n    },\n    {\n        symbol: 'SOL',\n        marketIndex: 1,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('3m6i4RFWEDw2Ft4tFHPJtYgmpPe21k56M3FHeWYrgGBz'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey(exports.WRAPPED_SOL_MINT),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n        serumMarket: new web3_js_1.PublicKey('8BnEgHoWFysVcuFFX7QztDmzuH8r5ZFvyP3sYwn1XTh6'),\n        phoenixMarket: new web3_js_1.PublicKey('4DoNfFBfF7UokCC2FQzriy7yHK6DY6NVdYpuekQ5pRgg'),\n        openbookMarket: new web3_js_1.PublicKey('AFgkED1FUVfBe2trPUDqSqK9QKd4stJrfzq5q1RwAFTa'),\n        pythFeedId: '0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d',\n        pythLazerId: 6,\n    },\n    {\n        symbol: 'mSOL',\n        marketIndex: 2,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('FY2JMi1vYz1uayVT2GJ96ysZgpagjhdPRG2upNPtSZsC'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey('9Lyhks5bQQxb9EyyX55NtgKQzpM4WK7JCmeaWuQ5MoXD'),\n        pythFeedId: '0xc2289a6a43d2ce91c6f55caec370f4acc38a2ed477f58813334c6d03749ff2a4',\n        pythLazerId: 503,\n    },\n    {\n        symbol: 'wBTC',\n        marketIndex: 3,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('fqPfDa6uQr9ndMvwaFp4mUBeUrHmLop8Jxfb1XJNmVm'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        serumMarket: new web3_js_1.PublicKey('3BAKsQd3RuhZKES2DGysMhjBdwjZYKYmxRqnSMtZ4KSN'),\n        pythFeedId: '0xc9d8b075a5c69303365ae23633d4e085199bf5c520a3b90fed1322a0342ffc33',\n        pythLazerId: 103,\n    },\n    {\n        symbol: 'wETH',\n        marketIndex: 4,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('6bEp2MiyoiiiDxcVqE8rUHQWwHirXUXtKfAEATTVqNzT'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        serumMarket: new web3_js_1.PublicKey('BbJgE7HZMaDp5NTYvRh5jZSkQPVDTU8ubPFtpogUkEj4'),\n        phoenixMarket: new web3_js_1.PublicKey('Ew3vFDdtdGrknJAVVfraxCA37uNJtimXYPY4QjnfhFHH'),\n        openbookMarket: new web3_js_1.PublicKey('AT1R2jUNb9iTo4EaRfKSTPiNTX4Jb64KSwnVmig6Hu4t'),\n        pythFeedId: '0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace',\n    },\n    {\n        symbol: 'USDT',\n        marketIndex: 5,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('JDKJSkxjasBGL3ce1pkrN6tqDzuVUZPWzzkGuyX8m9yN'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB'),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP,\n        serumMarket: new web3_js_1.PublicKey('B2na8Awyd7cpC59iEU43FagJAPLigr3AP3s38KM982bu'),\n        pythFeedId: '0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b',\n        pythLazerId: 8,\n    },\n    {\n        symbol: 'jitoSOL',\n        marketIndex: 6,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('2cHCtAkMnttMh3bNKSCgSKSP5D4yN3p8bfnMdS3VZsDf'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey('DkbVbMhFxswS32xnn1K2UY4aoBugXooBTxdzkWWDWRkH'),\n        phoenixMarket: new web3_js_1.PublicKey('5LQLfGtqcC5rm2WuGxJf4tjqYmDjsQAbKo2AMLQ8KB7p'),\n        pythFeedId: '0x67be9f519b95cf24338801051f9a808eff0a578ccb388db73b7f6fe1de019ffb',\n        pythLazerId: 458,\n    },\n    {\n        symbol: 'PYTH',\n        marketIndex: 7,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('6Sfx8ZAt6xaEgMXTahR6GrT7oYB6nFBMoVyCmMyHmeJV'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('HZ1JovNiVvGrGNiiYvEozEVgZ58xaU3RKwX8eACQBCt3'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        serumMarket: new web3_js_1.PublicKey('4E17F3BxtNVqzVsirxguuqkpYLtFgCR6NfTpccPh82WE'),\n        phoenixMarket: new web3_js_1.PublicKey('2sTMN9A1D1qeZLF95XQgJCUPiKe5DiV52jLfZGqMP46m'),\n        pythFeedId: '0x0bbf28e9a841a1cc788f6a361b17ca072d0ea3098a1e5df1c3922d06719579ff',\n        pythLazerId: 3,\n    },\n    {\n        symbol: 'bSOL',\n        marketIndex: 8,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('BmDWPMsytWmYkh9n6o7m79eVshVYf2B5GVaqQ2EWKnGH'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('bSo13r4TkiE4KumL71LsHTPpL2euBYLFx6h9HP3piy1'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey('ARjaHVxGCQfTvvKjLd7U7srvk6orthZSE6uqWchCczZc'),\n        pythFeedId: '0x89875379e70f8fbadc17aef315adf3a8d5d160b811435537e03c97e8aac97d9c',\n    },\n    {\n        symbol: 'JTO',\n        marketIndex: 9,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('CGCz4mB8NsDddCq6BZToRUDUuktzsAfpKYh6ATgyyCGF'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('jtojtomepa8beP8AuQc6eXt5FriJwfFMwQx2v2f9mCL'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey('H87FfmHABiZLRGrDsXRZtqq25YpARzaokCzL1vMYGiep'),\n        phoenixMarket: new web3_js_1.PublicKey('BRLLmdtPGuuFn3BU6orYw4KHaohAEptBToi3dwRUnHQZ'),\n        pythFeedId: '0xb43660a5f790c69354b0729a5ef9d50d68f1df92107540210b9cccba1f947cc2',\n        pythLazerId: 91,\n    },\n    {\n        symbol: 'WIF',\n        marketIndex: 10,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('4QXWStoyEErTZFVsvKrvxuNa6QT8zpeA8jddZunSGvYE'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('EKpQGSJtjMFqKZ9KQanSqYXRcF8fBopzLHYxdM65zcjm'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        serumMarket: new web3_js_1.PublicKey('2BtDHBTCTUxvdur498ZEcMgimasaFrY5GzLv8wS8XgCb'),\n        phoenixMarket: new web3_js_1.PublicKey('6ojSigXF7nDPyhFRgmn3V9ywhYseKF9J32ZrranMGVSX'),\n        openbookMarket: new web3_js_1.PublicKey('CwGmEwYFo7u5D7vghGwtcCbRToWosytaZa3Ys3JAto6J'),\n        pythFeedId: '0x4ca4beeca86f0d164160323817a4e42b10010a724c2217c6ee41b54cd4cc61fc',\n        pythLazerId: 10,\n    },\n    {\n        symbol: 'JUP',\n        marketIndex: 11,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('DXqKSHyhTBKEW4qgnL7ycbf3Jca5hCvUgWHFYWsh4KJa'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('JUPyiwrYJFskUPiHa7hkeR8VUtAeFoSYbKedZNsDvCN'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        phoenixMarket: new web3_js_1.PublicKey('2pspvjWWaf3dNgt3jsgSzFCNvMGPb7t8FrEYvLGjvcCe'),\n        launchTs: 1706731200000,\n        pythFeedId: '0x0a0408d619e9380abad35060f9192039ed5042fa6f82301d0e48bb52be830996',\n        pythLazerId: 92,\n    },\n    {\n        symbol: 'RENDER',\n        marketIndex: 12,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('97EqsAGbTnShB7oYWAFFCVVAx8PWXgDYDhcpm99izNQ4'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('rndrizKT3MK1iimdxRdWabcF7Zg7AR5T4nud4EkHBof'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        serumMarket: new web3_js_1.PublicKey('2m7ZLEKtxWF29727DSb5D91erpXPUY1bqhRWRC3wQX7u'),\n        launchTs: 1708964021000,\n        pythFeedId: '0x3d4a2bd9535be6ce8059d75eadeba507b043257321aa544717c56fa19b49e35d',\n        pythLazerId: 34,\n    },\n    {\n        symbol: 'W',\n        marketIndex: 13,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('CsFUXiA5dM4eCKjVBBy8tXhXzDkDRNoYjU5rjpHyfNEZ'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('85VBFQZC9TZkfaptBWjvUw7YbZjy52A6mjtPGjstQAmQ'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        phoenixMarket: new web3_js_1.PublicKey('8dFTCTAbtGuHsdDL8WEPrTU6pXFDrU1QSjBTutw8fwZk'),\n        launchTs: 1712149014000,\n        pythFeedId: '0xeff7446475e218517566ea99e72a4abec2e1bd8498b43b7d8331e29dcb059389',\n        pythLazerId: 102,\n    },\n    {\n        symbol: 'TNSR',\n        marketIndex: 14,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('EX6r1GdfsgcUsY6cQ6YsToV4RGsb4HKpjrkokK2DrmsS'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('TNSRxcUxoT9xBG3de7PiJyTDYu7kskLqcpddxnEJAS6'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        phoenixMarket: new web3_js_1.PublicKey('AbJCZ9TAJiby5AY3cHcXS2gUdENC6mtsm6m7XpC2ZMvE'),\n        launchTs: 1712593532000,\n        pythFeedId: '0x05ecd4597cd48fe13d6cc3596c62af4f9675aee06e2e0b94c06d8bee2b659e05',\n        pythLazerId: 99,\n    },\n    {\n        symbol: 'DRIFT',\n        marketIndex: 15,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('5VJou4ufN2vE11zyZUaLsKLTXhyzCTgiq6QDsts2YnnD'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('DriFtupJYLTosbwoN8koMbEYSx54aFAVLddWsbksjwg7'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        phoenixMarket: new web3_js_1.PublicKey('8BV6rrWsUabnTDA3dE6A69oUDJAj3hMhtBHTJyXB7czp'),\n        launchTs: 1715860800000,\n        pythFeedId: '0x5c1690b27bb02446db17cdda13ccc2c1d609ad6d2ef5bf4983a85ea8b6f19d07',\n        pythLazerId: 249,\n    },\n    {\n        symbol: 'INF',\n        marketIndex: 16,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('B7RUYg2zF6UdUSHv2RmpnriPVJccYWojgFydNS1NY5F8'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('5oVNBeEEQvYi1cX3ir8Dx5n1P7pdxydbGF2X4TxVusJm'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        launchTs: 1716595200000,\n        pythFeedId: '0xf51570985c642c49c2d6e50156390fdba80bb6d5f7fa389d2f012ced4f7d208f',\n    },\n    {\n        symbol: 'dSOL',\n        marketIndex: 17,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('4YstsHafLyDbYFxmJbgoEr33iJJEp6rNPgLTQRgXDkG2'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('Dso1bDeDjCQxTrWHqUUi63oBvV7Mdm6WaobLbQ7gnPQ'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        launchTs: 1716595200000,\n        pythFeedId: '0x41f858bae36e7ee3f4a3a6d4f176f0893d4a261460a52763350d00f8648195ee',\n    },\n    {\n        symbol: 'USDY',\n        marketIndex: 18,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9PgHM68FNGDK6nHb29ERDBcFrV6gNMD8LyUqwxbyyeb2'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('A1KLoBrKBde8Ty9qtNQUtq3C2ortoC3u7twggz7sEto6'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        launchTs: 1718811089000,\n        pythFeedId: '0xe393449f6aff8a4b6d3e1165a7c9ebec103685f3b41e60db4277b5b6d10e7326',\n        pythLazerId: 276,\n    },\n    {\n        symbol: 'JLP',\n        marketIndex: 19,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('4VMtKepA6iFwMTJ7bBbdcGxavNRKiDjxxRr1CaB2NnFJ'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('27G8MtK7VtTcCHkpASjSDdkWWYfoqT6ggEuKidVJidD4'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        launchTs: 1719415157000,\n        pythFeedId: '0xc811abc82b4bad1f9bd711a2773ccaa935b03ecef974236942cec5e0eb845a3a',\n        pythLazerId: 459,\n    },\n    {\n        symbol: 'POPCAT',\n        marketIndex: 20,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('C5fiAmQyjdfDR4EGepZqnEL3fJwMBav5yoAk6XyKMF6u'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('7GCihgDB8fe6KNjn2MYtkzZcRjQy3t9GHdC8uHYmW2hr'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        launchTs: 1720013054000,\n        phoenixMarket: new web3_js_1.PublicKey('31XgvAQ1HgFQEk31KdszbPkVXKaQqB1bgYZPoDrFpSR2'),\n        pythFeedId: '0xb9312a7ee50e189ef045aa3c7842e099b061bd9bdc99ac645956c3b660dc8cce',\n        pythLazerId: 130,\n    },\n    {\n        symbol: 'CLOUD',\n        marketIndex: 21,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9Ennia27iT83kNAk3JtRKxSMzuCzsVtT4MzuxpE7anME'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        pythFeedId: '0x7358313661dcd4f842a1423aa4f7a05f009001c9113201c719621d3f1aa80a73',\n        mint: new web3_js_1.PublicKey('CLoUDKc4Ane7HeQcPpE3YHnznRxhMimJ4MyaUqyHFzAu'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        launchTs: 1721316817000,\n        pythLazerId: 404,\n    },\n    {\n        symbol: 'PYUSD',\n        marketIndex: 22,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('5QZMnsyndmphvZF4BNgoMHwVZaREXeE2rpBoCPMxgCCd'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xc1da1b73d7f01e7ddd54b3766cf7fcd644395ad14f70aa706ec5384c59e76692',\n        pythLazerId: 156,\n    },\n    {\n        symbol: 'USDe',\n        marketIndex: 23,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('5uR6oza6teuMRpjsbMi9fDhCDid2hoYdRBiLW7WzcK54'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('DEkqHyPN7GMRJ5cArtQFAWefqbZb33Hyf6s5iCwjEonT'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        pythFeedId: '0x6ec879b1e9963de5ee97e9c8710b742d6228252a5e2ca12d4ae81d7fe5ee8c5d',\n        pythLazerId: 204,\n    },\n    {\n        symbol: 'sUSDe',\n        marketIndex: 24,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('CX7JCXtUTiC43ZA4uzoH7iQBD15jtVwdBNCnjKHt1BrQ'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('Eh6XEPhSwoLv5wFApukmnaVSHQ6sAnoD9BmgmwQoN2sN'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        pythFeedId: '0xca3ba9a619a4b3755c10ac7d5e760275aa95e9823d38a84fedd416856cdba37c',\n        pythLazerId: 582,\n    },\n    {\n        symbol: 'BNSOL',\n        marketIndex: 25,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('2LxMbHBHsw74aE3XgfthmUNkdDfUGcSEy3G3D3t642fd'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('BNso1VUJnh4zcfpZa6986Ea66P6TCp59hvtNJ8b1X85'),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n        pythFeedId: '0x55f8289be7450f1ae564dd9798e49e7d797d89adbc54fe4f8c906b1fcb94b0c3',\n        pythLazerId: 384,\n    },\n    {\n        symbol: 'MOTHER',\n        marketIndex: 26,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('469WQgfJ6AJ3eJ8FUcdhiZawf7yNChA3hseTSyhFatHZ'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('3S8qX1MsMqRbiwKg2cQyx7nis1oHMgaCuc9c4VfvVdPN'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x62742a997d01f7524f791fdb2dd43aaf0e567d765ebf8fd0406a994239e874d4',\n        pythLazerId: 501,\n    },\n    {\n        symbol: 'cbBTC',\n        marketIndex: 27,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9jPy6EHpLkXaMdvfkoVnRnSdJoQysQDKKj3bW5Amz4Ci'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('cbbtcf3aa214zXHbiAZQwf4122FBYbraNdFqgw4iMij'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        openbookMarket: new web3_js_1.PublicKey('2HXgKaXKsMUEzQaSBZiXSd54eMHaS3roiefyGWtkW97W'),\n        pythFeedId: '0x2817d7bfe5c64b8ea956e9a26f573ef64e72e4d7891f2d6af9bcc93f7aff9a97',\n    },\n    {\n        symbol: 'USDS',\n        marketIndex: 28,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('5Km85n3s9Zs5wEoXYWuHbpoDzst4EBkS5f1XuQJGG1DL'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('USDSwr9ApdHk5bvJKMjzff41FfuX8bSxdKcR81vTwcA'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x77f0971af11cc8bac224917275c1bf55f2319ed5c654a1ca955c82fa2d297ea1',\n        pythLazerId: 611,\n    },\n    {\n        symbol: 'META',\n        marketIndex: 29,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('DwYF1yveo8XTF1oqfsqykj332rjSxAd7bR6Gu6i4iUET'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('METADDFL6wWMWEoKTFJwcThTbUmtarRJZjRpzUvkxhr'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'ME',\n        marketIndex: 30,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('BboTg1yT114FQkqT6MM3P3G3CcCktuM2RePgU8Gr3K4A'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('MEFNBXixkEbait3xn9bkm8WsJzXtVsaJEn4c8Sam21u'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x91519e3e48571e1232a85a938e714da19fe5ce05107f3eebb8a870b2e8020169',\n        pythLazerId: 93,\n    },\n    {\n        symbol: 'PENGU',\n        marketIndex: 31,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('4A3KroGPjZxPAeBNF287V3NyRwV2q8iBi1vX7kHxTCh7'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('2zMMhcVQEXDtdE6vsFS7S7D5oUodfJHE8vd1gnBouauv'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xbed3097008b9b5e3c93bec20be79cb43986b85a996475589351a21e67bae9b61',\n        pythLazerId: 97,\n    },\n    {\n        symbol: 'BONK',\n        marketIndex: 32,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('BERaNi6cpEresbq6HC1EQGaB1H1UjvEo4NGnmYSSJof4'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.FIVE),\n        precisionExp: numericConstants_1.FIVE,\n        pythFeedId: '0x72b021217ca3fe68922a19aaf990109cb9d84e9ad004b4d2025ad6f529314419',\n        openbookMarket: new web3_js_1.PublicKey('D3gZwng2MgZGjktYcKpbR8Bz8653i4qCgzHCf5E4TcZb'),\n        launchTs: 1734717937000,\n        pythLazerId: 9,\n    },\n    {\n        symbol: 'JLP-1',\n        marketIndex: 33,\n        poolId: 1,\n        oracle: new web3_js_1.PublicKey('3ZLn5XDgSLWhTk2NjqAU44cPkSeC5JAhW5o6w5Nz4p8R'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('27G8MtK7VtTcCHkpASjSDdkWWYfoqT6ggEuKidVJidD4'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x6704952e00b6a088b6dcdb8170dcd591eaf64cff9e996ca75ae0ca55bfb96687',\n        launchTs: 1735255852000,\n    },\n    {\n        symbol: 'USDC-1',\n        marketIndex: 34,\n        poolId: 1,\n        oracle: new web3_js_1.PublicKey('9VCioxmni2gDLv11qufWzT3RDERhQE4iY5Gf7NTfYyAV'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',\n        launchTs: 1735255852000,\n        pythLazerId: 7,\n    },\n    {\n        symbol: 'AI16Z',\n        marketIndex: 35,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('3BGheQVvYtBNpBKSUXSTjpyKQc3dh8iiwT91Aiq7KYCU'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('HeLp6NuQkmYB4pYWo2zYs22mESHXPQYzXbB8n4V98jwC'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        pythFeedId: '0x2551eca7784671173def2c41e6f3e51e11cd87494863f1d208fdd8c64a1f85ae',\n        launchTs: 1736384970000,\n        pythLazerId: 171,\n    },\n    {\n        symbol: 'TRUMP',\n        marketIndex: 36,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('FPQjZYvHRGy51guJ77p7n9u9b8eo1ktKRc2D2g5Vysth'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('6p6xgHyF7AeE6TZkSmFsko444wqoP15icUSqi2jfGiPN'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x879551021853eec7a7dc827578e8e69da7e4fa8148339aa0d3d5296405be4b1a',\n        launchTs: 1737219250000,\n        pythLazerId: 203,\n    },\n    {\n        symbol: 'MELANIA',\n        marketIndex: 37,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('3RgNWYYcZCKf5uZfriK8ASUbGQErhH6YbpdvZQ7ZKDCf'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('FUAfBo2jgks6gB4Z4LfZkqSZgzNucisEHqnNebaRxM1P'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x8fef7d52c7f4e3a6258d663f9d27e64a1b6fd95ab5f7d545dbf9a515353d0064',\n        launchTs: 1737360280000,\n        pythLazerId: 145,\n    },\n    {\n        symbol: 'AUSD',\n        marketIndex: 38,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('9JYpqJfLXgrW8Wqzfd93GvJF73m2jJFjNqpQv3wQtehZ'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('AUSD1jCcCyPLybk1YnvPWsHQSrZ46dxwoMniN4N2UEB9'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0xd9912df360b5b7f21a122f15bdd5e27f62ce5e72bd316c291f7c86620e07fb2a',\n        launchTs: 1738255943000,\n        pythLazerId: 367,\n    },\n    {\n        symbol: 'FARTCOIN',\n        marketIndex: 39,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('2sZomfWMDuQLcFak3nuharXorHrZ3hK8iaML6ZGSHtso'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('9BB6NFEcjBCtnNLFko2FqVQBq8HHM13kCyYcdQbgpump'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythLazerId: 182,\n        launchTs: 1743086746000,\n    },\n    {\n        symbol: 'JitoSOL-3',\n        marketIndex: 40,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('Fqv8vT5fdjvBbHd5k4B4ZvnXLH6bbdKP8cMv93ybCP8W'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey('DkbVbMhFxswS32xnn1K2UY4aoBugXooBTxdzkWWDWRkH'),\n        phoenixMarket: new web3_js_1.PublicKey('5LQLfGtqcC5rm2WuGxJf4tjqYmDjsQAbKo2AMLQ8KB7p'),\n        pythFeedId: '0x67be9f519b95cf24338801051f9a808eff0a578ccb388db73b7f6fe1de019ffb',\n    },\n    {\n        symbol: 'PT-fragSOL-10JUL25-3',\n        marketIndex: 41,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('CLjvwowzQ2L9PrmXA6zqbamxLVeDY9vE87aBxMZLJLoY'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('8adRViFUNTe3yexj2gbQtx929zBJtWJRM8TeTzYbQBgx'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'PT-kySOL-15JUN25-3',\n        marketIndex: 42,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('G4FdLzuezfaJxBd8eChuw1NU4Sq3n1rasGTwSh7dXegN'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('FxT7bPGvkS5jKF2vgnJ16MciHqtsNqxbcWTfFg7L136h'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'PT-dSOL-30JUN25-3',\n        marketIndex: 43,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('BR4NCRe2R8shvDAskUt6HE3n8Ej8HdMnVqshLz97BMm9'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('8H3tZ7WcgYPKEQ7fCCAFQuaNqKdMH1EtBp2ovUPpRK3k'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'JTO-3',\n        marketIndex: 44,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('DPvVSQYhZXQ2ygfT2Qjdg6iyeQVAyiz8okj88YRjy6NN'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('jtojtomepa8beP8AuQc6eXt5FriJwfFMwQx2v2f9mCL'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'zBTC',\n        marketIndex: 45,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('3xcpvBUVV8ALVV4Wod733Vyic3fe8iJAeXDpRdk19Z3p'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('zBTCug3er3tLyffELcvDNrKkCymbPWysGcWihESYfLg'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        pythFeedId: '0x3d824c7f7c26ed1c85421ecec8c754e6b52d66a4e45de20a9c9ea91de8b396f9',\n        launchTs: 1747155600000,\n        pythLazerId: 640,\n    },\n    {\n        symbol: 'ZEUS',\n        marketIndex: 46,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('8cH72H3vqYPArV9QvkYJkwzTdsdNPPgVPrusz9sMmgNN'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('ZEUS1aR7aX8DFFJf5QjWj2ftDDdNTroMNGo8YoQm3Gq'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x31558e9ccb18c151af6c52bf78afd03098a7aca1b9cf171a65b693b464c2f066',\n        launchTs: 1747155600000,\n        pythLazerId: 643,\n    },\n    {\n        symbol: 'USDC-4',\n        marketIndex: 47,\n        poolId: 4,\n        oracle: new web3_js_1.PublicKey('9VCioxmni2gDLv11qufWzT3RDERhQE4iY5Gf7NTfYyAV'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v'),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP,\n        pythFeedId: '0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a',\n        pythLazerId: 7,\n        launchTs: 1747494165000,\n    },\n    {\n        symbol: 'USDT-4',\n        marketIndex: 48,\n        poolId: 4,\n        oracle: new web3_js_1.PublicKey('JDKJSkxjasBGL3ce1pkrN6tqDzuVUZPWzzkGuyX8m9yN'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER_STABLE_COIN,\n        mint: new web3_js_1.PublicKey('Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB'),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP,\n        serumMarket: new web3_js_1.PublicKey('B2na8Awyd7cpC59iEU43FagJAPLigr3AP3s38KM982bu'),\n        pythFeedId: '0x2b89b9dc8fdf9f34709a5b106b472f0f39bb6ca9ce04b0fd7f2e971688e2e53b',\n        pythLazerId: 8,\n    },\n    {\n        symbol: 'SOL-2',\n        marketIndex: 49,\n        poolId: 2,\n        oracle: new web3_js_1.PublicKey('3PiwrLLyiuWaxS7zJL5znGR9iYD3KWubZThdQzsCdg2e'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey(exports.WRAPPED_SOL_MINT),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n    },\n    {\n        symbol: 'JitoSOL-2',\n        marketIndex: 50,\n        poolId: 2,\n        oracle: new web3_js_1.PublicKey('Fqv8vT5fdjvBbHd5k4B4ZvnXLH6bbdKP8cMv93ybCP8W'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'JTO-2',\n        marketIndex: 51,\n        poolId: 2,\n        oracle: new web3_js_1.PublicKey('DPvVSQYhZXQ2ygfT2Qjdg6iyeQVAyiz8okj88YRjy6NN'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('jtojtomepa8beP8AuQc6eXt5FriJwfFMwQx2v2f9mCL'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'dfdvSOL',\n        marketIndex: 52,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('EUQQD2fNN7h7su5TbWpUnf22zeGtF3RjEX2hgX2YPfLd'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('sctmB7GPi5L2Q5G9tUSzXvhZ4YiDMEGcRov9KfArQpx'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'sACRED',\n        marketIndex: 53,\n        poolId: 4,\n        oracle: new web3_js_1.PublicKey('GheMfcCB49SuVCWrFReQDD2tLkcPDMG3qZEZWU44mHu'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('59CwZq5b6drmDizgGfxECG7f16hxDpG1nXrxPoQx4y8g'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n    },\n    {\n        symbol: 'EURC',\n        marketIndex: 54,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('BkdSPLmw4W6twrJjAePw2bJAwDTBtxJ9t6LvNHfcBKg1'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('HzwqbKZw8HxMN6bF2yFZNrht3c2iXXzpKcFu7uBEDKtr'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x76fa85158bf14ede77087fe3ae472f66213f6ea2f5b411cb2de472794990fa5c',\n        pythLazerId: 240,\n    },\n    {\n        symbol: 'PT-fragSOL-31OCT25-3',\n        marketIndex: 55,\n        poolId: 3,\n        oracle: new web3_js_1.PublicKey('C41YpBLZfERAbV1p8DD48vDwbYhRQCbiryMx8Vp5sfo4'),\n        oracleSource: types_1.OracleSource.SWITCHBOARD_ON_DEMAND,\n        mint: new web3_js_1.PublicKey('Aby6y5DYtTrhQD8i7JXLs4H3jdUTwSXDraYqnwn5tKbt'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n    },\n    {\n        symbol: 'PUMP',\n        marketIndex: 56,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('5r8RWTaRiMgr9Lph3FTUE3sGb1vymhpCrm83Bovjfcps'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('pumpCmXqMfrsAkQ5r49WcJnRayYRqmXz6ae8H7H9Dfn'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x7a01fca212788bba7c5bf8c9efd576a8a722f070d2c17596ff7bb609b8d5c3b9',\n        pythLazerId: 1578,\n    },\n    {\n        symbol: 'syrupUSDC',\n        marketIndex: 57,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('GqqkoqHU5pqgTvL88xSCipH9txbPETyzvAvybQ3zRpzw'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('AvZZF1YaZDziPY2RCK4oJrRVrbN3mTD9NL24hPeaZeUj'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x2ad31d1c4a85fbf2156ce57fab4104124c5ef76a6386375ecfc8da1ed5ce1486',\n    },\n    {\n        symbol: 'LBTC',\n        marketIndex: 58,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('Fa3VKWbdb9yQ89vA9JfYnR6micY9LwGneoQ1So9JgXHT'),\n        oracleSource: types_1.OracleSource.PYTH_PULL,\n        mint: new web3_js_1.PublicKey('LBTCgU4b3wsFKsPwBn1rRZDx5DoFutM6RPiEt1TPDsY'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        pythFeedId: '0x8f257aab6e7698bb92b15511915e593d6f8eae914452f781874754b03d0c612b',\n        launchTs: 1756392947000,\n    },\n    {\n        symbol: '2Z',\n        marketIndex: 59,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('4HTDpcHAwBTHCJLNMwT35w4FGc4nfA4YhT1BkcZQwQ2m'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('J6pQQ3FAcJQeWPPGppWRb4nM8jU3wLyYbRrLh7feMfvd'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        pythFeedId: '0xf2b3ab1c49e35e881003c3c0482d18b181a1560b697b844c24c8f85aba1cab95',\n        pythLazerId: 2316,\n        launchTs: 1759412919000,\n    },\n    {\n        symbol: 'MET',\n        marketIndex: 60,\n        poolId: 0,\n        oracle: new web3_js_1.PublicKey('HN7qfUNM5Q7gQTwyEucmYdCF4CjwUrspj3DbNQ4V8P52'),\n        oracleSource: types_1.OracleSource.PYTH_LAZER,\n        mint: new web3_js_1.PublicKey('METvsvVRapdj9cFLzq4Tr43xK4tAjQfwX76z3n6mWQL'),\n        precision: new anchor_1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        pythFeedId: '0x0292e0f405bcd4a496d34e48307f6787349ad2bcd8505c3d3a9f77d81a67a682',\n        pythLazerId: 2382,\n        launchTs: 1761225524000,\n    },\n];\nexports.SpotMarkets = {\n    devnet: exports.DevnetSpotMarkets,\n    'mainnet-beta': exports.MainnetSpotMarkets,\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3144, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/txConstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FUEL_RESET_LOG_ACCOUNT = exports.NOT_CONFIRMED_ERROR_CODE = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nexports.NOT_CONFIRMED_ERROR_CODE = -1001;\nexports.FUEL_RESET_LOG_ACCOUNT = new web3_js_1.PublicKey('FuE1gqp2fzw2sDNLrbZqKsqpphJcoSW6HPaSJjGd4RZ4');\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,QAAQ,wBAAwB,GAAG,KAAK;AACzE,MAAM;AACN,QAAQ,wBAAwB,GAAG,CAAC;AACpC,QAAQ,sBAAsB,GAAG,IAAI,UAAU,SAAS,CAAC","ignoreList":[0]}},
    {"offset": {"line": 3155, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/insuranceFund.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MAX_APR_PER_REVENUE_SETTLE_TO_INSURANCE_FUND_VAULT_GOV = void 0;\nconst numericConstants_1 = require(\"./numericConstants\");\n// follows program constant MAX_APR_PER_REVENUE_SETTLE_TO_INSURANCE_FUND_VAULT_GOV in math/constants.rs\n/**\n * Max APR for DRIFT IF vault.\n */\nexports.MAX_APR_PER_REVENUE_SETTLE_TO_INSURANCE_FUND_VAULT_GOV = numericConstants_1.PERCENTAGE_PRECISION.divn(22);\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sDAAsD,GAAG,KAAK;AACtE,MAAM;AACN,uGAAuG;AACvG;;CAEC,GACD,QAAQ,sDAAsD,GAAG,mBAAmB,oBAAoB,CAAC,IAAI,CAAC","ignoreList":[0]}},
    {"offset": {"line": 3168, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constants/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./insuranceFund\"), exports);\n__exportStar(require(\"./numericConstants\"), exports);\n__exportStar(require(\"./perpMarkets\"), exports);\n__exportStar(require(\"./spotMarkets\"), exports);\n__exportStar(require(\"./txConstants\"), exports);\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,sSAAyC;AACzC,ySAA4C;AAC5C,oSAAuC;AACvC,oSAAuC;AACvC,oSAAuC","ignoreList":[0]}},
    {"offset": {"line": 3199, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConstituentLpOperation = exports.ConstituentStatus = exports.OracleValidity = exports.SwapReduceOnly = exports.PlaceAndTakeOrderSuccessCondition = exports.FuelOverflowStatus = exports.ReferrerStatus = exports.DefaultOrderParams = exports.ModifyOrderPolicy = exports.OrderParamsBitFlag = exports.PostOnlyParams = exports.LiquidationType = exports.LPAction = exports.TradeSide = exports.getVariant = exports.isOneOfVariant = exports.isVariant = exports.SettlePnlMode = exports.StakeAction = exports.SpotFulfillmentConfigStatus = exports.SettlePnlExplanation = exports.DepositExplanation = exports.SpotFulfillmentStatus = exports.SpotFulfillmentType = exports.OrderTriggerCondition = exports.OrderActionExplanation = exports.OrderAction = exports.OrderBitFlag = exports.OrderStatus = exports.MarketType = exports.OrderType = exports.OracleSourceNum = exports.OracleSource = exports.DepositDirection = exports.PositionDirection = exports.SpotBalanceType = exports.SwapDirection = exports.TokenProgramFlag = exports.AssetTier = exports.ContractTier = exports.ContractType = exports.MarginMode = exports.UserStatus = exports.InsuranceFundOperation = exports.SpotOperation = exports.PerpOperation = exports.MarketStatus = exports.FeatureBitFlags = exports.ExchangeStatus = void 0;\nconst numericConstants_1 = require(\"./constants/numericConstants\");\n// # Utility Types / Enums / Constants\nvar ExchangeStatus;\n(function (ExchangeStatus) {\n    ExchangeStatus[ExchangeStatus[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    ExchangeStatus[ExchangeStatus[\"DEPOSIT_PAUSED\"] = 1] = \"DEPOSIT_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"WITHDRAW_PAUSED\"] = 2] = \"WITHDRAW_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"AMM_PAUSED\"] = 4] = \"AMM_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"FILL_PAUSED\"] = 8] = \"FILL_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"LIQ_PAUSED\"] = 16] = \"LIQ_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"FUNDING_PAUSED\"] = 32] = \"FUNDING_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"SETTLE_PNL_PAUSED\"] = 64] = \"SETTLE_PNL_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"AMM_IMMEDIATE_FILL_PAUSED\"] = 128] = \"AMM_IMMEDIATE_FILL_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"PAUSED\"] = 255] = \"PAUSED\";\n})(ExchangeStatus || (exports.ExchangeStatus = ExchangeStatus = {}));\nvar FeatureBitFlags;\n(function (FeatureBitFlags) {\n    FeatureBitFlags[FeatureBitFlags[\"MM_ORACLE_UPDATE\"] = 1] = \"MM_ORACLE_UPDATE\";\n    FeatureBitFlags[FeatureBitFlags[\"MEDIAN_TRIGGER_PRICE\"] = 2] = \"MEDIAN_TRIGGER_PRICE\";\n    FeatureBitFlags[FeatureBitFlags[\"BUILDER_CODES\"] = 4] = \"BUILDER_CODES\";\n    FeatureBitFlags[FeatureBitFlags[\"BUILDER_REFERRAL\"] = 8] = \"BUILDER_REFERRAL\";\n})(FeatureBitFlags || (exports.FeatureBitFlags = FeatureBitFlags = {}));\nclass MarketStatus {\n}\nexports.MarketStatus = MarketStatus;\nMarketStatus.INITIALIZED = { initialized: {} };\nMarketStatus.ACTIVE = { active: {} };\nMarketStatus.FUNDING_PAUSED = { fundingPaused: {} };\nMarketStatus.AMM_PAUSED = { ammPaused: {} };\nMarketStatus.FILL_PAUSED = { fillPaused: {} };\nMarketStatus.WITHDRAW_PAUSED = { withdrawPaused: {} };\nMarketStatus.REDUCE_ONLY = { reduceOnly: {} };\nMarketStatus.SETTLEMENT = { settlement: {} };\nMarketStatus.DELISTED = { delisted: {} };\nvar PerpOperation;\n(function (PerpOperation) {\n    PerpOperation[PerpOperation[\"UPDATE_FUNDING\"] = 1] = \"UPDATE_FUNDING\";\n    PerpOperation[PerpOperation[\"AMM_FILL\"] = 2] = \"AMM_FILL\";\n    PerpOperation[PerpOperation[\"FILL\"] = 4] = \"FILL\";\n    PerpOperation[PerpOperation[\"SETTLE_PNL\"] = 8] = \"SETTLE_PNL\";\n    PerpOperation[PerpOperation[\"SETTLE_PNL_WITH_POSITION\"] = 16] = \"SETTLE_PNL_WITH_POSITION\";\n    PerpOperation[PerpOperation[\"LIQUIDATION\"] = 32] = \"LIQUIDATION\";\n    PerpOperation[PerpOperation[\"SETTLE_REV_POOL\"] = 64] = \"SETTLE_REV_POOL\";\n})(PerpOperation || (exports.PerpOperation = PerpOperation = {}));\nvar SpotOperation;\n(function (SpotOperation) {\n    SpotOperation[SpotOperation[\"UPDATE_CUMULATIVE_INTEREST\"] = 1] = \"UPDATE_CUMULATIVE_INTEREST\";\n    SpotOperation[SpotOperation[\"FILL\"] = 2] = \"FILL\";\n    SpotOperation[SpotOperation[\"DEPOSIT\"] = 4] = \"DEPOSIT\";\n    SpotOperation[SpotOperation[\"WITHDRAW\"] = 8] = \"WITHDRAW\";\n    SpotOperation[SpotOperation[\"LIQUIDATION\"] = 16] = \"LIQUIDATION\";\n})(SpotOperation || (exports.SpotOperation = SpotOperation = {}));\nvar InsuranceFundOperation;\n(function (InsuranceFundOperation) {\n    InsuranceFundOperation[InsuranceFundOperation[\"INIT\"] = 1] = \"INIT\";\n    InsuranceFundOperation[InsuranceFundOperation[\"ADD\"] = 2] = \"ADD\";\n    InsuranceFundOperation[InsuranceFundOperation[\"REQUEST_REMOVE\"] = 4] = \"REQUEST_REMOVE\";\n    InsuranceFundOperation[InsuranceFundOperation[\"REMOVE\"] = 8] = \"REMOVE\";\n})(InsuranceFundOperation || (exports.InsuranceFundOperation = InsuranceFundOperation = {}));\nvar UserStatus;\n(function (UserStatus) {\n    UserStatus[UserStatus[\"BEING_LIQUIDATED\"] = 1] = \"BEING_LIQUIDATED\";\n    UserStatus[UserStatus[\"BANKRUPT\"] = 2] = \"BANKRUPT\";\n    UserStatus[UserStatus[\"REDUCE_ONLY\"] = 4] = \"REDUCE_ONLY\";\n    UserStatus[UserStatus[\"ADVANCED_LP\"] = 8] = \"ADVANCED_LP\";\n    UserStatus[UserStatus[\"PROTECTED_MAKER\"] = 16] = \"PROTECTED_MAKER\";\n})(UserStatus || (exports.UserStatus = UserStatus = {}));\nclass MarginMode {\n}\nexports.MarginMode = MarginMode;\nMarginMode.DEFAULT = { default: {} };\nMarginMode.HIGH_LEVERAGE = { highLeverage: {} };\nMarginMode.HIGH_LEVERAGE_MAINTENANCE = {\n    highLeverageMaintenance: {},\n};\nclass ContractType {\n}\nexports.ContractType = ContractType;\nContractType.PERPETUAL = { perpetual: {} };\nContractType.FUTURE = { future: {} };\nContractType.PREDICTION = { prediction: {} };\nclass ContractTier {\n}\nexports.ContractTier = ContractTier;\nContractTier.A = { a: {} };\nContractTier.B = { b: {} };\nContractTier.C = { c: {} };\nContractTier.SPECULATIVE = { speculative: {} };\nContractTier.HIGHLY_SPECULATIVE = { highlySpeculative: {} };\nContractTier.ISOLATED = { isolated: {} };\nclass AssetTier {\n}\nexports.AssetTier = AssetTier;\nAssetTier.COLLATERAL = { collateral: {} };\nAssetTier.PROTECTED = { protected: {} };\nAssetTier.CROSS = { cross: {} };\nAssetTier.ISOLATED = { isolated: {} };\nAssetTier.UNLISTED = { unlisted: {} };\nvar TokenProgramFlag;\n(function (TokenProgramFlag) {\n    TokenProgramFlag[TokenProgramFlag[\"Token2022\"] = 1] = \"Token2022\";\n    TokenProgramFlag[TokenProgramFlag[\"TransferHook\"] = 2] = \"TransferHook\";\n})(TokenProgramFlag || (exports.TokenProgramFlag = TokenProgramFlag = {}));\nclass SwapDirection {\n}\nexports.SwapDirection = SwapDirection;\nSwapDirection.ADD = { add: {} };\nSwapDirection.REMOVE = { remove: {} };\nclass SpotBalanceType {\n}\nexports.SpotBalanceType = SpotBalanceType;\nSpotBalanceType.DEPOSIT = { deposit: {} };\nSpotBalanceType.BORROW = { borrow: {} };\nclass PositionDirection {\n}\nexports.PositionDirection = PositionDirection;\nPositionDirection.LONG = { long: {} };\nPositionDirection.SHORT = { short: {} };\nclass DepositDirection {\n}\nexports.DepositDirection = DepositDirection;\nDepositDirection.DEPOSIT = { deposit: {} };\nDepositDirection.WITHDRAW = { withdraw: {} };\nclass OracleSource {\n}\nexports.OracleSource = OracleSource;\nOracleSource.PYTH = { pyth: {} };\nOracleSource.PYTH_1K = { pyth1K: {} };\nOracleSource.PYTH_1M = { pyth1M: {} };\nOracleSource.PYTH_PULL = { pythPull: {} };\nOracleSource.PYTH_1K_PULL = { pyth1KPull: {} };\nOracleSource.PYTH_1M_PULL = { pyth1MPull: {} };\nOracleSource.SWITCHBOARD = { switchboard: {} };\nOracleSource.QUOTE_ASSET = { quoteAsset: {} };\nOracleSource.PYTH_STABLE_COIN = { pythStableCoin: {} };\nOracleSource.PYTH_STABLE_COIN_PULL = { pythStableCoinPull: {} };\nOracleSource.Prelaunch = { prelaunch: {} };\nOracleSource.SWITCHBOARD_ON_DEMAND = { switchboardOnDemand: {} };\nOracleSource.PYTH_LAZER = { pythLazer: {} };\nOracleSource.PYTH_LAZER_1K = { pythLazer1K: {} };\nOracleSource.PYTH_LAZER_1M = { pythLazer1M: {} };\nOracleSource.PYTH_LAZER_STABLE_COIN = { pythLazerStableCoin: {} };\nclass OracleSourceNum {\n}\nexports.OracleSourceNum = OracleSourceNum;\nOracleSourceNum.PYTH = 0;\nOracleSourceNum.PYTH_1K = 1;\nOracleSourceNum.PYTH_1M = 2;\nOracleSourceNum.PYTH_PULL = 3;\nOracleSourceNum.PYTH_1K_PULL = 4;\nOracleSourceNum.PYTH_1M_PULL = 5;\nOracleSourceNum.SWITCHBOARD = 6;\nOracleSourceNum.QUOTE_ASSET = 7;\nOracleSourceNum.PYTH_STABLE_COIN = 8;\nOracleSourceNum.PYTH_STABLE_COIN_PULL = 9;\nOracleSourceNum.PRELAUNCH = 10;\nOracleSourceNum.SWITCHBOARD_ON_DEMAND = 11;\nOracleSourceNum.PYTH_LAZER = 12;\nOracleSourceNum.PYTH_LAZER_1K = 13;\nOracleSourceNum.PYTH_LAZER_1M = 14;\nOracleSourceNum.PYTH_LAZER_STABLE_COIN = 15;\nclass OrderType {\n}\nexports.OrderType = OrderType;\nOrderType.LIMIT = { limit: {} };\nOrderType.TRIGGER_MARKET = { triggerMarket: {} };\nOrderType.TRIGGER_LIMIT = { triggerLimit: {} };\nOrderType.MARKET = { market: {} };\nOrderType.ORACLE = { oracle: {} };\nclass MarketType {\n}\nexports.MarketType = MarketType;\nMarketType.SPOT = { spot: {} };\nMarketType.PERP = { perp: {} };\nclass OrderStatus {\n}\nexports.OrderStatus = OrderStatus;\nOrderStatus.INIT = { init: {} };\nOrderStatus.OPEN = { open: {} };\nOrderStatus.FILLED = { filled: {} };\nOrderStatus.CANCELED = { canceled: {} };\nclass OrderBitFlag {\n}\nexports.OrderBitFlag = OrderBitFlag;\nOrderBitFlag.SignedMessage = 1;\nOrderBitFlag.OracleTriggerMarket = 2;\nOrderBitFlag.SafeTriggerOrder = 4;\nOrderBitFlag.NewTriggerReduceOnly = 8;\nclass OrderAction {\n}\nexports.OrderAction = OrderAction;\nOrderAction.PLACE = { place: {} };\nOrderAction.CANCEL = { cancel: {} };\nOrderAction.EXPIRE = { expire: {} };\nOrderAction.FILL = { fill: {} };\nOrderAction.TRIGGER = { trigger: {} };\nclass OrderActionExplanation {\n}\nexports.OrderActionExplanation = OrderActionExplanation;\nOrderActionExplanation.NONE = { none: {} };\nOrderActionExplanation.INSUFFICIENT_FREE_COLLATERAL = {\n    insufficientFreeCollateral: {},\n};\nOrderActionExplanation.ORACLE_PRICE_BREACHED_LIMIT_PRICE = {\n    oraclePriceBreachedLimitPrice: {},\n};\nOrderActionExplanation.MARKET_ORDER_FILLED_TO_LIMIT_PRICE = {\n    marketOrderFilledToLimitPrice: {},\n};\nOrderActionExplanation.ORDER_EXPIRED = {\n    orderExpired: {},\n};\nOrderActionExplanation.LIQUIDATION = {\n    liquidation: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM = {\n    orderFilledWithAmm: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM_JIT = {\n    orderFilledWithAmmJit: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM_JIT_LP_SPLIT = {\n    orderFilledWithAmmJitLpSplit: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_LP_JIT = {\n    orderFilledWithLpJit: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_MATCH = {\n    orderFilledWithMatch: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_MATCH_JIT = {\n    orderFilledWithMatchJit: {},\n};\nOrderActionExplanation.MARKET_EXPIRED = {\n    marketExpired: {},\n};\nOrderActionExplanation.RISK_INCREASING_ORDER = {\n    riskingIncreasingOrder: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_SERUM = {\n    orderFillWithSerum: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_OPENBOOK_V2 = {\n    orderFilledWithOpenbookV2: {},\n};\nOrderActionExplanation.ORDER_FILLED_WITH_PHOENIX = {\n    orderFillWithPhoenix: {},\n};\nOrderActionExplanation.REDUCE_ONLY_ORDER_INCREASED_POSITION = {\n    reduceOnlyOrderIncreasedPosition: {},\n};\nOrderActionExplanation.DERISK_LP = {\n    deriskLp: {},\n};\nOrderActionExplanation.TRANSFER_PERP_POSITION = {\n    transferPerpPosition: {},\n};\nclass OrderTriggerCondition {\n}\nexports.OrderTriggerCondition = OrderTriggerCondition;\nOrderTriggerCondition.ABOVE = { above: {} };\nOrderTriggerCondition.BELOW = { below: {} };\nOrderTriggerCondition.TRIGGERED_ABOVE = { triggeredAbove: {} }; // above condition has been triggered\nOrderTriggerCondition.TRIGGERED_BELOW = { triggeredBelow: {} }; // below condition has been triggered\nclass SpotFulfillmentType {\n}\nexports.SpotFulfillmentType = SpotFulfillmentType;\nSpotFulfillmentType.EXTERNAL = { external: {} };\nSpotFulfillmentType.MATCH = { match: {} };\nclass SpotFulfillmentStatus {\n}\nexports.SpotFulfillmentStatus = SpotFulfillmentStatus;\nSpotFulfillmentStatus.ENABLED = { enabled: {} };\nSpotFulfillmentStatus.DISABLED = { disabled: {} };\nclass DepositExplanation {\n}\nexports.DepositExplanation = DepositExplanation;\nDepositExplanation.NONE = { none: {} };\nDepositExplanation.TRANSFER = { transfer: {} };\nDepositExplanation.BORROW = { borrow: {} };\nDepositExplanation.REPAY_BORROW = { repayBorrow: {} };\nDepositExplanation.REWARD = { reward: {} };\nclass SettlePnlExplanation {\n}\nexports.SettlePnlExplanation = SettlePnlExplanation;\nSettlePnlExplanation.NONE = { none: {} };\nSettlePnlExplanation.EXPIRED_POSITION = { expiredPosition: {} };\nclass SpotFulfillmentConfigStatus {\n}\nexports.SpotFulfillmentConfigStatus = SpotFulfillmentConfigStatus;\nSpotFulfillmentConfigStatus.ENABLED = { enabled: {} };\nSpotFulfillmentConfigStatus.DISABLED = { disabled: {} };\nclass StakeAction {\n}\nexports.StakeAction = StakeAction;\nStakeAction.STAKE = { stake: {} };\nStakeAction.UNSTAKE_REQUEST = { unstakeRequest: {} };\nStakeAction.UNSTAKE_CANCEL_REQUEST = { unstakeCancelRequest: {} };\nStakeAction.UNSTAKE = { unstake: {} };\nStakeAction.UNSTAKE_TRANSFER = { unstakeTransfer: {} };\nStakeAction.STAKE_TRANSFER = { stakeTransfer: {} };\nclass SettlePnlMode {\n}\nexports.SettlePnlMode = SettlePnlMode;\nSettlePnlMode.TRY_SETTLE = { trySettle: {} };\nSettlePnlMode.MUST_SETTLE = { mustSettle: {} };\nfunction isVariant(object, type) {\n    return object.hasOwnProperty(type);\n}\nexports.isVariant = isVariant;\nfunction isOneOfVariant(object, types) {\n    return types.reduce((result, type) => {\n        return result || object.hasOwnProperty(type);\n    }, false);\n}\nexports.isOneOfVariant = isOneOfVariant;\nfunction getVariant(object) {\n    return Object.keys(object)[0];\n}\nexports.getVariant = getVariant;\nvar TradeSide;\n(function (TradeSide) {\n    TradeSide[TradeSide[\"None\"] = 0] = \"None\";\n    TradeSide[TradeSide[\"Buy\"] = 1] = \"Buy\";\n    TradeSide[TradeSide[\"Sell\"] = 2] = \"Sell\";\n})(TradeSide || (exports.TradeSide = TradeSide = {}));\nclass LPAction {\n}\nexports.LPAction = LPAction;\nLPAction.ADD_LIQUIDITY = { addLiquidity: {} };\nLPAction.REMOVE_LIQUIDITY = { removeLiquidity: {} };\nLPAction.SETTLE_LIQUIDITY = { settleLiquidity: {} };\nLPAction.REMOVE_LIQUIDITY_DERISK = { removeLiquidityDerisk: {} };\nclass LiquidationType {\n}\nexports.LiquidationType = LiquidationType;\nLiquidationType.LIQUIDATE_PERP = { liquidatePerp: {} };\nLiquidationType.LIQUIDATE_BORROW_FOR_PERP_PNL = {\n    liquidateBorrowForPerpPnl: {},\n};\nLiquidationType.LIQUIDATE_PERP_PNL_FOR_DEPOSIT = {\n    liquidatePerpPnlForDeposit: {},\n};\nLiquidationType.PERP_BANKRUPTCY = {\n    perpBankruptcy: {},\n};\nLiquidationType.SPOT_BANKRUPTCY = {\n    spotBankruptcy: {},\n};\nLiquidationType.LIQUIDATE_SPOT = {\n    liquidateSpot: {},\n};\nclass PostOnlyParams {\n}\nexports.PostOnlyParams = PostOnlyParams;\nPostOnlyParams.NONE = { none: {} };\nPostOnlyParams.MUST_POST_ONLY = { mustPostOnly: {} }; // Tx fails if order can't be post only\nPostOnlyParams.TRY_POST_ONLY = { tryPostOnly: {} }; // Tx succeeds and order not placed if can't be post only\nPostOnlyParams.SLIDE = { slide: {} }; // Modify price to be post only if can't be post only\nclass OrderParamsBitFlag {\n}\nexports.OrderParamsBitFlag = OrderParamsBitFlag;\nOrderParamsBitFlag.ImmediateOrCancel = 1;\nOrderParamsBitFlag.UpdateHighLeverageMode = 2;\nvar ModifyOrderPolicy;\n(function (ModifyOrderPolicy) {\n    ModifyOrderPolicy[ModifyOrderPolicy[\"MustModify\"] = 1] = \"MustModify\";\n    ModifyOrderPolicy[ModifyOrderPolicy[\"ExcludePreviousFill\"] = 2] = \"ExcludePreviousFill\";\n})(ModifyOrderPolicy || (exports.ModifyOrderPolicy = ModifyOrderPolicy = {}));\nexports.DefaultOrderParams = {\n    orderType: OrderType.MARKET,\n    marketType: MarketType.PERP,\n    userOrderId: 0,\n    direction: PositionDirection.LONG,\n    baseAssetAmount: numericConstants_1.ZERO,\n    price: numericConstants_1.ZERO,\n    marketIndex: 0,\n    reduceOnly: false,\n    postOnly: PostOnlyParams.NONE,\n    bitFlags: 0,\n    triggerPrice: null,\n    triggerCondition: OrderTriggerCondition.ABOVE,\n    oraclePriceOffset: null,\n    auctionDuration: null,\n    maxTs: null,\n    auctionStartPrice: null,\n    auctionEndPrice: null,\n};\nvar ReferrerStatus;\n(function (ReferrerStatus) {\n    ReferrerStatus[ReferrerStatus[\"IsReferrer\"] = 1] = \"IsReferrer\";\n    ReferrerStatus[ReferrerStatus[\"IsReferred\"] = 2] = \"IsReferred\";\n})(ReferrerStatus || (exports.ReferrerStatus = ReferrerStatus = {}));\nvar FuelOverflowStatus;\n(function (FuelOverflowStatus) {\n    FuelOverflowStatus[FuelOverflowStatus[\"Exists\"] = 1] = \"Exists\";\n})(FuelOverflowStatus || (exports.FuelOverflowStatus = FuelOverflowStatus = {}));\nvar PlaceAndTakeOrderSuccessCondition;\n(function (PlaceAndTakeOrderSuccessCondition) {\n    PlaceAndTakeOrderSuccessCondition[PlaceAndTakeOrderSuccessCondition[\"PartialFill\"] = 1] = \"PartialFill\";\n    PlaceAndTakeOrderSuccessCondition[PlaceAndTakeOrderSuccessCondition[\"FullFill\"] = 2] = \"FullFill\";\n})(PlaceAndTakeOrderSuccessCondition || (exports.PlaceAndTakeOrderSuccessCondition = PlaceAndTakeOrderSuccessCondition = {}));\nclass SwapReduceOnly {\n}\nexports.SwapReduceOnly = SwapReduceOnly;\nSwapReduceOnly.In = { in: {} };\nSwapReduceOnly.Out = { out: {} };\nvar OracleValidity;\n(function (OracleValidity) {\n    OracleValidity[OracleValidity[\"NonPositive\"] = 0] = \"NonPositive\";\n    OracleValidity[OracleValidity[\"TooVolatile\"] = 1] = \"TooVolatile\";\n    OracleValidity[OracleValidity[\"TooUncertain\"] = 2] = \"TooUncertain\";\n    OracleValidity[OracleValidity[\"StaleForMargin\"] = 3] = \"StaleForMargin\";\n    OracleValidity[OracleValidity[\"InsufficientDataPoints\"] = 4] = \"InsufficientDataPoints\";\n    OracleValidity[OracleValidity[\"StaleForAMMLowRisk\"] = 5] = \"StaleForAMMLowRisk\";\n    OracleValidity[OracleValidity[\"isStaleForAmmImmediate\"] = 6] = \"isStaleForAmmImmediate\";\n    OracleValidity[OracleValidity[\"Valid\"] = 7] = \"Valid\";\n})(OracleValidity || (exports.OracleValidity = OracleValidity = {}));\nvar ConstituentStatus;\n(function (ConstituentStatus) {\n    ConstituentStatus[ConstituentStatus[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    ConstituentStatus[ConstituentStatus[\"REDUCE_ONLY\"] = 1] = \"REDUCE_ONLY\";\n    ConstituentStatus[ConstituentStatus[\"DECOMMISSIONED\"] = 2] = \"DECOMMISSIONED\";\n})(ConstituentStatus || (exports.ConstituentStatus = ConstituentStatus = {}));\nvar ConstituentLpOperation;\n(function (ConstituentLpOperation) {\n    ConstituentLpOperation[ConstituentLpOperation[\"Swap\"] = 1] = \"Swap\";\n    ConstituentLpOperation[ConstituentLpOperation[\"Deposit\"] = 2] = \"Deposit\";\n    ConstituentLpOperation[ConstituentLpOperation[\"Withdraw\"] = 4] = \"Withdraw\";\n})(ConstituentLpOperation || (exports.ConstituentLpOperation = ConstituentLpOperation = {}));\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3841, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/oracleId.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getPublicKeyAndSourceFromOracleId = exports.getOracleId = exports.getOracleSourceFromNum = exports.getOracleSourceNum = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst types_1 = require(\"../types\");\nfunction getOracleSourceNum(source) {\n    if ('pyth' in source)\n        return types_1.OracleSourceNum.PYTH;\n    if ('pyth1K' in source)\n        return types_1.OracleSourceNum.PYTH_1K;\n    if ('pyth1M' in source)\n        return types_1.OracleSourceNum.PYTH_1M;\n    if ('pythPull' in source)\n        return types_1.OracleSourceNum.PYTH_PULL;\n    if ('pyth1KPull' in source)\n        return types_1.OracleSourceNum.PYTH_1K_PULL;\n    if ('pyth1MPull' in source)\n        return types_1.OracleSourceNum.PYTH_1M_PULL;\n    if ('switchboard' in source)\n        return types_1.OracleSourceNum.SWITCHBOARD;\n    if ('quoteAsset' in source)\n        return types_1.OracleSourceNum.QUOTE_ASSET;\n    if ('pythStableCoin' in source)\n        return types_1.OracleSourceNum.PYTH_STABLE_COIN;\n    if ('pythStableCoinPull' in source)\n        return types_1.OracleSourceNum.PYTH_STABLE_COIN_PULL;\n    if ('prelaunch' in source)\n        return types_1.OracleSourceNum.PRELAUNCH;\n    if ('switchboardOnDemand' in source)\n        return types_1.OracleSourceNum.SWITCHBOARD_ON_DEMAND;\n    if ('pythLazer' in source)\n        return types_1.OracleSourceNum.PYTH_LAZER;\n    if ('pythLazer1K' in source)\n        return types_1.OracleSourceNum.PYTH_LAZER_1K;\n    if ('pythLazer1M' in source)\n        return types_1.OracleSourceNum.PYTH_LAZER_1M;\n    if ('pythLazerStableCoin' in source)\n        return types_1.OracleSourceNum.PYTH_LAZER_STABLE_COIN;\n    throw new Error('Invalid oracle source');\n}\nexports.getOracleSourceNum = getOracleSourceNum;\nfunction getOracleSourceFromNum(sourceNum) {\n    if (sourceNum === types_1.OracleSourceNum.PYTH)\n        return 'pyth';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_1K)\n        return 'pyth1K';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_1M)\n        return 'pyth1M';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_PULL)\n        return 'pythPull';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_1K_PULL)\n        return 'pyth1KPull';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_1M_PULL)\n        return 'pyth1MPull';\n    if (sourceNum === types_1.OracleSourceNum.SWITCHBOARD)\n        return 'switchboard';\n    if (sourceNum === types_1.OracleSourceNum.QUOTE_ASSET)\n        return 'quoteAsset';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_STABLE_COIN)\n        return 'pythStableCoin';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_STABLE_COIN_PULL)\n        return 'pythStableCoinPull';\n    if (sourceNum === types_1.OracleSourceNum.PRELAUNCH)\n        return 'prelaunch';\n    if (sourceNum === types_1.OracleSourceNum.SWITCHBOARD_ON_DEMAND)\n        return 'switchboardOnDemand';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_LAZER)\n        return 'pythLazer';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_LAZER_1K)\n        return 'pythLazer1K';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_LAZER_1M)\n        return 'pythLazer1M';\n    if (sourceNum === types_1.OracleSourceNum.PYTH_LAZER_STABLE_COIN)\n        return 'pythLazerStableCoin';\n    throw new Error('Invalid oracle source');\n}\nexports.getOracleSourceFromNum = getOracleSourceFromNum;\nfunction getOracleId(publicKey, source) {\n    return `${publicKey.toBase58()}-${getOracleSourceNum(source)}`;\n}\nexports.getOracleId = getOracleId;\nfunction getPublicKeyAndSourceFromOracleId(oracleId) {\n    const [publicKey, source] = oracleId.split('-');\n    return {\n        publicKey: new web3_js_1.PublicKey(publicKey),\n        source: getOracleSourceFromNum(parseInt(source)),\n    };\n}\nexports.getPublicKeyAndSourceFromOracleId = getPublicKeyAndSourceFromOracleId;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3903, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 3910, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/pythClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PythClient = void 0;\nconst client_1 = require(\"@pythnetwork/client\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nclass PythClient {\n    constructor(connection, multiple = numericConstants_1.ONE, stableCoin = false) {\n        this.connection = connection;\n        this.multiple = multiple;\n        this.stableCoin = stableCoin;\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const priceData = (0, client_1.parsePriceData)(buffer);\n        const confidence = convertPythPrice(priceData.confidence, priceData.exponent, this.multiple);\n        const minPublishers = Math.min(priceData.numComponentPrices, 3);\n        let price = convertPythPrice(priceData.aggregate.price, priceData.exponent, this.multiple);\n        if (this.stableCoin) {\n            price = getStableCoinPrice(price, confidence);\n        }\n        return {\n            price,\n            slot: new anchor_1.BN(priceData.lastSlot.toString()),\n            confidence,\n            twap: convertPythPrice(priceData.twap.value, priceData.exponent, this.multiple),\n            twapConfidence: convertPythPrice(priceData.twac.value, priceData.exponent, this.multiple),\n            hasSufficientNumberOfDataPoints: priceData.numQuoters >= minPublishers,\n        };\n    }\n}\nexports.PythClient = PythClient;\nfunction convertPythPrice(price, exponent, multiple) {\n    exponent = Math.abs(exponent);\n    const pythPrecision = numericConstants_1.TEN.pow(new anchor_1.BN(exponent).abs()).div(multiple);\n    return new anchor_1.BN(price * Math.pow(10, exponent))\n        .mul(numericConstants_1.PRICE_PRECISION)\n        .div(pythPrecision);\n}\nconst fiveBPS = new anchor_1.BN(500);\nfunction getStableCoinPrice(price, confidence) {\n    if (price.sub(numericConstants_1.QUOTE_PRECISION).abs().lt(anchor_1.BN.min(confidence, fiveBPS))) {\n        return numericConstants_1.QUOTE_PRECISION;\n    }\n    else {\n        return price;\n    }\n}\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,UAAU,GAAG,KAAK;AAC1B,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,UAAU,EAAE,WAAW,mBAAmB,GAAG,EAAE,aAAa,KAAK,CAAE;QAC3E,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,UAAU,GAAG;IACtB;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,YAAY,CAAC,GAAG,SAAS,cAAc,EAAE;QAC/C,MAAM,aAAa,iBAAiB,UAAU,UAAU,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QAC3F,MAAM,gBAAgB,KAAK,GAAG,CAAC,UAAU,kBAAkB,EAAE;QAC7D,IAAI,QAAQ,iBAAiB,UAAU,SAAS,CAAC,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QACzF,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,QAAQ,mBAAmB,OAAO;QACtC;QACA,OAAO;YACH;YACA,MAAM,IAAI,SAAS,EAAE,CAAC,UAAU,QAAQ,CAAC,QAAQ;YACjD;YACA,MAAM,iBAAiB,UAAU,IAAI,CAAC,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YAC9E,gBAAgB,iBAAiB,UAAU,IAAI,CAAC,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACxF,iCAAiC,UAAU,UAAU,IAAI;QAC7D;IACJ;AACJ;AACA,QAAQ,UAAU,GAAG;AACrB,SAAS,iBAAiB,KAAK,EAAE,QAAQ,EAAE,QAAQ;IAC/C,WAAW,KAAK,GAAG,CAAC;IACpB,MAAM,gBAAgB,mBAAmB,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,EAAE,CAAC,UAAU,GAAG,IAAI,GAAG,CAAC;IACtF,OAAO,IAAI,SAAS,EAAE,CAAC,QAAQ,KAAK,GAAG,CAAC,IAAI,WACvC,GAAG,CAAC,mBAAmB,eAAe,EACtC,GAAG,CAAC;AACb;AACA,MAAM,UAAU,IAAI,SAAS,EAAE,CAAC;AAChC,SAAS,mBAAmB,KAAK,EAAE,UAAU;IACzC,IAAI,MAAM,GAAG,CAAC,mBAAmB,eAAe,EAAE,GAAG,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,YAAY,WAAW;QAC9F,OAAO,mBAAmB,eAAe;IAC7C,OACK;QACD,OAAO;IACX;AACJ","ignoreList":[0]}},
    {"offset": {"line": 3963, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/strictOraclePrice.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StrictOraclePrice = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nclass StrictOraclePrice {\n    constructor(current, twap) {\n        this.current = current;\n        this.twap = twap;\n    }\n    max() {\n        return this.twap ? anchor_1.BN.max(this.twap, this.current) : this.current;\n    }\n    min() {\n        return this.twap ? anchor_1.BN.min(this.twap, this.current) : this.current;\n    }\n}\nexports.StrictOraclePrice = StrictOraclePrice;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,KAAK;AACjC,MAAM;AACN,MAAM;IACF,YAAY,OAAO,EAAE,IAAI,CAAE;QACvB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,IAAI,GAAG;IAChB;IACA,MAAM;QACF,OAAO,IAAI,CAAC,IAAI,GAAG,SAAS,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO;IAC9E;IACA,MAAM;QACF,OAAO,IAAI,CAAC,IAAI,GAAG,SAAS,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO;IAC9E;AACJ;AACA,QAAQ,iBAAiB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3985, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/quoteAssetOracleClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QuoteAssetOracleClient = exports.QUOTE_ORACLE_PRICE_DATA = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nexports.QUOTE_ORACLE_PRICE_DATA = {\n    price: numericConstants_1.PRICE_PRECISION,\n    slot: new anchor_1.BN(0),\n    confidence: new anchor_1.BN(1),\n    hasSufficientNumberOfDataPoints: true,\n};\nclass QuoteAssetOracleClient {\n    constructor() { }\n    async getOraclePriceData(_pricePublicKey) {\n        return Promise.resolve(exports.QUOTE_ORACLE_PRICE_DATA);\n    }\n    getOraclePriceDataFromBuffer(_buffer) {\n        return exports.QUOTE_ORACLE_PRICE_DATA;\n    }\n}\nexports.QuoteAssetOracleClient = QuoteAssetOracleClient;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,QAAQ,uBAAuB,GAAG,KAAK;AACxE,MAAM;AACN,MAAM;AACN,QAAQ,uBAAuB,GAAG;IAC9B,OAAO,mBAAmB,eAAe;IACzC,MAAM,IAAI,SAAS,EAAE,CAAC;IACtB,YAAY,IAAI,SAAS,EAAE,CAAC;IAC5B,iCAAiC;AACrC;AACA,MAAM;IACF,aAAc,CAAE;IAChB,MAAM,mBAAmB,eAAe,EAAE;QACtC,OAAO,QAAQ,OAAO,CAAC,QAAQ,uBAAuB;IAC1D;IACA,6BAA6B,OAAO,EAAE;QAClC,OAAO,QAAQ,uBAAuB;IAC1C;AACJ;AACA,QAAQ,sBAAsB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 4011, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/prelaunchOracleClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrelaunchOracleClient = void 0;\nclass PrelaunchOracleClient {\n    constructor(connection, program) {\n        this.connection = connection;\n        this.program = program;\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const prelaunchOracle = this.program.account.prelaunchOracle.coder.accounts.decodeUnchecked('PrelaunchOracle', buffer);\n        return {\n            price: prelaunchOracle.price,\n            slot: prelaunchOracle.ammLastUpdateSlot,\n            confidence: prelaunchOracle.confidence,\n            hasSufficientNumberOfDataPoints: true,\n            maxPrice: prelaunchOracle.maxPrice,\n        };\n    }\n}\nexports.PrelaunchOracleClient = PrelaunchOracleClient;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;IACF,YAAY,UAAU,EAAE,OAAO,CAAE;QAC7B,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,OAAO,GAAG;IACnB;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,kBAAkB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,mBAAmB;QAC/G,OAAO;YACH,OAAO,gBAAgB,KAAK;YAC5B,MAAM,gBAAgB,iBAAiB;YACvC,YAAY,gBAAgB,UAAU;YACtC,iCAAiC;YACjC,UAAU,gBAAgB,QAAQ;QACtC;IACJ;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 4040, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/switchboardClient.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SwitchboardClient = void 0;\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst switchboard_json_1 = __importDefault(require(\"../idl/switchboard.json\"));\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nclass SwitchboardClient {\n    constructor(connection) {\n        this.connection = connection;\n        this.coder = new anchor_1.BorshAccountsCoder(switchboard_json_1.default);\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const aggregatorAccountData = this.coder.decodeUnchecked('AggregatorAccountData', buffer);\n        const price = convertSwitchboardDecimal(aggregatorAccountData.latestConfirmedRound.result);\n        const confidence = anchor_1.BN.max(convertSwitchboardDecimal(aggregatorAccountData.latestConfirmedRound.stdDeviation), price.divn(1000));\n        const hasSufficientNumberOfDataPoints = aggregatorAccountData.latestConfirmedRound.numSuccess >=\n            aggregatorAccountData.minOracleResults;\n        const slot = aggregatorAccountData.latestConfirmedRound.roundOpenSlot;\n        return {\n            price,\n            slot,\n            confidence,\n            hasSufficientNumberOfDataPoints,\n        };\n    }\n}\nexports.SwitchboardClient = SwitchboardClient;\nfunction convertSwitchboardDecimal(switchboardDecimal) {\n    const switchboardPrecision = numericConstants_1.TEN.pow(new anchor_1.BN(switchboardDecimal.scale));\n    return switchboardDecimal.mantissa\n        .mul(numericConstants_1.PRICE_PRECISION)\n        .div(switchboardPrecision);\n}\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,KAAK;AACjC,MAAM;AACN,MAAM,qBAAqB;AAC3B,MAAM;AACN,MAAM;IACF,YAAY,UAAU,CAAE;QACpB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,SAAS,kBAAkB,CAAC,mBAAmB,OAAO;IAC3E;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,wBAAwB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,yBAAyB;QAClF,MAAM,QAAQ,0BAA0B,sBAAsB,oBAAoB,CAAC,MAAM;QACzF,MAAM,aAAa,SAAS,EAAE,CAAC,GAAG,CAAC,0BAA0B,sBAAsB,oBAAoB,CAAC,YAAY,GAAG,MAAM,IAAI,CAAC;QAClI,MAAM,kCAAkC,sBAAsB,oBAAoB,CAAC,UAAU,IACzF,sBAAsB,gBAAgB;QAC1C,MAAM,OAAO,sBAAsB,oBAAoB,CAAC,aAAa;QACrE,OAAO;YACH;YACA;YACA;YACA;QACJ;IACJ;AACJ;AACA,QAAQ,iBAAiB,GAAG;AAC5B,SAAS,0BAA0B,kBAAkB;IACjD,MAAM,uBAAuB,mBAAmB,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,EAAE,CAAC,mBAAmB,KAAK;IAChG,OAAO,mBAAmB,QAAQ,CAC7B,GAAG,CAAC,mBAAmB,eAAe,EACtC,GAAG,CAAC;AACb","ignoreList":[0]}},
    {"offset": {"line": 4084, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/pythPullClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertPythPrice = exports.PythPullClient = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst pyth_solana_receiver_1 = require(\"@pythnetwork/pyth-solana-receiver\");\nconst config_1 = require(\"../config\");\nconst wallet_1 = require(\"../wallet\");\nclass PythPullClient {\n    constructor(connection, multiple = numericConstants_1.ONE, stableCoin = false) {\n        this.connection = connection;\n        this.multiple = multiple;\n        this.stableCoin = stableCoin;\n        const provider = new anchor_1.AnchorProvider(this.connection, \n        //@ts-ignore\n        new wallet_1.Wallet(new web3_js_1.Keypair()), {\n            commitment: connection.commitment,\n        });\n        this.receiver = new anchor_1.Program(pyth_solana_receiver_1.pythSolanaReceiverIdl, config_1.DRIFT_ORACLE_RECEIVER_ID, provider);\n        this.decodeFunc =\n            this.receiver.account.priceUpdateV2.coder.accounts.decodeUnchecked.bind(this.receiver.account.priceUpdateV2.coder.accounts);\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const message = this.decodeFunc('priceUpdateV2', buffer);\n        const priceData = message.priceMessage;\n        const confidence = convertPythPrice(priceData.conf, priceData.exponent, this.multiple);\n        let price = convertPythPrice(priceData.price, priceData.exponent, this.multiple);\n        if (this.stableCoin) {\n            price = getStableCoinPrice(price, confidence);\n        }\n        return {\n            price,\n            slot: message.postedSlot,\n            confidence,\n            twap: convertPythPrice(priceData.price, priceData.exponent, this.multiple),\n            twapConfidence: convertPythPrice(priceData.price, priceData.exponent, this.multiple),\n            hasSufficientNumberOfDataPoints: true,\n            sequenceId: priceData.publishTime,\n        };\n    }\n}\nexports.PythPullClient = PythPullClient;\nfunction convertPythPrice(price, exponent, multiple) {\n    exponent = Math.abs(exponent);\n    const pythPrecision = numericConstants_1.TEN.pow(new anchor_1.BN(exponent).abs()).div(multiple);\n    return price.mul(numericConstants_1.PRICE_PRECISION).div(pythPrecision);\n}\nexports.convertPythPrice = convertPythPrice;\nconst fiveBPS = new anchor_1.BN(500);\nfunction getStableCoinPrice(price, confidence) {\n    if (price.sub(numericConstants_1.QUOTE_PRECISION).abs().lt(anchor_1.BN.min(confidence, fiveBPS))) {\n        return numericConstants_1.QUOTE_PRECISION;\n    }\n    else {\n        return price;\n    }\n}\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,gBAAgB,GAAG,QAAQ,cAAc,GAAG,KAAK;AACzD,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,UAAU,EAAE,WAAW,mBAAmB,GAAG,EAAE,aAAa,KAAK,CAAE;QAC3E,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,UAAU,GAAG;QAClB,MAAM,WAAW,IAAI,SAAS,cAAc,CAAC,IAAI,CAAC,UAAU,EAC5D,YAAY;QACZ,IAAI,SAAS,MAAM,CAAC,IAAI,UAAU,OAAO,KAAK;YAC1C,YAAY,WAAW,UAAU;QACrC;QACA,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,OAAO,CAAC,uBAAuB,qBAAqB,EAAE,SAAS,wBAAwB,EAAE;QACtH,IAAI,CAAC,UAAU,GACX,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ;IAClI;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,UAAU,IAAI,CAAC,UAAU,CAAC,iBAAiB;QACjD,MAAM,YAAY,QAAQ,YAAY;QACtC,MAAM,aAAa,iBAAiB,UAAU,IAAI,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QACrF,IAAI,QAAQ,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QAC/E,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,QAAQ,mBAAmB,OAAO;QACtC;QACA,OAAO;YACH;YACA,MAAM,QAAQ,UAAU;YACxB;YACA,MAAM,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACzE,gBAAgB,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACnF,iCAAiC;YACjC,YAAY,UAAU,WAAW;QACrC;IACJ;AACJ;AACA,QAAQ,cAAc,GAAG;AACzB,SAAS,iBAAiB,KAAK,EAAE,QAAQ,EAAE,QAAQ;IAC/C,WAAW,KAAK,GAAG,CAAC;IACpB,MAAM,gBAAgB,mBAAmB,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,EAAE,CAAC,UAAU,GAAG,IAAI,GAAG,CAAC;IACtF,OAAO,MAAM,GAAG,CAAC,mBAAmB,eAAe,EAAE,GAAG,CAAC;AAC7D;AACA,QAAQ,gBAAgB,GAAG;AAC3B,MAAM,UAAU,IAAI,SAAS,EAAE,CAAC;AAChC,SAAS,mBAAmB,KAAK,EAAE,UAAU;IACzC,IAAI,MAAM,GAAG,CAAC,mBAAmB,eAAe,EAAE,GAAG,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,YAAY,WAAW;QAC9F,OAAO,mBAAmB,eAAe;IAC7C,OACK;QACD,OAAO;IACX;AACJ","ignoreList":[0]}},
    {"offset": {"line": 4148, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/switchboardOnDemandClient.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SwitchboardOnDemandClient = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst switchboard_on_demand_30_json_1 = __importDefault(require(\"../idl/switchboard_on_demand_30.json\"));\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst anchor_30_1 = require(\"@coral-xyz/anchor-30\");\nconst SB_PRECISION_EXP = new anchor_1.BN(18);\nconst SB_PRECISION = new anchor_1.BN(10).pow(SB_PRECISION_EXP.sub(numericConstants_1.PRICE_PRECISION_EXP));\nclass SwitchboardOnDemandClient {\n    constructor(connection) {\n        this.connection = connection;\n        this.coder = new anchor_30_1.BorshAccountsCoder(switchboard_on_demand_30_json_1.default);\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const pullFeedAccountData = this.coder.decodeUnchecked('PullFeedAccountData', buffer);\n        const landedAt = pullFeedAccountData.submissions.reduce((max, s) => anchor_1.BN.max(max, s.landed_at), new anchor_1.BN(0));\n        return {\n            price: pullFeedAccountData.result.value.div(SB_PRECISION),\n            slot: landedAt,\n            confidence: pullFeedAccountData.result.range.div(SB_PRECISION),\n            hasSufficientNumberOfDataPoints: true,\n        };\n    }\n}\nexports.SwitchboardOnDemandClient = SwitchboardOnDemandClient;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,yBAAyB,GAAG,KAAK;AACzC,MAAM;AACN,MAAM,kCAAkC;AACxC,MAAM;AACN,MAAM;AACN,MAAM,mBAAmB,IAAI,SAAS,EAAE,CAAC;AACzC,MAAM,eAAe,IAAI,SAAS,EAAE,CAAC,IAAI,GAAG,CAAC,iBAAiB,GAAG,CAAC,mBAAmB,mBAAmB;AACxG,MAAM;IACF,YAAY,UAAU,CAAE;QACpB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,KAAK,GAAG,IAAI,YAAY,kBAAkB,CAAC,gCAAgC,OAAO;IAC3F;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,sBAAsB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,uBAAuB;QAC9E,MAAM,WAAW,oBAAoB,WAAW,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,SAAS,EAAE,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QACvH,OAAO;YACH,OAAO,oBAAoB,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;YAC5C,MAAM;YACN,YAAY,oBAAoB,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;YACjD,iCAAiC;QACrC;IACJ;AACJ;AACA,QAAQ,yBAAyB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 4188, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/pythLazerClient.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PythLazerClient = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst config_1 = require(\"../config\");\nconst wallet_1 = require(\"../wallet\");\nconst drift_json_1 = __importDefault(require(\"../idl/drift.json\"));\nclass PythLazerClient {\n    constructor(connection, multiple = numericConstants_1.ONE, stableCoin = false) {\n        this.connection = connection;\n        this.multiple = multiple;\n        this.stableCoin = stableCoin;\n        const provider = new anchor_1.AnchorProvider(this.connection, \n        //@ts-ignore\n        new wallet_1.Wallet(new web3_js_1.Keypair()), {\n            commitment: connection.commitment,\n        });\n        this.program = new anchor_1.Program(drift_json_1.default, new web3_js_1.PublicKey(config_1.DRIFT_PROGRAM_ID), provider);\n        this.decodeFunc =\n            this.program.account.pythLazerOracle.coder.accounts.decodeUnchecked.bind(this.program.account.pythLazerOracle.coder.accounts);\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const priceData = this.decodeFunc('PythLazerOracle', buffer);\n        const confidence = convertPythPrice(priceData.conf, priceData.exponent, this.multiple);\n        let price = convertPythPrice(priceData.price, priceData.exponent, this.multiple);\n        if (this.stableCoin) {\n            price = getStableCoinPrice(price, confidence);\n        }\n        return {\n            price,\n            slot: priceData.postedSlot,\n            confidence,\n            twap: convertPythPrice(priceData.price, priceData.exponent, this.multiple),\n            twapConfidence: convertPythPrice(priceData.price, priceData.exponent, this.multiple),\n            hasSufficientNumberOfDataPoints: true,\n            sequenceId: priceData.publishTime,\n        };\n    }\n}\nexports.PythLazerClient = PythLazerClient;\nfunction convertPythPrice(price, exponent, multiple) {\n    exponent = Math.abs(exponent);\n    const pythPrecision = numericConstants_1.TEN.pow(new anchor_1.BN(exponent).abs()).div(multiple);\n    return price.mul(numericConstants_1.PRICE_PRECISION).div(pythPrecision);\n}\nconst fiveBPS = new anchor_1.BN(500);\nfunction getStableCoinPrice(price, confidence) {\n    if (price.sub(numericConstants_1.QUOTE_PRECISION).abs().lt(anchor_1.BN.min(confidence, fiveBPS))) {\n        return numericConstants_1.QUOTE_PRECISION;\n    }\n    else {\n        return price;\n    }\n}\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,eAAe,GAAG,KAAK;AAC/B,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,eAAe;AACrB,MAAM;IACF,YAAY,UAAU,EAAE,WAAW,mBAAmB,GAAG,EAAE,aAAa,KAAK,CAAE;QAC3E,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,UAAU,GAAG;QAClB,MAAM,WAAW,IAAI,SAAS,cAAc,CAAC,IAAI,CAAC,UAAU,EAC5D,YAAY;QACZ,IAAI,SAAS,MAAM,CAAC,IAAI,UAAU,OAAO,KAAK;YAC1C,YAAY,WAAW,UAAU;QACrC;QACA,IAAI,CAAC,OAAO,GAAG,IAAI,SAAS,OAAO,CAAC,aAAa,OAAO,EAAE,IAAI,UAAU,SAAS,CAAC,SAAS,gBAAgB,GAAG;QAC9G,IAAI,CAAC,UAAU,GACX,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ;IACpI;IACA,MAAM,mBAAmB,cAAc,EAAE;QACrC,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACzD,OAAO,IAAI,CAAC,4BAA4B,CAAC,YAAY,IAAI;IAC7D;IACA,6BAA6B,MAAM,EAAE;QACjC,MAAM,YAAY,IAAI,CAAC,UAAU,CAAC,mBAAmB;QACrD,MAAM,aAAa,iBAAiB,UAAU,IAAI,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QACrF,IAAI,QAAQ,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;QAC/E,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,QAAQ,mBAAmB,OAAO;QACtC;QACA,OAAO;YACH;YACA,MAAM,UAAU,UAAU;YAC1B;YACA,MAAM,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACzE,gBAAgB,iBAAiB,UAAU,KAAK,EAAE,UAAU,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACnF,iCAAiC;YACjC,YAAY,UAAU,WAAW;QACrC;IACJ;AACJ;AACA,QAAQ,eAAe,GAAG;AAC1B,SAAS,iBAAiB,KAAK,EAAE,QAAQ,EAAE,QAAQ;IAC/C,WAAW,KAAK,GAAG,CAAC;IACpB,MAAM,gBAAgB,mBAAmB,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,EAAE,CAAC,UAAU,GAAG,IAAI,GAAG,CAAC;IACtF,OAAO,MAAM,GAAG,CAAC,mBAAmB,eAAe,EAAE,GAAG,CAAC;AAC7D;AACA,MAAM,UAAU,IAAI,SAAS,EAAE,CAAC;AAChC,SAAS,mBAAmB,KAAK,EAAE,UAAU;IACzC,IAAI,MAAM,GAAG,CAAC,mBAAmB,eAAe,EAAE,GAAG,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,YAAY,WAAW;QAC9F,OAAO,mBAAmB,eAAe;IAC7C,OACK;QACD,OAAO;IACX;AACJ","ignoreList":[0]}},
    {"offset": {"line": 4255, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/oracleClientCache.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OracleClientCache = void 0;\nconst oracleClient_1 = require(\"../factory/oracleClient\");\nclass OracleClientCache {\n    constructor() {\n        this.cache = new Map();\n    }\n    get(oracleSource, connection, program) {\n        const key = Object.keys(oracleSource)[0];\n        if (this.cache.has(key)) {\n            return this.cache.get(key);\n        }\n        const client = (0, oracleClient_1.getOracleClient)(oracleSource, connection, program);\n        this.cache.set(key, client);\n        return client;\n    }\n}\nexports.OracleClientCache = OracleClientCache;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,KAAK;AACjC,MAAM;AACN,MAAM;IACF,aAAc;QACV,IAAI,CAAC,KAAK,GAAG,IAAI;IACrB;IACA,IAAI,YAAY,EAAE,UAAU,EAAE,OAAO,EAAE;QACnC,MAAM,MAAM,OAAO,IAAI,CAAC,aAAa,CAAC,EAAE;QACxC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM;YACrB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;QAC1B;QACA,MAAM,SAAS,CAAC,GAAG,eAAe,eAAe,EAAE,cAAc,YAAY;QAC7E,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK;QACpB,OAAO;IACX;AACJ;AACA,QAAQ,iBAAiB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 4279, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/oracles/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOracleConfidenceFromMMOracleData = void 0;\nfunction getOracleConfidenceFromMMOracleData(mmOraclePrice, oraclePriceData) {\n    const mmOracleDiffPremium = mmOraclePrice.sub(oraclePriceData.price).abs();\n    return oraclePriceData.confidence.add(mmOracleDiffPremium);\n}\nexports.getOracleConfidenceFromMMOracleData = getOracleConfidenceFromMMOracleData;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,mCAAmC,GAAG,KAAK;AACnD,SAAS,oCAAoC,aAAa,EAAE,eAAe;IACvE,MAAM,sBAAsB,cAAc,GAAG,CAAC,gBAAgB,KAAK,EAAE,GAAG;IACxE,OAAO,gBAAgB,UAAU,CAAC,GAAG,CAAC;AAC1C;AACA,QAAQ,mCAAmC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 4292, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/config.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAllMarketAndOracles = exports.getMarketsAndOraclesForSubscription = exports.initialize = exports.getConfig = exports.configs = exports.DEFAULT_CONFIRMATION_OPTS = exports.PYTH_LAZER_STORAGE_ACCOUNT_KEY = exports.PTYH_LAZER_PROGRAM_ID = exports.DRIFT_ORACLE_RECEIVER_ID = exports.DRIFT_PROGRAM_ID = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst perpMarkets_1 = require(\"./constants/perpMarkets\");\nconst spotMarkets_1 = require(\"./constants/spotMarkets\");\nconst on_demand_1 = require(\"@switchboard-xyz/on-demand\");\nconst oracleId_1 = require(\"./oracles/oracleId\");\nexports.DRIFT_PROGRAM_ID = 'dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH';\nexports.DRIFT_ORACLE_RECEIVER_ID = 'G6EoTTTgpkNBtVXo96EQp2m6uwwVh2Kt6YidjkmQqoha';\nexports.PTYH_LAZER_PROGRAM_ID = 'pytd2yyk641x7ak7mkaasSJVXh6YYZnC7wTmtgAyxPt';\nexports.PYTH_LAZER_STORAGE_ACCOUNT_KEY = new web3_js_1.PublicKey('3rdJbqfnagQ4yx9HXJViD4zc4xpiSqmFsKpPuSCQVyQL');\nexports.DEFAULT_CONFIRMATION_OPTS = {\n    preflightCommitment: 'confirmed',\n    commitment: 'confirmed',\n};\nexports.configs = {\n    devnet: {\n        ENV: 'devnet',\n        PYTH_ORACLE_MAPPING_ADDRESS: 'BmA9Z6FjioHJPpjT39QazZyhDRUdZy2ezwx4GiDdE2u2',\n        DRIFT_PROGRAM_ID: exports.DRIFT_PROGRAM_ID,\n        JIT_PROXY_PROGRAM_ID: 'J1TnP8zvVxbtF5KFp5xRmWuvG9McnhzmBd9XGfCyuxFP',\n        USDC_MINT_ADDRESS: '8zGuJQqwhZafTah7Uc7Z4tXRnguqkn5KLFAP8oV6PHe2',\n        SERUM_V3: 'DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY',\n        PHOENIX: 'PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY',\n        OPENBOOK: 'opnb2LAfJYbRMAHHvqjCwQxanZn7ReEHp1k81EohpZb',\n        V2_ALPHA_TICKET_MINT_ADDRESS: 'DeEiGWfCMP9psnLGkxGrBBMEAW5Jv8bBGMN8DCtFRCyB',\n        PERP_MARKETS: perpMarkets_1.DevnetPerpMarkets,\n        SPOT_MARKETS: spotMarkets_1.DevnetSpotMarkets,\n        /** @deprecated use MARKET_LOOKUP_TABLES */\n        MARKET_LOOKUP_TABLE: 'FaMS3U4uBojvGn5FSDEPimddcXsCfwkKsFgMVVnDdxGb',\n        MARKET_LOOKUP_TABLES: ['FaMS3U4uBojvGn5FSDEPimddcXsCfwkKsFgMVVnDdxGb'],\n        DRIFT_ORACLE_RECEIVER_ID: exports.DRIFT_ORACLE_RECEIVER_ID,\n        SB_ON_DEMAND_PID: on_demand_1.ON_DEMAND_DEVNET_PID,\n    },\n    'mainnet-beta': {\n        ENV: 'mainnet-beta',\n        PYTH_ORACLE_MAPPING_ADDRESS: 'AHtgzX45WTKfkPG53L6WYhGEXwQkN1BVknET3sVsLL8J',\n        DRIFT_PROGRAM_ID: exports.DRIFT_PROGRAM_ID,\n        JIT_PROXY_PROGRAM_ID: 'J1TnP8zvVxbtF5KFp5xRmWuvG9McnhzmBd9XGfCyuxFP',\n        USDC_MINT_ADDRESS: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n        SERUM_V3: 'srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX',\n        PHOENIX: 'PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY',\n        OPENBOOK: 'opnb2LAfJYbRMAHHvqjCwQxanZn7ReEHp1k81EohpZb',\n        V2_ALPHA_TICKET_MINT_ADDRESS: 'Cmvhycb6LQvvzaShGw4iDHRLzeSSryioAsU98DSSkMNa',\n        PERP_MARKETS: perpMarkets_1.MainnetPerpMarkets,\n        SPOT_MARKETS: spotMarkets_1.MainnetSpotMarkets,\n        /** @deprecated use MARKET_LOOKUP_TABLES */\n        MARKET_LOOKUP_TABLE: 'Fpys8GRa5RBWfyeN7AaDUwFGD1zkDCA4z3t4CJLV8dfL',\n        MARKET_LOOKUP_TABLES: [\n            'Fpys8GRa5RBWfyeN7AaDUwFGD1zkDCA4z3t4CJLV8dfL',\n            'EiWSskK5HXnBTptiS5DH6gpAJRVNQ3cAhTKBGaiaysAb',\n        ],\n        SERUM_LOOKUP_TABLE: 'GPZkp76cJtNL2mphCvT6FXkJCVPpouidnacckR6rzKDN',\n        DRIFT_ORACLE_RECEIVER_ID: exports.DRIFT_ORACLE_RECEIVER_ID,\n        SB_ON_DEMAND_PID: on_demand_1.ON_DEMAND_MAINNET_PID,\n    },\n};\nlet currentConfig = exports.configs.devnet;\nconst getConfig = () => currentConfig;\nexports.getConfig = getConfig;\n/**\n * Allows customization of the SDK's environment and endpoints. You can pass individual settings to override the settings with your own presets.\n *\n * Defaults to master environment if you don't use this function.\n * @param props\n * @returns\n */\nconst initialize = (props) => {\n    var _a, _b;\n    //@ts-ignore\n    if (props.env === 'master')\n        return { ...exports.configs['devnet'], ...((_a = props.overrideEnv) !== null && _a !== void 0 ? _a : {}) };\n    currentConfig = { ...exports.configs[props.env], ...((_b = props.overrideEnv) !== null && _b !== void 0 ? _b : {}) };\n    return currentConfig;\n};\nexports.initialize = initialize;\nfunction getMarketsAndOraclesForSubscription(env, perpMarkets, spotMarkets) {\n    const perpMarketsToUse = (perpMarkets === null || perpMarkets === void 0 ? void 0 : perpMarkets.length) > 0 ? perpMarkets : perpMarkets_1.PerpMarkets[env];\n    const spotMarketsToUse = (spotMarkets === null || spotMarkets === void 0 ? void 0 : spotMarkets.length) > 0 ? spotMarkets : spotMarkets_1.SpotMarkets[env];\n    const perpMarketIndexes = [];\n    const spotMarketIndexes = [];\n    const oracleInfos = new Map();\n    for (const market of perpMarketsToUse) {\n        perpMarketIndexes.push(market.marketIndex);\n        oracleInfos.set((0, oracleId_1.getOracleId)(market.oracle, market.oracleSource), {\n            publicKey: market.oracle,\n            source: market.oracleSource,\n        });\n    }\n    for (const spotMarket of spotMarketsToUse) {\n        spotMarketIndexes.push(spotMarket.marketIndex);\n        oracleInfos.set((0, oracleId_1.getOracleId)(spotMarket.oracle, spotMarket.oracleSource), {\n            publicKey: spotMarket.oracle,\n            source: spotMarket.oracleSource,\n        });\n    }\n    return {\n        perpMarketIndexes: perpMarketIndexes,\n        spotMarketIndexes: spotMarketIndexes,\n        oracleInfos: Array.from(oracleInfos.values()),\n    };\n}\nexports.getMarketsAndOraclesForSubscription = getMarketsAndOraclesForSubscription;\nasync function findAllMarketAndOracles(program) {\n    const perpMarketIndexes = [];\n    const spotMarketIndexes = [];\n    const oracleInfos = new Map();\n    const perpMarketProgramAccounts = (await program.account.perpMarket.all());\n    const spotMarketProgramAccounts = (await program.account.spotMarket.all());\n    for (const perpMarketProgramAccount of perpMarketProgramAccounts) {\n        const perpMarket = perpMarketProgramAccount.account;\n        perpMarketIndexes.push(perpMarket.marketIndex);\n        oracleInfos.set((0, oracleId_1.getOracleId)(perpMarket.amm.oracle, perpMarket.amm.oracleSource), {\n            publicKey: perpMarket.amm.oracle,\n            source: perpMarket.amm.oracleSource,\n        });\n    }\n    for (const spotMarketProgramAccount of spotMarketProgramAccounts) {\n        const spotMarket = spotMarketProgramAccount.account;\n        spotMarketIndexes.push(spotMarket.marketIndex);\n        oracleInfos.set((0, oracleId_1.getOracleId)(spotMarket.oracle, spotMarket.oracleSource), {\n            publicKey: spotMarket.oracle,\n            source: spotMarket.oracleSource,\n        });\n    }\n    return {\n        perpMarketIndexes,\n        perpMarketAccounts: perpMarketProgramAccounts.map((account) => account.account),\n        spotMarketIndexes,\n        spotMarketAccounts: spotMarketProgramAccounts.map((account) => account.account),\n        oracleInfos: Array.from(oracleInfos.values()),\n    };\n}\nexports.findAllMarketAndOracles = findAllMarketAndOracles;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4436, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tokenFaucet.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenFaucet = void 0;\nconst anchor = __importStar(require(\"@coral-xyz/anchor\"));\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst spl_token_1 = require(\"@solana/spl-token\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst token_faucet_json_1 = __importDefault(require(\"./idl/token_faucet.json\"));\nconst config_1 = require(\"./config\");\nclass TokenFaucet {\n    constructor(connection, wallet, programId, mint, opts, context) {\n        this.connection = connection;\n        this.context = context;\n        this.wallet = wallet;\n        this.opts = opts || config_1.DEFAULT_CONFIRMATION_OPTS;\n        // @ts-ignore\n        const provider = new anchor_1.AnchorProvider(context ? context.connection.toConnection() : this.connection, \n        // @ts-ignore\n        wallet, this.opts);\n        this.provider = provider;\n        this.program = new anchor_1.Program(token_faucet_json_1.default, programId, provider);\n        this.mint = mint;\n    }\n    async getFaucetConfigPublicKeyAndNonce() {\n        return anchor.web3.PublicKey.findProgramAddress([\n            Buffer.from(anchor.utils.bytes.utf8.encode('faucet_config')),\n            this.mint.toBuffer(),\n        ], this.program.programId);\n    }\n    async getMintAuthority() {\n        return (await anchor.web3.PublicKey.findProgramAddress([\n            Buffer.from(anchor.utils.bytes.utf8.encode('mint_authority')),\n            this.mint.toBuffer(),\n        ], this.program.programId))[0];\n    }\n    async getFaucetConfigPublicKey() {\n        return (await this.getFaucetConfigPublicKeyAndNonce())[0];\n    }\n    async initialize() {\n        const [faucetConfigPublicKey] = await this.getFaucetConfigPublicKeyAndNonce();\n        const ix = this.program.instruction.initialize({\n            accounts: {\n                faucetConfig: faucetConfigPublicKey,\n                admin: this.wallet.publicKey,\n                mintAccount: this.mint,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n        });\n        const tx = new web3_js_1.Transaction().add(ix);\n        const txSig = await this.context.sendTransaction(tx);\n        return txSig;\n    }\n    async fetchState() {\n        return await this.program.account.faucetConfig.fetch(await this.getFaucetConfigPublicKey());\n    }\n    async mintToUserIx(userTokenAccount, amount) {\n        return this.program.instruction.mintToUser(amount, {\n            accounts: {\n                faucetConfig: await this.getFaucetConfigPublicKey(),\n                mintAccount: this.mint,\n                userTokenAccount,\n                mintAuthority: await this.getMintAuthority(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n        });\n    }\n    async mintToUser(userTokenAccount, amount) {\n        const mintIx = await this.mintToUserIx(userTokenAccount, amount);\n        const tx = new web3_js_1.Transaction().add(mintIx);\n        if (this.context) {\n            return await this.context.sendTransaction(tx);\n        }\n        else {\n            return await this.program.provider.sendAndConfirm(tx, [], this.opts);\n        }\n    }\n    async transferMintAuthority() {\n        if (this.context) {\n            const ix = this.program.instruction.transferMintAuthority({\n                accounts: {\n                    faucetConfig: await this.getFaucetConfigPublicKey(),\n                    mintAccount: this.mint,\n                    mintAuthority: await this.getMintAuthority(),\n                    tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                    admin: this.wallet.publicKey,\n                },\n            });\n            const tx = new web3_js_1.Transaction().add(ix);\n            const txSig = await this.context.sendTransaction(tx);\n            return txSig;\n        }\n        return await this.program.rpc.transferMintAuthority({\n            accounts: {\n                faucetConfig: await this.getFaucetConfigPublicKey(),\n                mintAccount: this.mint,\n                mintAuthority: await this.getMintAuthority(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                admin: this.wallet.publicKey,\n            },\n        });\n    }\n    async createAssociatedTokenAccountAndMintTo(userPublicKey, amount) {\n        const tx = new web3_js_1.Transaction();\n        const [associatedTokenPublicKey, createAssociatedAccountIx, mintToTx] = await this.createAssociatedTokenAccountAndMintToInstructions(userPublicKey, amount);\n        let associatedTokenAccountExists = false;\n        try {\n            const assosciatedTokenAccount = await this.context.connection.getAccountInfo(associatedTokenPublicKey);\n            associatedTokenAccountExists = !!assosciatedTokenAccount;\n        }\n        catch (e) {\n            // token account doesn't exist\n            associatedTokenAccountExists = false;\n        }\n        const skipAccountCreation = associatedTokenAccountExists;\n        if (!skipAccountCreation)\n            tx.add(createAssociatedAccountIx);\n        tx.add(mintToTx);\n        let txSig;\n        if (this.context) {\n            txSig = await this.context.sendTransaction(tx);\n        }\n        else {\n            txSig = await this.program.provider.sendAndConfirm(tx, [], this.opts);\n        }\n        return [associatedTokenPublicKey, txSig];\n    }\n    async createAssociatedTokenAccountAndMintToInstructions(userPublicKey, amount) {\n        const state = await this.fetchState();\n        const associateTokenPublicKey = await this.getAssosciatedMockUSDMintAddress({ userPubKey: userPublicKey });\n        const createAssociatedAccountIx = (0, spl_token_1.createAssociatedTokenAccountInstruction)(this.wallet.publicKey, associateTokenPublicKey, userPublicKey, state.mint);\n        const mintToIx = await this.mintToUserIx(associateTokenPublicKey, amount);\n        return [associateTokenPublicKey, createAssociatedAccountIx, mintToIx];\n    }\n    async getAssosciatedMockUSDMintAddress(props) {\n        const state = await this.fetchState();\n        return (0, spl_token_1.getAssociatedTokenAddress)(state.mint, props.userPubKey);\n    }\n    async getTokenAccountInfo(props) {\n        const associatedKey = await this.getAssosciatedMockUSDMintAddress(props);\n        if (this.context) {\n            return await this.context.connection.getTokenAccount(associatedKey);\n        }\n        return await (0, spl_token_1.getAccount)(this.connection, associatedKey);\n    }\n    async subscribeToTokenAccount(props) {\n        try {\n            const tokenAccountKey = await this.getAssosciatedMockUSDMintAddress(props);\n            props.callback(await this.getTokenAccountInfo(props));\n            // Couldn't find a way to do it using anchor framework subscription, someone on serum discord recommended this way\n            this.context.connection.onAccountChange(tokenAccountKey, async (_accountInfo /* accountInfo is a buffer which we don't know how to deserialize */) => {\n                props.callback(await this.getTokenAccountInfo(props));\n            });\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    }\n}\nexports.TokenFaucet = TokenFaucet;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4644, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/addresses/pda.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getLpPoolTokenTokenAccountPublicKey = exports.getConstituentCorrelationsPublicKey = exports.getAmmCachePublicKey = exports.getConstituentVaultPublicKey = exports.getConstituentPublicKey = exports.getConstituentTargetBasePublicKey = exports.getAmmConstituentMappingPublicKey = exports.getLpPoolTokenVaultPublicKey = exports.getLpPoolPublicKey = exports.getRevenueShareEscrowAccountPublicKey = exports.getRevenueShareAccountPublicKey = exports.getIfRebalanceConfigPublicKey = exports.getProtectedMakerModeConfigPublicKey = exports.getHighLeverageModeConfigPublicKey = exports.getTokenProgramForSpotMarket = exports.getPythLazerOraclePublicKey = exports.getPythPullOraclePublicKey = exports.getPrelaunchOraclePublicKey = exports.getProtocolIfSharesTransferConfigPublicKey = exports.getReferrerNamePublicKeySync = exports.getOpenbookV2FulfillmentConfigPublicKey = exports.getPhoenixFulfillmentConfigPublicKey = exports.getSerumFulfillmentConfigPublicKey = exports.getSerumSignerPublicKey = exports.getSerumOpenOrdersPublicKey = exports.getDriftSignerPublicKey = exports.getInsuranceFundStakeAccountPublicKey = exports.getInsuranceFundVaultPublicKey = exports.getSpotMarketVaultPublicKey = exports.getSpotMarketPublicKeySync = exports.getSpotMarketPublicKey = exports.getPerpMarketPublicKeySync = exports.getPerpMarketPublicKey = exports.getSignedMsgWsDelegatesAccountPublicKey = exports.getSignedMsgUserAccountPublicKey = exports.getFuelOverflowAccountPublicKey = exports.getUserStatsAccountPublicKey = exports.getUserAccountPublicKeySync = exports.getUserAccountPublicKey = exports.getUserAccountPublicKeyAndNonce = exports.getDriftStateAccountPublicKey = exports.getDriftStateAccountPublicKeyAndNonce = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst anchor = __importStar(require(\"@coral-xyz/anchor\"));\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst spl_token_1 = require(\"@solana/spl-token\");\nconst types_1 = require(\"../types\");\nasync function getDriftStateAccountPublicKeyAndNonce(programId) {\n    return web3_js_1.PublicKey.findProgramAddress([Buffer.from(anchor.utils.bytes.utf8.encode('drift_state'))], programId);\n}\nexports.getDriftStateAccountPublicKeyAndNonce = getDriftStateAccountPublicKeyAndNonce;\nasync function getDriftStateAccountPublicKey(programId) {\n    return (await getDriftStateAccountPublicKeyAndNonce(programId))[0];\n}\nexports.getDriftStateAccountPublicKey = getDriftStateAccountPublicKey;\nasync function getUserAccountPublicKeyAndNonce(programId, authority, subAccountId = 0) {\n    return web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode('user')),\n        authority.toBuffer(),\n        new anchor.BN(subAccountId).toArrayLike(Buffer, 'le', 2),\n    ], programId);\n}\nexports.getUserAccountPublicKeyAndNonce = getUserAccountPublicKeyAndNonce;\nasync function getUserAccountPublicKey(programId, authority, subAccountId = 0) {\n    return (await getUserAccountPublicKeyAndNonce(programId, authority, subAccountId))[0];\n}\nexports.getUserAccountPublicKey = getUserAccountPublicKey;\nfunction getUserAccountPublicKeySync(programId, authority, subAccountId = 0) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('user')),\n        authority.toBuffer(),\n        new anchor.BN(subAccountId).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getUserAccountPublicKeySync = getUserAccountPublicKeySync;\nfunction getUserStatsAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('user_stats')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getUserStatsAccountPublicKey = getUserStatsAccountPublicKey;\nfunction getFuelOverflowAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('fuel_overflow')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getFuelOverflowAccountPublicKey = getFuelOverflowAccountPublicKey;\nfunction getSignedMsgUserAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('SIGNED_MSG')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getSignedMsgUserAccountPublicKey = getSignedMsgUserAccountPublicKey;\nfunction getSignedMsgWsDelegatesAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('SIGNED_MSG_WS')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getSignedMsgWsDelegatesAccountPublicKey = getSignedMsgWsDelegatesAccountPublicKey;\nasync function getPerpMarketPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode('perp_market')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId))[0];\n}\nexports.getPerpMarketPublicKey = getPerpMarketPublicKey;\nfunction getPerpMarketPublicKeySync(programId, marketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('perp_market')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getPerpMarketPublicKeySync = getPerpMarketPublicKeySync;\nasync function getSpotMarketPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode('spot_market')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId))[0];\n}\nexports.getSpotMarketPublicKey = getSpotMarketPublicKey;\nfunction getSpotMarketPublicKeySync(programId, marketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('spot_market')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getSpotMarketPublicKeySync = getSpotMarketPublicKeySync;\nasync function getSpotMarketVaultPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode('spot_market_vault')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId))[0];\n}\nexports.getSpotMarketVaultPublicKey = getSpotMarketVaultPublicKey;\nasync function getInsuranceFundVaultPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode('insurance_fund_vault')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId))[0];\n}\nexports.getInsuranceFundVaultPublicKey = getInsuranceFundVaultPublicKey;\nfunction getInsuranceFundStakeAccountPublicKey(programId, authority, marketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('insurance_fund_stake')),\n        authority.toBuffer(),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getInsuranceFundStakeAccountPublicKey = getInsuranceFundStakeAccountPublicKey;\nfunction getDriftSignerPublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([Buffer.from(anchor.utils.bytes.utf8.encode('drift_signer'))], programId)[0];\n}\nexports.getDriftSignerPublicKey = getDriftSignerPublicKey;\nfunction getSerumOpenOrdersPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('serum_open_orders')),\n        market.toBuffer(),\n    ], programId)[0];\n}\nexports.getSerumOpenOrdersPublicKey = getSerumOpenOrdersPublicKey;\nfunction getSerumSignerPublicKey(programId, market, nonce) {\n    return anchor.web3.PublicKey.createProgramAddressSync([market.toBuffer(), nonce.toArrayLike(Buffer, 'le', 8)], programId);\n}\nexports.getSerumSignerPublicKey = getSerumSignerPublicKey;\nfunction getSerumFulfillmentConfigPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('serum_fulfillment_config')),\n        market.toBuffer(),\n    ], programId)[0];\n}\nexports.getSerumFulfillmentConfigPublicKey = getSerumFulfillmentConfigPublicKey;\nfunction getPhoenixFulfillmentConfigPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('phoenix_fulfillment_config')),\n        market.toBuffer(),\n    ], programId)[0];\n}\nexports.getPhoenixFulfillmentConfigPublicKey = getPhoenixFulfillmentConfigPublicKey;\nfunction getOpenbookV2FulfillmentConfigPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('openbook_v2_fulfillment_config')),\n        market.toBuffer(),\n    ], programId)[0];\n}\nexports.getOpenbookV2FulfillmentConfigPublicKey = getOpenbookV2FulfillmentConfigPublicKey;\nfunction getReferrerNamePublicKeySync(programId, nameBuffer) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('referrer_name')),\n        Buffer.from(nameBuffer),\n    ], programId)[0];\n}\nexports.getReferrerNamePublicKeySync = getReferrerNamePublicKeySync;\nfunction getProtocolIfSharesTransferConfigPublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([Buffer.from(anchor.utils.bytes.utf8.encode('if_shares_transfer_config'))], programId)[0];\n}\nexports.getProtocolIfSharesTransferConfigPublicKey = getProtocolIfSharesTransferConfigPublicKey;\nfunction getPrelaunchOraclePublicKey(programId, marketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('prelaunch_oracle')),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getPrelaunchOraclePublicKey = getPrelaunchOraclePublicKey;\nfunction getPythPullOraclePublicKey(progarmId, feedId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('pyth_pull')),\n        Buffer.from(feedId),\n    ], progarmId)[0];\n}\nexports.getPythPullOraclePublicKey = getPythPullOraclePublicKey;\nfunction getPythLazerOraclePublicKey(progarmId, feedId) {\n    const buffer = new ArrayBuffer(4);\n    const view = new DataView(buffer);\n    view.setUint32(0, feedId, true);\n    const feedIdBytes = new Uint8Array(buffer);\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('pyth_lazer')),\n        Buffer.from(feedIdBytes),\n    ], progarmId)[0];\n}\nexports.getPythLazerOraclePublicKey = getPythLazerOraclePublicKey;\nfunction getTokenProgramForSpotMarket(spotMarketAccount) {\n    if ((spotMarketAccount.tokenProgramFlag & types_1.TokenProgramFlag.Token2022) > 0) {\n        return spl_token_1.TOKEN_2022_PROGRAM_ID;\n    }\n    return spl_token_1.TOKEN_PROGRAM_ID;\n}\nexports.getTokenProgramForSpotMarket = getTokenProgramForSpotMarket;\nfunction getHighLeverageModeConfigPublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([Buffer.from(anchor.utils.bytes.utf8.encode('high_leverage_mode_config'))], programId)[0];\n}\nexports.getHighLeverageModeConfigPublicKey = getHighLeverageModeConfigPublicKey;\nfunction getProtectedMakerModeConfigPublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('protected_maker_mode_config')),\n    ], programId)[0];\n}\nexports.getProtectedMakerModeConfigPublicKey = getProtectedMakerModeConfigPublicKey;\nfunction getIfRebalanceConfigPublicKey(programId, inMarketIndex, outMarketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('if_rebalance_config')),\n        new anchor_1.BN(inMarketIndex).toArrayLike(Buffer, 'le', 2),\n        new anchor_1.BN(outMarketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getIfRebalanceConfigPublicKey = getIfRebalanceConfigPublicKey;\nfunction getRevenueShareAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('REV_SHARE')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getRevenueShareAccountPublicKey = getRevenueShareAccountPublicKey;\nfunction getRevenueShareEscrowAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('REV_ESCROW')),\n        authority.toBuffer(),\n    ], programId)[0];\n}\nexports.getRevenueShareEscrowAccountPublicKey = getRevenueShareEscrowAccountPublicKey;\nfunction getLpPoolPublicKey(programId, lpPoolId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('lp_pool')),\n        new anchor.BN(lpPoolId).toArrayLike(Buffer, 'le', 1),\n    ], programId)[0];\n}\nexports.getLpPoolPublicKey = getLpPoolPublicKey;\nfunction getLpPoolTokenVaultPublicKey(programId, lpPool) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('LP_POOL_TOKEN_VAULT')),\n        lpPool.toBuffer(),\n    ], programId)[0];\n}\nexports.getLpPoolTokenVaultPublicKey = getLpPoolTokenVaultPublicKey;\nfunction getAmmConstituentMappingPublicKey(programId, lpPoolPublicKey) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('AMM_MAP')),\n        lpPoolPublicKey.toBuffer(),\n    ], programId)[0];\n}\nexports.getAmmConstituentMappingPublicKey = getAmmConstituentMappingPublicKey;\nfunction getConstituentTargetBasePublicKey(programId, lpPoolPublicKey) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('constituent_target_base_seed')),\n        lpPoolPublicKey.toBuffer(),\n    ], programId)[0];\n}\nexports.getConstituentTargetBasePublicKey = getConstituentTargetBasePublicKey;\nfunction getConstituentPublicKey(programId, lpPoolPublicKey, spotMarketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('CONSTITUENT')),\n        lpPoolPublicKey.toBuffer(),\n        new anchor.BN(spotMarketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getConstituentPublicKey = getConstituentPublicKey;\nfunction getConstituentVaultPublicKey(programId, lpPoolPublicKey, spotMarketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('CONSTITUENT_VAULT')),\n        lpPoolPublicKey.toBuffer(),\n        new anchor.BN(spotMarketIndex).toArrayLike(Buffer, 'le', 2),\n    ], programId)[0];\n}\nexports.getConstituentVaultPublicKey = getConstituentVaultPublicKey;\nfunction getAmmCachePublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([Buffer.from(anchor.utils.bytes.utf8.encode('amm_cache_seed'))], programId)[0];\n}\nexports.getAmmCachePublicKey = getAmmCachePublicKey;\nfunction getConstituentCorrelationsPublicKey(programId, lpPoolPublicKey) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode('constituent_correlations')),\n        lpPoolPublicKey.toBuffer(),\n    ], programId)[0];\n}\nexports.getConstituentCorrelationsPublicKey = getConstituentCorrelationsPublicKey;\nasync function getLpPoolTokenTokenAccountPublicKey(lpPoolTokenMint, authority) {\n    return await (0, spl_token_1.getAssociatedTokenAddress)(lpPoolTokenMint, authority, true);\n}\nexports.getLpPoolTokenTokenAccountPublicKey = getLpPoolTokenTokenAccountPublicKey;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4979, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/wallet.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletV2 = exports.Wallet = void 0;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nclass Wallet {\n    constructor(payer) {\n        this.payer = payer;\n    }\n    async signTransaction(tx) {\n        tx.partialSign(this.payer);\n        return tx;\n    }\n    async signVersionedTransaction(tx) {\n        tx.sign([this.payer]);\n        return tx;\n    }\n    async signAllTransactions(txs) {\n        return txs.map((t) => {\n            t.partialSign(this.payer);\n            return t;\n        });\n    }\n    async signAllVersionedTransactions(txs) {\n        return txs.map((t) => {\n            t.sign([this.payer]);\n            return t;\n        });\n    }\n    get publicKey() {\n        return this.payer.publicKey;\n    }\n}\nexports.Wallet = Wallet;\nclass WalletV2 extends Wallet {\n    constructor(payer) {\n        super(payer);\n        this.payer = payer;\n    }\n    async signMessage(message) {\n        return Buffer.from(tweetnacl_1.default.sign.detached(message, this.payer.secretKey));\n    }\n}\nexports.WalletV2 = WalletV2;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,QAAQ,GAAG,QAAQ,MAAM,GAAG,KAAK;AACzC,MAAM,cAAc;AACpB,MAAM;IACF,YAAY,KAAK,CAAE;QACf,IAAI,CAAC,KAAK,GAAG;IACjB;IACA,MAAM,gBAAgB,EAAE,EAAE;QACtB,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK;QACzB,OAAO;IACX;IACA,MAAM,yBAAyB,EAAE,EAAE;QAC/B,GAAG,IAAI,CAAC;YAAC,IAAI,CAAC,KAAK;SAAC;QACpB,OAAO;IACX;IACA,MAAM,oBAAoB,GAAG,EAAE;QAC3B,OAAO,IAAI,GAAG,CAAC,CAAC;YACZ,EAAE,WAAW,CAAC,IAAI,CAAC,KAAK;YACxB,OAAO;QACX;IACJ;IACA,MAAM,6BAA6B,GAAG,EAAE;QACpC,OAAO,IAAI,GAAG,CAAC,CAAC;YACZ,EAAE,IAAI,CAAC;gBAAC,IAAI,CAAC,KAAK;aAAC;YACnB,OAAO;QACX;IACJ;IACA,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS;IAC/B;AACJ;AACA,QAAQ,MAAM,GAAG;AACjB,MAAM,iBAAiB;IACnB,YAAY,KAAK,CAAE;QACf,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;IACjB;IACA,MAAM,YAAY,OAAO,EAAE;QACvB,OAAO,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,CAAC,KAAK,CAAC,SAAS;IACtF;AACJ;AACA,QAAQ,QAAQ,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5036, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userName.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeName = exports.encodeName = exports.DEFAULT_MARKET_NAME = exports.DEFAULT_USER_NAME = exports.MAX_NAME_LENGTH = void 0;\nexports.MAX_NAME_LENGTH = 32;\nexports.DEFAULT_USER_NAME = 'Main Account';\nexports.DEFAULT_MARKET_NAME = 'Default Market Name';\nfunction encodeName(name) {\n    if (name.length > exports.MAX_NAME_LENGTH) {\n        throw Error(`Name (${name}) longer than 32 characters`);\n    }\n    const buffer = Buffer.alloc(32);\n    buffer.fill(name);\n    buffer.fill(' ', name.length);\n    return Array(...buffer);\n}\nexports.encodeName = encodeName;\nfunction decodeName(bytes) {\n    const buffer = Buffer.from(bytes);\n    return buffer.toString('utf8').trim();\n}\nexports.decodeName = decodeName;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,UAAU,GAAG,QAAQ,UAAU,GAAG,QAAQ,mBAAmB,GAAG,QAAQ,iBAAiB,GAAG,QAAQ,eAAe,GAAG,KAAK;AACnI,QAAQ,eAAe,GAAG;AAC1B,QAAQ,iBAAiB,GAAG;AAC5B,QAAQ,mBAAmB,GAAG;AAC9B,SAAS,WAAW,IAAI;IACpB,IAAI,KAAK,MAAM,GAAG,QAAQ,eAAe,EAAE;QACvC,MAAM,MAAM,CAAC,MAAM,EAAE,KAAK,2BAA2B,CAAC;IAC1D;IACA,MAAM,SAAS,OAAO,KAAK,CAAC;IAC5B,OAAO,IAAI,CAAC;IACZ,OAAO,IAAI,CAAC,KAAK,KAAK,MAAM;IAC5B,OAAO,SAAS;AACpB;AACA,QAAQ,UAAU,GAAG;AACrB,SAAS,WAAW,KAAK;IACrB,MAAM,SAAS,OAAO,IAAI,CAAC;IAC3B,OAAO,OAAO,QAAQ,CAAC,QAAQ,IAAI;AACvC;AACA,QAAQ,UAAU,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5062, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/memcmp.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConstituentLpPoolFilter = exports.getConstituentFilter = exports.getRevenueShareEscrowFilter = exports.getSpotMarketAccountsFilter = exports.getPerpMarketAccountsFilter = exports.getSignedMsgUserOrdersFilter = exports.getUserStatsIsReferredOrReferrerFilter = exports.getUserStatsIsReferredFilter = exports.getUserStatsFilter = exports.getUsersWithPoolId = exports.getUserWithName = exports.getUserThatHasBeenLP = exports.getUserWithAuctionFilter = exports.getUserWithoutOrderFilter = exports.getUserWithOrderFilter = exports.getNonIdleUserFilter = exports.getUserFilter = void 0;\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst userName_1 = require(\"./userName\");\nfunction getUserFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('User')),\n        },\n    };\n}\nexports.getUserFilter = getUserFilter;\nfunction getNonIdleUserFilter() {\n    return {\n        memcmp: {\n            offset: 4350,\n            bytes: bs58_1.default.encode(Uint8Array.from([0])),\n        },\n    };\n}\nexports.getNonIdleUserFilter = getNonIdleUserFilter;\nfunction getUserWithOrderFilter() {\n    return {\n        memcmp: {\n            offset: 4352,\n            bytes: bs58_1.default.encode(Uint8Array.from([1])),\n        },\n    };\n}\nexports.getUserWithOrderFilter = getUserWithOrderFilter;\nfunction getUserWithoutOrderFilter() {\n    return {\n        memcmp: {\n            offset: 4352,\n            bytes: bs58_1.default.encode(Uint8Array.from([0])),\n        },\n    };\n}\nexports.getUserWithoutOrderFilter = getUserWithoutOrderFilter;\nfunction getUserWithAuctionFilter() {\n    return {\n        memcmp: {\n            offset: 4354,\n            bytes: bs58_1.default.encode(Uint8Array.from([1])),\n        },\n    };\n}\nexports.getUserWithAuctionFilter = getUserWithAuctionFilter;\nfunction getUserThatHasBeenLP() {\n    return {\n        memcmp: {\n            offset: 4267,\n            bytes: bs58_1.default.encode(Uint8Array.from([99])),\n        },\n    };\n}\nexports.getUserThatHasBeenLP = getUserThatHasBeenLP;\nfunction getUserWithName(name) {\n    return {\n        memcmp: {\n            offset: 72,\n            bytes: bs58_1.default.encode(Uint8Array.from((0, userName_1.encodeName)(name))),\n        },\n    };\n}\nexports.getUserWithName = getUserWithName;\nfunction getUsersWithPoolId(poolId) {\n    return {\n        memcmp: {\n            offset: 4356,\n            bytes: bs58_1.default.encode(Uint8Array.from([poolId])),\n        },\n    };\n}\nexports.getUsersWithPoolId = getUsersWithPoolId;\nfunction getUserStatsFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('UserStats')),\n        },\n    };\n}\nexports.getUserStatsFilter = getUserStatsFilter;\nfunction getUserStatsIsReferredFilter() {\n    return {\n        memcmp: {\n            offset: 188,\n            bytes: bs58_1.default.encode(Buffer.from(Uint8Array.from([2]))),\n        },\n    };\n}\nexports.getUserStatsIsReferredFilter = getUserStatsIsReferredFilter;\nfunction getUserStatsIsReferredOrReferrerFilter() {\n    return {\n        memcmp: {\n            offset: 188,\n            bytes: bs58_1.default.encode(Buffer.from(Uint8Array.from([3]))),\n        },\n    };\n}\nexports.getUserStatsIsReferredOrReferrerFilter = getUserStatsIsReferredOrReferrerFilter;\nfunction getSignedMsgUserOrdersFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('SignedMsgUserOrders')),\n        },\n    };\n}\nexports.getSignedMsgUserOrdersFilter = getSignedMsgUserOrdersFilter;\nfunction getPerpMarketAccountsFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('PerpMarket')),\n        },\n    };\n}\nexports.getPerpMarketAccountsFilter = getPerpMarketAccountsFilter;\nfunction getSpotMarketAccountsFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('SpotMarket')),\n        },\n    };\n}\nexports.getSpotMarketAccountsFilter = getSpotMarketAccountsFilter;\nfunction getRevenueShareEscrowFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('RevenueShareEscrow')),\n        },\n    };\n}\nexports.getRevenueShareEscrowFilter = getRevenueShareEscrowFilter;\nfunction getConstituentFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator('Constituent')),\n        },\n    };\n}\nexports.getConstituentFilter = getConstituentFilter;\nfunction getConstituentLpPoolFilter(lpPoolPublicKey) {\n    return {\n        memcmp: {\n            offset: 72,\n            bytes: lpPoolPublicKey.toBase58(),\n        },\n    };\n}\nexports.getConstituentLpPoolFilter = getConstituentLpPoolFilter;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5247, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/promiseTimeout.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.promiseTimeout = void 0;\nfunction promiseTimeout(promise, timeoutMs) {\n    let timeoutId;\n    const timeoutPromise = new Promise((resolve) => {\n        timeoutId = setTimeout(() => resolve(null), timeoutMs);\n    });\n    return Promise.race([promise, timeoutPromise]).then((result) => {\n        clearTimeout(timeoutId);\n        return result;\n    });\n}\nexports.promiseTimeout = promiseTimeout;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,cAAc,GAAG,KAAK;AAC9B,SAAS,eAAe,OAAO,EAAE,SAAS;IACtC,IAAI;IACJ,MAAM,iBAAiB,IAAI,QAAQ,CAAC;QAChC,YAAY,WAAW,IAAM,QAAQ,OAAO;IAChD;IACA,OAAO,QAAQ,IAAI,CAAC;QAAC;QAAS;KAAe,EAAE,IAAI,CAAC,CAAC;QACjD,aAAa;QACb,OAAO;IACX;AACJ;AACA,QAAQ,cAAc,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5269, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/computeUnits.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.containsComputeUnitIxs = exports.isSetComputeUnitPriceIx = exports.isSetComputeUnitsIx = exports.findComputeUnitConsumption = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nasync function findComputeUnitConsumption(programId, connection, txSignature, commitment = 'confirmed') {\n    const tx = await connection.getTransaction(txSignature, { commitment });\n    const computeUnits = [];\n    const regex = new RegExp(`Program ${programId.toString()} consumed ([0-9]{0,6}) of ([0-9]{0,7}) compute units`);\n    tx.meta.logMessages.forEach((logMessage) => {\n        const match = logMessage.match(regex);\n        if (match && match[1]) {\n            computeUnits.push(match[1]);\n        }\n    });\n    return computeUnits;\n}\nexports.findComputeUnitConsumption = findComputeUnitConsumption;\nfunction isSetComputeUnitsIx(ix) {\n    // Compute budget program discriminator is first byte\n    // 2: set compute unit limit\n    // 3: set compute unit price\n    if (ix.programId.equals(web3_js_1.ComputeBudgetProgram.programId) &&\n        // @ts-ignore\n        ix.data.at(0) === 2) {\n        return true;\n    }\n    return false;\n}\nexports.isSetComputeUnitsIx = isSetComputeUnitsIx;\nfunction isSetComputeUnitPriceIx(ix) {\n    // Compute budget program discriminator is first byte\n    // 2: set compute unit limit\n    // 3: set compute unit price\n    if (ix.programId.equals(web3_js_1.ComputeBudgetProgram.programId) &&\n        // @ts-ignore\n        ix.data.at(0) === 3) {\n        return true;\n    }\n    return false;\n}\nexports.isSetComputeUnitPriceIx = isSetComputeUnitPriceIx;\nfunction containsComputeUnitIxs(ixs) {\n    return {\n        hasSetComputeUnitLimitIx: ixs.some(isSetComputeUnitsIx),\n        hasSetComputeUnitPriceIx: ixs.some(isSetComputeUnitPriceIx),\n    };\n}\nexports.containsComputeUnitIxs = containsComputeUnitIxs;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,QAAQ,uBAAuB,GAAG,QAAQ,mBAAmB,GAAG,QAAQ,0BAA0B,GAAG,KAAK;AAC3I,MAAM;AACN,eAAe,2BAA2B,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,aAAa,WAAW;IAClG,MAAM,KAAK,MAAM,WAAW,cAAc,CAAC,aAAa;QAAE;IAAW;IACrE,MAAM,eAAe,EAAE;IACvB,MAAM,QAAQ,IAAI,OAAO,CAAC,QAAQ,EAAE,UAAU,QAAQ,GAAG,oDAAoD,CAAC;IAC9G,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACzB,MAAM,QAAQ,WAAW,KAAK,CAAC;QAC/B,IAAI,SAAS,KAAK,CAAC,EAAE,EAAE;YACnB,aAAa,IAAI,CAAC,KAAK,CAAC,EAAE;QAC9B;IACJ;IACA,OAAO;AACX;AACA,QAAQ,0BAA0B,GAAG;AACrC,SAAS,oBAAoB,EAAE;IAC3B,qDAAqD;IACrD,4BAA4B;IAC5B,4BAA4B;IAC5B,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,UAAU,oBAAoB,CAAC,SAAS,KAC5D,aAAa;IACb,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG;QACrB,OAAO;IACX;IACA,OAAO;AACX;AACA,QAAQ,mBAAmB,GAAG;AAC9B,SAAS,wBAAwB,EAAE;IAC/B,qDAAqD;IACrD,4BAA4B;IAC5B,4BAA4B;IAC5B,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,UAAU,oBAAoB,CAAC,SAAS,KAC5D,aAAa;IACb,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG;QACrB,OAAO;IACX;IACA,OAAO;AACX;AACA,QAAQ,uBAAuB,GAAG;AAClC,SAAS,uBAAuB,GAAG;IAC/B,OAAO;QACH,0BAA0B,IAAI,IAAI,CAAC;QACnC,0BAA0B,IAAI,IAAI,CAAC;IACvC;AACJ;AACA,QAAQ,sBAAsB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5322, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/pythOracleUtils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFeedIdUint8Array = exports.trimFeedId = void 0;\nfunction trimFeedId(feedId) {\n    if (feedId.startsWith('0x')) {\n        return feedId.slice(2);\n    }\n    return feedId;\n}\nexports.trimFeedId = trimFeedId;\nfunction getFeedIdUint8Array(feedId) {\n    const trimmedFeedId = trimFeedId(feedId);\n    return Uint8Array.from(Buffer.from(trimmedFeedId, 'hex'));\n}\nexports.getFeedIdUint8Array = getFeedIdUint8Array;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,mBAAmB,GAAG,QAAQ,UAAU,GAAG,KAAK;AACxD,SAAS,WAAW,MAAM;IACtB,IAAI,OAAO,UAAU,CAAC,OAAO;QACzB,OAAO,OAAO,KAAK,CAAC;IACxB;IACA,OAAO;AACX;AACA,QAAQ,UAAU,GAAG;AACrB,SAAS,oBAAoB,MAAM;IAC/B,MAAM,gBAAgB,WAAW;IACjC,OAAO,WAAW,IAAI,CAAC,OAAO,IAAI,CAAC,eAAe;AACtD;AACA,QAAQ,mBAAmB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5342, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/ed25519Utils.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMinimalEd25519VerifyIx = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst BufferLayout = __importStar(require(\"@solana/buffer-layout\"));\nconst ED25519_INSTRUCTION_LEN = 16;\nconst SIGNATURE_LEN = 64;\nconst PUBKEY_LEN = 32;\nconst MAGIC_LEN = 4;\nconst MESSAGE_SIZE_LEN = 2;\nconst readUint16LE = (data, offset) => {\n    return data[offset] | (data[offset + 1] << 8);\n};\nconst ED25519_INSTRUCTION_LAYOUT = BufferLayout.struct([\n    BufferLayout.u8('numSignatures'),\n    BufferLayout.u8('padding'),\n    BufferLayout.u16('signatureOffset'),\n    BufferLayout.u16('signatureInstructionIndex'),\n    BufferLayout.u16('publicKeyOffset'),\n    BufferLayout.u16('publicKeyInstructionIndex'),\n    BufferLayout.u16('messageDataOffset'),\n    BufferLayout.u16('messageDataSize'),\n    BufferLayout.u16('messageInstructionIndex'),\n]);\n/**\n * Constructs a minimal Ed25519 verification instruction that references the data\n * inside the drift custom instruction (e.g. postPythLazerOracleUpdate, placeSignedMsgTakerOrder).\n *\n * @param customInstructionIndex The index of the custom instruction in the transaction (e.g. if tx contains compute budget limit, compute budget price, ed25519 verify, custom ix, this would be 3).\n * @param messageOffset The offset within the custom instruction data where the signed message begins.\n * @param customInstructionData The entire instruction data array for the custom instruction.\n */\nfunction createMinimalEd25519VerifyIx(customInstructionIndex, messageOffset, customInstructionData, magicLen) {\n    const signatureOffset = messageOffset + (magicLen === undefined ? MAGIC_LEN : magicLen);\n    const publicKeyOffset = signatureOffset + SIGNATURE_LEN;\n    const messageDataSizeOffset = publicKeyOffset + PUBKEY_LEN;\n    const messageDataOffset = messageDataSizeOffset + MESSAGE_SIZE_LEN;\n    const messageDataSize = readUint16LE(customInstructionData, messageDataSizeOffset - messageOffset);\n    const instructionData = Buffer.alloc(ED25519_INSTRUCTION_LEN);\n    ED25519_INSTRUCTION_LAYOUT.encode({\n        numSignatures: 1,\n        padding: 0,\n        signatureOffset,\n        signatureInstructionIndex: customInstructionIndex,\n        publicKeyOffset,\n        publicKeyInstructionIndex: customInstructionIndex,\n        messageDataOffset,\n        messageDataSize: messageDataSize,\n        messageInstructionIndex: customInstructionIndex,\n    }, instructionData);\n    return new web3_js_1.TransactionInstruction({\n        keys: [],\n        programId: web3_js_1.Ed25519Program.programId,\n        data: instructionData,\n    });\n}\nexports.createMinimalEd25519VerifyIx = createMinimalEd25519VerifyIx;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,qBAAqB,4DAAS,yDAAK,kBAAkB,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC;IACzF,OAAO,cAAc,CAAC,GAAG,WAAW;QAAE,YAAY;QAAM,OAAO;IAAE;AACrE,IAAK,SAAS,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,UAAU,GAAG;AACnB,CAAC;AACD,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAU,GAAG;IAC3D,IAAI,OAAO,IAAI,UAAU,EAAE,OAAO;IAClC,IAAI,SAAS,CAAC;IACd,IAAI,OAAO,MAAM;QAAA,IAAK,IAAI,KAAK,IAAK,IAAI,MAAM,aAAa,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,IAAI,gBAAgB,QAAQ,KAAK;IAAE;IACxI,mBAAmB,QAAQ;IAC3B,OAAO;AACX;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,4BAA4B,GAAG,KAAK;AAC5C,MAAM;AACN,MAAM,eAAe;AACrB,MAAM,0BAA0B;AAChC,MAAM,gBAAgB;AACtB,MAAM,aAAa;AACnB,MAAM,YAAY;AAClB,MAAM,mBAAmB;AACzB,MAAM,eAAe,CAAC,MAAM;IACxB,OAAO,IAAI,CAAC,OAAO,GAAI,IAAI,CAAC,SAAS,EAAE,IAAI;AAC/C;AACA,MAAM,6BAA6B,aAAa,MAAM,CAAC;IACnD,aAAa,EAAE,CAAC;IAChB,aAAa,EAAE,CAAC;IAChB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;IACjB,aAAa,GAAG,CAAC;CACpB;AACD;;;;;;;CAOC,GACD,SAAS,6BAA6B,sBAAsB,EAAE,aAAa,EAAE,qBAAqB,EAAE,QAAQ;IACxG,MAAM,kBAAkB,gBAAgB,CAAC,aAAa,YAAY,YAAY,QAAQ;IACtF,MAAM,kBAAkB,kBAAkB;IAC1C,MAAM,wBAAwB,kBAAkB;IAChD,MAAM,oBAAoB,wBAAwB;IAClD,MAAM,kBAAkB,aAAa,uBAAuB,wBAAwB;IACpF,MAAM,kBAAkB,OAAO,KAAK,CAAC;IACrC,2BAA2B,MAAM,CAAC;QAC9B,eAAe;QACf,SAAS;QACT;QACA,2BAA2B;QAC3B;QACA,2BAA2B;QAC3B;QACA,iBAAiB;QACjB,yBAAyB;IAC7B,GAAG;IACH,OAAO,IAAI,UAAU,sBAAsB,CAAC;QACxC,MAAM,EAAE;QACR,WAAW,UAAU,cAAc,CAAC,SAAS;QAC7C,MAAM;IACV;AACJ;AACA,QAAQ,4BAA4B,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5436, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/digest.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateSignedMsgUuid = exports.digestSignature = exports.digest = void 0;\nconst crypto_1 = require(\"crypto\");\nconst nanoid_1 = require(\"nanoid\");\nfunction digest(data) {\n    const hash = (0, crypto_1.createHash)('sha256');\n    hash.update(data);\n    return hash.digest();\n}\nexports.digest = digest;\nfunction digestSignature(signature) {\n    return (0, crypto_1.createHash)('sha256').update(signature).digest('base64');\n}\nexports.digestSignature = digestSignature;\nfunction generateSignedMsgUuid() {\n    return Uint8Array.from(Buffer.from((0, nanoid_1.nanoid)(8)));\n}\nexports.generateSignedMsgUuid = generateSignedMsgUuid;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,QAAQ,eAAe,GAAG,QAAQ,MAAM,GAAG,KAAK;AAChF,MAAM;AACN,MAAM;AACN,SAAS,OAAO,IAAI;IAChB,MAAM,OAAO,CAAC,GAAG,SAAS,UAAU,EAAE;IACtC,KAAK,MAAM,CAAC;IACZ,OAAO,KAAK,MAAM;AACtB;AACA,QAAQ,MAAM,GAAG;AACjB,SAAS,gBAAgB,SAAS;IAC9B,OAAO,CAAC,GAAG,SAAS,UAAU,EAAE,UAAU,MAAM,CAAC,WAAW,MAAM,CAAC;AACvE;AACA,QAAQ,eAAe,GAAG;AAC1B,SAAS;IACL,OAAO,WAAW,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,SAAS,MAAM,EAAE;AAC5D;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5460, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/tps.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.estimateTps = void 0;\nasync function estimateTps(programId, connection, failed) {\n    let signatures = await connection.getSignaturesForAddress(programId, undefined, 'finalized');\n    if (failed) {\n        signatures = signatures.filter((signature) => signature.err);\n    }\n    const numberOfSignatures = signatures.length;\n    if (numberOfSignatures === 0) {\n        return 0;\n    }\n    return (numberOfSignatures /\n        (signatures[0].blockTime - signatures[numberOfSignatures - 1].blockTime));\n}\nexports.estimateTps = estimateTps;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,WAAW,GAAG,KAAK;AAC3B,eAAe,YAAY,SAAS,EAAE,UAAU,EAAE,MAAM;IACpD,IAAI,aAAa,MAAM,WAAW,uBAAuB,CAAC,WAAW,WAAW;IAChF,IAAI,QAAQ;QACR,aAAa,WAAW,MAAM,CAAC,CAAC,YAAc,UAAU,GAAG;IAC/D;IACA,MAAM,qBAAqB,WAAW,MAAM;IAC5C,IAAI,uBAAuB,GAAG;QAC1B,OAAO;IACX;IACA,OAAQ,qBACJ,CAAC,UAAU,CAAC,EAAE,CAAC,SAAS,GAAG,UAAU,CAAC,qBAAqB,EAAE,CAAC,SAAS;AAC/E;AACA,QAAQ,WAAW,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5480, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/chainClock.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChainClock = void 0;\nclass ChainClock {\n    constructor(props) {\n        this._state = new Map();\n        props.forEach((prop) => {\n            this._state.set(prop.commitment, prop);\n        });\n    }\n    update(props) {\n        const state = this._state.get(props.commitment);\n        if (state) {\n            if (props.blockHeight)\n                state.blockHeight = props.blockHeight;\n            if (props.slot)\n                state.slot = props.slot;\n            if (props.ts)\n                state.ts = props.ts;\n        }\n        else {\n            this._state.set(props.commitment, props);\n        }\n    }\n    getState(commitment) {\n        return this._state.get(commitment);\n    }\n}\nexports.ChainClock = ChainClock;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,UAAU,GAAG,KAAK;AAC1B,MAAM;IACF,YAAY,KAAK,CAAE;QACf,IAAI,CAAC,MAAM,GAAG,IAAI;QAClB,MAAM,OAAO,CAAC,CAAC;YACX,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,UAAU,EAAE;QACrC;IACJ;IACA,OAAO,KAAK,EAAE;QACV,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,UAAU;QAC9C,IAAI,OAAO;YACP,IAAI,MAAM,WAAW,EACjB,MAAM,WAAW,GAAG,MAAM,WAAW;YACzC,IAAI,MAAM,IAAI,EACV,MAAM,IAAI,GAAG,MAAM,IAAI;YAC3B,IAAI,MAAM,EAAE,EACR,MAAM,EAAE,GAAG,MAAM,EAAE;QAC3B,OACK;YACD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,UAAU,EAAE;QACtC;IACJ;IACA,SAAS,UAAU,EAAE;QACjB,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;IAC3B;AACJ;AACA,QAAQ,UAAU,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5510, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/util/TransactionConfirmationManager.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransactionConfirmationManager = void 0;\nconst config_1 = require(\"../config\");\nconst types_1 = require(\"../tx/types\");\nconst txConstants_1 = require(\"../constants/txConstants\");\nconst reportTransactionError_1 = require(\"../tx/reportTransactionError\");\nconst promiseTimeout_1 = require(\"./promiseTimeout\");\nconst confirmationStatusValues = {\n    processed: 0,\n    confirmed: 1,\n    finalized: 2,\n};\n/**\n * Class to await for transaction confirmations in an optimised manner. It tracks a shared list of all pending transactions and fetches them in bulk in a shared RPC request whenever they have an \"overlapping\" polling interval. E.g. tx1 with an interval of 200ms and tx2 with an interval of 300ms (if sent at the same time) will be fetched together at 600ms, 1200ms, 1800ms, etc.\n */\nclass TransactionConfirmationManager {\n    constructor(connection) {\n        this.pendingConfirmations = new Map();\n        this.intervalId = null;\n        this.connection = connection;\n    }\n    async confirmTransactionWebSocket(txSig, timeout = 30000, desiredConfirmationStatus = config_1.DEFAULT_CONFIRMATION_OPTS.commitment) {\n        const start = Date.now();\n        const subscriptionCommitment = desiredConfirmationStatus || config_1.DEFAULT_CONFIRMATION_OPTS.commitment;\n        let response = null;\n        let subscriptionId;\n        const confirmationPromise = new Promise((resolve, reject) => {\n            try {\n                subscriptionId = this.connection.onSignature(txSig, (result, context) => {\n                    response = {\n                        context,\n                        value: result,\n                    };\n                    resolve(null);\n                }, subscriptionCommitment);\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n        // We do a one-shot confirmation check just in case the transaction is ALREADY confirmed when we create the websocket confirmation .. We want to run this concurrently with the onSignature subscription. If this returns true then we can return early as the transaction has already been confirmed.\n        const oneShotConfirmationPromise = this.connection.getSignatureStatuses([\n            txSig,\n        ]);\n        const resolveReference = {};\n        // This is the promise we are waiting on to resolve the overall confirmation. It will resolve the faster of a positive oneShot confirmation, or the websocket confirmation, or the timeout.\n        const overallWaitingForConfirmationPromise = new Promise((resolve) => {\n            resolveReference.resolve = resolve;\n        });\n        // Await for the one shot confirmation and resolve the waiting promise if we get a positive confirmation result\n        oneShotConfirmationPromise.then(async (oneShotResponse) => {\n            var _a, _b;\n            if (!oneShotResponse || !((_a = oneShotResponse === null || oneShotResponse === void 0 ? void 0 : oneShotResponse.value) === null || _a === void 0 ? void 0 : _a[0]))\n                return;\n            const resultValue = oneShotResponse.value[0];\n            if (resultValue.err) {\n                await (0, reportTransactionError_1.throwTransactionError)(txSig, this.connection);\n            }\n            if (this.checkStatusMatchesDesiredConfirmationStatus(resultValue, desiredConfirmationStatus)) {\n                response = {\n                    context: oneShotResponse.context,\n                    value: oneShotResponse.value[0],\n                };\n                (_b = resolveReference.resolve) === null || _b === void 0 ? void 0 : _b.call(resolveReference);\n            }\n        }, (onRejected) => {\n            throw onRejected;\n        });\n        // Await for the websocket confirmation with the configured timeout\n        (0, promiseTimeout_1.promiseTimeout)(confirmationPromise, timeout).then(() => {\n            var _a;\n            (_a = resolveReference.resolve) === null || _a === void 0 ? void 0 : _a.call(resolveReference);\n        }, (onRejected) => {\n            throw onRejected;\n        });\n        try {\n            await overallWaitingForConfirmationPromise;\n        }\n        finally {\n            if (subscriptionId !== undefined) {\n                this.connection.removeSignatureListener(subscriptionId);\n            }\n        }\n        const duration = (Date.now() - start) / 1000;\n        if (response === null) {\n            throw new types_1.TxSendError(`Transaction was not confirmed in ${duration.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${txSig} using the Solana Explorer or CLI tools.`, txConstants_1.NOT_CONFIRMED_ERROR_CODE);\n        }\n        return response;\n    }\n    async confirmTransactionPolling(txSig, desiredConfirmationStatus = config_1.DEFAULT_CONFIRMATION_OPTS.commitment, timeout = 30000, pollInterval = 1000, searchTransactionHistory = false) {\n        // Interval must be > 400ms and a multiple of 100ms\n        if (pollInterval < 400 || pollInterval % 100 !== 0) {\n            throw new Error('Transaction confirmation polling interval must be at least 400ms and a multiple of 100ms');\n        }\n        return new Promise((resolve, reject) => {\n            this.pendingConfirmations.set(txSig, {\n                txSig,\n                desiredConfirmationStatus,\n                timeout,\n                pollInterval,\n                searchTransactionHistory,\n                startTime: Date.now(),\n                resolve,\n                reject,\n            });\n            if (!this.intervalId) {\n                this.startConfirmationLoop();\n            }\n        });\n    }\n    startConfirmationLoop() {\n        this.intervalId = setInterval(() => this.checkPendingConfirmations(), 100);\n    }\n    async checkPendingConfirmations() {\n        const now = Date.now();\n        const transactionsToCheck = [];\n        for (const [txSig, request] of this.pendingConfirmations.entries()) {\n            if (now - request.startTime >= request.timeout) {\n                request.reject(new Error(`Transaction confirmation timeout after ${request.timeout}ms`));\n                this.pendingConfirmations.delete(txSig);\n            }\n            else if ((now - request.startTime) % request.pollInterval < 100) {\n                transactionsToCheck.push(request);\n            }\n        }\n        if (transactionsToCheck.length > 0) {\n            await this.checkTransactionStatuses(transactionsToCheck);\n        }\n        if (this.pendingConfirmations.size === 0 && this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = null;\n        }\n    }\n    checkStatusMatchesDesiredConfirmationStatus(status, desiredConfirmationStatus) {\n        if (status.confirmationStatus &&\n            confirmationStatusValues[status.confirmationStatus] >=\n                confirmationStatusValues[desiredConfirmationStatus]) {\n            return true;\n        }\n        return false;\n    }\n    async checkTransactionStatuses(requests) {\n        const txSigs = requests.map((request) => request.txSig);\n        const { value: statuses } = await this.connection.getSignatureStatuses(txSigs, {\n            searchTransactionHistory: requests.some((req) => req.searchTransactionHistory),\n        });\n        if (!statuses || statuses.length !== txSigs.length) {\n            throw new Error('Failed to get signature statuses');\n        }\n        for (let i = 0; i < statuses.length; i++) {\n            const status = statuses[i];\n            const request = requests[i];\n            if (status === null) {\n                continue;\n            }\n            if (status.err) {\n                this.pendingConfirmations.delete(request.txSig);\n                request.reject(await (0, reportTransactionError_1.getTransactionErrorFromTxSig)(request.txSig, this.connection));\n                continue;\n            }\n            if (confirmationStatusValues[status.confirmationStatus] === undefined ||\n                confirmationStatusValues[request.desiredConfirmationStatus] ===\n                    undefined) {\n                throw new Error(`Invalid confirmation status when awaiting confirmation: ${status.confirmationStatus}`);\n            }\n            if (this.checkStatusMatchesDesiredConfirmationStatus(status, request.desiredConfirmationStatus)) {\n                request.resolve(status);\n                this.pendingConfirmations.delete(request.txSig);\n            }\n        }\n    }\n}\nexports.TransactionConfirmationManager = TransactionConfirmationManager;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5680, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/token/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseTokenAccount = void 0;\nconst spl_token_1 = require(\"@solana/spl-token\");\nfunction parseTokenAccount(data, pubkey) {\n    // mock AccountInfo so unpackAccount can be used\n    const accountInfo = {\n        data,\n        owner: spl_token_1.TOKEN_PROGRAM_ID,\n        executable: false,\n        lamports: 0,\n    };\n    return (0, spl_token_1.unpackAccount)(pubkey, accountInfo, spl_token_1.TOKEN_PROGRAM_ID);\n}\nexports.parseTokenAccount = parseTokenAccount;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,KAAK;AACjC,MAAM;AACN,SAAS,kBAAkB,IAAI,EAAE,MAAM;IACnC,gDAAgD;IAChD,MAAM,cAAc;QAChB;QACA,OAAO,YAAY,gBAAgB;QACnC,YAAY;QACZ,UAAU;IACd;IACA,OAAO,CAAC,GAAG,YAAY,aAAa,EAAE,QAAQ,aAAa,YAAY,gBAAgB;AAC3F;AACA,QAAQ,iBAAiB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5700, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/isomorphic/grpc.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createClient = void 0;\n// Export a function to create a new Client instance\nfunction createClient(..._args) {\n    throw new Error('Only available in node context');\n}\nexports.createClient = createClient;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,YAAY,GAAG,KAAK;AAC5B,oDAAoD;AACpD,SAAS,aAAa,GAAG,KAAK;IAC1B,MAAM,IAAI,MAAM;AACpB;AACA,QAAQ,YAAY,GAAG","ignoreList":[0]}},
    {"offset": {"line": 5713, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/user.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.User = void 0;\nconst types_1 = require(\"./types\");\nconst position_1 = require(\"./math/position\");\nconst numericConstants_1 = require(\"./constants/numericConstants\");\nconst bigNum_1 = require(\"./factory/bigNum\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst position_2 = require(\"./math/position\");\nconst market_1 = require(\"./math/market\");\nconst margin_1 = require(\"./math/margin\");\nconst spotMarket_1 = require(\"./math/spotMarket\");\nconst utils_1 = require(\"./math/utils\");\nconst spotBalance_1 = require(\"./math/spotBalance\");\nconst trade_1 = require(\"./math/trade\");\nconst types_2 = require(\"./types\");\nconst orders_1 = require(\"./math/orders\");\nconst websocketProgramUserAccountSubscriber_1 = require(\"./accounts/websocketProgramUserAccountSubscriber\");\nconst spotBalance_2 = require(\"./math/spotBalance\");\nconst margin_2 = require(\"./math/margin\");\nconst pollingUserAccountSubscriber_1 = require(\"./accounts/pollingUserAccountSubscriber\");\nconst webSocketUserAccountSubscriber_1 = require(\"./accounts/webSocketUserAccountSubscriber\");\nconst spotPosition_1 = require(\"./math/spotPosition\");\nconst oracles_1 = require(\"./math/oracles\");\nconst tiers_1 = require(\"./math/tiers\");\nconst strictOraclePrice_1 = require(\"./oracles/strictOraclePrice\");\nconst fuel_1 = require(\"./math/fuel\");\nconst grpcUserAccountSubscriber_1 = require(\"./accounts/grpcUserAccountSubscriber\");\nclass User {\n    get isSubscribed() {\n        return this._isSubscribed && this.accountSubscriber.isSubscribed;\n    }\n    set isSubscribed(val) {\n        this._isSubscribed = val;\n    }\n    constructor(config) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        this._isSubscribed = false;\n        this.driftClient = config.driftClient;\n        this.userAccountPublicKey = config.userAccountPublicKey;\n        if (((_a = config.accountSubscription) === null || _a === void 0 ? void 0 : _a.type) === 'polling') {\n            this.accountSubscriber = new pollingUserAccountSubscriber_1.PollingUserAccountSubscriber(config.driftClient.connection, config.userAccountPublicKey, config.accountSubscription.accountLoader, this.driftClient.program.account.user.coder.accounts.decodeUnchecked.bind(this.driftClient.program.account.user.coder.accounts));\n        }\n        else if (((_b = config.accountSubscription) === null || _b === void 0 ? void 0 : _b.type) === 'custom') {\n            this.accountSubscriber = config.accountSubscription.userAccountSubscriber;\n        }\n        else if (((_c = config.accountSubscription) === null || _c === void 0 ? void 0 : _c.type) === 'grpc') {\n            if (config.accountSubscription.grpcMultiUserAccountSubscriber) {\n                this.accountSubscriber =\n                    config.accountSubscription.grpcMultiUserAccountSubscriber.forUser(config.userAccountPublicKey);\n            }\n            else {\n                this.accountSubscriber = new grpcUserAccountSubscriber_1.grpcUserAccountSubscriber(config.accountSubscription.grpcConfigs, config.driftClient.program, config.userAccountPublicKey, {\n                    resubTimeoutMs: (_d = config.accountSubscription) === null || _d === void 0 ? void 0 : _d.resubTimeoutMs,\n                    logResubMessages: (_e = config.accountSubscription) === null || _e === void 0 ? void 0 : _e.logResubMessages,\n                });\n            }\n        }\n        else {\n            if (((_f = config.accountSubscription) === null || _f === void 0 ? void 0 : _f.type) === 'websocket' &&\n                ((_g = config.accountSubscription) === null || _g === void 0 ? void 0 : _g.programUserAccountSubscriber)) {\n                this.accountSubscriber = new websocketProgramUserAccountSubscriber_1.WebSocketProgramUserAccountSubscriber(config.driftClient.program, config.userAccountPublicKey, config.accountSubscription.programUserAccountSubscriber);\n            }\n            else {\n                this.accountSubscriber = new webSocketUserAccountSubscriber_1.WebSocketUserAccountSubscriber(config.driftClient.program, config.userAccountPublicKey, {\n                    resubTimeoutMs: (_h = config.accountSubscription) === null || _h === void 0 ? void 0 : _h.resubTimeoutMs,\n                    logResubMessages: (_j = config.accountSubscription) === null || _j === void 0 ? void 0 : _j.logResubMessages,\n                }, (_k = config.accountSubscription) === null || _k === void 0 ? void 0 : _k.commitment);\n            }\n        }\n        this.eventEmitter = this.accountSubscriber.eventEmitter;\n    }\n    /**\n     * Subscribe to User state accounts\n     * @returns SusbcriptionSuccess result\n     */\n    async subscribe(userAccount) {\n        this.isSubscribed = await this.accountSubscriber.subscribe(userAccount);\n        return this.isSubscribed;\n    }\n    /**\n     *\tForces the accountSubscriber to fetch account updates from rpc\n     */\n    async fetchAccounts() {\n        await this.accountSubscriber.fetch();\n    }\n    async unsubscribe() {\n        await this.accountSubscriber.unsubscribe();\n        this.isSubscribed = false;\n    }\n    getUserAccount() {\n        return this.accountSubscriber.getUserAccountAndSlot().data;\n    }\n    async forceGetUserAccount() {\n        await this.fetchAccounts();\n        return this.accountSubscriber.getUserAccountAndSlot().data;\n    }\n    getUserAccountAndSlot() {\n        return this.accountSubscriber.getUserAccountAndSlot();\n    }\n    getPerpPositionForUserAccount(userAccount, marketIndex) {\n        return this.getActivePerpPositionsForUserAccount(userAccount).find((position) => position.marketIndex === marketIndex);\n    }\n    /**\n     * Gets the user's current position for a given perp market. If the user has no position returns undefined\n     * @param marketIndex\n     * @returns userPerpPosition\n     */\n    getPerpPosition(marketIndex) {\n        const userAccount = this.getUserAccount();\n        return this.getPerpPositionForUserAccount(userAccount, marketIndex);\n    }\n    getPerpPositionOrEmpty(marketIndex) {\n        var _a;\n        const userAccount = this.getUserAccount();\n        return ((_a = this.getPerpPositionForUserAccount(userAccount, marketIndex)) !== null && _a !== void 0 ? _a : this.getEmptyPosition(marketIndex));\n    }\n    getPerpPositionAndSlot(marketIndex) {\n        const userAccount = this.getUserAccountAndSlot();\n        const perpPosition = this.getPerpPositionForUserAccount(userAccount.data, marketIndex);\n        return {\n            data: perpPosition,\n            slot: userAccount.slot,\n        };\n    }\n    getSpotPositionForUserAccount(userAccount, marketIndex) {\n        return userAccount.spotPositions.find((position) => position.marketIndex === marketIndex);\n    }\n    /**\n     * Gets the user's current position for a given spot market. If the user has no position returns undefined\n     * @param marketIndex\n     * @returns userSpotPosition\n     */\n    getSpotPosition(marketIndex) {\n        const userAccount = this.getUserAccount();\n        return this.getSpotPositionForUserAccount(userAccount, marketIndex);\n    }\n    getSpotPositionAndSlot(marketIndex) {\n        const userAccount = this.getUserAccountAndSlot();\n        const spotPosition = this.getSpotPositionForUserAccount(userAccount.data, marketIndex);\n        return {\n            data: spotPosition,\n            slot: userAccount.slot,\n        };\n    }\n    getEmptySpotPosition(marketIndex) {\n        return {\n            marketIndex,\n            scaledBalance: numericConstants_1.ZERO,\n            balanceType: types_2.SpotBalanceType.DEPOSIT,\n            cumulativeDeposits: numericConstants_1.ZERO,\n            openAsks: numericConstants_1.ZERO,\n            openBids: numericConstants_1.ZERO,\n            openOrders: 0,\n        };\n    }\n    /**\n     * Returns the token amount for a given market. The spot market precision is based on the token mint decimals.\n     * Positive if it is a deposit, negative if it is a borrow.\n     *\n     * @param marketIndex\n     */\n    getTokenAmount(marketIndex) {\n        const spotPosition = this.getSpotPosition(marketIndex);\n        if (spotPosition === undefined) {\n            return numericConstants_1.ZERO;\n        }\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        return (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarket, spotPosition.balanceType), spotPosition.balanceType);\n    }\n    getEmptyPosition(marketIndex) {\n        return {\n            baseAssetAmount: numericConstants_1.ZERO,\n            remainderBaseAssetAmount: 0,\n            lastCumulativeFundingRate: numericConstants_1.ZERO,\n            marketIndex,\n            quoteAssetAmount: numericConstants_1.ZERO,\n            quoteEntryAmount: numericConstants_1.ZERO,\n            quoteBreakEvenAmount: numericConstants_1.ZERO,\n            openOrders: 0,\n            openBids: numericConstants_1.ZERO,\n            openAsks: numericConstants_1.ZERO,\n            settledPnl: numericConstants_1.ZERO,\n            lpShares: numericConstants_1.ZERO,\n            lastBaseAssetAmountPerLp: numericConstants_1.ZERO,\n            lastQuoteAssetAmountPerLp: numericConstants_1.ZERO,\n            perLpBase: 0,\n            maxMarginRatio: 0,\n            isolatedPositionScaledBalance: numericConstants_1.ZERO,\n            positionFlag: 0,\n        };\n    }\n    getClonedPosition(position) {\n        const clonedPosition = Object.assign({}, position);\n        return clonedPosition;\n    }\n    getOrderForUserAccount(userAccount, orderId) {\n        return userAccount.orders.find((order) => order.orderId === orderId);\n    }\n    /**\n     * @param orderId\n     * @returns Order\n     */\n    getOrder(orderId) {\n        const userAccount = this.getUserAccount();\n        return this.getOrderForUserAccount(userAccount, orderId);\n    }\n    getOrderAndSlot(orderId) {\n        const userAccount = this.getUserAccountAndSlot();\n        const order = this.getOrderForUserAccount(userAccount.data, orderId);\n        return {\n            data: order,\n            slot: userAccount.slot,\n        };\n    }\n    getOrderByUserIdForUserAccount(userAccount, userOrderId) {\n        return userAccount.orders.find((order) => order.userOrderId === userOrderId);\n    }\n    /**\n     * @param userOrderId\n     * @returns Order\n     */\n    getOrderByUserOrderId(userOrderId) {\n        const userAccount = this.getUserAccount();\n        return this.getOrderByUserIdForUserAccount(userAccount, userOrderId);\n    }\n    getOrderByUserOrderIdAndSlot(userOrderId) {\n        const userAccount = this.getUserAccountAndSlot();\n        const order = this.getOrderByUserIdForUserAccount(userAccount.data, userOrderId);\n        return {\n            data: order,\n            slot: userAccount.slot,\n        };\n    }\n    getOpenOrdersForUserAccount(userAccount) {\n        return userAccount === null || userAccount === void 0 ? void 0 : userAccount.orders.filter((order) => (0, types_1.isVariant)(order.status, 'open'));\n    }\n    getOpenOrders() {\n        const userAccount = this.getUserAccount();\n        return this.getOpenOrdersForUserAccount(userAccount);\n    }\n    getOpenOrdersAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const openOrders = this.getOpenOrdersForUserAccount(userAccount.data);\n        return {\n            data: openOrders,\n            slot: userAccount.slot,\n        };\n    }\n    getUserAccountPublicKey() {\n        return this.userAccountPublicKey;\n    }\n    async exists() {\n        const userAccountRPCResponse = await this.driftClient.connection.getParsedAccountInfo(this.userAccountPublicKey);\n        return userAccountRPCResponse.value !== null;\n    }\n    /**\n     * calculates the total open bids/asks in a perp market (including lps)\n     * @returns : open bids\n     * @returns : open asks\n     */\n    getPerpBidAsks(marketIndex) {\n        const position = this.getPerpPosition(marketIndex);\n        const totalOpenBids = position.openBids;\n        const totalOpenAsks = position.openAsks;\n        return [totalOpenBids, totalOpenAsks];\n    }\n    /**\n     * calculates Buying Power = free collateral / initial margin ratio\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getPerpBuyingPower(marketIndex, collateralBuffer = numericConstants_1.ZERO, enterHighLeverageMode = undefined, maxMarginRatio = undefined) {\n        const perpPosition = this.getPerpPositionOrEmpty(marketIndex);\n        const perpMarket = this.driftClient.getPerpMarketAccount(marketIndex);\n        const oraclePriceData = this.getOracleDataForPerpMarket(marketIndex);\n        const worstCaseBaseAssetAmount = perpPosition\n            ? (0, margin_2.calculateWorstCaseBaseAssetAmount)(perpPosition, perpMarket, oraclePriceData.price)\n            : numericConstants_1.ZERO;\n        const freeCollateral = this.getFreeCollateral('Initial', enterHighLeverageMode).sub(collateralBuffer);\n        return this.getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(marketIndex, freeCollateral, worstCaseBaseAssetAmount, enterHighLeverageMode, maxMarginRatio || perpPosition.maxMarginRatio);\n    }\n    getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(marketIndex, freeCollateral, baseAssetAmount, enterHighLeverageMode = undefined, perpMarketMaxMarginRatio = undefined) {\n        const maxMarginRatio = Math.max(perpMarketMaxMarginRatio, this.getUserAccount().maxMarginRatio);\n        const marginRatio = (0, market_1.calculateMarketMarginRatio)(this.driftClient.getPerpMarketAccount(marketIndex), baseAssetAmount, 'Initial', maxMarginRatio, enterHighLeverageMode || this.isHighLeverageMode('Initial'));\n        return freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new anchor_1.BN(marginRatio));\n    }\n    /**\n     * calculates Free Collateral = Total collateral - margin requirement\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getFreeCollateral(marginCategory = 'Initial', enterHighLeverageMode = undefined) {\n        const totalCollateral = this.getTotalCollateral(marginCategory, true);\n        const marginRequirement = marginCategory === 'Initial'\n            ? this.getInitialMarginRequirement(enterHighLeverageMode)\n            : this.getMaintenanceMarginRequirement();\n        const freeCollateral = totalCollateral.sub(marginRequirement);\n        return freeCollateral.gte(numericConstants_1.ZERO) ? freeCollateral : numericConstants_1.ZERO;\n    }\n    /**\n     * @returns The margin requirement of a certain type (Initial or Maintenance) in USDC. : QUOTE_PRECISION\n     */\n    getMarginRequirement(marginCategory, liquidationBuffer, strict = false, includeOpenOrders = true, enteringHighLeverage = undefined) {\n        return this.getTotalPerpPositionLiability(marginCategory, liquidationBuffer, includeOpenOrders, strict, enteringHighLeverage).add(this.getSpotMarketLiabilityValue(undefined, marginCategory, liquidationBuffer, includeOpenOrders, strict));\n    }\n    /**\n     * @returns The initial margin requirement in USDC. : QUOTE_PRECISION\n     */\n    getInitialMarginRequirement(enterHighLeverageMode = undefined) {\n        return this.getMarginRequirement('Initial', undefined, true, undefined, enterHighLeverageMode);\n    }\n    /**\n     * @returns The maintenance margin requirement in USDC. : QUOTE_PRECISION\n     */\n    getMaintenanceMarginRequirement(liquidationBuffer) {\n        return this.getMarginRequirement('Maintenance', liquidationBuffer);\n    }\n    getActivePerpPositionsForUserAccount(userAccount) {\n        return userAccount.perpPositions.filter((pos) => !pos.baseAssetAmount.eq(numericConstants_1.ZERO) ||\n            !pos.quoteAssetAmount.eq(numericConstants_1.ZERO) ||\n            !(pos.openOrders == 0));\n    }\n    getActivePerpPositions() {\n        const userAccount = this.getUserAccount();\n        return this.getActivePerpPositionsForUserAccount(userAccount);\n    }\n    getActivePerpPositionsAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const positions = this.getActivePerpPositionsForUserAccount(userAccount.data);\n        return {\n            data: positions,\n            slot: userAccount.slot,\n        };\n    }\n    getActiveSpotPositionsForUserAccount(userAccount) {\n        return userAccount.spotPositions.filter((pos) => !(0, spotPosition_1.isSpotPositionAvailable)(pos));\n    }\n    getActiveSpotPositions() {\n        const userAccount = this.getUserAccount();\n        return this.getActiveSpotPositionsForUserAccount(userAccount);\n    }\n    getActiveSpotPositionsAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const positions = this.getActiveSpotPositionsForUserAccount(userAccount.data);\n        return {\n            data: positions,\n            slot: userAccount.slot,\n        };\n    }\n    /**\n     * calculates unrealized position price pnl\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getUnrealizedPNL(withFunding, marketIndex, withWeightMarginCategory, strict = false, liquidationBuffer) {\n        return this.getActivePerpPositions()\n            .filter((pos) => marketIndex !== undefined ? pos.marketIndex === marketIndex : true)\n            .reduce((unrealizedPnl, perpPosition) => {\n            const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            const oraclePriceData = this.getMMOracleDataForPerpMarket(market.marketIndex);\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(market.quoteSpotMarketIndex);\n            const quoteOraclePriceData = this.getOracleDataForSpotMarket(market.quoteSpotMarketIndex);\n            let positionUnrealizedPnl = (0, position_2.calculatePositionPNL)(market, perpPosition, withFunding, oraclePriceData);\n            let quotePrice;\n            if (strict && positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                quotePrice = anchor_1.BN.min(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            }\n            else if (strict && positionUnrealizedPnl.lt(numericConstants_1.ZERO)) {\n                quotePrice = anchor_1.BN.max(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            }\n            else {\n                quotePrice = quoteOraclePriceData.price;\n            }\n            positionUnrealizedPnl = positionUnrealizedPnl\n                .mul(quotePrice)\n                .div(numericConstants_1.PRICE_PRECISION);\n            if (withWeightMarginCategory !== undefined) {\n                if (positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                    positionUnrealizedPnl = positionUnrealizedPnl\n                        .mul((0, market_1.calculateUnrealizedAssetWeight)(market, quoteSpotMarket, positionUnrealizedPnl, withWeightMarginCategory, oraclePriceData))\n                        .div(new anchor_1.BN(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION));\n                }\n                if (liquidationBuffer && positionUnrealizedPnl.lt(numericConstants_1.ZERO)) {\n                    positionUnrealizedPnl = positionUnrealizedPnl.add(positionUnrealizedPnl.mul(liquidationBuffer).div(numericConstants_1.MARGIN_PRECISION));\n                }\n            }\n            return unrealizedPnl.add(positionUnrealizedPnl);\n        }, numericConstants_1.ZERO);\n    }\n    /**\n     * calculates unrealized funding payment pnl\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getUnrealizedFundingPNL(marketIndex) {\n        return this.getUserAccount()\n            .perpPositions.filter((pos) => marketIndex !== undefined ? pos.marketIndex === marketIndex : true)\n            .reduce((pnl, perpPosition) => {\n            const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            return pnl.add((0, position_1.calculateUnsettledFundingPnl)(market, perpPosition));\n        }, numericConstants_1.ZERO);\n    }\n    getFuelBonus(now, includeSettled = true, includeUnsettled = true, givenUserStats) {\n        const userAccount = this.getUserAccount();\n        const result = {\n            insuranceFuel: numericConstants_1.ZERO,\n            takerFuel: numericConstants_1.ZERO,\n            makerFuel: numericConstants_1.ZERO,\n            depositFuel: numericConstants_1.ZERO,\n            borrowFuel: numericConstants_1.ZERO,\n            positionFuel: numericConstants_1.ZERO,\n        };\n        const userStats = givenUserStats !== null && givenUserStats !== void 0 ? givenUserStats : this.driftClient.getUserStats();\n        const userStatsAccount = userStats.getAccount();\n        if (includeSettled) {\n            result.takerFuel = result.takerFuel.add(new anchor_1.BN(userStatsAccount.fuelTaker));\n            result.makerFuel = result.makerFuel.add(new anchor_1.BN(userStatsAccount.fuelMaker));\n            result.depositFuel = result.depositFuel.add(new anchor_1.BN(userStatsAccount.fuelDeposits));\n            result.borrowFuel = result.borrowFuel.add(new anchor_1.BN(userStatsAccount.fuelBorrows));\n            result.positionFuel = result.positionFuel.add(new anchor_1.BN(userStatsAccount.fuelPositions));\n        }\n        if (includeUnsettled) {\n            const fuelBonusNumerator = anchor_1.BN.max(now.sub(anchor_1.BN.max(new anchor_1.BN(userAccount.lastFuelBonusUpdateTs), numericConstants_1.FUEL_START_TS)), numericConstants_1.ZERO);\n            if (fuelBonusNumerator.gt(numericConstants_1.ZERO)) {\n                for (const spotPosition of this.getActiveSpotPositions()) {\n                    const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n                    const tokenAmount = this.getTokenAmount(spotPosition.marketIndex);\n                    const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n                    const twap5min = (0, oracles_1.calculateLiveOracleTwap)(spotMarketAccount.historicalOracleData, oraclePriceData, now, numericConstants_1.FIVE_MINUTE // 5MIN\n                    );\n                    const strictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(oraclePriceData.price, twap5min);\n                    const signedTokenValue = (0, spotBalance_1.getStrictTokenValue)(tokenAmount, spotMarketAccount.decimals, strictOraclePrice);\n                    if (signedTokenValue.gt(numericConstants_1.ZERO)) {\n                        result.depositFuel = result.depositFuel.add((0, fuel_1.calculateSpotFuelBonus)(spotMarketAccount, signedTokenValue, fuelBonusNumerator));\n                    }\n                    else {\n                        result.borrowFuel = result.borrowFuel.add((0, fuel_1.calculateSpotFuelBonus)(spotMarketAccount, signedTokenValue, fuelBonusNumerator));\n                    }\n                }\n                for (const perpPosition of this.getActivePerpPositions()) {\n                    const oraclePriceData = this.getMMOracleDataForPerpMarket(perpPosition.marketIndex);\n                    const perpMarketAccount = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n                    const baseAssetValue = this.getPerpPositionValue(perpPosition.marketIndex, oraclePriceData, false);\n                    result.positionFuel = result.positionFuel.add((0, fuel_1.calculatePerpFuelBonus)(perpMarketAccount, baseAssetValue, fuelBonusNumerator));\n                }\n            }\n        }\n        result.insuranceFuel = userStats.getInsuranceFuelBonus(now, includeSettled, includeUnsettled);\n        return result;\n    }\n    getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false, now) {\n        now = now || new anchor_1.BN(new Date().getTime() / 1000);\n        let netQuoteValue = numericConstants_1.ZERO;\n        let totalAssetValue = numericConstants_1.ZERO;\n        let totalLiabilityValue = numericConstants_1.ZERO;\n        for (const spotPosition of this.getUserAccount().spotPositions) {\n            const countForBase = marketIndex === undefined || spotPosition.marketIndex === marketIndex;\n            const countForQuote = marketIndex === undefined ||\n                marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX ||\n                (includeOpenOrders && spotPosition.openOrders !== 0);\n            if ((0, spotPosition_1.isSpotPositionAvailable)(spotPosition) ||\n                (!countForBase && !countForQuote)) {\n                continue;\n            }\n            const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n            const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n            let twap5min;\n            if (strict) {\n                twap5min = (0, oracles_1.calculateLiveOracleTwap)(spotMarketAccount.historicalOracleData, oraclePriceData, now, numericConstants_1.FIVE_MINUTE // 5MIN\n                );\n            }\n            const strictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(oraclePriceData.price, twap5min);\n            if (spotPosition.marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX &&\n                countForQuote) {\n                const tokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), spotPosition.balanceType);\n                if ((0, types_1.isVariant)(spotPosition.balanceType, 'borrow')) {\n                    const weightedTokenValue = this.getSpotLiabilityValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory, liquidationBuffer).abs();\n                    netQuoteValue = netQuoteValue.sub(weightedTokenValue);\n                }\n                else {\n                    const weightedTokenValue = this.getSpotAssetValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory);\n                    netQuoteValue = netQuoteValue.add(weightedTokenValue);\n                }\n                continue;\n            }\n            if (!includeOpenOrders && countForBase) {\n                if ((0, types_1.isVariant)(spotPosition.balanceType, 'borrow')) {\n                    const tokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), types_2.SpotBalanceType.BORROW);\n                    const liabilityValue = this.getSpotLiabilityValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory, liquidationBuffer).abs();\n                    totalLiabilityValue = totalLiabilityValue.add(liabilityValue);\n                    continue;\n                }\n                else {\n                    const tokenAmount = (0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType);\n                    const assetValue = this.getSpotAssetValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory);\n                    totalAssetValue = totalAssetValue.add(assetValue);\n                    continue;\n                }\n            }\n            const { tokenAmount: worstCaseTokenAmount, ordersValue: worstCaseQuoteTokenAmount, } = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, strictOraclePrice, marginCategory, this.getUserAccount().maxMarginRatio);\n            if (worstCaseTokenAmount.gt(numericConstants_1.ZERO) && countForBase) {\n                const baseAssetValue = this.getSpotAssetValue(worstCaseTokenAmount, strictOraclePrice, spotMarketAccount, marginCategory);\n                totalAssetValue = totalAssetValue.add(baseAssetValue);\n            }\n            if (worstCaseTokenAmount.lt(numericConstants_1.ZERO) && countForBase) {\n                const baseLiabilityValue = this.getSpotLiabilityValue(worstCaseTokenAmount, strictOraclePrice, spotMarketAccount, marginCategory, liquidationBuffer).abs();\n                totalLiabilityValue = totalLiabilityValue.add(baseLiabilityValue);\n            }\n            if (worstCaseQuoteTokenAmount.gt(numericConstants_1.ZERO) && countForQuote) {\n                netQuoteValue = netQuoteValue.add(worstCaseQuoteTokenAmount);\n            }\n            if (worstCaseQuoteTokenAmount.lt(numericConstants_1.ZERO) && countForQuote) {\n                let weight = numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION;\n                if (marginCategory === 'Initial') {\n                    weight = anchor_1.BN.max(weight, new anchor_1.BN(this.getUserAccount().maxMarginRatio));\n                }\n                const weightedTokenValue = worstCaseQuoteTokenAmount\n                    .abs()\n                    .mul(weight)\n                    .div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n                netQuoteValue = netQuoteValue.sub(weightedTokenValue);\n            }\n            totalLiabilityValue = totalLiabilityValue.add(new anchor_1.BN(spotPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n        }\n        if (marketIndex === undefined || marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX) {\n            if (netQuoteValue.gt(numericConstants_1.ZERO)) {\n                totalAssetValue = totalAssetValue.add(netQuoteValue);\n            }\n            else {\n                totalLiabilityValue = totalLiabilityValue.add(netQuoteValue.abs());\n            }\n        }\n        return { totalAssetValue, totalLiabilityValue };\n    }\n    getSpotMarketLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false, now) {\n        const { totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict, now);\n        return totalLiabilityValue;\n    }\n    getSpotLiabilityValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory, liquidationBuffer) {\n        return (0, spotBalance_2.getSpotLiabilityValue)(tokenAmount, strictOraclePrice, spotMarketAccount, this.getUserAccount().maxMarginRatio, marginCategory, liquidationBuffer);\n    }\n    getSpotMarketAssetValue(marketIndex, marginCategory, includeOpenOrders, strict = false, now) {\n        const { totalAssetValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, undefined, includeOpenOrders, strict, now);\n        return totalAssetValue;\n    }\n    getSpotAssetValue(tokenAmount, strictOraclePrice, spotMarketAccount, marginCategory) {\n        return (0, spotBalance_2.getSpotAssetValue)(tokenAmount, strictOraclePrice, spotMarketAccount, this.getUserAccount().maxMarginRatio, marginCategory);\n    }\n    getSpotPositionValue(marketIndex, marginCategory, includeOpenOrders, strict = false, now) {\n        const { totalAssetValue, totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, undefined, includeOpenOrders, strict, now);\n        return totalAssetValue.sub(totalLiabilityValue);\n    }\n    getNetSpotMarketValue(withWeightMarginCategory) {\n        const { totalAssetValue, totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(undefined, withWeightMarginCategory);\n        return totalAssetValue.sub(totalLiabilityValue);\n    }\n    /**\n     * calculates TotalCollateral: collateral + unrealized pnl\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getTotalCollateral(marginCategory = 'Initial', strict = false, includeOpenOrders = true, liquidationBuffer) {\n        return this.getSpotMarketAssetValue(undefined, marginCategory, includeOpenOrders, strict).add(this.getUnrealizedPNL(true, undefined, marginCategory, strict, liquidationBuffer));\n    }\n    getLiquidationBuffer() {\n        // if user being liq'd, can continue to be liq'd until total collateral above the margin requirement plus buffer\n        let liquidationBuffer = undefined;\n        if (this.isBeingLiquidated()) {\n            liquidationBuffer = new anchor_1.BN(this.driftClient.getStateAccount().liquidationMarginBufferRatio);\n        }\n        return liquidationBuffer;\n    }\n    /**\n     * calculates User Health by comparing total collateral and maint. margin requirement\n     * @returns : number (value from [0, 100])\n     */\n    getHealth() {\n        if (this.isBeingLiquidated()) {\n            return 0;\n        }\n        const totalCollateral = this.getTotalCollateral('Maintenance');\n        const maintenanceMarginReq = this.getMaintenanceMarginRequirement();\n        let health;\n        if (maintenanceMarginReq.eq(numericConstants_1.ZERO) && totalCollateral.gte(numericConstants_1.ZERO)) {\n            health = 100;\n        }\n        else if (totalCollateral.lte(numericConstants_1.ZERO)) {\n            health = 0;\n        }\n        else {\n            health = Math.round(Math.min(100, Math.max(0, (1 - maintenanceMarginReq.toNumber() / totalCollateral.toNumber()) *\n                100)));\n        }\n        return health;\n    }\n    calculateWeightedPerpPositionLiability(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict = false, enteringHighLeverage = undefined) {\n        const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n        let valuationPrice = this.getOracleDataForPerpMarket(market.marketIndex).price;\n        if ((0, types_1.isVariant)(market.status, 'settlement')) {\n            valuationPrice = market.expiryPrice;\n        }\n        let baseAssetAmount;\n        let liabilityValue;\n        if (includeOpenOrders) {\n            const { worstCaseBaseAssetAmount, worstCaseLiabilityValue } = (0, margin_1.calculateWorstCasePerpLiabilityValue)(perpPosition, market, valuationPrice);\n            baseAssetAmount = worstCaseBaseAssetAmount;\n            liabilityValue = worstCaseLiabilityValue;\n        }\n        else {\n            baseAssetAmount = perpPosition.baseAssetAmount;\n            liabilityValue = (0, margin_1.calculatePerpLiabilityValue)(baseAssetAmount, valuationPrice, (0, types_1.isVariant)(market.contractType, 'prediction'));\n        }\n        if (marginCategory) {\n            const userCustomMargin = Math.max(perpPosition.maxMarginRatio, this.getUserAccount().maxMarginRatio);\n            let marginRatio = new anchor_1.BN((0, market_1.calculateMarketMarginRatio)(market, baseAssetAmount.abs(), marginCategory, enteringHighLeverage === false\n                ? Math.max(market.marginRatioInitial, userCustomMargin)\n                : userCustomMargin, this.isHighLeverageMode(marginCategory) ||\n                enteringHighLeverage === true));\n            if (liquidationBuffer !== undefined) {\n                marginRatio = marginRatio.add(liquidationBuffer);\n            }\n            if ((0, types_1.isVariant)(market.status, 'settlement')) {\n                marginRatio = numericConstants_1.ZERO;\n            }\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(market.quoteSpotMarketIndex);\n            const quoteOraclePriceData = this.driftClient.getOracleDataForSpotMarket(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n            let quotePrice;\n            if (strict) {\n                quotePrice = anchor_1.BN.max(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            }\n            else {\n                quotePrice = quoteOraclePriceData.price;\n            }\n            liabilityValue = liabilityValue\n                .mul(quotePrice)\n                .div(numericConstants_1.PRICE_PRECISION)\n                .mul(marginRatio)\n                .div(numericConstants_1.MARGIN_PRECISION);\n            if (includeOpenOrders) {\n                liabilityValue = liabilityValue.add(new anchor_1.BN(perpPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n            }\n        }\n        return liabilityValue;\n    }\n    /**\n     * calculates position value of a single perp market in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getPerpMarketLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false) {\n        const perpPosition = this.getPerpPosition(marketIndex);\n        return this.calculateWeightedPerpPositionLiability(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict);\n    }\n    /**\n     * calculates sum of position value across all positions in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getTotalPerpPositionLiability(marginCategory, liquidationBuffer, includeOpenOrders, strict = false, enteringHighLeverage = undefined) {\n        return this.getActivePerpPositions().reduce((totalPerpValue, perpPosition) => {\n            const baseAssetValue = this.calculateWeightedPerpPositionLiability(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict, enteringHighLeverage);\n            return totalPerpValue.add(baseAssetValue);\n        }, numericConstants_1.ZERO);\n    }\n    /**\n     * calculates position value based on oracle\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getPerpPositionValue(marketIndex, oraclePriceData, includeOpenOrders = false) {\n        const userPosition = this.getPerpPositionOrEmpty(marketIndex);\n        const market = this.driftClient.getPerpMarketAccount(userPosition.marketIndex);\n        return (0, margin_2.calculateBaseAssetValueWithOracle)(market, userPosition, oraclePriceData, includeOpenOrders);\n    }\n    /**\n     * calculates position liabiltiy value in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */\n    getPerpLiabilityValue(marketIndex, oraclePriceData, includeOpenOrders = false) {\n        const userPosition = this.getPerpPositionOrEmpty(marketIndex);\n        const market = this.driftClient.getPerpMarketAccount(userPosition.marketIndex);\n        if (includeOpenOrders) {\n            return (0, margin_1.calculateWorstCasePerpLiabilityValue)(userPosition, market, oraclePriceData.price).worstCaseLiabilityValue;\n        }\n        else {\n            return (0, margin_1.calculatePerpLiabilityValue)(userPosition.baseAssetAmount, oraclePriceData.price, (0, types_1.isVariant)(market.contractType, 'prediction'));\n        }\n    }\n    getPositionSide(currentPosition) {\n        if (currentPosition.baseAssetAmount.gt(numericConstants_1.ZERO)) {\n            return types_2.PositionDirection.LONG;\n        }\n        else if (currentPosition.baseAssetAmount.lt(numericConstants_1.ZERO)) {\n            return types_2.PositionDirection.SHORT;\n        }\n        else {\n            return undefined;\n        }\n    }\n    /**\n     * calculates average exit price (optionally for closing up to 100% of position)\n     * @returns : Precision PRICE_PRECISION\n     */\n    getPositionEstimatedExitPriceAndPnl(position, amountToClose, useAMMClose = false) {\n        const market = this.driftClient.getPerpMarketAccount(position.marketIndex);\n        const entryPrice = (0, position_1.calculateEntryPrice)(position);\n        const oraclePriceData = this.getMMOracleDataForPerpMarket(position.marketIndex);\n        if (amountToClose) {\n            if (amountToClose.eq(numericConstants_1.ZERO)) {\n                return [(0, market_1.calculateReservePrice)(market, oraclePriceData), numericConstants_1.ZERO];\n            }\n            position = {\n                baseAssetAmount: amountToClose,\n                lastCumulativeFundingRate: position.lastCumulativeFundingRate,\n                marketIndex: position.marketIndex,\n                quoteAssetAmount: position.quoteAssetAmount,\n            };\n        }\n        let baseAssetValue;\n        if (useAMMClose) {\n            baseAssetValue = (0, position_2.calculateBaseAssetValue)(market, position, oraclePriceData);\n        }\n        else {\n            baseAssetValue = (0, margin_2.calculateBaseAssetValueWithOracle)(market, position, oraclePriceData);\n        }\n        if (position.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n            return [numericConstants_1.ZERO, numericConstants_1.ZERO];\n        }\n        const exitPrice = baseAssetValue\n            .mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO)\n            .mul(numericConstants_1.PRICE_PRECISION)\n            .div(position.baseAssetAmount.abs());\n        const pnlPerBase = exitPrice.sub(entryPrice);\n        const pnl = pnlPerBase\n            .mul(position.baseAssetAmount)\n            .div(numericConstants_1.PRICE_PRECISION)\n            .div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n        return [exitPrice, pnl];\n    }\n    /**\n     * calculates current user leverage which is (total liability size) / (net asset value)\n     * @returns : Precision TEN_THOUSAND\n     */\n    getLeverage(includeOpenOrders = true) {\n        return this.calculateLeverageFromComponents(this.getLeverageComponents(includeOpenOrders));\n    }\n    calculateLeverageFromComponents({ perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue, }) {\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        return totalLiabilityValue.mul(numericConstants_1.TEN_THOUSAND).div(netAssetValue);\n    }\n    getLeverageComponents(includeOpenOrders = true, marginCategory = undefined) {\n        const perpLiability = this.getTotalPerpPositionLiability(marginCategory, undefined, includeOpenOrders);\n        const perpPnl = this.getUnrealizedPNL(true, undefined, marginCategory);\n        const { totalAssetValue: spotAssetValue, totalLiabilityValue: spotLiabilityValue, } = this.getSpotMarketAssetAndLiabilityValue(undefined, marginCategory, undefined, includeOpenOrders);\n        return {\n            perpLiabilityValue: perpLiability,\n            perpPnl,\n            spotAssetValue,\n            spotLiabilityValue,\n        };\n    }\n    isDustDepositPosition(spotMarketAccount) {\n        const marketIndex = spotMarketAccount.marketIndex;\n        const spotPosition = this.getSpotPosition(spotMarketAccount.marketIndex);\n        if ((0, spotPosition_1.isSpotPositionAvailable)(spotPosition)) {\n            return false;\n        }\n        const depositAmount = this.getTokenAmount(spotMarketAccount.marketIndex);\n        if (depositAmount.lte(numericConstants_1.ZERO)) {\n            return false;\n        }\n        const oraclePriceData = this.getOracleDataForSpotMarket(marketIndex);\n        const strictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(oraclePriceData.price, oraclePriceData.twap);\n        const balanceValue = this.getSpotAssetValue(depositAmount, strictOraclePrice, spotMarketAccount);\n        if (balanceValue.lt(numericConstants_1.DUST_POSITION_SIZE)) {\n            return true;\n        }\n        return false;\n    }\n    getSpotMarketAccountsWithDustPosition() {\n        const spotMarketAccounts = this.driftClient.getSpotMarketAccounts();\n        const dustPositionAccounts = [];\n        for (const spotMarketAccount of spotMarketAccounts) {\n            const isDust = this.isDustDepositPosition(spotMarketAccount);\n            if (isDust) {\n                dustPositionAccounts.push(spotMarketAccount);\n            }\n        }\n        return dustPositionAccounts;\n    }\n    getTotalLiabilityValue(marginCategory) {\n        return this.getTotalPerpPositionLiability(marginCategory, undefined, true).add(this.getSpotMarketLiabilityValue(undefined, marginCategory, undefined, true));\n    }\n    getTotalAssetValue(marginCategory) {\n        return this.getSpotMarketAssetValue(undefined, marginCategory, true).add(this.getUnrealizedPNL(true, undefined, marginCategory));\n    }\n    getNetUsdValue() {\n        const netSpotValue = this.getNetSpotMarketValue();\n        const unrealizedPnl = this.getUnrealizedPNL(true, undefined, undefined);\n        return netSpotValue.add(unrealizedPnl);\n    }\n    /**\n     * Calculates the all time P&L of the user.\n     *\n     * Net withdraws + Net spot market value + Net unrealized P&L -\n     */\n    getTotalAllTimePnl() {\n        const netUsdValue = this.getNetUsdValue();\n        const totalDeposits = this.getUserAccount().totalDeposits;\n        const totalWithdraws = this.getUserAccount().totalWithdraws;\n        const totalPnl = netUsdValue.add(totalWithdraws).sub(totalDeposits);\n        return totalPnl;\n    }\n    /**\n     * calculates max allowable leverage exceeding hitting requirement category\n     * for large sizes where imf factor activates, result is a lower bound\n     * @param marginCategory {Initial, Maintenance}\n     * @param isLp if calculating max leveraging for adding lp, need to add buffer\n     * @param enterHighLeverageMode can pass this as true to calculate max leverage if the user was to enter high leverage mode\n     * @returns : Precision TEN_THOUSAND\n     */\n    getMaxLeverageForPerp(perpMarketIndex, _marginCategory = 'Initial', isLp = false, enterHighLeverageMode = undefined) {\n        const market = this.driftClient.getPerpMarketAccount(perpMarketIndex);\n        const marketPrice = this.driftClient.getOracleDataForPerpMarket(perpMarketIndex).price;\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const lpBuffer = isLp\n            ? marketPrice.mul(market.amm.orderStepSize).div(numericConstants_1.AMM_RESERVE_PRECISION)\n            : numericConstants_1.ZERO;\n        // absolute max fesible size (upper bound)\n        const maxSizeQuote = anchor_1.BN.max(anchor_1.BN.min(this.getMaxTradeSizeUSDCForPerp(perpMarketIndex, types_2.PositionDirection.LONG, false, enterHighLeverageMode || this.isHighLeverageMode('Initial')).tradeSize, this.getMaxTradeSizeUSDCForPerp(perpMarketIndex, types_2.PositionDirection.SHORT, false, enterHighLeverageMode || this.isHighLeverageMode('Initial')).tradeSize).sub(lpBuffer), numericConstants_1.ZERO);\n        return totalLiabilityValue\n            .add(maxSizeQuote)\n            .mul(numericConstants_1.TEN_THOUSAND)\n            .div(netAssetValue);\n    }\n    /**\n     * calculates max allowable leverage exceeding hitting requirement category\n     * @param spotMarketIndex\n     * @param direction\n     * @returns : Precision TEN_THOUSAND\n     */\n    getMaxLeverageForSpot(spotMarketIndex, direction) {\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const currentQuoteLiabilityValue = this.getSpotMarketLiabilityValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const currentQuoteValue = currentQuoteAssetValue.sub(currentQuoteLiabilityValue);\n        const currentSpotMarketAssetValue = this.getSpotMarketAssetValue(spotMarketIndex);\n        const currentSpotMarketLiabilityValue = this.getSpotMarketLiabilityValue(spotMarketIndex);\n        const currentSpotMarketNetValue = currentSpotMarketAssetValue.sub(currentSpotMarketLiabilityValue);\n        const tradeQuoteAmount = this.getMaxTradeSizeUSDCForSpot(spotMarketIndex, direction, currentQuoteAssetValue, currentSpotMarketNetValue);\n        let assetValueToAdd = numericConstants_1.ZERO;\n        let liabilityValueToAdd = numericConstants_1.ZERO;\n        const newQuoteNetValue = (0, types_1.isVariant)(direction, 'short')\n            ? currentQuoteValue.add(tradeQuoteAmount)\n            : currentQuoteValue.sub(tradeQuoteAmount);\n        const newQuoteAssetValue = anchor_1.BN.max(newQuoteNetValue, numericConstants_1.ZERO);\n        const newQuoteLiabilityValue = anchor_1.BN.min(newQuoteNetValue, numericConstants_1.ZERO).abs();\n        assetValueToAdd = assetValueToAdd.add(newQuoteAssetValue.sub(currentQuoteAssetValue));\n        liabilityValueToAdd = liabilityValueToAdd.add(newQuoteLiabilityValue.sub(currentQuoteLiabilityValue));\n        const newSpotMarketNetValue = (0, types_1.isVariant)(direction, 'long')\n            ? currentSpotMarketNetValue.add(tradeQuoteAmount)\n            : currentSpotMarketNetValue.sub(tradeQuoteAmount);\n        const newSpotMarketAssetValue = anchor_1.BN.max(newSpotMarketNetValue, numericConstants_1.ZERO);\n        const newSpotMarketLiabilityValue = anchor_1.BN.min(newSpotMarketNetValue, numericConstants_1.ZERO).abs();\n        assetValueToAdd = assetValueToAdd.add(newSpotMarketAssetValue.sub(currentSpotMarketAssetValue));\n        liabilityValueToAdd = liabilityValueToAdd.add(newSpotMarketLiabilityValue.sub(currentSpotMarketLiabilityValue));\n        const finalTotalAssetValue = totalAssetValue.add(assetValueToAdd);\n        const finalTotalSpotLiability = spotLiabilityValue.add(liabilityValueToAdd);\n        const finalTotalLiabilityValue = totalLiabilityValue.add(liabilityValueToAdd);\n        const finalNetAssetValue = finalTotalAssetValue.sub(finalTotalSpotLiability);\n        return finalTotalLiabilityValue.mul(numericConstants_1.TEN_THOUSAND).div(finalNetAssetValue);\n    }\n    /**\n     * calculates margin ratio: 1 / leverage\n     * @returns : Precision TEN_THOUSAND\n     */\n    getMarginRatio() {\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        if (totalLiabilityValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.BN_MAX;\n        }\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        return netAssetValue.mul(numericConstants_1.TEN_THOUSAND).div(totalLiabilityValue);\n    }\n    canBeLiquidated() {\n        const liquidationBuffer = this.getLiquidationBuffer();\n        const totalCollateral = this.getTotalCollateral('Maintenance', undefined, undefined, liquidationBuffer);\n        const marginRequirement = this.getMaintenanceMarginRequirement(liquidationBuffer);\n        const canBeLiquidated = totalCollateral.lt(marginRequirement);\n        return {\n            canBeLiquidated,\n            marginRequirement,\n            totalCollateral,\n        };\n    }\n    isBeingLiquidated() {\n        return ((this.getUserAccount().status &\n            (types_1.UserStatus.BEING_LIQUIDATED | types_1.UserStatus.BANKRUPT)) >\n            0);\n    }\n    hasStatus(status) {\n        return (this.getUserAccount().status & status) > 0;\n    }\n    isBankrupt() {\n        return (this.getUserAccount().status & types_1.UserStatus.BANKRUPT) > 0;\n    }\n    isHighLeverageMode(marginCategory) {\n        return ((0, types_1.isVariant)(this.getUserAccount().marginMode, 'highLeverage') ||\n            (marginCategory === 'Maintenance' &&\n                (0, types_1.isVariant)(this.getUserAccount().marginMode, 'highLeverageMaintenance')));\n    }\n    /**\n     * Checks if any user position cumulative funding differs from respective market cumulative funding\n     * @returns\n     */\n    needsToSettleFundingPayment() {\n        for (const userPosition of this.getUserAccount().perpPositions) {\n            if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n                continue;\n            }\n            const market = this.driftClient.getPerpMarketAccount(userPosition.marketIndex);\n            if (market.amm.cumulativeFundingRateLong.eq(userPosition.lastCumulativeFundingRate) ||\n                market.amm.cumulativeFundingRateShort.eq(userPosition.lastCumulativeFundingRate)) {\n                continue;\n            }\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Calculate the liquidation price of a spot position\n     * @param marketIndex\n     * @returns Precision : PRICE_PRECISION\n     */\n    spotLiquidationPrice(marketIndex, positionBaseSizeChange = numericConstants_1.ZERO) {\n        const currentSpotPosition = this.getSpotPosition(marketIndex);\n        if (!currentSpotPosition) {\n            return new anchor_1.BN(-1);\n        }\n        const totalCollateral = this.getTotalCollateral('Maintenance');\n        const maintenanceMarginRequirement = this.getMaintenanceMarginRequirement();\n        const freeCollateral = anchor_1.BN.max(numericConstants_1.ZERO, totalCollateral.sub(maintenanceMarginRequirement));\n        const market = this.driftClient.getSpotMarketAccount(marketIndex);\n        let signedTokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(currentSpotPosition.scaledBalance, market, currentSpotPosition.balanceType), currentSpotPosition.balanceType);\n        signedTokenAmount = signedTokenAmount.add(positionBaseSizeChange);\n        if (signedTokenAmount.eq(numericConstants_1.ZERO)) {\n            return new anchor_1.BN(-1);\n        }\n        let freeCollateralDelta = this.calculateFreeCollateralDeltaForSpot(market, signedTokenAmount);\n        const oracle = market.oracle;\n        const perpMarketWithSameOracle = this.driftClient\n            .getPerpMarketAccounts()\n            .find((market) => market.amm.oracle.equals(oracle));\n        const oraclePrice = this.driftClient.getOracleDataForSpotMarket(marketIndex).price;\n        if (perpMarketWithSameOracle) {\n            const perpPosition = this.getPerpPositionOrEmpty(perpMarketWithSameOracle.marketIndex);\n            if (perpPosition) {\n                let freeCollateralDeltaForPerp = this.calculateFreeCollateralDeltaForPerp(perpMarketWithSameOracle, perpPosition, numericConstants_1.ZERO, oraclePrice);\n                if (freeCollateralDeltaForPerp) {\n                    const { numerator, denominator } = (0, oracles_1.getMultipleBetweenOracleSources)(market.oracleSource, perpMarketWithSameOracle.amm.oracleSource);\n                    freeCollateralDeltaForPerp = freeCollateralDeltaForPerp\n                        .mul(numerator)\n                        .div(denominator);\n                }\n                freeCollateralDelta = freeCollateralDelta.add(freeCollateralDeltaForPerp || numericConstants_1.ZERO);\n            }\n        }\n        if (freeCollateralDelta.eq(numericConstants_1.ZERO)) {\n            return new anchor_1.BN(-1);\n        }\n        const liqPriceDelta = freeCollateral\n            .mul(numericConstants_1.QUOTE_PRECISION)\n            .div(freeCollateralDelta);\n        const liqPrice = oraclePrice.sub(liqPriceDelta);\n        if (liqPrice.lt(numericConstants_1.ZERO)) {\n            return new anchor_1.BN(-1);\n        }\n        return liqPrice;\n    }\n    /**\n     * Calculate the liquidation price of a perp position, with optional parameter to calculate the liquidation price after a trade\n     * @param marketIndex\n     * @param positionBaseSizeChange // change in position size to calculate liquidation price for : Precision 10^9\n     * @param estimatedEntryPrice\n     * @param marginCategory // allow Initial to be passed in if we are trying to calculate price for DLP de-risking\n     * @param includeOpenOrders\n     * @param offsetCollateral // allows calculating the liquidation price after this offset collateral is added to the user's account (e.g. : what will the liquidation price be for this position AFTER I deposit $x worth of collateral)\n     * @returns Precision : PRICE_PRECISION\n     */\n    liquidationPrice(marketIndex, positionBaseSizeChange = numericConstants_1.ZERO, estimatedEntryPrice = numericConstants_1.ZERO, marginCategory = 'Maintenance', includeOpenOrders = false, offsetCollateral = numericConstants_1.ZERO, enteringHighLeverage = undefined) {\n        const totalCollateral = this.getTotalCollateral(marginCategory, false, includeOpenOrders);\n        const marginRequirement = this.getMarginRequirement(marginCategory, undefined, false, includeOpenOrders, enteringHighLeverage);\n        let freeCollateral = anchor_1.BN.max(numericConstants_1.ZERO, totalCollateral.sub(marginRequirement)).add(offsetCollateral);\n        const oracle = this.driftClient.getPerpMarketAccount(marketIndex).amm.oracle;\n        const oraclePrice = this.driftClient.getOracleDataForPerpMarket(marketIndex).price;\n        const market = this.driftClient.getPerpMarketAccount(marketIndex);\n        const currentPerpPosition = this.getPerpPositionOrEmpty(marketIndex);\n        positionBaseSizeChange = (0, orders_1.standardizeBaseAssetAmount)(positionBaseSizeChange, market.amm.orderStepSize);\n        const freeCollateralChangeFromNewPosition = this.calculateEntriesEffectOnFreeCollateral(market, oraclePrice, currentPerpPosition, positionBaseSizeChange, estimatedEntryPrice, includeOpenOrders, enteringHighLeverage);\n        freeCollateral = freeCollateral.add(freeCollateralChangeFromNewPosition);\n        let freeCollateralDelta = this.calculateFreeCollateralDeltaForPerp(market, currentPerpPosition, positionBaseSizeChange, oraclePrice, marginCategory, includeOpenOrders, enteringHighLeverage);\n        if (!freeCollateralDelta) {\n            return new anchor_1.BN(-1);\n        }\n        const spotMarketWithSameOracle = this.driftClient\n            .getSpotMarketAccounts()\n            .find((market) => market.oracle.equals(oracle));\n        if (spotMarketWithSameOracle) {\n            const spotPosition = this.getSpotPosition(spotMarketWithSameOracle.marketIndex);\n            if (spotPosition) {\n                const signedTokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarketWithSameOracle, spotPosition.balanceType), spotPosition.balanceType);\n                let spotFreeCollateralDelta = this.calculateFreeCollateralDeltaForSpot(spotMarketWithSameOracle, signedTokenAmount, marginCategory);\n                if (spotFreeCollateralDelta) {\n                    const { numerator, denominator } = (0, oracles_1.getMultipleBetweenOracleSources)(market.amm.oracleSource, spotMarketWithSameOracle.oracleSource);\n                    spotFreeCollateralDelta = spotFreeCollateralDelta\n                        .mul(numerator)\n                        .div(denominator);\n                }\n                freeCollateralDelta = freeCollateralDelta.add(spotFreeCollateralDelta || numericConstants_1.ZERO);\n            }\n        }\n        if (freeCollateralDelta.eq(numericConstants_1.ZERO)) {\n            return new anchor_1.BN(-1);\n        }\n        const liqPriceDelta = freeCollateral\n            .mul(numericConstants_1.QUOTE_PRECISION)\n            .div(freeCollateralDelta);\n        const liqPrice = oraclePrice.sub(liqPriceDelta);\n        if (liqPrice.lt(numericConstants_1.ZERO)) {\n            return new anchor_1.BN(-1);\n        }\n        return liqPrice;\n    }\n    calculateEntriesEffectOnFreeCollateral(market, oraclePrice, perpPosition, positionBaseSizeChange, estimatedEntryPrice, includeOpenOrders, enteringHighLeverage = undefined, marginCategory = 'Maintenance') {\n        let freeCollateralChange = numericConstants_1.ZERO;\n        // update free collateral to account for change in pnl from new position\n        if (!estimatedEntryPrice.eq(numericConstants_1.ZERO) &&\n            !positionBaseSizeChange.eq(numericConstants_1.ZERO) &&\n            marginCategory === 'Maintenance') {\n            const costBasis = oraclePrice\n                .mul(positionBaseSizeChange.abs())\n                .div(numericConstants_1.BASE_PRECISION);\n            const newPositionValue = estimatedEntryPrice\n                .mul(positionBaseSizeChange.abs())\n                .div(numericConstants_1.BASE_PRECISION);\n            if (positionBaseSizeChange.gt(numericConstants_1.ZERO)) {\n                freeCollateralChange = costBasis.sub(newPositionValue);\n            }\n            else {\n                freeCollateralChange = newPositionValue.sub(costBasis);\n            }\n            // assume worst fee tier\n            const takerFeeTier = this.driftClient.getStateAccount().perpFeeStructure.feeTiers[0];\n            const takerFee = newPositionValue\n                .muln(takerFeeTier.feeNumerator)\n                .divn(takerFeeTier.feeDenominator);\n            freeCollateralChange = freeCollateralChange.sub(takerFee);\n        }\n        const calculateMarginRequirement = (perpPosition) => {\n            let baseAssetAmount;\n            let liabilityValue;\n            if (includeOpenOrders) {\n                const { worstCaseBaseAssetAmount, worstCaseLiabilityValue } = (0, margin_1.calculateWorstCasePerpLiabilityValue)(perpPosition, market, oraclePrice);\n                baseAssetAmount = worstCaseBaseAssetAmount;\n                liabilityValue = worstCaseLiabilityValue;\n            }\n            else {\n                baseAssetAmount = perpPosition.baseAssetAmount;\n                liabilityValue = (0, margin_1.calculatePerpLiabilityValue)(baseAssetAmount, oraclePrice, (0, types_1.isVariant)(market.contractType, 'prediction'));\n            }\n            const userCustomMargin = Math.max(perpPosition.maxMarginRatio, this.getUserAccount().maxMarginRatio);\n            const marginRatio = (0, market_1.calculateMarketMarginRatio)(market, baseAssetAmount.abs(), marginCategory, enteringHighLeverage === false\n                ? Math.max(market.marginRatioInitial, userCustomMargin)\n                : userCustomMargin, this.isHighLeverageMode(marginCategory) || enteringHighLeverage === true);\n            return liabilityValue.mul(new anchor_1.BN(marginRatio)).div(numericConstants_1.MARGIN_PRECISION);\n        };\n        const freeCollateralConsumptionBefore = calculateMarginRequirement(perpPosition);\n        const perpPositionAfter = Object.assign({}, perpPosition);\n        perpPositionAfter.baseAssetAmount = perpPositionAfter.baseAssetAmount.add(positionBaseSizeChange);\n        const freeCollateralConsumptionAfter = calculateMarginRequirement(perpPositionAfter);\n        return freeCollateralChange.sub(freeCollateralConsumptionAfter.sub(freeCollateralConsumptionBefore));\n    }\n    calculateFreeCollateralDeltaForPerp(market, perpPosition, positionBaseSizeChange, oraclePrice, marginCategory = 'Maintenance', includeOpenOrders = false, enteringHighLeverage = undefined) {\n        const baseAssetAmount = includeOpenOrders\n            ? (0, margin_2.calculateWorstCaseBaseAssetAmount)(perpPosition, market, oraclePrice)\n            : perpPosition.baseAssetAmount;\n        // zero if include orders == false\n        const orderBaseAssetAmount = baseAssetAmount.sub(perpPosition.baseAssetAmount);\n        const proposedBaseAssetAmount = baseAssetAmount.add(positionBaseSizeChange);\n        const userCustomMargin = Math.max(perpPosition.maxMarginRatio, this.getUserAccount().maxMarginRatio);\n        const marginRatio = (0, market_1.calculateMarketMarginRatio)(market, proposedBaseAssetAmount.abs(), marginCategory, enteringHighLeverage === false\n            ? Math.max(market.marginRatioInitial, userCustomMargin)\n            : userCustomMargin, this.isHighLeverageMode(marginCategory) || enteringHighLeverage === true);\n        const marginRatioQuotePrecision = new anchor_1.BN(marginRatio)\n            .mul(numericConstants_1.QUOTE_PRECISION)\n            .div(numericConstants_1.MARGIN_PRECISION);\n        if (proposedBaseAssetAmount.eq(numericConstants_1.ZERO)) {\n            return undefined;\n        }\n        let freeCollateralDelta = numericConstants_1.ZERO;\n        if ((0, types_1.isVariant)(market.contractType, 'prediction')) {\n            // for prediction market, increase in pnl and margin requirement will net out for position\n            // open order margin requirement will change with price though\n            if (orderBaseAssetAmount.gt(numericConstants_1.ZERO)) {\n                freeCollateralDelta = marginRatioQuotePrecision.neg();\n            }\n            else if (orderBaseAssetAmount.lt(numericConstants_1.ZERO)) {\n                freeCollateralDelta = marginRatioQuotePrecision;\n            }\n        }\n        else {\n            if (proposedBaseAssetAmount.gt(numericConstants_1.ZERO)) {\n                freeCollateralDelta = numericConstants_1.QUOTE_PRECISION.sub(marginRatioQuotePrecision)\n                    .mul(proposedBaseAssetAmount)\n                    .div(numericConstants_1.BASE_PRECISION);\n            }\n            else {\n                freeCollateralDelta = numericConstants_1.QUOTE_PRECISION.neg()\n                    .sub(marginRatioQuotePrecision)\n                    .mul(proposedBaseAssetAmount.abs())\n                    .div(numericConstants_1.BASE_PRECISION);\n            }\n            if (!orderBaseAssetAmount.eq(numericConstants_1.ZERO)) {\n                freeCollateralDelta = freeCollateralDelta.sub(marginRatioQuotePrecision\n                    .mul(orderBaseAssetAmount.abs())\n                    .div(numericConstants_1.BASE_PRECISION));\n            }\n        }\n        return freeCollateralDelta;\n    }\n    calculateFreeCollateralDeltaForSpot(market, signedTokenAmount, marginCategory = 'Maintenance') {\n        const tokenPrecision = new anchor_1.BN(Math.pow(10, market.decimals));\n        if (signedTokenAmount.gt(numericConstants_1.ZERO)) {\n            const assetWeight = (0, spotBalance_2.calculateAssetWeight)(signedTokenAmount, this.driftClient.getOracleDataForSpotMarket(market.marketIndex).price, market, marginCategory);\n            return numericConstants_1.QUOTE_PRECISION.mul(assetWeight)\n                .div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION)\n                .mul(signedTokenAmount)\n                .div(tokenPrecision);\n        }\n        else {\n            const liabilityWeight = (0, spotBalance_2.calculateLiabilityWeight)(signedTokenAmount.abs(), market, marginCategory);\n            return numericConstants_1.QUOTE_PRECISION.neg()\n                .mul(liabilityWeight)\n                .div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION)\n                .mul(signedTokenAmount.abs())\n                .div(tokenPrecision);\n        }\n    }\n    /**\n     * Calculates the estimated liquidation price for a position after closing a quote amount of the position.\n     * @param positionMarketIndex\n     * @param closeQuoteAmount\n     * @returns : Precision PRICE_PRECISION\n     */\n    liquidationPriceAfterClose(positionMarketIndex, closeQuoteAmount, estimatedEntryPrice = numericConstants_1.ZERO) {\n        const currentPosition = this.getPerpPositionOrEmpty(positionMarketIndex);\n        const closeBaseAmount = currentPosition.baseAssetAmount\n            .mul(closeQuoteAmount)\n            .div(currentPosition.quoteAssetAmount.abs())\n            .add(currentPosition.baseAssetAmount\n            .mul(closeQuoteAmount)\n            .mod(currentPosition.quoteAssetAmount.abs()))\n            .neg();\n        return this.liquidationPrice(positionMarketIndex, closeBaseAmount, estimatedEntryPrice);\n    }\n    getMarginUSDCRequiredForTrade(targetMarketIndex, baseSize, estEntryPrice, perpMarketMaxMarginRatio) {\n        const maxMarginRatio = Math.max(perpMarketMaxMarginRatio, this.getUserAccount().maxMarginRatio);\n        return (0, margin_2.calculateMarginUSDCRequiredForTrade)(this.driftClient, targetMarketIndex, baseSize, maxMarginRatio, undefined, estEntryPrice);\n    }\n    getCollateralDepositRequiredForTrade(targetMarketIndex, baseSize, collateralIndex, perpMarketMaxMarginRatio) {\n        const maxMarginRatio = Math.max(perpMarketMaxMarginRatio, this.getUserAccount().maxMarginRatio);\n        return (0, margin_2.calculateCollateralDepositRequiredForTrade)(this.driftClient, targetMarketIndex, baseSize, collateralIndex, maxMarginRatio, false // assume user cant be high leverage if they havent created user account ?\n        );\n    }\n    /**\n     * Separates the max trade size into two parts:\n     * - tradeSize: The maximum trade size for target direction\n     * - oppositeSideTradeSize: the trade size for closing the opposite direction\n     * @param targetMarketIndex\n     * @param tradeSide\n     * @param isLp\n     * @returns { tradeSize: BN, oppositeSideTradeSize: BN} : Precision QUOTE_PRECISION\n     */\n    getMaxTradeSizeUSDCForPerp(targetMarketIndex, tradeSide, isLp = false, enterHighLeverageMode = undefined, maxMarginRatio = undefined) {\n        let tradeSize = numericConstants_1.ZERO;\n        let oppositeSideTradeSize = numericConstants_1.ZERO;\n        const currentPosition = this.getPerpPositionOrEmpty(targetMarketIndex);\n        const targetSide = (0, types_1.isVariant)(tradeSide, 'short') ? 'short' : 'long';\n        const currentPositionSide = (currentPosition === null || currentPosition === void 0 ? void 0 : currentPosition.baseAssetAmount.isNeg())\n            ? 'short'\n            : 'long';\n        const targetingSameSide = !currentPosition\n            ? true\n            : targetSide === currentPositionSide;\n        const oracleData = this.getMMOracleDataForPerpMarket(targetMarketIndex);\n        const marketAccount = this.driftClient.getPerpMarketAccount(targetMarketIndex);\n        const lpBuffer = isLp\n            ? oracleData.price\n                .mul(marketAccount.amm.orderStepSize)\n                .div(numericConstants_1.AMM_RESERVE_PRECISION)\n            : numericConstants_1.ZERO;\n        // add any position we have on the opposite side of the current trade, because we can \"flip\" the size of this position without taking any extra leverage.\n        const oppositeSizeLiabilityValue = targetingSameSide\n            ? numericConstants_1.ZERO\n            : (0, margin_1.calculatePerpLiabilityValue)(currentPosition.baseAssetAmount, oracleData.price, (0, types_1.isVariant)(marketAccount.contractType, 'prediction'));\n        const maxPositionSize = this.getPerpBuyingPower(targetMarketIndex, lpBuffer, enterHighLeverageMode, maxMarginRatio);\n        if (maxPositionSize.gte(numericConstants_1.ZERO)) {\n            if (oppositeSizeLiabilityValue.eq(numericConstants_1.ZERO)) {\n                // case 1 : Regular trade where current total position less than max, and no opposite position to account for\n                // do nothing\n                tradeSize = maxPositionSize;\n            }\n            else {\n                // case 2 : trade where current total position less than max, but need to account for flipping the current position over to the other side\n                tradeSize = maxPositionSize.add(oppositeSizeLiabilityValue);\n                oppositeSideTradeSize = oppositeSizeLiabilityValue;\n            }\n        }\n        else {\n            // current leverage is greater than max leverage - can only reduce position size\n            if (!targetingSameSide) {\n                const market = this.driftClient.getPerpMarketAccount(targetMarketIndex);\n                const perpLiabilityValue = (0, margin_1.calculatePerpLiabilityValue)(currentPosition.baseAssetAmount, oracleData.price, (0, types_1.isVariant)(market.contractType, 'prediction'));\n                const totalCollateral = this.getTotalCollateral();\n                const marginRequirement = this.getInitialMarginRequirement(enterHighLeverageMode);\n                const marginRatio = Math.max(currentPosition.maxMarginRatio, this.getUserAccount().maxMarginRatio);\n                const marginFreedByClosing = perpLiabilityValue\n                    .mul(new anchor_1.BN(marginRatio))\n                    .div(numericConstants_1.MARGIN_PRECISION);\n                const marginRequirementAfterClosing = marginRequirement.sub(marginFreedByClosing);\n                if (marginRequirementAfterClosing.gt(totalCollateral)) {\n                    oppositeSideTradeSize = perpLiabilityValue;\n                }\n                else {\n                    const freeCollateralAfterClose = totalCollateral.sub(marginRequirementAfterClosing);\n                    const buyingPowerAfterClose = this.getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(targetMarketIndex, freeCollateralAfterClose, numericConstants_1.ZERO, currentPosition.maxMarginRatio);\n                    oppositeSideTradeSize = perpLiabilityValue;\n                    tradeSize = buyingPowerAfterClose;\n                }\n            }\n            else {\n                // do nothing if targetting same side\n                tradeSize = maxPositionSize;\n            }\n        }\n        const freeCollateral = this.getFreeCollateral('Initial', enterHighLeverageMode);\n        let baseTradeSize = targetSide === 'long'\n            ? tradeSize.mul(numericConstants_1.BASE_PRECISION).div(oracleData.price)\n            : tradeSize.mul(numericConstants_1.BASE_PRECISION).div(oracleData.price).neg();\n        let freeCollateralChangeFromNewPosition = this.calculateEntriesEffectOnFreeCollateral(marketAccount, oracleData.price, currentPosition, baseTradeSize, oracleData.price, false, enterHighLeverageMode, 'Initial');\n        while (freeCollateralChangeFromNewPosition.isNeg() &&\n            freeCollateralChangeFromNewPosition.abs().gt(freeCollateral)) {\n            tradeSize = tradeSize.mul(new anchor_1.BN(99)).div(new anchor_1.BN(100));\n            baseTradeSize =\n                targetSide === 'long'\n                    ? tradeSize.mul(numericConstants_1.BASE_PRECISION).div(oracleData.price)\n                    : tradeSize.mul(numericConstants_1.BASE_PRECISION).div(oracleData.price).neg();\n            freeCollateralChangeFromNewPosition =\n                this.calculateEntriesEffectOnFreeCollateral(marketAccount, oracleData.price, currentPosition, baseTradeSize, oracleData.price, false, enterHighLeverageMode, 'Initial');\n        }\n        return { tradeSize, oppositeSideTradeSize };\n    }\n    /**\n     * Get the maximum trade size for a given market, taking into account the user's current leverage, positions, collateral, etc.\n     *\n     * @param targetMarketIndex\n     * @param direction\n     * @param currentQuoteAssetValue\n     * @param currentSpotMarketNetValue\n     * @returns tradeSizeAllowed : Precision QUOTE_PRECISION\n     */\n    getMaxTradeSizeUSDCForSpot(targetMarketIndex, direction, currentQuoteAssetValue, currentSpotMarketNetValue) {\n        const market = this.driftClient.getSpotMarketAccount(targetMarketIndex);\n        const oraclePrice = this.driftClient.getOracleDataForSpotMarket(targetMarketIndex).price;\n        currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        currentSpotMarketNetValue =\n            currentSpotMarketNetValue !== null && currentSpotMarketNetValue !== void 0 ? currentSpotMarketNetValue : this.getSpotPositionValue(targetMarketIndex);\n        let freeCollateral = this.getFreeCollateral();\n        const marginRatio = (0, spotMarket_1.calculateSpotMarketMarginRatio)(market, oraclePrice, 'Initial', numericConstants_1.ZERO, (0, types_1.isVariant)(direction, 'long')\n            ? types_2.SpotBalanceType.DEPOSIT\n            : types_2.SpotBalanceType.BORROW, this.getUserAccount().maxMarginRatio);\n        let tradeAmount = numericConstants_1.ZERO;\n        if (this.getUserAccount().isMarginTradingEnabled) {\n            // if the user is buying/selling and already short/long, need to account for closing out short/long\n            if ((0, types_1.isVariant)(direction, 'long') && currentSpotMarketNetValue.lt(numericConstants_1.ZERO)) {\n                tradeAmount = currentSpotMarketNetValue.abs();\n                const marginRatio = (0, spotMarket_1.calculateSpotMarketMarginRatio)(market, oraclePrice, 'Initial', this.getTokenAmount(targetMarketIndex).abs(), types_2.SpotBalanceType.BORROW, this.getUserAccount().maxMarginRatio);\n                freeCollateral = freeCollateral.add(tradeAmount.mul(new anchor_1.BN(marginRatio)).div(numericConstants_1.MARGIN_PRECISION));\n            }\n            else if ((0, types_1.isVariant)(direction, 'short') &&\n                currentSpotMarketNetValue.gt(numericConstants_1.ZERO)) {\n                tradeAmount = currentSpotMarketNetValue;\n                const marginRatio = (0, spotMarket_1.calculateSpotMarketMarginRatio)(market, oraclePrice, 'Initial', this.getTokenAmount(targetMarketIndex), types_2.SpotBalanceType.DEPOSIT, this.getUserAccount().maxMarginRatio);\n                freeCollateral = freeCollateral.add(tradeAmount.mul(new anchor_1.BN(marginRatio)).div(numericConstants_1.MARGIN_PRECISION));\n            }\n            tradeAmount = tradeAmount.add(freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new anchor_1.BN(marginRatio)));\n        }\n        else if ((0, types_1.isVariant)(direction, 'long')) {\n            tradeAmount = anchor_1.BN.min(currentQuoteAssetValue, freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new anchor_1.BN(marginRatio)));\n        }\n        else {\n            tradeAmount = anchor_1.BN.max(numericConstants_1.ZERO, currentSpotMarketNetValue);\n        }\n        return tradeAmount;\n    }\n    /**\n     * Calculates the max amount of token that can be swapped from inMarket to outMarket\n     * Assumes swap happens at oracle price\n     *\n     * @param inMarketIndex\n     * @param outMarketIndex\n     * @param calculateSwap function to similate in to out swa\n     * @param iterationLimit how long to run appromixation before erroring out\n     */\n    getMaxSwapAmount({ inMarketIndex, outMarketIndex, calculateSwap, iterationLimit = 1000, }) {\n        const inMarket = this.driftClient.getSpotMarketAccount(inMarketIndex);\n        const outMarket = this.driftClient.getSpotMarketAccount(outMarketIndex);\n        const inOraclePriceData = this.getOracleDataForSpotMarket(inMarketIndex);\n        const inOraclePrice = inOraclePriceData.price;\n        const outOraclePriceData = this.getOracleDataForSpotMarket(outMarketIndex);\n        const outOraclePrice = outOraclePriceData.price;\n        const inStrictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(inOraclePrice);\n        const outStrictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(outOraclePrice);\n        const inPrecision = new anchor_1.BN(10 ** inMarket.decimals);\n        const outPrecision = new anchor_1.BN(10 ** outMarket.decimals);\n        const inSpotPosition = this.getSpotPosition(inMarketIndex) ||\n            this.getEmptySpotPosition(inMarketIndex);\n        const outSpotPosition = this.getSpotPosition(outMarketIndex) ||\n            this.getEmptySpotPosition(outMarketIndex);\n        const freeCollateral = this.getFreeCollateral();\n        const inContributionInitial = this.calculateSpotPositionFreeCollateralContribution(inSpotPosition, inStrictOraclePrice);\n        const { totalAssetValue: inTotalAssetValueInitial, totalLiabilityValue: inTotalLiabilityValueInitial, } = this.calculateSpotPositionLeverageContribution(inSpotPosition, inStrictOraclePrice);\n        const outContributionInitial = this.calculateSpotPositionFreeCollateralContribution(outSpotPosition, outStrictOraclePrice);\n        const { totalAssetValue: outTotalAssetValueInitial, totalLiabilityValue: outTotalLiabilityValueInitial, } = this.calculateSpotPositionLeverageContribution(outSpotPosition, outStrictOraclePrice);\n        const initialContribution = inContributionInitial.add(outContributionInitial);\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        if (!calculateSwap) {\n            calculateSwap = (inSwap) => {\n                return inSwap\n                    .mul(outPrecision)\n                    .mul(inOraclePrice)\n                    .div(outOraclePrice)\n                    .div(inPrecision);\n            };\n        }\n        let inSwap = numericConstants_1.ZERO;\n        let outSwap = numericConstants_1.ZERO;\n        const inTokenAmount = this.getTokenAmount(inMarketIndex);\n        const outTokenAmount = this.getTokenAmount(outMarketIndex);\n        const inAssetWeight = (0, spotBalance_2.calculateAssetWeight)(inTokenAmount, inOraclePriceData.price, inMarket, 'Initial');\n        const outAssetWeight = (0, spotBalance_2.calculateAssetWeight)(outTokenAmount, outOraclePriceData.price, outMarket, 'Initial');\n        const outSaferThanIn = \n        // selling asset to close borrow\n        (inTokenAmount.gt(numericConstants_1.ZERO) && outTokenAmount.lt(numericConstants_1.ZERO)) ||\n            // buying asset with higher initial asset weight\n            inAssetWeight.lte(outAssetWeight);\n        if (freeCollateral.lt(numericConstants_1.PRICE_PRECISION.divn(100))) {\n            if (outSaferThanIn && inTokenAmount.gt(numericConstants_1.ZERO)) {\n                inSwap = inTokenAmount;\n                outSwap = calculateSwap(inSwap);\n            }\n        }\n        else {\n            let minSwap = numericConstants_1.ZERO;\n            let maxSwap = anchor_1.BN.max(freeCollateral.mul(inPrecision).mul(new anchor_1.BN(100)).div(inOraclePrice), // 100x current free collateral\n            inTokenAmount.abs().mul(new anchor_1.BN(10)) // 10x current position\n            );\n            inSwap = maxSwap.div(numericConstants_1.TWO);\n            const error = freeCollateral.div(new anchor_1.BN(10000));\n            let i = 0;\n            let freeCollateralAfter = freeCollateral;\n            while (freeCollateralAfter.gt(error) || freeCollateralAfter.isNeg()) {\n                outSwap = calculateSwap(inSwap);\n                const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inSwap.neg(), inMarket);\n                const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outSwap, outMarket);\n                const inContributionAfter = this.calculateSpotPositionFreeCollateralContribution(inPositionAfter, inStrictOraclePrice);\n                const outContributionAfter = this.calculateSpotPositionFreeCollateralContribution(outPositionAfter, outStrictOraclePrice);\n                const contributionAfter = inContributionAfter.add(outContributionAfter);\n                const contributionDelta = contributionAfter.sub(initialContribution);\n                freeCollateralAfter = freeCollateral.add(contributionDelta);\n                if (freeCollateralAfter.gt(error)) {\n                    minSwap = inSwap;\n                    inSwap = minSwap.add(maxSwap).div(numericConstants_1.TWO);\n                }\n                else if (freeCollateralAfter.isNeg()) {\n                    maxSwap = inSwap;\n                    inSwap = minSwap.add(maxSwap).div(numericConstants_1.TWO);\n                }\n                if (i++ > iterationLimit) {\n                    console.log('getMaxSwapAmount iteration limit reached');\n                    break;\n                }\n            }\n        }\n        const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inSwap.neg(), inMarket);\n        const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outSwap, outMarket);\n        const { totalAssetValue: inTotalAssetValueAfter, totalLiabilityValue: inTotalLiabilityValueAfter, } = this.calculateSpotPositionLeverageContribution(inPositionAfter, inStrictOraclePrice);\n        const { totalAssetValue: outTotalAssetValueAfter, totalLiabilityValue: outTotalLiabilityValueAfter, } = this.calculateSpotPositionLeverageContribution(outPositionAfter, outStrictOraclePrice);\n        const spotAssetValueDelta = inTotalAssetValueAfter\n            .add(outTotalAssetValueAfter)\n            .sub(inTotalAssetValueInitial)\n            .sub(outTotalAssetValueInitial);\n        const spotLiabilityValueDelta = inTotalLiabilityValueAfter\n            .add(outTotalLiabilityValueAfter)\n            .sub(inTotalLiabilityValueInitial)\n            .sub(outTotalLiabilityValueInitial);\n        const spotAssetValueAfter = spotAssetValue.add(spotAssetValueDelta);\n        const spotLiabilityValueAfter = spotLiabilityValue.add(spotLiabilityValueDelta);\n        const leverage = this.calculateLeverageFromComponents({\n            perpLiabilityValue,\n            perpPnl,\n            spotAssetValue: spotAssetValueAfter,\n            spotLiabilityValue: spotLiabilityValueAfter,\n        });\n        return { inAmount: inSwap, outAmount: outSwap, leverage };\n    }\n    cloneAndUpdateSpotPosition(position, tokenAmount, market) {\n        const clonedPosition = Object.assign({}, position);\n        if (tokenAmount.eq(numericConstants_1.ZERO)) {\n            return clonedPosition;\n        }\n        const preTokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(position.scaledBalance, market, position.balanceType), position.balanceType);\n        if ((0, utils_1.sigNum)(preTokenAmount).eq((0, utils_1.sigNum)(tokenAmount))) {\n            const scaledBalanceDelta = (0, spotBalance_1.getBalance)(tokenAmount.abs(), market, position.balanceType);\n            clonedPosition.scaledBalance =\n                clonedPosition.scaledBalance.add(scaledBalanceDelta);\n            return clonedPosition;\n        }\n        const updateDirection = tokenAmount.isNeg()\n            ? types_2.SpotBalanceType.BORROW\n            : types_2.SpotBalanceType.DEPOSIT;\n        if (tokenAmount.abs().gte(preTokenAmount.abs())) {\n            clonedPosition.scaledBalance = (0, spotBalance_1.getBalance)(tokenAmount.abs().sub(preTokenAmount.abs()), market, updateDirection);\n            clonedPosition.balanceType = updateDirection;\n        }\n        else {\n            const scaledBalanceDelta = (0, spotBalance_1.getBalance)(tokenAmount.abs(), market, position.balanceType);\n            clonedPosition.scaledBalance =\n                clonedPosition.scaledBalance.sub(scaledBalanceDelta);\n        }\n        return clonedPosition;\n    }\n    calculateSpotPositionFreeCollateralContribution(spotPosition, strictOraclePrice) {\n        const marginCategory = 'Initial';\n        const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n        const { freeCollateralContribution } = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, strictOraclePrice, marginCategory, this.getUserAccount().maxMarginRatio);\n        return freeCollateralContribution;\n    }\n    calculateSpotPositionLeverageContribution(spotPosition, strictOraclePrice) {\n        let totalAssetValue = numericConstants_1.ZERO;\n        let totalLiabilityValue = numericConstants_1.ZERO;\n        const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n        const { tokenValue, ordersValue } = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, strictOraclePrice, 'Initial', this.getUserAccount().maxMarginRatio);\n        if (tokenValue.gte(numericConstants_1.ZERO)) {\n            totalAssetValue = tokenValue;\n        }\n        else {\n            totalLiabilityValue = tokenValue.abs();\n        }\n        if (ordersValue.gt(numericConstants_1.ZERO)) {\n            totalAssetValue = totalAssetValue.add(ordersValue);\n        }\n        else {\n            totalLiabilityValue = totalLiabilityValue.add(ordersValue.abs());\n        }\n        return {\n            totalAssetValue,\n            totalLiabilityValue,\n        };\n    }\n    /**\n     * Estimates what the user leverage will be after swap\n     * @param inMarketIndex\n     * @param outMarketIndex\n     * @param inAmount\n     * @param outAmount\n     */\n    accountLeverageAfterSwap({ inMarketIndex, outMarketIndex, inAmount, outAmount, }) {\n        const inMarket = this.driftClient.getSpotMarketAccount(inMarketIndex);\n        const outMarket = this.driftClient.getSpotMarketAccount(outMarketIndex);\n        const inOraclePriceData = this.getOracleDataForSpotMarket(inMarketIndex);\n        const inOraclePrice = inOraclePriceData.price;\n        const outOraclePriceData = this.getOracleDataForSpotMarket(outMarketIndex);\n        const outOraclePrice = outOraclePriceData.price;\n        const inStrictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(inOraclePrice);\n        const outStrictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(outOraclePrice);\n        const inSpotPosition = this.getSpotPosition(inMarketIndex) ||\n            this.getEmptySpotPosition(inMarketIndex);\n        const outSpotPosition = this.getSpotPosition(outMarketIndex) ||\n            this.getEmptySpotPosition(outMarketIndex);\n        const { totalAssetValue: inTotalAssetValueInitial, totalLiabilityValue: inTotalLiabilityValueInitial, } = this.calculateSpotPositionLeverageContribution(inSpotPosition, inStrictOraclePrice);\n        const { totalAssetValue: outTotalAssetValueInitial, totalLiabilityValue: outTotalLiabilityValueInitial, } = this.calculateSpotPositionLeverageContribution(outSpotPosition, outStrictOraclePrice);\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inAmount.abs().neg(), inMarket);\n        const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outAmount.abs(), outMarket);\n        const { totalAssetValue: inTotalAssetValueAfter, totalLiabilityValue: inTotalLiabilityValueAfter, } = this.calculateSpotPositionLeverageContribution(inPositionAfter, inStrictOraclePrice);\n        const { totalAssetValue: outTotalAssetValueAfter, totalLiabilityValue: outTotalLiabilityValueAfter, } = this.calculateSpotPositionLeverageContribution(outPositionAfter, outStrictOraclePrice);\n        const spotAssetValueDelta = inTotalAssetValueAfter\n            .add(outTotalAssetValueAfter)\n            .sub(inTotalAssetValueInitial)\n            .sub(outTotalAssetValueInitial);\n        const spotLiabilityValueDelta = inTotalLiabilityValueAfter\n            .add(outTotalLiabilityValueAfter)\n            .sub(inTotalLiabilityValueInitial)\n            .sub(outTotalLiabilityValueInitial);\n        const spotAssetValueAfter = spotAssetValue.add(spotAssetValueDelta);\n        const spotLiabilityValueAfter = spotLiabilityValue.add(spotLiabilityValueDelta);\n        return this.calculateLeverageFromComponents({\n            perpLiabilityValue,\n            perpPnl,\n            spotAssetValue: spotAssetValueAfter,\n            spotLiabilityValue: spotLiabilityValueAfter,\n        });\n    }\n    // TODO - should this take the price impact of the trade into account for strict accuracy?\n    /**\n     * Returns the leverage ratio for the account after adding (or subtracting) the given quote size to the given position\n     * @param targetMarketIndex\n     * @param: targetMarketType\n     * @param tradeQuoteAmount\n     * @param tradeSide\n     * @param includeOpenOrders\n     * @returns leverageRatio : Precision TEN_THOUSAND\n     */\n    accountLeverageRatioAfterTrade(targetMarketIndex, targetMarketType, tradeQuoteAmount, tradeSide, includeOpenOrders = true) {\n        const tradeIsPerp = (0, types_1.isVariant)(targetMarketType, 'perp');\n        if (!tradeIsPerp) {\n            // calculate new asset/liability values for base and quote market to find new account leverage\n            const totalLiabilityValue = this.getTotalLiabilityValue();\n            const totalAssetValue = this.getTotalAssetValue();\n            const spotLiabilityValue = this.getSpotMarketLiabilityValue(undefined, undefined, undefined, includeOpenOrders);\n            const currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, undefined, includeOpenOrders);\n            const currentQuoteLiabilityValue = this.getSpotMarketLiabilityValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, undefined, undefined, includeOpenOrders);\n            const currentQuoteValue = currentQuoteAssetValue.sub(currentQuoteLiabilityValue);\n            const currentSpotMarketAssetValue = this.getSpotMarketAssetValue(targetMarketIndex, undefined, includeOpenOrders);\n            const currentSpotMarketLiabilityValue = this.getSpotMarketLiabilityValue(targetMarketIndex, undefined, undefined, includeOpenOrders);\n            const currentSpotMarketNetValue = currentSpotMarketAssetValue.sub(currentSpotMarketLiabilityValue);\n            let assetValueToAdd = numericConstants_1.ZERO;\n            let liabilityValueToAdd = numericConstants_1.ZERO;\n            const newQuoteNetValue = tradeSide == types_2.PositionDirection.SHORT\n                ? currentQuoteValue.add(tradeQuoteAmount)\n                : currentQuoteValue.sub(tradeQuoteAmount);\n            const newQuoteAssetValue = anchor_1.BN.max(newQuoteNetValue, numericConstants_1.ZERO);\n            const newQuoteLiabilityValue = anchor_1.BN.min(newQuoteNetValue, numericConstants_1.ZERO).abs();\n            assetValueToAdd = assetValueToAdd.add(newQuoteAssetValue.sub(currentQuoteAssetValue));\n            liabilityValueToAdd = liabilityValueToAdd.add(newQuoteLiabilityValue.sub(currentQuoteLiabilityValue));\n            const newSpotMarketNetValue = tradeSide == types_2.PositionDirection.LONG\n                ? currentSpotMarketNetValue.add(tradeQuoteAmount)\n                : currentSpotMarketNetValue.sub(tradeQuoteAmount);\n            const newSpotMarketAssetValue = anchor_1.BN.max(newSpotMarketNetValue, numericConstants_1.ZERO);\n            const newSpotMarketLiabilityValue = anchor_1.BN.min(newSpotMarketNetValue, numericConstants_1.ZERO).abs();\n            assetValueToAdd = assetValueToAdd.add(newSpotMarketAssetValue.sub(currentSpotMarketAssetValue));\n            liabilityValueToAdd = liabilityValueToAdd.add(newSpotMarketLiabilityValue.sub(currentSpotMarketLiabilityValue));\n            const totalAssetValueAfterTrade = totalAssetValue.add(assetValueToAdd);\n            const totalSpotLiabilityValueAfterTrade = spotLiabilityValue.add(liabilityValueToAdd);\n            const totalLiabilityValueAfterTrade = totalLiabilityValue.add(liabilityValueToAdd);\n            const netAssetValueAfterTrade = totalAssetValueAfterTrade.sub(totalSpotLiabilityValueAfterTrade);\n            if (netAssetValueAfterTrade.eq(numericConstants_1.ZERO)) {\n                return numericConstants_1.ZERO;\n            }\n            const newLeverage = totalLiabilityValueAfterTrade\n                .mul(numericConstants_1.TEN_THOUSAND)\n                .div(netAssetValueAfterTrade);\n            return newLeverage;\n        }\n        const currentPosition = this.getPerpPositionOrEmpty(targetMarketIndex);\n        const perpMarket = this.driftClient.getPerpMarketAccount(targetMarketIndex);\n        const oracleData = this.getOracleDataForPerpMarket(targetMarketIndex);\n        let { \n        // eslint-disable-next-line prefer-const\n        worstCaseBaseAssetAmount: worstCaseBase, worstCaseLiabilityValue: currentPositionQuoteAmount, } = (0, margin_1.calculateWorstCasePerpLiabilityValue)(currentPosition, perpMarket, oracleData.price);\n        // current side is short if position base asset amount is negative OR there is no position open but open orders are short\n        const currentSide = currentPosition.baseAssetAmount.isNeg() ||\n            (currentPosition.baseAssetAmount.eq(numericConstants_1.ZERO) && worstCaseBase.isNeg())\n            ? types_2.PositionDirection.SHORT\n            : types_2.PositionDirection.LONG;\n        if (currentSide === types_2.PositionDirection.SHORT)\n            currentPositionQuoteAmount = currentPositionQuoteAmount.neg();\n        if (tradeSide === types_2.PositionDirection.SHORT)\n            tradeQuoteAmount = tradeQuoteAmount.neg();\n        const currentPerpPositionAfterTrade = currentPositionQuoteAmount\n            .add(tradeQuoteAmount)\n            .abs();\n        const totalPositionAfterTradeExcludingTargetMarket = this.getTotalPerpPositionValueExcludingMarket(targetMarketIndex, undefined, undefined, includeOpenOrders);\n        const totalAssetValue = this.getTotalAssetValue();\n        const totalPerpPositionLiability = currentPerpPositionAfterTrade\n            .add(totalPositionAfterTradeExcludingTargetMarket)\n            .abs();\n        const totalSpotLiability = this.getSpotMarketLiabilityValue(undefined, undefined, undefined, includeOpenOrders);\n        const totalLiabilitiesAfterTrade = totalPerpPositionLiability.add(totalSpotLiability);\n        const netAssetValue = totalAssetValue.sub(totalSpotLiability);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const newLeverage = totalLiabilitiesAfterTrade\n            .mul(numericConstants_1.TEN_THOUSAND)\n            .div(netAssetValue);\n        return newLeverage;\n    }\n    getUserFeeTier(marketType, now) {\n        const state = this.driftClient.getStateAccount();\n        const feeTierIndex = 0;\n        if ((0, types_1.isVariant)(marketType, 'perp')) {\n            if (this.isHighLeverageMode('Initial')) {\n                return state.perpFeeStructure.feeTiers[0];\n            }\n            const userStatsAccount = this.driftClient\n                .getUserStats()\n                .getAccount();\n            const total30dVolume = (0, trade_1.getUser30dRollingVolumeEstimate)(userStatsAccount, now);\n            const stakedGovAssetAmount = userStatsAccount.ifStakedGovTokenAmount;\n            const volumeThresholds = [\n                new anchor_1.BN(2000000).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(10000000).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(20000000).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(80000000).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(200000000).mul(numericConstants_1.QUOTE_PRECISION),\n            ];\n            const stakeThresholds = [\n                new anchor_1.BN(1000 - 1).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(10000 - 1).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(50000 - 1).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(100000 - 1).mul(numericConstants_1.QUOTE_PRECISION),\n                new anchor_1.BN(250000 - 5).mul(numericConstants_1.QUOTE_PRECISION),\n            ];\n            const stakeBenefitFrac = [0, 5, 10, 20, 30, 40];\n            let feeTierIndex = 5;\n            for (let i = 0; i < volumeThresholds.length; i++) {\n                if (total30dVolume.lt(volumeThresholds[i])) {\n                    feeTierIndex = i;\n                    break;\n                }\n            }\n            let stakeBenefitIndex = 5;\n            for (let i = 0; i < stakeThresholds.length; i++) {\n                if (stakedGovAssetAmount.lt(stakeThresholds[i])) {\n                    stakeBenefitIndex = i;\n                    break;\n                }\n            }\n            const stakeBenefit = stakeBenefitFrac[stakeBenefitIndex];\n            const tier = { ...state.perpFeeStructure.feeTiers[feeTierIndex] };\n            if (stakeBenefit > 0) {\n                tier.feeNumerator = (tier.feeNumerator * (100 - stakeBenefit)) / 100;\n                tier.makerRebateNumerator =\n                    (tier.makerRebateNumerator * (100 + stakeBenefit)) / 100;\n            }\n            return tier;\n        }\n        return state.spotFeeStructure.feeTiers[feeTierIndex];\n    }\n    /**\n     * Calculates how much perp fee will be taken for a given sized trade\n     * @param quoteAmount\n     * @returns feeForQuote : Precision QUOTE_PRECISION\n     */\n    calculateFeeForQuoteAmount(quoteAmount, marketIndex, enteringHighLeverageMode) {\n        if (marketIndex !== undefined) {\n            const takerFeeMultiplier = this.driftClient.getMarketFees(types_2.MarketType.PERP, marketIndex, this, enteringHighLeverageMode).takerFee;\n            const feeAmountNum = bigNum_1.BigNum.from(quoteAmount, numericConstants_1.QUOTE_PRECISION_EXP).toNum() *\n                takerFeeMultiplier;\n            return bigNum_1.BigNum.fromPrint(feeAmountNum.toString(), numericConstants_1.QUOTE_PRECISION_EXP).val;\n        }\n        else {\n            const feeTier = this.getUserFeeTier(types_2.MarketType.PERP);\n            return quoteAmount\n                .mul(new anchor_1.BN(feeTier.feeNumerator))\n                .div(new anchor_1.BN(feeTier.feeDenominator));\n        }\n    }\n    /**\n     * Calculates a user's max withdrawal amounts for a spot market. If reduceOnly is true,\n     * it will return the max withdrawal amount without opening a liability for the user\n     * @param marketIndex\n     * @returns withdrawalLimit : Precision is the token precision for the chosen SpotMarket\n     */\n    getWithdrawalLimit(marketIndex, reduceOnly) {\n        const nowTs = new anchor_1.BN(Math.floor(Date.now() / 1000));\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        // eslint-disable-next-line prefer-const\n        let { borrowLimit, withdrawLimit } = (0, spotBalance_2.calculateWithdrawLimit)(spotMarket, nowTs);\n        const freeCollateral = this.getFreeCollateral();\n        const initialMarginRequirement = this.getInitialMarginRequirement();\n        const oracleData = this.getOracleDataForSpotMarket(marketIndex);\n        const { numeratorScale, denominatorScale } = spotMarket.decimals > 6\n            ? {\n                numeratorScale: new anchor_1.BN(10).pow(new anchor_1.BN(spotMarket.decimals - 6)),\n                denominatorScale: new anchor_1.BN(1),\n            }\n            : {\n                numeratorScale: new anchor_1.BN(1),\n                denominatorScale: new anchor_1.BN(10).pow(new anchor_1.BN(6 - spotMarket.decimals)),\n            };\n        const { canBypass, depositAmount: userDepositAmount } = this.canBypassWithdrawLimits(marketIndex);\n        if (canBypass) {\n            withdrawLimit = anchor_1.BN.max(withdrawLimit, userDepositAmount);\n        }\n        const assetWeight = (0, spotBalance_2.calculateAssetWeight)(userDepositAmount, oracleData.price, spotMarket, 'Initial');\n        let amountWithdrawable;\n        if (assetWeight.eq(numericConstants_1.ZERO)) {\n            amountWithdrawable = userDepositAmount;\n        }\n        else if (initialMarginRequirement.eq(numericConstants_1.ZERO)) {\n            amountWithdrawable = userDepositAmount;\n        }\n        else {\n            amountWithdrawable = (0, utils_1.divCeil)((0, utils_1.divCeil)(freeCollateral.mul(numericConstants_1.MARGIN_PRECISION), assetWeight).mul(numericConstants_1.PRICE_PRECISION), oracleData.price)\n                .mul(numeratorScale)\n                .div(denominatorScale);\n        }\n        const maxWithdrawValue = anchor_1.BN.min(anchor_1.BN.min(amountWithdrawable, userDepositAmount), withdrawLimit.abs());\n        if (reduceOnly) {\n            return anchor_1.BN.max(maxWithdrawValue, numericConstants_1.ZERO);\n        }\n        else {\n            const weightedAssetValue = this.getSpotMarketAssetValue(marketIndex, 'Initial', false);\n            const freeCollatAfterWithdraw = userDepositAmount.gt(numericConstants_1.ZERO)\n                ? freeCollateral.sub(weightedAssetValue)\n                : freeCollateral;\n            const maxLiabilityAllowed = freeCollatAfterWithdraw\n                .mul(numericConstants_1.MARGIN_PRECISION)\n                .div(new anchor_1.BN(spotMarket.initialLiabilityWeight))\n                .mul(numericConstants_1.PRICE_PRECISION)\n                .div(oracleData.price)\n                .mul(numeratorScale)\n                .div(denominatorScale);\n            const maxBorrowValue = anchor_1.BN.min(maxWithdrawValue.add(maxLiabilityAllowed), borrowLimit.abs());\n            return anchor_1.BN.max(maxBorrowValue, numericConstants_1.ZERO);\n        }\n    }\n    canBypassWithdrawLimits(marketIndex) {\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        const maxDepositAmount = spotMarket.withdrawGuardThreshold.div(new anchor_1.BN(10));\n        const position = this.getSpotPosition(marketIndex);\n        const netDeposits = this.getUserAccount().totalDeposits.sub(this.getUserAccount().totalWithdraws);\n        if (!position) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                depositAmount: numericConstants_1.ZERO,\n                netDeposits,\n            };\n        }\n        if ((0, types_1.isVariant)(position.balanceType, 'borrow')) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                netDeposits,\n                depositAmount: numericConstants_1.ZERO,\n            };\n        }\n        const depositAmount = (0, spotBalance_2.getTokenAmount)(position.scaledBalance, spotMarket, types_2.SpotBalanceType.DEPOSIT);\n        if (netDeposits.lt(numericConstants_1.ZERO)) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                depositAmount,\n                netDeposits,\n            };\n        }\n        return {\n            canBypass: depositAmount.lt(maxDepositAmount),\n            maxDepositAmount,\n            netDeposits,\n            depositAmount,\n        };\n    }\n    canMakeIdle(slot) {\n        const userAccount = this.getUserAccount();\n        if (userAccount.idle) {\n            return false;\n        }\n        const { totalAssetValue, totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue();\n        const equity = totalAssetValue.sub(totalLiabilityValue);\n        let slotsBeforeIdle;\n        if (equity.lt(numericConstants_1.QUOTE_PRECISION.muln(1000))) {\n            slotsBeforeIdle = new anchor_1.BN(9000); // 1 hour\n        }\n        else {\n            slotsBeforeIdle = new anchor_1.BN(1512000); // 1 week\n        }\n        const userLastActiveSlot = userAccount.lastActiveSlot;\n        const slotsSinceLastActive = slot.sub(userLastActiveSlot);\n        if (slotsSinceLastActive.lt(slotsBeforeIdle)) {\n            return false;\n        }\n        if (this.isBeingLiquidated()) {\n            return false;\n        }\n        for (const perpPosition of userAccount.perpPositions) {\n            if (!(0, position_1.positionIsAvailable)(perpPosition)) {\n                return false;\n            }\n        }\n        for (const spotPosition of userAccount.spotPositions) {\n            if ((0, types_1.isVariant)(spotPosition.balanceType, 'borrow') &&\n                spotPosition.scaledBalance.gt(numericConstants_1.ZERO)) {\n                return false;\n            }\n            if (spotPosition.openOrders !== 0) {\n                return false;\n            }\n        }\n        for (const order of userAccount.orders) {\n            if ((0, types_1.isVariant)(order.status, 'open')) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getSafestTiers() {\n        let safestPerpTier = 4;\n        let safestSpotTier = 4;\n        for (const perpPosition of this.getActivePerpPositions()) {\n            safestPerpTier = Math.min(safestPerpTier, (0, tiers_1.getPerpMarketTierNumber)(this.driftClient.getPerpMarketAccount(perpPosition.marketIndex)));\n        }\n        for (const spotPosition of this.getActiveSpotPositions()) {\n            if ((0, types_1.isVariant)(spotPosition.balanceType, 'deposit')) {\n                continue;\n            }\n            safestSpotTier = Math.min(safestSpotTier, (0, tiers_1.getSpotMarketTierNumber)(this.driftClient.getSpotMarketAccount(spotPosition.marketIndex)));\n        }\n        return {\n            perpTier: safestPerpTier,\n            spotTier: safestSpotTier,\n        };\n    }\n    getPerpPositionHealth({ marginCategory, perpPosition, oraclePriceData, quoteOraclePriceData, includeOpenOrders = true, }) {\n        const perpMarket = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n        const _oraclePriceData = oraclePriceData ||\n            this.driftClient.getOracleDataForPerpMarket(perpMarket.marketIndex);\n        const oraclePrice = _oraclePriceData.price;\n        let worstCaseBaseAmount;\n        let worstCaseLiabilityValue;\n        if (includeOpenOrders) {\n            const worstCaseIncludeOrders = (0, margin_1.calculateWorstCasePerpLiabilityValue)(perpPosition, perpMarket, oraclePrice);\n            worstCaseBaseAmount = worstCaseIncludeOrders.worstCaseBaseAssetAmount;\n            worstCaseLiabilityValue = worstCaseIncludeOrders.worstCaseLiabilityValue;\n        }\n        else {\n            worstCaseBaseAmount = perpPosition.baseAssetAmount;\n            worstCaseLiabilityValue = (0, margin_1.calculatePerpLiabilityValue)(perpPosition.baseAssetAmount, oraclePrice, (0, types_1.isVariant)(perpMarket.contractType, 'prediction'));\n        }\n        const userCustomMargin = Math.max(perpPosition.maxMarginRatio, this.getUserAccount().maxMarginRatio);\n        const marginRatio = new anchor_1.BN((0, market_1.calculateMarketMarginRatio)(perpMarket, worstCaseBaseAmount.abs(), marginCategory, userCustomMargin, this.isHighLeverageMode(marginCategory)));\n        const _quoteOraclePriceData = quoteOraclePriceData ||\n            this.driftClient.getOracleDataForSpotMarket(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        let marginRequirement = worstCaseLiabilityValue\n            .mul(_quoteOraclePriceData.price)\n            .div(numericConstants_1.PRICE_PRECISION)\n            .mul(marginRatio)\n            .div(numericConstants_1.MARGIN_PRECISION);\n        marginRequirement = marginRequirement.add(new anchor_1.BN(perpPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n        return {\n            marketIndex: perpMarket.marketIndex,\n            size: worstCaseBaseAmount,\n            value: worstCaseLiabilityValue,\n            weight: marginRatio,\n            weightedValue: marginRequirement,\n        };\n    }\n    getHealthComponents({ marginCategory, }) {\n        const healthComponents = {\n            deposits: [],\n            borrows: [],\n            perpPositions: [],\n            perpPnl: [],\n        };\n        for (const perpPosition of this.getActivePerpPositions()) {\n            const perpMarket = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            const oraclePriceData = this.driftClient.getOracleDataForPerpMarket(perpMarket.marketIndex);\n            const quoteOraclePriceData = this.driftClient.getOracleDataForSpotMarket(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n            healthComponents.perpPositions.push(this.getPerpPositionHealth({\n                marginCategory,\n                perpPosition,\n                oraclePriceData,\n                quoteOraclePriceData,\n            }));\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(perpMarket.quoteSpotMarketIndex);\n            const positionUnrealizedPnl = (0, position_2.calculatePositionPNL)(perpMarket, perpPosition, true, oraclePriceData);\n            let pnlWeight;\n            if (positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                pnlWeight = (0, market_1.calculateUnrealizedAssetWeight)(perpMarket, quoteSpotMarket, positionUnrealizedPnl, marginCategory, oraclePriceData);\n            }\n            else {\n                pnlWeight = numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION;\n            }\n            const pnlValue = positionUnrealizedPnl\n                .mul(quoteOraclePriceData.price)\n                .div(numericConstants_1.PRICE_PRECISION);\n            const wegithedPnlValue = pnlValue\n                .mul(pnlWeight)\n                .div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            healthComponents.perpPnl.push({\n                marketIndex: perpMarket.marketIndex,\n                size: positionUnrealizedPnl,\n                value: pnlValue,\n                weight: pnlWeight,\n                weightedValue: wegithedPnlValue,\n            });\n        }\n        let netQuoteValue = numericConstants_1.ZERO;\n        for (const spotPosition of this.getActiveSpotPositions()) {\n            const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n            const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n            const strictOraclePrice = new strictOraclePrice_1.StrictOraclePrice(oraclePriceData.price);\n            if (spotPosition.marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX) {\n                const tokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_2.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), spotPosition.balanceType);\n                netQuoteValue = netQuoteValue.add(tokenAmount);\n                continue;\n            }\n            const { tokenAmount: worstCaseTokenAmount, tokenValue: tokenValue, weight, weightedTokenValue: weightedTokenValue, ordersValue: ordersValue, } = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, strictOraclePrice, marginCategory, this.getUserAccount().maxMarginRatio);\n            netQuoteValue = netQuoteValue.add(ordersValue);\n            const baseAssetValue = tokenValue.abs();\n            const weightedValue = weightedTokenValue.abs();\n            if (weightedTokenValue.lt(numericConstants_1.ZERO)) {\n                healthComponents.borrows.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: worstCaseTokenAmount,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue,\n                });\n            }\n            else {\n                healthComponents.deposits.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: worstCaseTokenAmount,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue,\n                });\n            }\n        }\n        if (!netQuoteValue.eq(numericConstants_1.ZERO)) {\n            const spotMarketAccount = this.driftClient.getQuoteSpotMarketAccount();\n            const oraclePriceData = this.getOracleDataForSpotMarket(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n            const baseAssetValue = (0, spotBalance_1.getTokenValue)(netQuoteValue, spotMarketAccount.decimals, oraclePriceData);\n            const { weight, weightedTokenValue } = (0, spotPosition_1.calculateWeightedTokenValue)(netQuoteValue, baseAssetValue, oraclePriceData.price, spotMarketAccount, marginCategory, this.getUserAccount().maxMarginRatio);\n            if (netQuoteValue.lt(numericConstants_1.ZERO)) {\n                healthComponents.borrows.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: netQuoteValue,\n                    value: baseAssetValue.abs(),\n                    weight: weight,\n                    weightedValue: weightedTokenValue.abs(),\n                });\n            }\n            else {\n                healthComponents.deposits.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: netQuoteValue,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedTokenValue,\n                });\n            }\n        }\n        return healthComponents;\n    }\n    /**\n     * Get the total position value, excluding any position coming from the given target market\n     * @param marketToIgnore\n     * @returns positionValue : Precision QUOTE_PRECISION\n     */\n    getTotalPerpPositionValueExcludingMarket(marketToIgnore, marginCategory, liquidationBuffer, includeOpenOrders) {\n        const currentPerpPosition = this.getPerpPositionOrEmpty(marketToIgnore);\n        const oracleData = this.getOracleDataForPerpMarket(marketToIgnore);\n        let currentPerpPositionValueUSDC = numericConstants_1.ZERO;\n        if (currentPerpPosition) {\n            currentPerpPositionValueUSDC = this.getPerpLiabilityValue(marketToIgnore, oracleData, includeOpenOrders);\n        }\n        return this.getTotalPerpPositionLiability(marginCategory, liquidationBuffer, includeOpenOrders).sub(currentPerpPositionValueUSDC);\n    }\n    getMMOracleDataForPerpMarket(marketIndex) {\n        return this.driftClient.getMMOracleDataForPerpMarket(marketIndex);\n    }\n    getOracleDataForPerpMarket(marketIndex) {\n        return this.driftClient.getOracleDataForPerpMarket(marketIndex);\n    }\n    getOracleDataForSpotMarket(marketIndex) {\n        return this.driftClient.getOracleDataForSpotMarket(marketIndex);\n    }\n    /**\n     * Get the active perp and spot positions of the user.\n     */\n    getActivePositions() {\n        const activePerpMarkets = this.getActivePerpPositions().map((position) => position.marketIndex);\n        const activeSpotMarkets = this.getActiveSpotPositions().map((position) => position.marketIndex);\n        return {\n            activePerpPositions: activePerpMarkets,\n            activeSpotPositions: activeSpotMarkets,\n        };\n    }\n}\nexports.User = User;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7475, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TxSendError = exports.ConfirmationStrategy = void 0;\nvar ConfirmationStrategy;\n(function (ConfirmationStrategy) {\n    ConfirmationStrategy[\"WebSocket\"] = \"websocket\";\n    ConfirmationStrategy[\"Polling\"] = \"polling\";\n    ConfirmationStrategy[\"Combo\"] = \"combo\";\n})(ConfirmationStrategy || (exports.ConfirmationStrategy = ConfirmationStrategy = {}));\nclass TxSendError extends Error {\n    constructor(message, code) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, TxSendError);\n        }\n    }\n}\nexports.TxSendError = TxSendError;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,WAAW,GAAG,QAAQ,oBAAoB,GAAG,KAAK;AAC1D,IAAI;AACJ,CAAC,SAAU,oBAAoB;IAC3B,oBAAoB,CAAC,YAAY,GAAG;IACpC,oBAAoB,CAAC,UAAU,GAAG;IAClC,oBAAoB,CAAC,QAAQ,GAAG;AACpC,CAAC,EAAE,wBAAwB,CAAC,QAAQ,oBAAoB,GAAG,uBAAuB,CAAC,CAAC;AACpF,MAAM,oBAAoB;IACtB,YAAY,OAAO,EAAE,IAAI,CAAE;QACvB,KAAK,CAAC;QACN,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,MAAM,iBAAiB,EAAE;YACzB,MAAM,iBAAiB,CAAC,IAAI,EAAE;QAClC;IACJ;AACJ;AACA,QAAQ,WAAW,GAAG","ignoreList":[0]}},
    {"offset": {"line": 7500, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/txParamProcessor.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransactionParamProcessor = void 0;\nconst COMPUTE_UNIT_BUFFER_FACTOR = 1.2;\nconst MAX_COMPUTE_UNITS = 1400000;\nconst TEST_SIMS_ALWAYS_FAIL = false;\n/**\n * This class is responsible for running through a \"processing\" pipeline for a base transaction, to adjust the standard transaction parameters based on a given configuration.\n */\nclass TransactionParamProcessor {\n    static async getComputeUnitsFromSim(txSim) {\n        var _a, _b;\n        if ((_a = txSim === null || txSim === void 0 ? void 0 : txSim.value) === null || _a === void 0 ? void 0 : _a.unitsConsumed) {\n            return (_b = txSim === null || txSim === void 0 ? void 0 : txSim.value) === null || _b === void 0 ? void 0 : _b.unitsConsumed;\n        }\n        return undefined;\n    }\n    static async getTxSimComputeUnits(tx, connection, bufferMultiplier, // Making this a mandatory param to force the user to remember that simulated CU's can be inaccurate and a buffer should be applied\n    lowerBoundCu, simulatedTx) {\n        var _a, _b;\n        try {\n            if (TEST_SIMS_ALWAYS_FAIL)\n                throw new Error('Test Error::SIMS_ALWAYS_FAIL');\n            const simTxResult = simulatedTx\n                ? {\n                    value: simulatedTx,\n                }\n                : await connection.simulateTransaction(tx, {\n                    replaceRecentBlockhash: true, // This is important to ensure that the blockhash is not too new.. Otherwise we will very often receive a \"blockHashNotFound\" error\n                });\n            if ((_a = simTxResult === null || simTxResult === void 0 ? void 0 : simTxResult.value) === null || _a === void 0 ? void 0 : _a.err) {\n                throw (_b = simTxResult === null || simTxResult === void 0 ? void 0 : simTxResult.value) === null || _b === void 0 ? void 0 : _b.err;\n            }\n            const computeUnits = await this.getComputeUnitsFromSim(simTxResult);\n            // Apply the buffer, but round down to the MAX_COMPUTE_UNITS, and round up to the nearest whole number\n            let bufferedComputeUnits = Math.ceil(Math.min(computeUnits * bufferMultiplier, MAX_COMPUTE_UNITS));\n            // If a lower bound CU is passed then enforce it\n            if (lowerBoundCu) {\n                bufferedComputeUnits = Math.max(bufferedComputeUnits, Math.min(lowerBoundCu, MAX_COMPUTE_UNITS));\n            }\n            return {\n                success: true,\n                computeUnits: bufferedComputeUnits,\n            };\n        }\n        catch (e) {\n            console.warn(`Failed to get Simulated Compute Units for txParamProcessor`, e);\n            return {\n                success: false,\n                computeUnits: undefined,\n            };\n        }\n    }\n    static async process(props) {\n        var _a;\n        // # Exit early if no process config is provided\n        if (!props.processConfig || Object.keys(props.processConfig).length === 0) {\n            return props.baseTxParams;\n        }\n        // # Setup\n        const { txBuilder: txBuilder, processConfig, processParams: processProps, } = props;\n        const finalTxParams = {\n            ...props.baseTxParams,\n        };\n        // # Run Processes\n        if (processConfig.useSimulatedComputeUnits) {\n            const txToSim = await txBuilder({\n                txParams: { ...finalTxParams, computeUnits: MAX_COMPUTE_UNITS },\n            });\n            const txSimComputeUnitsResult = await this.getTxSimComputeUnits(txToSim, processProps.connection, (_a = processConfig === null || processConfig === void 0 ? void 0 : processConfig.computeUnitsBufferMultiplier) !== null && _a !== void 0 ? _a : COMPUTE_UNIT_BUFFER_FACTOR, undefined, processProps.simulatedTx);\n            if (txSimComputeUnitsResult.success) {\n                // Adjust the transaction based on the simulated compute units\n                finalTxParams.computeUnits = txSimComputeUnitsResult.computeUnits;\n            }\n        }\n        if (processConfig === null || processConfig === void 0 ? void 0 : processConfig.useSimulatedComputeUnitsForCUPriceCalculation) {\n            if (!(processConfig === null || processConfig === void 0 ? void 0 : processConfig.useSimulatedComputeUnits)) {\n                throw new Error(`encountered useSimulatedComputeUnitsForFees=true, but useSimulatedComputeUnits is false`);\n            }\n            if (!(processConfig === null || processConfig === void 0 ? void 0 : processConfig.getCUPriceFromComputeUnits)) {\n                throw new Error(`encountered useSimulatedComputeUnitsForFees=true, but getComputeUnitPriceFromUnitsToUse helper method is undefined`);\n            }\n            const simulatedComputeUnits = finalTxParams.computeUnits;\n            const computeUnitPrice = processConfig.getCUPriceFromComputeUnits(simulatedComputeUnits);\n            console.debug(`:: Adjusting compute unit price for simulated compute unit budget :: ${finalTxParams.computeUnitsPrice}=>${computeUnitPrice}`);\n            finalTxParams.computeUnitsPrice = computeUnitPrice;\n        }\n        // # Return Final Tx Params\n        return finalTxParams;\n    }\n}\nexports.TransactionParamProcessor = TransactionParamProcessor;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7595, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/blockhashFetcher/cachedBlockhashFetcher.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CachedBlockhashFetcher = void 0;\n/**\n * Fetches the latest blockhash and caches it for a configurable amount of time.\n *\n * - Prevents RPC spam by reusing cached values\n * - Retries on failure with exponential backoff\n * - Prevents concurrent requests for the same blockhash\n */\nclass CachedBlockhashFetcher {\n    constructor(connection, blockhashCommitment, retryCount, retrySleepTimeMs, staleCacheTimeMs) {\n        this.connection = connection;\n        this.blockhashCommitment = blockhashCommitment;\n        this.retryCount = retryCount;\n        this.retrySleepTimeMs = retrySleepTimeMs;\n        this.staleCacheTimeMs = staleCacheTimeMs;\n        this.recentBlockhashCache = { value: undefined, lastUpdated: 0 };\n        this.blockhashFetchingPromise = null;\n    }\n    async fetchBlockhashWithRetry() {\n        for (let i = 0; i < this.retryCount; i++) {\n            try {\n                return await this.connection.getLatestBlockhash(this.blockhashCommitment);\n            }\n            catch (err) {\n                if (i === this.retryCount - 1) {\n                    throw new Error('Failed to fetch blockhash after maximum retries');\n                }\n                await this.sleep(this.retrySleepTimeMs * 2 ** i);\n            }\n        }\n        throw new Error('Failed to fetch blockhash after maximum retries');\n    }\n    sleep(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n    async updateBlockhashCache() {\n        const result = await this.fetchBlockhashWithRetry();\n        this.recentBlockhashCache = {\n            value: result,\n            lastUpdated: Date.now(),\n        };\n    }\n    async getLatestBlockhash() {\n        if (this.isCacheStale()) {\n            await this.refreshBlockhash();\n        }\n        return this.recentBlockhashCache.value;\n    }\n    isCacheStale() {\n        const lastUpdateTime = this.recentBlockhashCache.lastUpdated;\n        return (!lastUpdateTime || Date.now() > lastUpdateTime + this.staleCacheTimeMs);\n    }\n    /**\n     * Refresh the blockhash cache, await a pending refresh if it exists\n     */\n    async refreshBlockhash() {\n        if (!this.blockhashFetchingPromise) {\n            this.blockhashFetchingPromise = this.updateBlockhashCache();\n            try {\n                await this.blockhashFetchingPromise;\n            }\n            finally {\n                this.blockhashFetchingPromise = null;\n            }\n        }\n        else {\n            await this.blockhashFetchingPromise;\n        }\n    }\n}\nexports.CachedBlockhashFetcher = CachedBlockhashFetcher;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,KAAK;AACtC;;;;;;CAMC,GACD,MAAM;IACF,YAAY,UAAU,EAAE,mBAAmB,EAAE,UAAU,EAAE,gBAAgB,EAAE,gBAAgB,CAAE;QACzF,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,oBAAoB,GAAG;YAAE,OAAO;YAAW,aAAa;QAAE;QAC/D,IAAI,CAAC,wBAAwB,GAAG;IACpC;IACA,MAAM,0BAA0B;QAC5B,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,EAAE,IAAK;YACtC,IAAI;gBACA,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,mBAAmB;YAC5E,EACA,OAAO,KAAK;gBACR,IAAI,MAAM,IAAI,CAAC,UAAU,GAAG,GAAG;oBAC3B,MAAM,IAAI,MAAM;gBACpB;gBACA,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,GAAG,KAAK;YAClD;QACJ;QACA,MAAM,IAAI,MAAM;IACpB;IACA,MAAM,EAAE,EAAE;QACN,OAAO,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IACxD;IACA,MAAM,uBAAuB;QACzB,MAAM,SAAS,MAAM,IAAI,CAAC,uBAAuB;QACjD,IAAI,CAAC,oBAAoB,GAAG;YACxB,OAAO;YACP,aAAa,KAAK,GAAG;QACzB;IACJ;IACA,MAAM,qBAAqB;QACvB,IAAI,IAAI,CAAC,YAAY,IAAI;YACrB,MAAM,IAAI,CAAC,gBAAgB;QAC/B;QACA,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK;IAC1C;IACA,eAAe;QACX,MAAM,iBAAiB,IAAI,CAAC,oBAAoB,CAAC,WAAW;QAC5D,OAAQ,CAAC,kBAAkB,KAAK,GAAG,KAAK,iBAAiB,IAAI,CAAC,gBAAgB;IAClF;IACA;;KAEC,GACD,MAAM,mBAAmB;QACrB,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YAChC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,oBAAoB;YACzD,IAAI;gBACA,MAAM,IAAI,CAAC,wBAAwB;YACvC,SACQ;gBACJ,IAAI,CAAC,wBAAwB,GAAG;YACpC;QACJ,OACK;YACD,MAAM,IAAI,CAAC,wBAAwB;QACvC;IACJ;AACJ;AACA,QAAQ,sBAAsB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 7671, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/blockhashFetcher/baseBlockhashFetcher.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseBlockhashFetcher = void 0;\nclass BaseBlockhashFetcher {\n    constructor(connection, blockhashCommitment) {\n        this.connection = connection;\n        this.blockhashCommitment = blockhashCommitment;\n    }\n    async getLatestBlockhash() {\n        return this.connection.getLatestBlockhash(this.blockhashCommitment);\n    }\n}\nexports.BaseBlockhashFetcher = BaseBlockhashFetcher;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,oBAAoB,GAAG,KAAK;AACpC,MAAM;IACF,YAAY,UAAU,EAAE,mBAAmB,CAAE;QACzC,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,mBAAmB,GAAG;IAC/B;IACA,MAAM,qBAAqB;QACvB,OAAO,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,mBAAmB;IACtE;AACJ;AACA,QAAQ,oBAAoB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 7689, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNativeInstructionDiscriminatorBuffer = exports.getSizeOfTransaction = exports.isVersionedTransaction = exports.NATIVE_INSTRUCTION_MAGIC_BYTES = exports.MAX_TX_BYTE_SIZE = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nexports.MAX_TX_BYTE_SIZE = 1232;\nexports.NATIVE_INSTRUCTION_MAGIC_BYTES = [0xff, 0xff, 0xff, 0xff];\nconst isVersionedTransaction = (tx) => {\n    const version = tx === null || tx === void 0 ? void 0 : tx.version;\n    const isVersionedTx = tx instanceof web3_js_1.VersionedTransaction || version !== undefined;\n    return isVersionedTx;\n};\nexports.isVersionedTransaction = isVersionedTransaction;\nconst getSizeOfTransaction = (instructions, versionedTransaction = true, addressLookupTables = []) => {\n    const programs = new Set();\n    const signers = new Set();\n    let accounts = new Set();\n    instructions.forEach((ix) => {\n        try {\n            if (ix.programId) {\n                programs.add(ix.programId.toBase58());\n                accounts.add(ix.programId.toBase58());\n            }\n            if (ix.keys) {\n                ix.keys.forEach((key) => {\n                    if (key.isSigner) {\n                        signers.add(key.pubkey.toBase58());\n                    }\n                    accounts.add(key.pubkey.toBase58());\n                });\n            }\n        }\n        catch (e) {\n            console.log(e);\n        }\n    });\n    const instructionSizes = instructions\n        .map((ix) => 1 +\n        getSizeOfCompressedU16(ix.keys.length) +\n        ix.keys.length +\n        getSizeOfCompressedU16(ix.data.length) +\n        ix.data.length)\n        .reduce((a, b) => a + b, 0);\n    let numberOfAddressLookups = 0;\n    if (addressLookupTables.length > 0) {\n        const lookupTableAddresses = addressLookupTables\n            .map((addressLookupTable) => addressLookupTable.state.addresses.map((address) => address.toBase58()))\n            .flat();\n        const totalNumberOfAccounts = accounts.size;\n        accounts = new Set([...accounts].filter((account) => !lookupTableAddresses.includes(account)));\n        accounts = new Set([...accounts, ...programs, ...signers]);\n        numberOfAddressLookups = totalNumberOfAccounts - accounts.size;\n    }\n    return (getSizeOfCompressedU16(signers.size) +\n        signers.size * 64 + // array of signatures\n        3 +\n        getSizeOfCompressedU16(accounts.size) +\n        32 * accounts.size + // array of account addresses\n        32 + // recent blockhash\n        getSizeOfCompressedU16(instructions.length) +\n        instructionSizes + // array of instructions\n        (versionedTransaction ? 1 + getSizeOfCompressedU16(0) : 0) +\n        (versionedTransaction ? 32 * addressLookupTables.length : 0) +\n        (versionedTransaction && addressLookupTables.length > 0 ? 2 : 0) +\n        numberOfAddressLookups);\n};\nexports.getSizeOfTransaction = getSizeOfTransaction;\nfunction getSizeOfCompressedU16(n) {\n    return 1 + Number(n >= 128) + Number(n >= 16384);\n}\nfunction createNativeInstructionDiscriminatorBuffer(discriminator) {\n    const buffer = new Uint8Array(5);\n    buffer.set(exports.NATIVE_INSTRUCTION_MAGIC_BYTES, 0);\n    buffer.set([discriminator], 4);\n    return buffer;\n}\nexports.createNativeInstructionDiscriminatorBuffer = createNativeInstructionDiscriminatorBuffer;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7767, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/txHandler.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TxHandler = exports.COMPUTE_UNITS_DEFAULT = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst txParamProcessor_1 = require(\"./txParamProcessor\");\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst computeUnits_1 = require(\"../util/computeUnits\");\nconst cachedBlockhashFetcher_1 = require(\"./blockhashFetcher/cachedBlockhashFetcher\");\nconst baseBlockhashFetcher_1 = require(\"./blockhashFetcher/baseBlockhashFetcher\");\nconst utils_1 = require(\"./utils\");\nconst config_1 = require(\"../config\");\n/**\n * Explanation for SIGNATURE_BLOCK_AND_EXPIRY:\n *\n * When the whileValidTxSender waits for confirmation of a given transaction, it needs the last available blockheight and blockhash used in the signature to do so. For pre-signed transactions, these values aren't attached to the transaction object by default. For a \"scrappy\" workaround which doesn't break backwards compatibility, the SIGNATURE_BLOCK_AND_EXPIRY property is simply attached to the transaction objects as they are created or signed in this handler despite a mismatch in the typescript types. If the values are attached to the transaction when they reach the whileValidTxSender, it can opt-in to use these values.\n */\nconst DEV_TRY_FORCE_TX_TIMEOUTS = process.env.DEV_TRY_FORCE_TX_TIMEOUTS === 'true' || false;\nexports.COMPUTE_UNITS_DEFAULT = 200000;\nconst BLOCKHASH_FETCH_RETRY_COUNT = 3;\nconst BLOCKHASH_FETCH_RETRY_SLEEP = 200;\nconst RECENT_BLOCKHASH_STALE_TIME_MS = 2000; // Reuse blockhashes within this timeframe during bursts of tx contruction\n/**\n * This class is responsible for creating and signing transactions.\n */\nclass TxHandler {\n    constructor(props) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\n        this.blockHashToLastValidBlockHeightLookup = {};\n        this.returnBlockHeightsWithSignedTxCallbackData = false;\n        this.blockhashCommitment = config_1.DEFAULT_CONFIRMATION_OPTS.commitment;\n        this.getProps = (wallet, confirmationOpts) => [wallet !== null && wallet !== void 0 ? wallet : this.wallet, confirmationOpts !== null && confirmationOpts !== void 0 ? confirmationOpts : this.confirmationOptions];\n        this.connection = props.connection;\n        this.wallet = props.wallet;\n        this.confirmationOptions = props.confirmationOptions;\n        this.blockhashCommitment =\n            (_e = (_d = (_b = (_a = props.confirmationOptions) === null || _a === void 0 ? void 0 : _a.preflightCommitment) !== null && _b !== void 0 ? _b : (_c = props === null || props === void 0 ? void 0 : props.connection) === null || _c === void 0 ? void 0 : _c.commitment) !== null && _d !== void 0 ? _d : this.blockhashCommitment) !== null && _e !== void 0 ? _e : 'confirmed';\n        this.blockHashFetcher = ((_f = props === null || props === void 0 ? void 0 : props.config) === null || _f === void 0 ? void 0 : _f.blockhashCachingEnabled)\n            ? new cachedBlockhashFetcher_1.CachedBlockhashFetcher(this.connection, this.blockhashCommitment, (_j = (_h = (_g = props === null || props === void 0 ? void 0 : props.config) === null || _g === void 0 ? void 0 : _g.blockhashCachingConfig) === null || _h === void 0 ? void 0 : _h.retryCount) !== null && _j !== void 0 ? _j : BLOCKHASH_FETCH_RETRY_COUNT, (_m = (_l = (_k = props === null || props === void 0 ? void 0 : props.config) === null || _k === void 0 ? void 0 : _k.blockhashCachingConfig) === null || _l === void 0 ? void 0 : _l.retrySleepTimeMs) !== null && _m !== void 0 ? _m : BLOCKHASH_FETCH_RETRY_SLEEP, (_q = (_p = (_o = props === null || props === void 0 ? void 0 : props.config) === null || _o === void 0 ? void 0 : _o.blockhashCachingConfig) === null || _p === void 0 ? void 0 : _p.staleCacheTimeMs) !== null && _q !== void 0 ? _q : RECENT_BLOCKHASH_STALE_TIME_MS)\n            : new baseBlockhashFetcher_1.BaseBlockhashFetcher(this.connection, this.blockhashCommitment);\n        // #Optionals\n        this.returnBlockHeightsWithSignedTxCallbackData =\n            (_s = (_r = props.opts) === null || _r === void 0 ? void 0 : _r.returnBlockHeightsWithSignedTxCallbackData) !== null && _s !== void 0 ? _s : false;\n        this.onSignedCb = (_t = props.opts) === null || _t === void 0 ? void 0 : _t.onSignedCb;\n        this.preSignedCb = (_u = props.opts) === null || _u === void 0 ? void 0 : _u.preSignedCb;\n    }\n    getWallet() {\n        return this.wallet;\n    }\n    addHashAndExpiryToLookup(hashAndExpiry) {\n        if (!this.returnBlockHeightsWithSignedTxCallbackData)\n            return;\n        this.blockHashToLastValidBlockHeightLookup[hashAndExpiry.blockhash] =\n            hashAndExpiry.lastValidBlockHeight;\n    }\n    updateWallet(wallet) {\n        this.wallet = wallet;\n    }\n    /**\n     * Created this to prevent non-finalized blockhashes being used when building transactions. We want to always use finalized because otherwise it's easy to get the BlockHashNotFound error (RPC uses finalized to validate a transaction). Using an older blockhash when building transactions should never really be a problem right now.\n     *\n     * https://www.helius.dev/blog/how-to-deal-with-blockhash-errors-on-solana#why-do-blockhash-errors-occur\n     *\n     * @returns\n     */\n    async getLatestBlockhashForTransaction() {\n        return this.blockHashFetcher.getLatestBlockhash();\n    }\n    /**\n     * Applies recent blockhash and signs a given transaction\n     * @param tx\n     * @param additionalSigners\n     * @param wallet\n     * @param confirmationOpts\n     * @param preSigned\n     * @param recentBlockhash\n     * @returns\n     */\n    async prepareTx(tx, additionalSigners, wallet, confirmationOpts, preSigned, recentBlockhash) {\n        if (preSigned) {\n            return tx;\n        }\n        [wallet, confirmationOpts] = this.getProps(wallet, confirmationOpts);\n        tx.feePayer = wallet.publicKey;\n        recentBlockhash = recentBlockhash\n            ? recentBlockhash\n            : await this.getLatestBlockhashForTransaction();\n        tx.recentBlockhash = recentBlockhash.blockhash;\n        this.addHashAndExpiryToLookup(recentBlockhash);\n        const signedTx = await this.signTx(tx, additionalSigners);\n        // @ts-ignore\n        signedTx.SIGNATURE_BLOCK_AND_EXPIRY = recentBlockhash;\n        return signedTx;\n    }\n    isVersionedTransaction(tx) {\n        return (0, utils_1.isVersionedTransaction)(tx);\n    }\n    isLegacyTransaction(tx) {\n        return !this.isVersionedTransaction(tx);\n    }\n    getTxSigFromSignedTx(signedTx) {\n        if (this.isVersionedTransaction(signedTx)) {\n            return bs58_1.default.encode(Buffer.from(signedTx.signatures[0]));\n        }\n        else {\n            return bs58_1.default.encode(Buffer.from(signedTx.signature));\n        }\n    }\n    getBlockhashFromSignedTx(signedTx) {\n        if (this.isVersionedTransaction(signedTx)) {\n            return signedTx.message.recentBlockhash;\n        }\n        else {\n            return signedTx.recentBlockhash;\n        }\n    }\n    async signTx(tx, additionalSigners, wallet) {\n        var _a;\n        [wallet] = this.getProps(wallet);\n        additionalSigners\n            .filter((s) => s !== undefined)\n            .forEach((kp) => {\n            tx.partialSign(kp);\n        });\n        (_a = this.preSignedCb) === null || _a === void 0 ? void 0 : _a.call(this);\n        const signedTx = await wallet.signTransaction(tx);\n        // Turn txSig Buffer into base58 string\n        const txSig = this.getTxSigFromSignedTx(signedTx);\n        this.handleSignedTxData([\n            {\n                txSig,\n                signedTx,\n                blockHash: this.getBlockhashFromSignedTx(signedTx),\n            },\n        ]);\n        return signedTx;\n    }\n    async signVersionedTx(tx, additionalSigners, recentBlockhash, wallet) {\n        var _a;\n        [wallet] = this.getProps(wallet);\n        if (recentBlockhash) {\n            tx.message.recentBlockhash = recentBlockhash.blockhash;\n            this.addHashAndExpiryToLookup(recentBlockhash);\n            // @ts-ignore\n            tx.SIGNATURE_BLOCK_AND_EXPIRY = recentBlockhash;\n        }\n        additionalSigners === null || additionalSigners === void 0 ? void 0 : additionalSigners.filter((s) => s !== undefined).forEach((kp) => {\n            tx.sign([kp]);\n        });\n        (_a = this.preSignedCb) === null || _a === void 0 ? void 0 : _a.call(this);\n        //@ts-ignore\n        const signedTx = (await wallet.signTransaction(tx));\n        // Turn txSig Buffer into base58 string\n        const txSig = this.getTxSigFromSignedTx(signedTx);\n        this.handleSignedTxData([\n            {\n                txSig,\n                signedTx,\n                blockHash: this.getBlockhashFromSignedTx(signedTx),\n            },\n        ]);\n        return signedTx;\n    }\n    handleSignedTxData(txData) {\n        if (!this.returnBlockHeightsWithSignedTxCallbackData) {\n            if (this.onSignedCb) {\n                this.onSignedCb(txData);\n            }\n            return;\n        }\n        const signedTxData = txData.map((tx) => {\n            const lastValidBlockHeight = this.blockHashToLastValidBlockHeightLookup[tx.blockHash];\n            return {\n                ...tx,\n                lastValidBlockHeight,\n            };\n        });\n        if (this.onSignedCb) {\n            this.onSignedCb(signedTxData);\n        }\n        return signedTxData;\n    }\n    /**\n     * Gets transaction params with extra processing applied, like using the simulated compute units or using a dynamically calculated compute unit price.\n     * @param txBuildingProps\n     * @returns\n     */\n    async getProcessedTransactionParams(txBuildingProps) {\n        var _a, _b;\n        const baseTxParams = {\n            computeUnits: (_a = txBuildingProps === null || txBuildingProps === void 0 ? void 0 : txBuildingProps.txParams) === null || _a === void 0 ? void 0 : _a.computeUnits,\n            computeUnitsPrice: (_b = txBuildingProps === null || txBuildingProps === void 0 ? void 0 : txBuildingProps.txParams) === null || _b === void 0 ? void 0 : _b.computeUnitsPrice,\n        };\n        const processedTxParams = await txParamProcessor_1.TransactionParamProcessor.process({\n            baseTxParams,\n            txBuilder: (updatedTxParams) => {\n                var _a;\n                return this.buildTransaction({\n                    ...txBuildingProps,\n                    txParams: (_a = updatedTxParams.txParams) !== null && _a !== void 0 ? _a : baseTxParams,\n                    forceVersionedTransaction: true,\n                });\n            },\n            processConfig: {\n                useSimulatedComputeUnits: txBuildingProps.txParams.useSimulatedComputeUnits,\n                computeUnitsBufferMultiplier: txBuildingProps.txParams.computeUnitsBufferMultiplier,\n                useSimulatedComputeUnitsForCUPriceCalculation: txBuildingProps.txParams\n                    .useSimulatedComputeUnitsForCUPriceCalculation,\n                getCUPriceFromComputeUnits: txBuildingProps.txParams.getCUPriceFromComputeUnits,\n            },\n            processParams: {\n                connection: this.connection,\n                simulatedTx: txBuildingProps.simulatedTx,\n            },\n        });\n        return processedTxParams;\n    }\n    _generateVersionedTransaction(recentBlockhash, message) {\n        this.addHashAndExpiryToLookup(recentBlockhash);\n        return new web3_js_1.VersionedTransaction(message);\n    }\n    generateLegacyVersionedTransaction(recentBlockhash, ixs, wallet) {\n        [wallet] = this.getProps(wallet);\n        const message = new web3_js_1.TransactionMessage({\n            payerKey: wallet.publicKey,\n            recentBlockhash: recentBlockhash.blockhash,\n            instructions: ixs,\n        }).compileToLegacyMessage();\n        const tx = this._generateVersionedTransaction(recentBlockhash, message);\n        // @ts-ignore\n        tx.SIGNATURE_BLOCK_AND_EXPIRY = recentBlockhash;\n        return tx;\n    }\n    generateVersionedTransaction(recentBlockhash, ixs, lookupTableAccounts, wallet) {\n        [wallet] = this.getProps(wallet);\n        const message = new web3_js_1.TransactionMessage({\n            payerKey: wallet.publicKey,\n            recentBlockhash: recentBlockhash.blockhash,\n            instructions: ixs,\n        }).compileToV0Message(lookupTableAccounts);\n        const tx = this._generateVersionedTransaction(recentBlockhash, message);\n        // @ts-ignore\n        tx.SIGNATURE_BLOCK_AND_EXPIRY = recentBlockhash;\n        return tx;\n    }\n    generateLegacyTransaction(ixs, recentBlockhash) {\n        const tx = new web3_js_1.Transaction().add(...ixs);\n        if (recentBlockhash) {\n            tx.recentBlockhash = recentBlockhash.blockhash;\n        }\n        return tx;\n    }\n    /**\n     * Accepts multiple instructions and builds a transaction for each. Prevents needing to spam RPC with requests for the same blockhash.\n     * @param props\n     * @returns\n     */\n    async buildBulkTransactions(props) {\n        var _a;\n        const recentBlockhash = (_a = props === null || props === void 0 ? void 0 : props.recentBlockhash) !== null && _a !== void 0 ? _a : (await this.getLatestBlockhashForTransaction());\n        return await Promise.all(props.instructions.map((ix) => {\n            if (!ix)\n                return undefined;\n            return this.buildTransaction({\n                ...props,\n                instructions: ix,\n                recentBlockhash,\n            });\n        }));\n    }\n    /**\n     *\n     * @param instructions\n     * @param txParams\n     * @param txVersion\n     * @param lookupTables\n     * @param forceVersionedTransaction Return a VersionedTransaction instance even if the version of the transaction is Legacy\n     * @returns\n     */\n    async buildTransaction(props) {\n        var _a;\n        const { txVersion, txParams, connection: _connection, preFlightCommitment: _preFlightCommitment, fetchAllMarketLookupTableAccounts, forceVersionedTransaction, instructions, } = props;\n        let { lookupTables } = props;\n        const marketLookupTables = await fetchAllMarketLookupTableAccounts();\n        lookupTables = lookupTables\n            ? [...lookupTables, ...marketLookupTables]\n            : marketLookupTables;\n        // # Collect and process Tx Params\n        let baseTxParams = {\n            computeUnits: txParams === null || txParams === void 0 ? void 0 : txParams.computeUnits,\n            computeUnitsPrice: txParams === null || txParams === void 0 ? void 0 : txParams.computeUnitsPrice,\n        };\n        const instructionsArray = Array.isArray(instructions)\n            ? instructions\n            : [instructions];\n        let instructionsToUse;\n        let simulatedTx;\n        // add optional ixs if there's room and it doesn't fail simulation (usually oracle cranks)\n        if (props.optionalIxs && txVersion === 0) {\n            [instructionsToUse, simulatedTx] =\n                await this.simulateAndCalculateInstructions({\n                    ...props,\n                    instructions: instructionsArray,\n                    txVersion,\n                    lookupTables,\n                }, props.optionalIxs, txVersion === 0, lookupTables);\n        }\n        else {\n            instructionsToUse = instructionsArray;\n        }\n        if (txParams === null || txParams === void 0 ? void 0 : txParams.useSimulatedComputeUnits) {\n            const processedTxParams = await this.getProcessedTransactionParams({\n                ...props,\n                instructions: instructionsToUse,\n                simulatedTx: simulatedTx,\n            });\n            baseTxParams = {\n                ...baseTxParams,\n                ...processedTxParams,\n            };\n        }\n        const { hasSetComputeUnitLimitIx, hasSetComputeUnitPriceIx } = (0, computeUnits_1.containsComputeUnitIxs)(instructionsToUse);\n        // # Create Tx Instructions\n        const allIx = [];\n        const computeUnits = baseTxParams === null || baseTxParams === void 0 ? void 0 : baseTxParams.computeUnits;\n        if (computeUnits > 0 && !hasSetComputeUnitLimitIx) {\n            allIx.push(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n                units: computeUnits,\n            }));\n        }\n        const computeUnitsPrice = baseTxParams === null || baseTxParams === void 0 ? void 0 : baseTxParams.computeUnitsPrice;\n        if (DEV_TRY_FORCE_TX_TIMEOUTS) {\n            allIx.push(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: 0,\n            }));\n        }\n        else if (computeUnitsPrice > 0 && !hasSetComputeUnitPriceIx) {\n            allIx.push(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: computeUnitsPrice,\n            }));\n        }\n        allIx.push(...instructionsToUse);\n        const recentBlockhash = (_a = props === null || props === void 0 ? void 0 : props.recentBlockhash) !== null && _a !== void 0 ? _a : (await this.getLatestBlockhashForTransaction());\n        // # Create and return Transaction\n        if (txVersion === 'legacy') {\n            if (forceVersionedTransaction) {\n                return this.generateLegacyVersionedTransaction(recentBlockhash, allIx);\n            }\n            else {\n                return this.generateLegacyTransaction(allIx, recentBlockhash);\n            }\n        }\n        else {\n            return this.generateVersionedTransaction(recentBlockhash, allIx, lookupTables);\n        }\n    }\n    wrapInTx(instruction, computeUnits = 600000, computeUnitsPrice = 0) {\n        const tx = new web3_js_1.Transaction();\n        if (computeUnits != exports.COMPUTE_UNITS_DEFAULT) {\n            tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n                units: computeUnits,\n            }));\n        }\n        if (DEV_TRY_FORCE_TX_TIMEOUTS) {\n            tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: 0,\n            }));\n        }\n        else if (computeUnitsPrice != 0) {\n            tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: computeUnitsPrice,\n            }));\n        }\n        return tx.add(instruction);\n    }\n    /**\n     * Get a map of signed and prepared transactions from an array of legacy transactions\n     * @param txsToSign\n     * @param keys\n     * @param wallet\n     * @param commitment\n     * @returns\n     */\n    async getPreparedAndSignedLegacyTransactionMap(txsMap, wallet, commitment, recentBlockhash) {\n        var _a, _b;\n        recentBlockhash = recentBlockhash\n            ? recentBlockhash\n            : await this.getLatestBlockhashForTransaction();\n        this.addHashAndExpiryToLookup(recentBlockhash);\n        for (const tx of Object.values(txsMap)) {\n            if (!tx)\n                continue;\n            tx.recentBlockhash = recentBlockhash.blockhash;\n            tx.feePayer = (_a = wallet === null || wallet === void 0 ? void 0 : wallet.publicKey) !== null && _a !== void 0 ? _a : (_b = this.wallet) === null || _b === void 0 ? void 0 : _b.publicKey;\n            // @ts-ignore\n            tx.SIGNATURE_BLOCK_AND_EXPIRY = recentBlockhash;\n        }\n        return this.getSignedTransactionMap(txsMap, wallet);\n    }\n    /**\n     * Get a map of signed transactions from an array of transactions to sign.\n     * @param txsToSign\n     * @param keys\n     * @param wallet\n     * @returns\n     */\n    async getSignedTransactionMap(txsToSignMap, wallet) {\n        var _a;\n        [wallet] = this.getProps(wallet);\n        const txsToSignEntries = Object.entries(txsToSignMap);\n        // Create a map of the same keys as the input map, but with the values set to undefined. We'll populate the filtered (non-undefined) values with signed transactions.\n        const signedTxMap = txsToSignEntries.reduce((acc, [key]) => {\n            acc[key] = undefined;\n            return acc;\n        }, {});\n        const filteredTxEntries = txsToSignEntries.filter(([_, tx]) => !!tx);\n        // Extra handling for legacy transactions\n        for (const [_key, tx] of filteredTxEntries) {\n            if (this.isLegacyTransaction(tx)) {\n                tx.feePayer = wallet.publicKey;\n            }\n        }\n        (_a = this.preSignedCb) === null || _a === void 0 ? void 0 : _a.call(this);\n        const signedFilteredTxs = await wallet.signAllTransactions(filteredTxEntries.map(([_, tx]) => tx));\n        signedFilteredTxs.forEach((signedTx, index) => {\n            var _a;\n            // @ts-ignore\n            signedTx.SIGNATURE_BLOCK_AND_EXPIRY =\n                // @ts-ignore\n                (_a = filteredTxEntries[index][1]) === null || _a === void 0 ? void 0 : _a.SIGNATURE_BLOCK_AND_EXPIRY;\n        });\n        const signedTxData = this.handleSignedTxData(signedFilteredTxs.map((signedTx) => {\n            return {\n                txSig: this.getTxSigFromSignedTx(signedTx),\n                signedTx,\n                blockHash: this.getBlockhashFromSignedTx(signedTx),\n            };\n        }));\n        filteredTxEntries.forEach(([key], index) => {\n            const signedTx = signedFilteredTxs[index];\n            // @ts-ignore\n            signedTxMap[key] = signedTx;\n        });\n        return { signedTxMap, signedTxData };\n    }\n    /**\n     * Accepts multiple instructions and builds a transaction for each. Prevents needing to spam RPC with requests for the same blockhash.\n     * @param props\n     * @returns\n     */\n    async buildTransactionsMap(props) {\n        const builtTxs = await this.buildBulkTransactions({\n            ...props,\n            instructions: Object.values(props.instructionsMap),\n        });\n        return Object.keys(props.instructionsMap).reduce((acc, key, index) => {\n            acc[key] = builtTxs[index];\n            return acc;\n        }, {});\n    }\n    /**\n     * Builds and signs transactions from a given array of instructions for multiple transactions.\n     * @param props\n     * @returns\n     */\n    async buildAndSignTransactionMap(props) {\n        const builtTxs = await this.buildTransactionsMap(props);\n        const preppedTransactions = await (props.txVersion === 'legacy'\n            ? this.getPreparedAndSignedLegacyTransactionMap(builtTxs, props.wallet, props.preFlightCommitment)\n            : this.getSignedTransactionMap(builtTxs, props.wallet));\n        return preppedTransactions;\n    }\n    async simulateAndCalculateInstructions(txBuildingProps, optionalInstructions = [], versionedTransaction = true, addressLookupTables = []) {\n        var _a;\n        const baseInstructions = Array.isArray(txBuildingProps.instructions)\n            ? txBuildingProps.instructions\n            : [txBuildingProps.instructions];\n        if (optionalInstructions.length === 0) {\n            return [baseInstructions, undefined];\n        }\n        let allInstructions = [...optionalInstructions, ...baseInstructions];\n        let txSize = (0, utils_1.getSizeOfTransaction)(allInstructions, versionedTransaction, addressLookupTables);\n        while (txSize > utils_1.MAX_TX_BYTE_SIZE &&\n            allInstructions.length > baseInstructions.length) {\n            allInstructions = allInstructions.slice(1);\n            txSize = (0, utils_1.getSizeOfTransaction)(allInstructions, versionedTransaction, addressLookupTables);\n        }\n        const tx = await this.buildTransaction({\n            ...txBuildingProps,\n            optionalIxs: undefined,\n            instructions: allInstructions,\n        });\n        const simulatedTx = await this.connection.simulateTransaction(tx);\n        if ((_a = simulatedTx.value) === null || _a === void 0 ? void 0 : _a.err) {\n            const tx = await this.buildTransaction({\n                ...txBuildingProps,\n                optionalIxs: undefined,\n                instructions: baseInstructions,\n            });\n            const simulationWithoutOptionalIxs = await this.connection.simulateTransaction(tx);\n            return [baseInstructions, simulationWithoutOptionalIxs.value];\n        }\n        return [allInstructions, simulatedTx.value];\n    }\n}\nexports.TxHandler = TxHandler;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8265, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/reportTransactionError.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTransactionError = exports.getTransactionErrorFromTxSig = exports.throwTransactionError = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst config_1 = require(\"../config\");\n/**\n * The new getTransaction method expects a Finality type instead of a Commitment type. The only options for Finality are 'confirmed' and 'finalized'.\n * @param commitment\n * @returns\n */\nconst commitmentToFinality = (commitment) => {\n    switch (commitment) {\n        case 'confirmed':\n            return 'confirmed';\n        case 'finalized':\n            return 'finalized';\n        default:\n            throw new Error(`Invalid commitment when reporting transaction error. The commitment must be 'confirmed' or 'finalized' but was given '${commitment}'. If you're using this commitment for a specific reason, you may need to roll your own logic here.`);\n    }\n};\nconst getTransactionResult = async (txSig, connection, commitment) => {\n    const finality = commitmentToFinality(commitment || connection.commitment || config_1.DEFAULT_CONFIRMATION_OPTS.commitment);\n    return await connection.getTransaction(txSig, {\n        maxSupportedTransactionVersion: 0,\n        commitment: finality,\n    });\n};\nconst getTransactionResultWithRetry = async (txSig, connection, commitment) => {\n    const start = Date.now();\n    const retryTimeout = 3000; // Timeout after 3 seconds\n    const retryInterval = 800; // Retry with 800ms interval\n    const retryCount = 3; // Retry 3 times\n    let currentCount = 0;\n    let transactionResult = await getTransactionResult(txSig, connection, commitment);\n    // Retry 3 times or until timeout as long as we don't have a result yet\n    while (!transactionResult &&\n        Date.now() - start < retryTimeout &&\n        currentCount < retryCount) {\n        // Sleep for 1 second :: Do this first so that we don't run the first loop immediately after the initial fetch above\n        await new Promise((resolve) => setTimeout(resolve, retryInterval));\n        transactionResult = await getTransactionResult(txSig, connection, commitment);\n        currentCount++;\n    }\n    return transactionResult;\n};\n/**\n * THROWS if there is an error\n *\n * Should only be used for a txSig that is confirmed has an error. There is a race-condition where sometimes the transaction is not instantly available to fetch after the confirmation has already failed with an error, so this method has retry logic which we don't want to do wastefully. This method will throw a generic error if it can't get the transaction result after a retry period.\n * @param txSig\n * @param connection\n * @returns\n */\nconst throwTransactionError = async (txSig, connection, commitment) => {\n    const err = await (0, exports.getTransactionErrorFromTxSig)(txSig, connection, commitment);\n    if (err) {\n        throw err;\n    }\n    return;\n};\nexports.throwTransactionError = throwTransactionError;\n/**\n * RETURNS an error if there is one\n *\n * Should only be used for a txSig that is confirmed has an error. There is a race-condition where sometimes the transaction is not instantly available to fetch after the confirmation has already failed with an error, so this method has retry logic which we don't want to do wastefully. This method will throw a generic error if it can't get the transaction result after a retry period.\n * @param txSig\n * @param connection\n * @returns\n */\nconst getTransactionErrorFromTxSig = async (txSig, connection, commitment) => {\n    var _a;\n    const transactionResult = await getTransactionResultWithRetry(txSig, connection, commitment);\n    if (!transactionResult) {\n        // Throw a generic error because we couldn't get the transaction result for the given txSig\n        return new web3_js_1.SendTransactionError({\n            action: 'send',\n            signature: txSig,\n            transactionMessage: `Transaction Failed`,\n        });\n    }\n    if (!((_a = transactionResult === null || transactionResult === void 0 ? void 0 : transactionResult.meta) === null || _a === void 0 ? void 0 : _a.err)) {\n        // Assume that the transaction was successful and we are here erroneously because we have a result with no error\n        return;\n    }\n    return (0, exports.getTransactionError)(transactionResult);\n};\nexports.getTransactionErrorFromTxSig = getTransactionErrorFromTxSig;\nconst getTransactionError = (transactionResult) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (!((_a = transactionResult === null || transactionResult === void 0 ? void 0 : transactionResult.meta) === null || _a === void 0 ? void 0 : _a.err)) {\n        return;\n    }\n    const logs = (_c = (_b = transactionResult === null || transactionResult === void 0 ? void 0 : transactionResult.meta) === null || _b === void 0 ? void 0 : _b.logMessages) !== null && _c !== void 0 ? _c : ['No logs'];\n    const lastLog = logs[logs.length - 1];\n    const friendlyMessage = (_d = lastLog === null || lastLog === void 0 ? void 0 : lastLog.match(/(failed:) (.+)/)) === null || _d === void 0 ? void 0 : _d[2];\n    return new web3_js_1.SendTransactionError({\n        action: 'send',\n        signature: (_f = (_e = transactionResult === null || transactionResult === void 0 ? void 0 : transactionResult.transaction) === null || _e === void 0 ? void 0 : _e.signatures) === null || _f === void 0 ? void 0 : _f[0],\n        transactionMessage: `Transaction Failed${friendlyMessage ? `: ${friendlyMessage}` : ''}`,\n        logs,\n    });\n};\nexports.getTransactionError = getTransactionError;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8370, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/baseTxSender.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTxSender = void 0;\nconst types_1 = require(\"./types\");\nconst assert_1 = __importDefault(require(\"assert\"));\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst txHandler_1 = require(\"./txHandler\");\nconst node_cache_1 = __importDefault(require(\"node-cache\"));\nconst config_1 = require(\"../config\");\nconst txConstants_1 = require(\"../constants/txConstants\");\nconst reportTransactionError_1 = require(\"./reportTransactionError\");\nconst BASELINE_TX_LAND_RATE = 0.9;\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_TX_LAND_RATE_LOOKBACK_WINDOW_MINUTES = 10;\nclass BaseTxSender {\n    constructor({ connection, wallet, opts = config_1.DEFAULT_CONFIRMATION_OPTS, timeout = DEFAULT_TIMEOUT, additionalConnections = new Array(), confirmationStrategy = types_1.ConfirmationStrategy.Combo, additionalTxSenderCallbacks, trackTxLandRate, txHandler, txLandRateLookbackWindowMinutes = DEFAULT_TX_LAND_RATE_LOOKBACK_WINDOW_MINUTES, landRateToFeeFunc, throwOnTimeoutError = true, throwOnTransactionError = true, }) {\n        this.timeoutCount = 0;\n        this.txLandRate = 0;\n        this.lastPriorityFeeSuggestion = 1;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.additionalConnections = additionalConnections;\n        this.confirmationStrategy = confirmationStrategy;\n        this.additionalTxSenderCallbacks = additionalTxSenderCallbacks;\n        this.txHandler =\n            txHandler !== null && txHandler !== void 0 ? txHandler : new txHandler_1.TxHandler({\n                connection: this.connection,\n                wallet: this.wallet,\n                confirmationOptions: this.opts,\n            });\n        this.trackTxLandRate = trackTxLandRate;\n        this.lookbackWindowMinutes = txLandRateLookbackWindowMinutes * 60;\n        if (this.trackTxLandRate) {\n            this.txSigCache = new node_cache_1.default({\n                stdTTL: this.lookbackWindowMinutes,\n                checkperiod: 120,\n            });\n        }\n        this.landRateToFeeFunc =\n            landRateToFeeFunc !== null && landRateToFeeFunc !== void 0 ? landRateToFeeFunc : this.defaultLandRateToFeeFunc.bind(this);\n        this.throwOnTimeoutError = throwOnTimeoutError;\n        this.throwOnTransactionError = throwOnTransactionError;\n    }\n    async send(tx, additionalSigners, opts, preSigned) {\n        if (additionalSigners === undefined) {\n            additionalSigners = [];\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const signedTx = await this.prepareTx(tx, additionalSigners, opts, preSigned);\n        return this.sendRawTransaction(signedTx.serialize(), opts);\n    }\n    async prepareTx(tx, additionalSigners, opts, preSigned) {\n        return this.txHandler.prepareTx(tx, additionalSigners, undefined, opts, preSigned);\n    }\n    async getVersionedTransaction(ixs, lookupTableAccounts, _additionalSigners, opts, blockhash) {\n        return this.txHandler.generateVersionedTransaction(blockhash !== null && blockhash !== void 0 ? blockhash : (await this.connection.getLatestBlockhash()), ixs, lookupTableAccounts, this.wallet);\n    }\n    async sendVersionedTransaction(tx, additionalSigners, opts, preSigned) {\n        let signedTx;\n        if (preSigned) {\n            signedTx = tx;\n            // @ts-ignore\n        }\n        else if (this.wallet.payer) {\n            // @ts-ignore\n            tx.sign((additionalSigners !== null && additionalSigners !== void 0 ? additionalSigners : []).concat(this.wallet.payer));\n            signedTx = tx;\n        }\n        else {\n            signedTx = await this.txHandler.signVersionedTx(tx, additionalSigners, undefined, this.wallet);\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        return this.sendRawTransaction(signedTx.serialize(), opts);\n    }\n    async sendRawTransaction(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    rawTransaction, \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    opts) {\n        throw new Error('Must be implemented by subclass');\n    }\n    /* Simulate the tx and return a boolean for success value */\n    async simulateTransaction(tx) {\n        try {\n            const result = await this.connection.simulateTransaction(tx);\n            if (result.value.err != null) {\n                console.error('Error in transaction simulation: ', result.value.err);\n                return false;\n            }\n            return true;\n        }\n        catch (e) {\n            console.error('Error calling simulateTransaction: ', e);\n            return false;\n        }\n    }\n    async confirmTransactionWebSocket(signature, commitment) {\n        var _a, _b;\n        let decodedSignature;\n        try {\n            decodedSignature = bs58_1.default.decode(signature);\n        }\n        catch (err) {\n            throw new Error('signature must be base58 encoded: ' + signature);\n        }\n        (0, assert_1.default)(decodedSignature.length === 64, 'signature has invalid length');\n        const start = Date.now();\n        const subscriptionCommitment = commitment || this.opts.commitment;\n        const subscriptionIds = new Array();\n        const connections = [this.connection, ...this.additionalConnections];\n        let response = null;\n        const promises = connections.map((connection, i) => {\n            let subscriptionId;\n            const confirmPromise = new Promise((resolve, reject) => {\n                try {\n                    subscriptionId = connection.onSignature(signature, (result, context) => {\n                        subscriptionIds[i] = undefined;\n                        response = {\n                            context,\n                            value: result,\n                        };\n                        resolve(null);\n                    }, subscriptionCommitment);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            });\n            subscriptionIds.push(subscriptionId);\n            return confirmPromise;\n        });\n        try {\n            await this.promiseTimeout(promises, this.timeout);\n        }\n        finally {\n            for (const [i, subscriptionId] of subscriptionIds.entries()) {\n                if (subscriptionId) {\n                    connections[i].removeSignatureListener(subscriptionId);\n                }\n            }\n        }\n        if (response === null) {\n            if (this.confirmationStrategy === types_1.ConfirmationStrategy.Combo) {\n                try {\n                    const rpcResponse = await this.connection.getSignatureStatuses([\n                        signature,\n                    ]);\n                    if ((_b = (_a = rpcResponse === null || rpcResponse === void 0 ? void 0 : rpcResponse.value) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.confirmationStatus) {\n                        response = {\n                            context: rpcResponse.context,\n                            value: { err: rpcResponse.value[0].err },\n                        };\n                        return response;\n                    }\n                }\n                catch (error) {\n                    // Ignore error to pass through to timeout error\n                }\n            }\n            this.timeoutCount += 1;\n            const duration = (Date.now() - start) / 1000;\n            if (this.throwOnTimeoutError) {\n                throw new types_1.TxSendError(`Transaction was not confirmed in ${duration.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${signature} using the Solana Explorer or CLI tools.`, txConstants_1.NOT_CONFIRMED_ERROR_CODE);\n            }\n        }\n        return response;\n    }\n    async confirmTransactionPolling(signature, commitment = 'finalized') {\n        var _a;\n        let totalTime = 0;\n        let backoffTime = 400; // approx block time\n        const start = Date.now();\n        while (totalTime < this.timeout) {\n            await new Promise((resolve) => setTimeout(resolve, backoffTime));\n            const rpcResponse = await this.connection.getSignatureStatuses([\n                signature,\n            ]);\n            const signatureResult = rpcResponse && ((_a = rpcResponse.value) === null || _a === void 0 ? void 0 : _a[0]);\n            if (rpcResponse &&\n                signatureResult &&\n                signatureResult.confirmationStatus === commitment) {\n                return { context: rpcResponse.context, value: { err: null } };\n            }\n            totalTime += backoffTime;\n            backoffTime = Math.min(backoffTime * 2, 5000);\n        }\n        // Transaction not confirmed within 30 seconds\n        this.timeoutCount += 1;\n        const duration = (Date.now() - start) / 1000;\n        if (this.throwOnTimeoutError) {\n            throw new types_1.TxSendError(`Transaction was not confirmed in ${duration.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${signature} using the Solana Explorer or CLI tools.`, txConstants_1.NOT_CONFIRMED_ERROR_CODE);\n        }\n    }\n    async confirmTransaction(signature, commitment) {\n        if (this.confirmationStrategy === types_1.ConfirmationStrategy.WebSocket ||\n            this.confirmationStrategy === types_1.ConfirmationStrategy.Combo) {\n            return await this.confirmTransactionWebSocket(signature, commitment);\n        }\n        else if (this.confirmationStrategy === types_1.ConfirmationStrategy.Polling) {\n            return await this.confirmTransactionPolling(signature, commitment);\n        }\n    }\n    getTimestamp() {\n        return new Date().getTime();\n    }\n    promiseTimeout(promises, timeoutMs) {\n        let timeoutId;\n        const timeoutPromise = new Promise((resolve) => {\n            timeoutId = setTimeout(() => resolve(null), timeoutMs);\n        });\n        return Promise.race([...promises, timeoutPromise]).then((result) => {\n            clearTimeout(timeoutId);\n            return result;\n        });\n    }\n    sendToAdditionalConnections(rawTx, opts) {\n        var _a;\n        this.additionalConnections.map((connection) => {\n            connection.sendRawTransaction(rawTx, opts).catch((e) => {\n                console.error(\n                // @ts-ignore\n                `error sending tx to additional connection ${connection._rpcEndpoint}`);\n                console.error(e);\n            });\n        });\n        (_a = this.additionalTxSenderCallbacks) === null || _a === void 0 ? void 0 : _a.map((callback) => {\n            callback(bs58_1.default.encode(rawTx));\n        });\n    }\n    addAdditionalConnection(newConnection) {\n        const alreadyUsingConnection = this.additionalConnections.filter((connection) => {\n            // @ts-ignore\n            return connection._rpcEndpoint === newConnection.rpcEndpoint;\n        }).length > 0;\n        if (!alreadyUsingConnection) {\n            this.additionalConnections.push(newConnection);\n        }\n    }\n    getTimeoutCount() {\n        return this.timeoutCount;\n    }\n    async checkConfirmationResultForError(txSig, result) {\n        var _a;\n        if (result === null || result === void 0 ? void 0 : result.err) {\n            await (0, reportTransactionError_1.throwTransactionError)(txSig, this.connection, (_a = this.opts) === null || _a === void 0 ? void 0 : _a.commitment);\n        }\n        return;\n    }\n    getTxLandRate() {\n        if (!this.trackTxLandRate) {\n            return this.txLandRate;\n        }\n        const keys = this.txSigCache.keys();\n        const denominator = keys.length;\n        if (denominator === 0) {\n            return this.txLandRate;\n        }\n        let numerator = 0;\n        for (const key of keys) {\n            const value = this.txSigCache.get(key);\n            if (value) {\n                numerator += 1;\n            }\n        }\n        this.txLandRate = numerator / denominator;\n        return this.txLandRate;\n    }\n    defaultLandRateToFeeFunc(txLandRate) {\n        if (txLandRate >= BASELINE_TX_LAND_RATE ||\n            this.txSigCache.keys().length < 3) {\n            return 1;\n        }\n        const multiplier = 10 * Math.log10(1 + (BASELINE_TX_LAND_RATE - txLandRate) * 5);\n        return Math.min(multiplier, 10);\n    }\n    getSuggestedPriorityFeeMultiplier() {\n        if (!this.trackTxLandRate) {\n            return 1;\n        }\n        return this.landRateToFeeFunc(this.getTxLandRate());\n    }\n}\nexports.BaseTxSender = BaseTxSender;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8664, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/retryTxSender.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RetryTxSender = void 0;\nconst types_1 = require(\"./types\");\nconst baseTxSender_1 = require(\"./baseTxSender\");\nconst config_1 = require(\"../config\");\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_RETRY = 2000;\nclass RetryTxSender extends baseTxSender_1.BaseTxSender {\n    constructor({ connection, wallet, opts = { ...config_1.DEFAULT_CONFIRMATION_OPTS, maxRetries: 0 }, timeout = DEFAULT_TIMEOUT, retrySleep = DEFAULT_RETRY, additionalConnections = new Array(), confirmationStrategy = types_1.ConfirmationStrategy.Combo, additionalTxSenderCallbacks = [], txHandler, trackTxLandRate, txLandRateLookbackWindowMinutes, landRateToFeeFunc, throwOnTimeoutError = true, }) {\n        super({\n            connection,\n            wallet,\n            opts,\n            timeout,\n            additionalConnections,\n            confirmationStrategy,\n            additionalTxSenderCallbacks,\n            txHandler,\n            trackTxLandRate,\n            txLandRateLookbackWindowMinutes,\n            landRateToFeeFunc,\n            throwOnTimeoutError,\n        });\n        this.timoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.retrySleep = retrySleep;\n        this.additionalConnections = additionalConnections;\n    }\n    async sleep(reference) {\n        return new Promise((resolve) => {\n            reference.resolve = resolve;\n            setTimeout(resolve, this.retrySleep);\n        });\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        var _a, _b, _c;\n        const startTime = this.getTimestamp();\n        const txid = await this.connection.sendRawTransaction(rawTransaction, opts);\n        (_a = this.txSigCache) === null || _a === void 0 ? void 0 : _a.set(txid, false);\n        this.sendToAdditionalConnections(rawTransaction, opts);\n        let done = false;\n        const resolveReference = {\n            resolve: undefined,\n        };\n        const stopWaiting = () => {\n            done = true;\n            if (resolveReference.resolve) {\n                resolveReference.resolve();\n            }\n        };\n        (async () => {\n            while (!done && this.getTimestamp() - startTime < this.timeout) {\n                await this.sleep(resolveReference);\n                if (!done) {\n                    this.connection\n                        .sendRawTransaction(rawTransaction, opts)\n                        .catch((e) => {\n                        console.error(e);\n                        stopWaiting();\n                    });\n                    this.sendToAdditionalConnections(rawTransaction, opts);\n                }\n            }\n        })();\n        let slot;\n        try {\n            const result = await this.confirmTransaction(txid, opts.commitment);\n            (_b = this.txSigCache) === null || _b === void 0 ? void 0 : _b.set(txid, true);\n            await this.checkConfirmationResultForError(txid, result === null || result === void 0 ? void 0 : result.value);\n            slot = (_c = result === null || result === void 0 ? void 0 : result.context) === null || _c === void 0 ? void 0 : _c.slot;\n            // eslint-disable-next-line no-useless-catch\n        }\n        catch (e) {\n            throw e;\n        }\n        finally {\n            stopWaiting();\n        }\n        return { txSig: txid, slot };\n    }\n}\nexports.RetryTxSender = RetryTxSender;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,aAAa,GAAG,KAAK;AAC7B,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,kBAAkB;AACxB,MAAM,gBAAgB;AACtB,MAAM,sBAAsB,eAAe,YAAY;IACnD,YAAY,EAAE,UAAU,EAAE,MAAM,EAAE,OAAO;QAAE,GAAG,SAAS,yBAAyB;QAAE,YAAY;IAAE,CAAC,EAAE,UAAU,eAAe,EAAE,aAAa,aAAa,EAAE,wBAAwB,IAAI,OAAO,EAAE,uBAAuB,QAAQ,oBAAoB,CAAC,KAAK,EAAE,8BAA8B,EAAE,EAAE,SAAS,EAAE,eAAe,EAAE,+BAA+B,EAAE,iBAAiB,EAAE,sBAAsB,IAAI,EAAG,CAAE;QACvY,KAAK,CAAC;YACF;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;QACA,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,qBAAqB,GAAG;IACjC;IACA,MAAM,MAAM,SAAS,EAAE;QACnB,OAAO,IAAI,QAAQ,CAAC;YAChB,UAAU,OAAO,GAAG;YACpB,WAAW,SAAS,IAAI,CAAC,UAAU;QACvC;IACJ;IACA,MAAM,mBAAmB,cAAc,EAAE,IAAI,EAAE;QAC3C,IAAI,IAAI,IAAI;QACZ,MAAM,YAAY,IAAI,CAAC,YAAY;QACnC,MAAM,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,gBAAgB;QACtE,CAAC,KAAK,IAAI,CAAC,UAAU,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,GAAG,CAAC,MAAM;QACzE,IAAI,CAAC,2BAA2B,CAAC,gBAAgB;QACjD,IAAI,OAAO;QACX,MAAM,mBAAmB;YACrB,SAAS;QACb;QACA,MAAM,cAAc;YAChB,OAAO;YACP,IAAI,iBAAiB,OAAO,EAAE;gBAC1B,iBAAiB,OAAO;YAC5B;QACJ;QACA,CAAC;YACG,MAAO,CAAC,QAAQ,IAAI,CAAC,YAAY,KAAK,YAAY,IAAI,CAAC,OAAO,CAAE;gBAC5D,MAAM,IAAI,CAAC,KAAK,CAAC;gBACjB,IAAI,CAAC,MAAM;oBACP,IAAI,CAAC,UAAU,CACV,kBAAkB,CAAC,gBAAgB,MACnC,KAAK,CAAC,CAAC;wBACR,QAAQ,KAAK,CAAC;wBACd;oBACJ;oBACA,IAAI,CAAC,2BAA2B,CAAC,gBAAgB;gBACrD;YACJ;QACJ,CAAC;QACD,IAAI;QACJ,IAAI;YACA,MAAM,SAAS,MAAM,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,UAAU;YAClE,CAAC,KAAK,IAAI,CAAC,UAAU,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,GAAG,CAAC,MAAM;YACzE,MAAM,IAAI,CAAC,+BAA+B,CAAC,MAAM,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,KAAK;YAC7G,OAAO,CAAC,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,OAAO,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI;QACzH,4CAA4C;QAChD,EACA,OAAO,GAAG;YACN,MAAM;QACV,SACQ;YACJ;QACJ;QACA,OAAO;YAAE,OAAO;YAAM;QAAK;IAC/B;AACJ;AACA,QAAQ,aAAa,GAAG","ignoreList":[0]}},
    {"offset": {"line": 8757, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/fastSingleTxSender.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FastSingleTxSender = void 0;\nconst types_1 = require(\"./types\");\nconst baseTxSender_1 = require(\"./baseTxSender\");\nconst config_1 = require(\"../config\");\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_BLOCKHASH_REFRESH = 10000;\nclass FastSingleTxSender extends baseTxSender_1.BaseTxSender {\n    constructor({ connection, wallet, opts = { ...config_1.DEFAULT_CONFIRMATION_OPTS, maxRetries: 0 }, timeout = DEFAULT_TIMEOUT, blockhashRefreshInterval = DEFAULT_BLOCKHASH_REFRESH, additionalConnections = new Array(), skipConfirmation = false, confirmInBackground = false, blockhashCommitment = 'finalized', confirmationStrategy = types_1.ConfirmationStrategy.Combo, trackTxLandRate, txHandler, txLandRateLookbackWindowMinutes, landRateToFeeFunc, throwOnTimeoutError = true, }) {\n        super({\n            connection,\n            wallet,\n            opts,\n            timeout,\n            additionalConnections,\n            confirmationStrategy,\n            txHandler,\n            trackTxLandRate,\n            txLandRateLookbackWindowMinutes,\n            landRateToFeeFunc,\n            throwOnTimeoutError,\n        });\n        this.timoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.blockhashRefreshInterval = blockhashRefreshInterval;\n        this.additionalConnections = additionalConnections;\n        this.skipConfirmation = skipConfirmation;\n        this.confirmInBackground = confirmInBackground;\n        this.blockhashCommitment = blockhashCommitment;\n        this.startBlockhashRefreshLoop();\n    }\n    startBlockhashRefreshLoop() {\n        if (this.blockhashRefreshInterval > 0) {\n            this.blockhashIntervalId = setInterval(async () => {\n                try {\n                    this.recentBlockhash = await this.connection.getLatestBlockhash(this.blockhashCommitment);\n                }\n                catch (e) {\n                    console.error('Error in startBlockhashRefreshLoop: ', e);\n                }\n            }, this.blockhashRefreshInterval);\n        }\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        var _a, _b, _c;\n        let txid;\n        try {\n            txid = await this.connection.sendRawTransaction(rawTransaction, opts);\n            (_a = this.txSigCache) === null || _a === void 0 ? void 0 : _a.set(txid, false);\n            this.sendToAdditionalConnections(rawTransaction, opts);\n        }\n        catch (e) {\n            console.error(e);\n            throw e;\n        }\n        let slot;\n        if (!this.skipConfirmation) {\n            try {\n                if (this.confirmInBackground) {\n                    this.confirmTransaction(txid, opts.commitment).then(async (result) => {\n                        var _a;\n                        (_a = this.txSigCache) === null || _a === void 0 ? void 0 : _a.set(txid, true);\n                        await this.checkConfirmationResultForError(txid, result === null || result === void 0 ? void 0 : result.value);\n                        slot = result.context.slot;\n                    });\n                }\n                else {\n                    const result = await this.confirmTransaction(txid, opts.commitment);\n                    (_b = this.txSigCache) === null || _b === void 0 ? void 0 : _b.set(txid, true);\n                    await this.checkConfirmationResultForError(txid, result === null || result === void 0 ? void 0 : result.value);\n                    slot = (_c = result === null || result === void 0 ? void 0 : result.context) === null || _c === void 0 ? void 0 : _c.slot;\n                }\n            }\n            catch (e) {\n                console.error(e);\n                throw e;\n            }\n        }\n        return { txSig: txid, slot };\n    }\n}\nexports.FastSingleTxSender = FastSingleTxSender;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8850, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/whileValidTxSender.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WhileValidTxSender = void 0;\nconst types_1 = require(\"./types\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst baseTxSender_1 = require(\"./baseTxSender\");\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst config_1 = require(\"../config\");\nconst DEFAULT_RETRY = 2000;\nclass WhileValidTxSender extends baseTxSender_1.BaseTxSender {\n    async checkAndSetUseBlockHeightOffset() {\n        this.connection.getVersion().then((version) => {\n            const solanaCoreVersion = version['solana-core'];\n            if (!solanaCoreVersion)\n                return;\n            const majorVersion = solanaCoreVersion.split('.')[0];\n            if (!majorVersion)\n                return;\n            const parsedMajorVersion = parseInt(majorVersion);\n            if (isNaN(parsedMajorVersion))\n                return;\n            if (parsedMajorVersion >= 2) {\n                this.useBlockHeightOffset = false;\n            }\n            else {\n                this.useBlockHeightOffset = true;\n            }\n        });\n    }\n    constructor({ connection, wallet, opts = { ...config_1.DEFAULT_CONFIRMATION_OPTS, maxRetries: 0 }, retrySleep = DEFAULT_RETRY, additionalConnections = new Array(), confirmationStrategy = types_1.ConfirmationStrategy.Combo, additionalTxSenderCallbacks = [], txHandler, trackTxLandRate, txLandRateLookbackWindowMinutes, landRateToFeeFunc, throwOnTimeoutError = true, throwOnTransactionError = true, }) {\n        super({\n            connection,\n            wallet,\n            opts,\n            additionalConnections,\n            additionalTxSenderCallbacks,\n            txHandler,\n            trackTxLandRate,\n            txLandRateLookbackWindowMinutes,\n            confirmationStrategy,\n            landRateToFeeFunc,\n            throwOnTimeoutError,\n            throwOnTransactionError,\n        });\n        this.timoutCount = 0;\n        this.untilValid = new Map();\n        this.useBlockHeightOffset = true;\n        this.retrySleep = retrySleep;\n        this.checkAndSetUseBlockHeightOffset();\n    }\n    async sleep(reference) {\n        return new Promise((resolve) => {\n            reference.resolve = resolve;\n            setTimeout(resolve, this.retrySleep);\n        });\n    }\n    async prepareTx(tx, additionalSigners, opts, preSigned) {\n        var _a;\n        let latestBlockhash = await this.txHandler.getLatestBlockhashForTransaction();\n        // handle tx\n        let signedTx = tx;\n        if (!preSigned) {\n            signedTx = await this.txHandler.prepareTx(tx, additionalSigners, undefined, opts, false, latestBlockhash);\n        }\n        // See SIGNATURE_BLOCK_AND_EXPIRY explanation in txHandler.ts if this is confusing\n        // @ts-ignore\n        if (preSigned && tx.SIGNATURE_BLOCK_AND_EXPIRY) {\n            // @ts-ignore\n            latestBlockhash = tx.SIGNATURE_BLOCK_AND_EXPIRY;\n        }\n        // handle subclass-specific side effects\n        const txSig = bs58_1.default.encode((signedTx === null || signedTx === void 0 ? void 0 : signedTx.signature) || ((_a = signedTx.signatures[0]) === null || _a === void 0 ? void 0 : _a.signature));\n        this.untilValid.set(txSig, latestBlockhash);\n        return signedTx;\n    }\n    async sendVersionedTransaction(tx, additionalSigners, opts, preSigned) {\n        let latestBlockhash = await this.txHandler.getLatestBlockhashForTransaction();\n        let signedTx;\n        if (preSigned) {\n            signedTx = tx;\n            // See SIGNATURE_BLOCK_AND_EXPIRY explanation in txHandler.ts if this is confusing\n            // @ts-ignore\n            if (tx.SIGNATURE_BLOCK_AND_EXPIRY) {\n                // @ts-ignore\n                latestBlockhash = tx.SIGNATURE_BLOCK_AND_EXPIRY;\n            }\n            // @ts-ignore\n        }\n        else if (this.wallet.payer) {\n            tx.message.recentBlockhash = latestBlockhash.blockhash;\n            // @ts-ignore\n            tx.sign((additionalSigners !== null && additionalSigners !== void 0 ? additionalSigners : []).concat(this.wallet.payer));\n            signedTx = tx;\n        }\n        else {\n            tx.message.recentBlockhash = latestBlockhash.blockhash;\n            additionalSigners === null || additionalSigners === void 0 ? void 0 : additionalSigners.filter((s) => s !== undefined).forEach((kp) => {\n                tx.sign([kp]);\n            });\n            signedTx = await this.txHandler.signVersionedTx(tx, additionalSigners, latestBlockhash);\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const txSig = bs58_1.default.encode(signedTx.signatures[0]);\n        this.untilValid.set(txSig, latestBlockhash);\n        return this.sendRawTransaction(signedTx.serialize(), opts);\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        var _a, _b, _c, _d;\n        const startTime = this.getTimestamp();\n        const txid = await this.connection.sendRawTransaction(rawTransaction, opts);\n        (_a = this.txSigCache) === null || _a === void 0 ? void 0 : _a.set(txid, false);\n        this.sendToAdditionalConnections(rawTransaction, opts);\n        let done = false;\n        const resolveReference = {\n            resolve: undefined,\n        };\n        const stopWaiting = () => {\n            done = true;\n            if (resolveReference.resolve) {\n                resolveReference.resolve();\n            }\n        };\n        (async () => {\n            while (!done && this.getTimestamp() - startTime < this.timeout) {\n                await this.sleep(resolveReference);\n                if (!done) {\n                    this.connection\n                        .sendRawTransaction(rawTransaction, opts)\n                        .catch((e) => {\n                        console.error(e);\n                        stopWaiting();\n                    });\n                    this.sendToAdditionalConnections(rawTransaction, opts);\n                }\n            }\n        })();\n        let slot;\n        try {\n            const result = await this.confirmTransaction(txid, opts.commitment);\n            (_b = this.txSigCache) === null || _b === void 0 ? void 0 : _b.set(txid, true);\n            await this.checkConfirmationResultForError(txid, result === null || result === void 0 ? void 0 : result.value);\n            if (((_c = result === null || result === void 0 ? void 0 : result.value) === null || _c === void 0 ? void 0 : _c.err) && this.throwOnTransactionError) {\n                // Fallback error handling if there's a problem reporting the error in checkConfirmationResultForError\n                throw new web3_js_1.SendTransactionError({\n                    action: 'send',\n                    signature: txid,\n                    transactionMessage: `Transaction Failed`,\n                });\n            }\n            slot = (_d = result === null || result === void 0 ? void 0 : result.context) === null || _d === void 0 ? void 0 : _d.slot;\n            // eslint-disable-next-line no-useless-catch\n        }\n        catch (e) {\n            throw e;\n        }\n        finally {\n            stopWaiting();\n            this.untilValid.delete(txid);\n        }\n        return { txSig: txid, slot };\n    }\n}\nexports.WhileValidTxSender = WhileValidTxSender;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9023, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/priorityFeeCalculator.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PriorityFeeCalculator = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\n/**\n * This class determines whether a priority fee needs to be included in a transaction based on\n * a recent history of timed out transactions.\n */\nclass PriorityFeeCalculator {\n    /**\n     * Constructor for the PriorityFeeCalculator class.\n     * @param currentTimeMs - The current time in milliseconds.\n     * @param priorityFeeLatchDurationMs - The duration for how long to stay in triggered state before resetting. Default value is 10 seconds.\n     */\n    constructor(currentTimeMs, priorityFeeLatchDurationMs = 10 * 1000) {\n        this.lastTxTimeoutCount = 0;\n        this.priorityFeeTriggered = false;\n        this.lastTxTimeoutCountTriggered = currentTimeMs;\n        this.priorityFeeLatchDurationMs = priorityFeeLatchDurationMs;\n    }\n    /**\n     * Update the priority fee state based on the current time and the current timeout count.\n     * @param currentTimeMs current time in milliseconds\n     * @returns true if priority fee should be included in the next transaction\n     */\n    updatePriorityFee(currentTimeMs, txTimeoutCount) {\n        let triggerPriorityFee = false;\n        if (txTimeoutCount > this.lastTxTimeoutCount) {\n            this.lastTxTimeoutCount = txTimeoutCount;\n            this.lastTxTimeoutCountTriggered = currentTimeMs;\n            triggerPriorityFee = true;\n        }\n        else {\n            if (!this.priorityFeeTriggered) {\n                triggerPriorityFee = false;\n            }\n            else if (currentTimeMs - this.lastTxTimeoutCountTriggered <\n                this.priorityFeeLatchDurationMs) {\n                triggerPriorityFee = true;\n            }\n        }\n        this.priorityFeeTriggered = triggerPriorityFee;\n        return triggerPriorityFee;\n    }\n    /**\n     * This method returns a transaction instruction list that sets the compute limit on the ComputeBudget program.\n     * @param computeUnitLimit - The maximum number of compute units that can be used by the transaction.\n     * @returns An array of transaction instructions.\n     */\n    generateComputeBudgetIxs(computeUnitLimit) {\n        const ixs = [\n            web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n                units: computeUnitLimit,\n            }),\n        ];\n        return ixs;\n    }\n    /**\n     * Calculates the compute unit price to use based on the desired additional fee to pay and the compute unit limit.\n     * @param computeUnitLimit desired CU to use\n     * @param additionalFeeMicroLamports desired additional fee to pay, in micro lamports\n     * @returns the compute unit price to use, in micro lamports\n     */\n    calculateComputeUnitPrice(computeUnitLimit, additionalFeeMicroLamports) {\n        return additionalFeeMicroLamports / computeUnitLimit;\n    }\n    /**\n     * This method generates a list of transaction instructions for the ComputeBudget program, and includes a priority fee if it's required\n     * @param computeUnitLimit - The maximum number of compute units that can be used by the transaction.\n     * @param usePriorityFee - A boolean indicating whether to include a priority fee in the transaction, this should be from `this.updatePriorityFee()` or `this.priorityFeeTriggered`.\n     * @param additionalFeeMicroLamports - The additional fee to be paid, in micro lamports, the actual price will be calculated.\n     * @returns An array of transaction instructions.\n     */\n    generateComputeBudgetWithPriorityFeeIx(computeUnitLimit, usePriorityFee, additionalFeeMicroLamports) {\n        const ixs = this.generateComputeBudgetIxs(computeUnitLimit);\n        if (usePriorityFee) {\n            const computeUnitPrice = this.calculateComputeUnitPrice(computeUnitLimit, additionalFeeMicroLamports);\n            ixs.push(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: computeUnitPrice,\n            }));\n        }\n        return ixs;\n    }\n}\nexports.PriorityFeeCalculator = PriorityFeeCalculator;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;AACN;;;CAGC,GACD,MAAM;IACF;;;;KAIC,GACD,YAAY,aAAa,EAAE,6BAA6B,KAAK,IAAI,CAAE;QAC/D,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,oBAAoB,GAAG;QAC5B,IAAI,CAAC,2BAA2B,GAAG;QACnC,IAAI,CAAC,0BAA0B,GAAG;IACtC;IACA;;;;KAIC,GACD,kBAAkB,aAAa,EAAE,cAAc,EAAE;QAC7C,IAAI,qBAAqB;QACzB,IAAI,iBAAiB,IAAI,CAAC,kBAAkB,EAAE;YAC1C,IAAI,CAAC,kBAAkB,GAAG;YAC1B,IAAI,CAAC,2BAA2B,GAAG;YACnC,qBAAqB;QACzB,OACK;YACD,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE;gBAC5B,qBAAqB;YACzB,OACK,IAAI,gBAAgB,IAAI,CAAC,2BAA2B,GACrD,IAAI,CAAC,0BAA0B,EAAE;gBACjC,qBAAqB;YACzB;QACJ;QACA,IAAI,CAAC,oBAAoB,GAAG;QAC5B,OAAO;IACX;IACA;;;;KAIC,GACD,yBAAyB,gBAAgB,EAAE;QACvC,MAAM,MAAM;YACR,UAAU,oBAAoB,CAAC,mBAAmB,CAAC;gBAC/C,OAAO;YACX;SACH;QACD,OAAO;IACX;IACA;;;;;KAKC,GACD,0BAA0B,gBAAgB,EAAE,0BAA0B,EAAE;QACpE,OAAO,6BAA6B;IACxC;IACA;;;;;;KAMC,GACD,uCAAuC,gBAAgB,EAAE,cAAc,EAAE,0BAA0B,EAAE;QACjG,MAAM,MAAM,IAAI,CAAC,wBAAwB,CAAC;QAC1C,IAAI,gBAAgB;YAChB,MAAM,mBAAmB,IAAI,CAAC,yBAAyB,CAAC,kBAAkB;YAC1E,IAAI,IAAI,CAAC,UAAU,oBAAoB,CAAC,mBAAmB,CAAC;gBACxD,eAAe;YACnB;QACJ;QACA,OAAO;IACX;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 9104, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/tx/forwardOnlyTxSender.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ForwardOnlyTxSender = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst baseTxSender_1 = require(\"./baseTxSender\");\nconst types_1 = require(\"./types\");\nconst config_1 = require(\"../config\");\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_RETRY = 5000;\nclass ForwardOnlyTxSender extends baseTxSender_1.BaseTxSender {\n    constructor({ connection, wallet, opts = { ...config_1.DEFAULT_CONFIRMATION_OPTS, maxRetries: 0 }, timeout = DEFAULT_TIMEOUT, retrySleep = DEFAULT_RETRY, confirmationStrategy = types_1.ConfirmationStrategy.Combo, additionalTxSenderCallbacks = [], txHandler, trackTxLandRate, txLandRateLookbackWindowMinutes, landRateToFeeFunc, throwOnTimeoutError = true, }) {\n        super({\n            connection,\n            wallet,\n            opts,\n            timeout,\n            additionalConnections: [],\n            confirmationStrategy,\n            additionalTxSenderCallbacks,\n            txHandler,\n            trackTxLandRate,\n            txLandRateLookbackWindowMinutes,\n            landRateToFeeFunc,\n            throwOnTimeoutError,\n        });\n        this.timoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.retrySleep = retrySleep;\n        this.additionalConnections = [];\n    }\n    async sleep(reference) {\n        return new Promise((resolve) => {\n            reference.resolve = resolve;\n            setTimeout(resolve, this.retrySleep);\n        });\n    }\n    sendToAdditionalConnections(rawTx, _opts) {\n        var _a;\n        (_a = this.additionalTxSenderCallbacks) === null || _a === void 0 ? void 0 : _a.map((callback) => {\n            callback(bs58_1.default.encode(rawTx));\n        });\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        var _a, _b, _c;\n        const deserializedTx = web3_js_1.VersionedTransaction.deserialize(rawTransaction);\n        const txSig = deserializedTx.signatures[0];\n        const encodedTxSig = bs58_1.default.encode(txSig);\n        const startTime = this.getTimestamp();\n        this.sendToAdditionalConnections(rawTransaction, opts);\n        (_a = this.txSigCache) === null || _a === void 0 ? void 0 : _a.set(encodedTxSig, false);\n        let done = false;\n        const resolveReference = {\n            resolve: undefined,\n        };\n        const stopWaiting = () => {\n            done = true;\n            if (resolveReference.resolve) {\n                resolveReference.resolve();\n            }\n        };\n        (async () => {\n            while (!done && this.getTimestamp() - startTime < this.timeout) {\n                await this.sleep(resolveReference);\n                if (!done) {\n                    this.sendToAdditionalConnections(rawTransaction, opts);\n                }\n            }\n        })();\n        let slot;\n        try {\n            const result = await this.confirmTransaction(encodedTxSig, opts.commitment);\n            slot = (_b = result === null || result === void 0 ? void 0 : result.context) === null || _b === void 0 ? void 0 : _b.slot;\n            (_c = this.txSigCache) === null || _c === void 0 ? void 0 : _c.set(encodedTxSig, true);\n            // eslint-disable-next-line no-useless-catch\n        }\n        catch (e) {\n            throw e;\n        }\n        finally {\n            stopWaiting();\n        }\n        return { txSig: encodedTxSig, slot };\n    }\n}\nexports.ForwardOnlyTxSender = ForwardOnlyTxSender;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9207, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userStats.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserStats = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst pollingUserStatsAccountSubscriber_1 = require(\"./accounts/pollingUserStatsAccountSubscriber\");\nconst webSocketUserStatsAccountSubsriber_1 = require(\"./accounts/webSocketUserStatsAccountSubsriber\");\nconst pda_1 = require(\"./addresses/pda\");\nconst grpcUserStatsAccountSubscriber_1 = require(\"./accounts/grpcUserStatsAccountSubscriber\");\nconst numericConstants_1 = require(\"./constants/numericConstants\");\nconst numericConstants_2 = require(\"./constants/numericConstants\");\nconst numericConstants_3 = require(\"./constants/numericConstants\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst fuel_1 = require(\"./math/fuel\");\nclass UserStats {\n    constructor(config) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.driftClient = config.driftClient;\n        this.userStatsAccountPublicKey = config.userStatsAccountPublicKey;\n        if (((_a = config.accountSubscription) === null || _a === void 0 ? void 0 : _a.type) === 'polling') {\n            this.accountSubscriber = new pollingUserStatsAccountSubscriber_1.PollingUserStatsAccountSubscriber(config.driftClient.program, config.userStatsAccountPublicKey, config.accountSubscription.accountLoader);\n        }\n        else if (((_b = config.accountSubscription) === null || _b === void 0 ? void 0 : _b.type) === 'grpc') {\n            this.accountSubscriber = new grpcUserStatsAccountSubscriber_1.grpcUserStatsAccountSubscriber(config.accountSubscription.grpcConfigs, config.driftClient.program, config.userStatsAccountPublicKey, {\n                resubTimeoutMs: (_c = config.accountSubscription) === null || _c === void 0 ? void 0 : _c.resubTimeoutMs,\n                logResubMessages: (_d = config.accountSubscription) === null || _d === void 0 ? void 0 : _d.logResubMessages,\n            });\n        }\n        else if (((_e = config.accountSubscription) === null || _e === void 0 ? void 0 : _e.type) === 'websocket') {\n            this.accountSubscriber = new webSocketUserStatsAccountSubsriber_1.WebSocketUserStatsAccountSubscriber(config.driftClient.program, config.userStatsAccountPublicKey, {\n                resubTimeoutMs: (_f = config.accountSubscription) === null || _f === void 0 ? void 0 : _f.resubTimeoutMs,\n                logResubMessages: (_g = config.accountSubscription) === null || _g === void 0 ? void 0 : _g.logResubMessages,\n            }, config.accountSubscription.commitment);\n        }\n        else if (((_h = config.accountSubscription) === null || _h === void 0 ? void 0 : _h.type) === 'custom') {\n            this.accountSubscriber =\n                config.accountSubscription.userStatsAccountSubscriber;\n        }\n        else {\n            const exhaustiveCheck = config.accountSubscription;\n            throw new Error(`Unknown user stats account subscription type: ${exhaustiveCheck}`);\n        }\n    }\n    async subscribe(userStatsAccount) {\n        this.isSubscribed = await this.accountSubscriber.subscribe(userStatsAccount);\n        return this.isSubscribed;\n    }\n    async fetchAccounts() {\n        await this.accountSubscriber.fetch();\n    }\n    async unsubscribe() {\n        await this.accountSubscriber.unsubscribe();\n        this.isSubscribed = false;\n    }\n    getAccountAndSlot() {\n        return this.accountSubscriber.getUserStatsAccountAndSlot();\n    }\n    getAccount() {\n        return this.accountSubscriber.getUserStatsAccountAndSlot().data;\n    }\n    getInsuranceFuelBonus(now, includeSettled = true, includeUnsettled = true) {\n        const userStats = this.getAccount();\n        let insuranceFuel = numericConstants_2.ZERO;\n        if (includeSettled) {\n            insuranceFuel = insuranceFuel.add(new anchor_1.BN(userStats.fuelInsurance));\n        }\n        if (includeUnsettled) {\n            // todo: get real time ifStakedGovTokenAmount using ifStakeAccount\n            if (userStats.ifStakedGovTokenAmount.gt(numericConstants_2.ZERO)) {\n                const spotMarketAccount = this.driftClient.getSpotMarketAccount(numericConstants_3.GOV_SPOT_MARKET_INDEX);\n                const fuelBonusNumeratorUserStats = anchor_1.BN.max(now.sub(anchor_1.BN.max(new anchor_1.BN(userStats.lastFuelIfBonusUpdateTs), numericConstants_1.FUEL_START_TS)), numericConstants_2.ZERO);\n                insuranceFuel = insuranceFuel.add((0, fuel_1.calculateInsuranceFuelBonus)(spotMarketAccount, userStats.ifStakedGovTokenAmount, fuelBonusNumeratorUserStats));\n            }\n            if (userStats.ifStakedQuoteAssetAmount.gt(numericConstants_2.ZERO)) {\n                const spotMarketAccount = this.driftClient.getSpotMarketAccount(numericConstants_3.QUOTE_SPOT_MARKET_INDEX);\n                const fuelBonusNumeratorUserStats = anchor_1.BN.max(now.sub(anchor_1.BN.max(new anchor_1.BN(userStats.lastFuelIfBonusUpdateTs), numericConstants_1.FUEL_START_TS)), numericConstants_2.ZERO);\n                insuranceFuel = insuranceFuel.add((0, fuel_1.calculateInsuranceFuelBonus)(spotMarketAccount, userStats.ifStakedQuoteAssetAmount, fuelBonusNumeratorUserStats));\n            }\n        }\n        return insuranceFuel;\n    }\n    getReferrerInfo() {\n        if (this.getAccount().referrer.equals(web3_js_1.PublicKey.default)) {\n            return undefined;\n        }\n        else {\n            return {\n                referrer: (0, pda_1.getUserAccountPublicKeySync)(this.driftClient.program.programId, this.getAccount().referrer, 0),\n                referrerStats: (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, this.getAccount().referrer),\n            };\n        }\n    }\n    static getOldestActionTs(account) {\n        return Math.min(account.lastFillerVolume30DTs.toNumber(), account.lastMakerVolume30DTs.toNumber(), account.lastTakerVolume30DTs.toNumber());\n    }\n}\nexports.UserStats = UserStats;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9302, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/jupiter/jupiterClient.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JupiterClient = exports.RECOMMENDED_JUPITER_API = exports.RECOMMENDED_JUPITER_API_VERSION = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst node_fetch_1 = __importDefault(require(\"node-fetch\"));\nexports.RECOMMENDED_JUPITER_API_VERSION = '/v1';\nexports.RECOMMENDED_JUPITER_API = 'https://lite-api.jup.ag/swap';\nclass JupiterClient {\n    constructor({ connection, url }) {\n        this.lookupTableCahce = new Map();\n        this.connection = connection;\n        this.url = url !== null && url !== void 0 ? url : exports.RECOMMENDED_JUPITER_API;\n    }\n    /**\n     * Get routes for a swap\n     * @param inputMint the mint of the input token\n     * @param outputMint the mint of the output token\n     * @param amount the amount of the input token\n     * @param slippageBps the slippage tolerance in basis points\n     * @param swapMode the swap mode (ExactIn or ExactOut)\n     * @param onlyDirectRoutes whether to only return direct routes\n     */\n    async getQuote({ inputMint, outputMint, amount, maxAccounts = 50, // 50 is an estimated amount with buffer\n    slippageBps = 50, swapMode = 'ExactIn', onlyDirectRoutes = false, excludeDexes, autoSlippage = false, maxAutoSlippageBps, usdEstimate, }) {\n        const params = new URLSearchParams({\n            inputMint: inputMint.toString(),\n            outputMint: outputMint.toString(),\n            amount: amount.toString(),\n            slippageBps: autoSlippage ? '0' : slippageBps.toString(),\n            swapMode,\n            onlyDirectRoutes: onlyDirectRoutes.toString(),\n            maxAccounts: maxAccounts.toString(),\n            autoSlippage: autoSlippage.toString(),\n            maxAutoSlippageBps: autoSlippage ? maxAutoSlippageBps.toString() : '0',\n            autoSlippageCollisionUsdValue: autoSlippage\n                ? usdEstimate.toString()\n                : '0',\n            ...(excludeDexes && { excludeDexes: excludeDexes.join(',') }),\n        });\n        if (swapMode === 'ExactOut') {\n            params.delete('maxAccounts');\n        }\n        const apiVersionParam = this.url === exports.RECOMMENDED_JUPITER_API\n            ? exports.RECOMMENDED_JUPITER_API_VERSION\n            : '';\n        const quote = await (await (0, node_fetch_1.default)(`${this.url}${apiVersionParam}/quote?${params.toString()}`)).json();\n        return quote;\n    }\n    /**\n     * Get a swap transaction for quote\n     * @param quoteResponse quote to perform swap\n     * @param userPublicKey the signer's wallet public key\n     * @param slippageBps the slippage tolerance in basis points\n     */\n    async getSwap({ quote, userPublicKey, slippageBps = 50, }) {\n        var _a;\n        if (!quote) {\n            throw new Error('Jupiter swap quote not provided. Please try again.');\n        }\n        const apiVersionParam = this.url === exports.RECOMMENDED_JUPITER_API\n            ? exports.RECOMMENDED_JUPITER_API_VERSION\n            : '';\n        const resp = await (await (0, node_fetch_1.default)(`${this.url}${apiVersionParam}/swap`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                quoteResponse: quote,\n                userPublicKey,\n                slippageBps,\n            }),\n        })).json();\n        if (!('swapTransaction' in resp)) {\n            throw new Error(`swapTransaction not found, error from Jupiter: ${resp.error} ${', ' + ((_a = resp.message) !== null && _a !== void 0 ? _a : '')}`);\n        }\n        const { swapTransaction } = resp;\n        try {\n            const swapTransactionBuf = Buffer.from(swapTransaction, 'base64');\n            return web3_js_1.VersionedTransaction.deserialize(swapTransactionBuf);\n        }\n        catch (err) {\n            throw new Error('Something went wrong with creating the Jupiter swap transaction. Please try again.');\n        }\n    }\n    /**\n     * Get the transaction message and lookup tables for a transaction\n     * @param transaction\n     */\n    async getTransactionMessageAndLookupTables({ transaction, }) {\n        const message = transaction.message;\n        const lookupTables = (await Promise.all(message.addressTableLookups.map(async (lookup) => {\n            return await this.getLookupTable(lookup.accountKey);\n        }))).filter((lookup) => lookup);\n        const transactionMessage = web3_js_1.TransactionMessage.decompile(message, {\n            addressLookupTableAccounts: lookupTables,\n        });\n        return {\n            transactionMessage,\n            lookupTables,\n        };\n    }\n    async getLookupTable(accountKey) {\n        if (this.lookupTableCahce.has(accountKey.toString())) {\n            return this.lookupTableCahce.get(accountKey.toString());\n        }\n        return (await this.connection.getAddressLookupTable(accountKey)).value;\n    }\n    /**\n     * Get the jupiter instructions from transaction by filtering out instructions to compute budget and associated token programs\n     * @param transactionMessage the transaction message\n     * @param inputMint the input mint\n     * @param outputMint the output mint\n     */\n    getJupiterInstructions({ transactionMessage, inputMint, outputMint, }) {\n        return transactionMessage.instructions.filter((instruction) => {\n            if (instruction.programId.toString() ===\n                'ComputeBudget111111111111111111111111111111') {\n                return false;\n            }\n            if (instruction.programId.toString() ===\n                'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA') {\n                return false;\n            }\n            if (instruction.programId.toString() === '11111111111111111111111111111111') {\n                return false;\n            }\n            if (instruction.programId.toString() ===\n                'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL') {\n                const mint = instruction.keys[3].pubkey;\n                if (mint.equals(inputMint) || mint.equals(outputMint)) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n}\nexports.JupiterClient = JupiterClient;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9438, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/marinade/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IDL = void 0;\nexports.IDL = {\n    version: '0.1.0',\n    name: 'marinade_finance',\n    instructions: [\n        {\n            name: 'initialize',\n            accounts: [\n                {\n                    name: 'creatorAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMint',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'operationalSolAccount',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPool',\n                    accounts: [\n                        {\n                            name: 'lpMint',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'solLegPda',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'msolLeg',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                    ],\n                },\n                {\n                    name: 'treasuryMsolAccount',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'data',\n                    type: {\n                        defined: 'InitializeData',\n                    },\n                },\n            ],\n        },\n        {\n            name: 'changeAuthority',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'adminAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n            ],\n            args: [\n                {\n                    name: 'data',\n                    type: {\n                        defined: 'ChangeAuthorityData',\n                    },\n                },\n            ],\n        },\n        {\n            name: 'addValidator',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'managerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorVote',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'duplicationFlag',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'rentPayer',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'score',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'removeValidator',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'managerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'duplicationFlag',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'operationalSolAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'index',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorVote',\n                    type: 'publicKey',\n                },\n            ],\n        },\n        {\n            name: 'setValidatorScore',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'managerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'index',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorVote',\n                    type: 'publicKey',\n                },\n                {\n                    name: 'score',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'configValidatorSystem',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'managerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n            ],\n            args: [\n                {\n                    name: 'extraRuns',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'deposit',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolSolLegPda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLeg',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLegAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'transferFrom',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'mintTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMintAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'lamports',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'depositStakeAccount',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'duplicationFlag',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'rentPayer',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'msolMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'mintTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMintAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'liquidUnstake',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolSolLegPda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLeg',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'treasuryMsolAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'getMsolFrom',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'getMsolFromAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'transferSolTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'msolAmount',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'addLiquidity',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'lpMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'lpMintAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLeg',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolSolLegPda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'transferFrom',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'mintTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'lamports',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'removeLiquidity',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'lpMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'burnFrom',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'burnFromAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'transferSolTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'transferMsolTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolSolLegPda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLeg',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'liqPoolMsolLegAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'tokens',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'configLp',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'adminAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n            ],\n            args: [\n                {\n                    name: 'params',\n                    type: {\n                        defined: 'ConfigLpParams',\n                    },\n                },\n            ],\n        },\n        {\n            name: 'configMarinade',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'adminAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n            ],\n            args: [\n                {\n                    name: 'params',\n                    type: {\n                        defined: 'ConfigMarinadeParams',\n                    },\n                },\n            ],\n        },\n        {\n            name: 'orderUnstake',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'msolMint',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'burnMsolFrom',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'burnMsolAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'newTicketAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'tokenProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'msolAmount',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'claim',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'ticketAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'transferSolTo',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [],\n        },\n        {\n            name: 'stakeReserve',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorVote',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeDepositAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'epochSchedule',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeHistory',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeConfig',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'updateActive',\n            accounts: [\n                {\n                    name: 'common',\n                    accounts: [\n                        {\n                            name: 'state',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeList',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeAccount',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeWithdrawAuthority',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'reservePda',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'msolMint',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'msolMintAuthority',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'treasuryMsolAccount',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'clock',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeHistory',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeProgram',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'tokenProgram',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                    ],\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'stakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'updateDeactivated',\n            accounts: [\n                {\n                    name: 'common',\n                    accounts: [\n                        {\n                            name: 'state',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeList',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeAccount',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeWithdrawAuthority',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'reservePda',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'msolMint',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'msolMintAuthority',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'treasuryMsolAccount',\n                            isMut: true,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'clock',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeHistory',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'stakeProgram',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                        {\n                            name: 'tokenProgram',\n                            isMut: false,\n                            isSigner: false,\n                        },\n                    ],\n                },\n                {\n                    name: 'operationalSolAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'stakeIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'deactivateStake',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeDepositAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'splitStakeAccount',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'splitStakeRentPayer',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'epochSchedule',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeHistory',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'stakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'emergencyUnstake',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorManagerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeDepositAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'stakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n        {\n            name: 'partialUnstake',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorManagerAuthority',\n                    isMut: false,\n                    isSigner: true,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeDepositAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'reservePda',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'splitStakeAccount',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'splitStakeRentPayer',\n                    isMut: true,\n                    isSigner: true,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'rent',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeHistory',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'systemProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'stakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'desiredUnstakeAmount',\n                    type: 'u64',\n                },\n            ],\n        },\n        {\n            name: 'mergeStakes',\n            accounts: [\n                {\n                    name: 'state',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'validatorList',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'destinationStake',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'sourceStake',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeDepositAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeWithdrawAuthority',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'operationalSolAccount',\n                    isMut: true,\n                    isSigner: false,\n                },\n                {\n                    name: 'clock',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeHistory',\n                    isMut: false,\n                    isSigner: false,\n                },\n                {\n                    name: 'stakeProgram',\n                    isMut: false,\n                    isSigner: false,\n                },\n            ],\n            args: [\n                {\n                    name: 'destinationStakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'sourceStakeIndex',\n                    type: 'u32',\n                },\n                {\n                    name: 'validatorIndex',\n                    type: 'u32',\n                },\n            ],\n        },\n    ],\n    accounts: [\n        {\n            name: 'state',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'msolMint',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'adminAuthority',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'operationalSolAccount',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'treasuryMsolAccount',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'reserveBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'msolMintAuthorityBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'rentExemptForTokenAcc',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'rewardFee',\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'stakeSystem',\n                        type: {\n                            defined: 'StakeSystem',\n                        },\n                    },\n                    {\n                        name: 'validatorSystem',\n                        type: {\n                            defined: 'ValidatorSystem',\n                        },\n                    },\n                    {\n                        name: 'liqPool',\n                        type: {\n                            defined: 'LiqPool',\n                        },\n                    },\n                    {\n                        name: 'availableReserveBalance',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'msolSupply',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'msolPrice',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'circulatingTicketCount',\n                        docs: ['count tickets for delayed-unstake'],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'circulatingTicketBalance',\n                        docs: [\n                            'total lamports amount of generated and not claimed yet tickets',\n                        ],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lentFromReserve',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'minDeposit',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'minWithdraw',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'stakingSolCap',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'emergencyCoolingDown',\n                        type: 'u64',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ticketAccountData',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'stateAddress',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'beneficiary',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'lamportsAmount',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'createdEpoch',\n                        type: 'u64',\n                    },\n                ],\n            },\n        },\n    ],\n    types: [\n        {\n            name: 'LiqPool',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'lpMint',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'lpMintAuthorityBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'solLegBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'msolLegAuthorityBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'msolLeg',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'lpLiquidityTarget',\n                        docs: [\n                            'Liquidity target. If the Liquidity reach this amount, the fee reaches lp_min_discount_fee',\n                        ],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lpMaxFee',\n                        docs: ['Liquidity pool max fee'],\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'lpMinFee',\n                        docs: ['SOL/mSOL Liquidity pool min fee'],\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'treasuryCut',\n                        docs: ['Treasury cut'],\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'lpSupply',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lentFromSolLeg',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'liquiditySolCap',\n                        type: 'u64',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'List',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'account',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'itemSize',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'count',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'newAccount',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'copiedCount',\n                        type: 'u32',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'StakeRecord',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'stakeAccount',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'lastUpdateDelegatedLamports',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lastUpdateEpoch',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'isEmergencyUnstaking',\n                        type: 'u8',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'StakeSystem',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'stakeList',\n                        type: {\n                            defined: 'List',\n                        },\n                    },\n                    {\n                        name: 'delayedUnstakeCoolingDown',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'stakeDepositBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'stakeWithdrawBumpSeed',\n                        type: 'u8',\n                    },\n                    {\n                        name: 'slotsForStakeDelta',\n                        docs: [\n                            'set by admin, how much slots before the end of the epoch, stake-delta can start',\n                        ],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lastStakeDeltaEpoch',\n                        docs: [\n                            'Marks the start of stake-delta operations, meaning that if somebody starts a delayed-unstake ticket',\n                            'after this var is set with epoch_num the ticket will have epoch_created = current_epoch+1',\n                            '(the user must wait one more epoch, because their unstake-delta will be execute in this epoch)',\n                        ],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'minStake',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'extraStakeDeltaRuns',\n                        docs: [\n                            'can be set by validator-manager-auth to allow a second run of stake-delta to stake late stakers in the last minute of the epoch',\n                            \"so we maximize user's rewards\",\n                        ],\n                        type: 'u32',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ValidatorRecord',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'validatorAccount',\n                        docs: ['Validator vote pubkey'],\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'activeBalance',\n                        docs: ['Validator total balance in lamports'],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'score',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'lastStakeDeltaEpoch',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'duplicationFlagBumpSeed',\n                        type: 'u8',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ValidatorSystem',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'validatorList',\n                        type: {\n                            defined: 'List',\n                        },\n                    },\n                    {\n                        name: 'managerAuthority',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'totalValidatorScore',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'totalActiveBalance',\n                        docs: ['sum of all active lamports staked'],\n                        type: 'u64',\n                    },\n                    {\n                        name: 'autoAddValidatorEnabled',\n                        docs: [\n                            'allow & auto-add validator when a user deposits a stake-account of a non-listed validator',\n                        ],\n                        type: 'u8',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'Fee',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'basisPoints',\n                        type: 'u32',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'InitializeData',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'adminAuthority',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'validatorManagerAuthority',\n                        type: 'publicKey',\n                    },\n                    {\n                        name: 'minStake',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'rewardFee',\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'liqPool',\n                        type: {\n                            defined: 'LiqPoolInitializeData',\n                        },\n                    },\n                    {\n                        name: 'additionalStakeRecordSpace',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'additionalValidatorRecordSpace',\n                        type: 'u32',\n                    },\n                    {\n                        name: 'slotsForStakeDelta',\n                        type: 'u64',\n                    },\n                ],\n            },\n        },\n        {\n            name: 'LiqPoolInitializeData',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'lpLiquidityTarget',\n                        type: 'u64',\n                    },\n                    {\n                        name: 'lpMaxFee',\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'lpMinFee',\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                    {\n                        name: 'lpTreasuryCut',\n                        type: {\n                            defined: 'Fee',\n                        },\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ChangeAuthorityData',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'admin',\n                        type: {\n                            option: 'publicKey',\n                        },\n                    },\n                    {\n                        name: 'validatorManager',\n                        type: {\n                            option: 'publicKey',\n                        },\n                    },\n                    {\n                        name: 'operationalSolAccount',\n                        type: {\n                            option: 'publicKey',\n                        },\n                    },\n                    {\n                        name: 'treasuryMsolAccount',\n                        type: {\n                            option: 'publicKey',\n                        },\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ConfigLpParams',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'minFee',\n                        type: {\n                            option: {\n                                defined: 'Fee',\n                            },\n                        },\n                    },\n                    {\n                        name: 'maxFee',\n                        type: {\n                            option: {\n                                defined: 'Fee',\n                            },\n                        },\n                    },\n                    {\n                        name: 'liquidityTarget',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'treasuryCut',\n                        type: {\n                            option: {\n                                defined: 'Fee',\n                            },\n                        },\n                    },\n                ],\n            },\n        },\n        {\n            name: 'ConfigMarinadeParams',\n            type: {\n                kind: 'struct',\n                fields: [\n                    {\n                        name: 'rewardsFee',\n                        type: {\n                            option: {\n                                defined: 'Fee',\n                            },\n                        },\n                    },\n                    {\n                        name: 'slotsForStakeDelta',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'minStake',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'minDeposit',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'minWithdraw',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'stakingSolCap',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'liquiditySolCap',\n                        type: {\n                            option: 'u64',\n                        },\n                    },\n                    {\n                        name: 'autoAddValidatorEnabled',\n                        type: {\n                            option: 'bool',\n                        },\n                    },\n                ],\n            },\n        },\n        {\n            name: 'CommonError',\n            type: {\n                kind: 'enum',\n                variants: [\n                    {\n                        name: 'WrongReserveOwner',\n                    },\n                    {\n                        name: 'NonEmptyReserveData',\n                    },\n                    {\n                        name: 'InvalidInitialReserveLamports',\n                    },\n                    {\n                        name: 'ZeroValidatorChunkSize',\n                    },\n                    {\n                        name: 'TooBigValidatorChunkSize',\n                    },\n                    {\n                        name: 'ZeroCreditChunkSize',\n                    },\n                    {\n                        name: 'TooBigCreditChunkSize',\n                    },\n                    {\n                        name: 'TooLowCreditFee',\n                    },\n                    {\n                        name: 'InvalidMintAuthority',\n                    },\n                    {\n                        name: 'MintHasInitialSupply',\n                    },\n                    {\n                        name: 'InvalidOwnerFeeState',\n                    },\n                    {\n                        name: 'InvalidProgramId',\n                    },\n                    {\n                        name: 'UnexpectedAccount',\n                    },\n                    {\n                        name: 'CalculationFailure',\n                    },\n                    {\n                        name: 'AccountWithLockup',\n                    },\n                    {\n                        name: 'NumberTooLow',\n                    },\n                    {\n                        name: 'NumberTooHigh',\n                    },\n                    {\n                        name: 'FeeTooHigh',\n                    },\n                    {\n                        name: 'FeesWrongWayRound',\n                    },\n                    {\n                        name: 'LiquidityTargetTooLow',\n                    },\n                    {\n                        name: 'TicketNotDue',\n                    },\n                    {\n                        name: 'TicketNotReady',\n                    },\n                    {\n                        name: 'WrongBeneficiary',\n                    },\n                    {\n                        name: 'StakeAccountNotUpdatedYet',\n                    },\n                    {\n                        name: 'StakeNotDelegated',\n                    },\n                    {\n                        name: 'StakeAccountIsEmergencyUnstaking',\n                    },\n                    {\n                        name: 'InsufficientLiquidity',\n                    },\n                    {\n                        name: 'InvalidValidator',\n                    },\n                ],\n            },\n        },\n    ],\n};\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,GAAG,GAAG,KAAK;AACnB,QAAQ,GAAG,GAAG;IACV,SAAS;IACT,MAAM;IACN,cAAc;QACV;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,UAAU;wBACN;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;qBACH;gBACL;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;wBACF,SAAS;oBACb;gBACJ;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;wBACF,SAAS;oBACb;gBACJ;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;wBACF,SAAS;oBACb;gBACJ;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;wBACF,SAAS;oBACb;gBACJ;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM,EAAE;QACZ;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,UAAU;wBACN;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;qBACH;gBACL;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,UAAU;wBACN;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;wBACA;4BACI,MAAM;4BACN,OAAO;4BACP,UAAU;wBACd;qBACH;gBACL;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;QACA;YACI,MAAM;YACN,UAAU;gBACN;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;gBACA;oBACI,MAAM;oBACN,OAAO;oBACP,UAAU;gBACd;aACH;YACD,MAAM;gBACF;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;gBACA;oBACI,MAAM;oBACN,MAAM;gBACV;aACH;QACL;KACH;IACD,UAAU;QACN;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAoC;wBAC3C,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;yBACH;wBACD,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;KACH;IACD,OAAO;QACH;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;yBACH;wBACD,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAyB;wBAChC,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAkC;wBACzC,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAe;wBACtB,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;yBACH;wBACD,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;4BACA;4BACA;yBACH;wBACD,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;4BACA;yBACH;wBACD,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAwB;wBAC/B,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAsC;wBAC7C,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BAAC;yBAAoC;wBAC3C,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF;yBACH;wBACD,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;oBACV;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;oBACV;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,SAAS;wBACb;oBACJ;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;gCACJ,SAAS;4BACb;wBACJ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;gCACJ,SAAS;4BACb;wBACJ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;gCACJ,SAAS;4BACb;wBACJ;oBACJ;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;oBACJ;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;gCACJ,SAAS;4BACb;wBACJ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;oBACA;wBACI,MAAM;wBACN,MAAM;4BACF,QAAQ;wBACZ;oBACJ;iBACH;YACL;QACJ;QACA;YACI,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,UAAU;oBACN;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;oBACA;wBACI,MAAM;oBACV;iBACH;YACL;QACJ;KACH;AACL","ignoreList":[0]}},
    {"offset": {"line": 11422, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/marinade/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMarinadeMSolPrice = exports.getMarinadeDepositIx = exports.getMarinadeFinanceProgram = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst types_1 = require(\"./types\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst spl_token_1 = require(\"@solana/spl-token\");\nconst marinadeFinanceProgramId = new web3_js_1.PublicKey('MarBmsSgKXdrN1egZf5sqe1TMai9K1rChYNDJgjq7aD');\nfunction getMarinadeFinanceProgram(provider) {\n    return new anchor_1.Program(types_1.IDL, marinadeFinanceProgramId, provider);\n}\nexports.getMarinadeFinanceProgram = getMarinadeFinanceProgram;\nfunction getMarinadeDepositIx({ program, amount, mSOLAccount, transferFrom, }) {\n    return program.methods\n        .deposit(amount)\n        .accountsStrict({\n        reservePda: new web3_js_1.PublicKey('Du3Ysj1wKbxPKkuPPnvzQLQh8oMSVifs3jGZjJWXFmHN'),\n        state: new web3_js_1.PublicKey('8szGkuLTAux9XMgZ2vtY39jVSowEcpBfFfD8hXSEqdGC'),\n        msolMint: new web3_js_1.PublicKey('mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So'),\n        msolMintAuthority: new web3_js_1.PublicKey('3JLPCS1qM2zRw3Dp6V4hZnYHd4toMNPkNesXdX9tg6KM'),\n        liqPoolMsolLegAuthority: new web3_js_1.PublicKey('EyaSjUtSgo9aRD1f8LWXwdvkpDTmXAW54yoSHZRF14WL'),\n        liqPoolMsolLeg: new web3_js_1.PublicKey('7GgPYjS5Dza89wV6FpZ23kUJRG5vbQ1GM25ezspYFSoE'),\n        liqPoolSolLegPda: new web3_js_1.PublicKey('UefNb6z6yvArqe4cJHTXCqStRsKmWhGxnZzuHbikP5Q'),\n        mintTo: mSOLAccount,\n        transferFrom,\n        systemProgram: web3_js_1.SystemProgram.programId,\n        tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n    })\n        .instruction();\n}\nexports.getMarinadeDepositIx = getMarinadeDepositIx;\nasync function getMarinadeMSolPrice(program) {\n    const state = await program.account.state.fetch(new web3_js_1.PublicKey('8szGkuLTAux9XMgZ2vtY39jVSowEcpBfFfD8hXSEqdGC'));\n    return state.msolPrice.toNumber() / 4294967296;\n}\nexports.getMarinadeMSolPrice = getMarinadeMSolPrice;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,oBAAoB,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,yBAAyB,GAAG,KAAK;AACvG,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,2BAA2B,IAAI,UAAU,SAAS,CAAC;AACzD,SAAS,0BAA0B,QAAQ;IACvC,OAAO,IAAI,SAAS,OAAO,CAAC,QAAQ,GAAG,EAAE,0BAA0B;AACvE;AACA,QAAQ,yBAAyB,GAAG;AACpC,SAAS,qBAAqB,EAAE,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,YAAY,EAAG;IACzE,OAAO,QAAQ,OAAO,CACjB,OAAO,CAAC,QACR,cAAc,CAAC;QAChB,YAAY,IAAI,UAAU,SAAS,CAAC;QACpC,OAAO,IAAI,UAAU,SAAS,CAAC;QAC/B,UAAU,IAAI,UAAU,SAAS,CAAC;QAClC,mBAAmB,IAAI,UAAU,SAAS,CAAC;QAC3C,yBAAyB,IAAI,UAAU,SAAS,CAAC;QACjD,gBAAgB,IAAI,UAAU,SAAS,CAAC;QACxC,kBAAkB,IAAI,UAAU,SAAS,CAAC;QAC1C,QAAQ;QACR;QACA,eAAe,UAAU,aAAa,CAAC,SAAS;QAChD,cAAc,YAAY,gBAAgB;IAC9C,GACK,WAAW;AACpB;AACA,QAAQ,oBAAoB,GAAG;AAC/B,eAAe,qBAAqB,OAAO;IACvC,MAAM,QAAQ,MAAM,QAAQ,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,UAAU,SAAS,CAAC;IACxE,OAAO,MAAM,SAAS,CAAC,QAAQ,KAAK;AACxC;AACA,QAAQ,oBAAoB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 11460, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderParams.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isUpdateHighLeverageMode = exports.getOrderParams = exports.getMarketOrderParams = exports.getTriggerLimitOrderParams = exports.getTriggerMarketOrderParams = exports.getLimitOrderParams = void 0;\nconst types_1 = require(\"./types\");\nfunction getLimitOrderParams(params) {\n    return getOrderParams(Object.assign({}, params, {\n        orderType: types_1.OrderType.LIMIT,\n    }));\n}\nexports.getLimitOrderParams = getLimitOrderParams;\nfunction getTriggerMarketOrderParams(params) {\n    return getOrderParams(Object.assign({}, params, {\n        orderType: types_1.OrderType.TRIGGER_MARKET,\n    }));\n}\nexports.getTriggerMarketOrderParams = getTriggerMarketOrderParams;\nfunction getTriggerLimitOrderParams(params) {\n    return getOrderParams(Object.assign({}, params, {\n        orderType: types_1.OrderType.TRIGGER_LIMIT,\n    }));\n}\nexports.getTriggerLimitOrderParams = getTriggerLimitOrderParams;\nfunction getMarketOrderParams(params) {\n    return getOrderParams(Object.assign({}, params, {\n        orderType: types_1.OrderType.MARKET,\n    }));\n}\nexports.getMarketOrderParams = getMarketOrderParams;\n/**\n * Creates an OrderParams object with the given OptionalOrderParams and any params to override.\n *\n * example:\n * ```\n * const orderParams = getOrderParams(optionalOrderParams, { marketType: MarketType.PERP });\n * ```\n *\n * @param optionalOrderParams\n * @param overridingParams\n * @returns\n */\nfunction getOrderParams(optionalOrderParams, overridingParams = {}) {\n    return Object.assign({}, types_1.DefaultOrderParams, optionalOrderParams, overridingParams);\n}\nexports.getOrderParams = getOrderParams;\nfunction isUpdateHighLeverageMode(bitFlags) {\n    return (bitFlags & types_1.OrderParamsBitFlag.UpdateHighLeverageMode) !== 0;\n}\nexports.isUpdateHighLeverageMode = isUpdateHighLeverageMode;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,QAAQ,cAAc,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,0BAA0B,GAAG,QAAQ,2BAA2B,GAAG,QAAQ,mBAAmB,GAAG,KAAK;AACzM,MAAM;AACN,SAAS,oBAAoB,MAAM;IAC/B,OAAO,eAAe,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ;QAC5C,WAAW,QAAQ,SAAS,CAAC,KAAK;IACtC;AACJ;AACA,QAAQ,mBAAmB,GAAG;AAC9B,SAAS,4BAA4B,MAAM;IACvC,OAAO,eAAe,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ;QAC5C,WAAW,QAAQ,SAAS,CAAC,cAAc;IAC/C;AACJ;AACA,QAAQ,2BAA2B,GAAG;AACtC,SAAS,2BAA2B,MAAM;IACtC,OAAO,eAAe,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ;QAC5C,WAAW,QAAQ,SAAS,CAAC,aAAa;IAC9C;AACJ;AACA,QAAQ,0BAA0B,GAAG;AACrC,SAAS,qBAAqB,MAAM;IAChC,OAAO,eAAe,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ;QAC5C,WAAW,QAAQ,SAAS,CAAC,MAAM;IACvC;AACJ;AACA,QAAQ,oBAAoB,GAAG;AAC/B;;;;;;;;;;;CAWC,GACD,SAAS,eAAe,mBAAmB,EAAE,mBAAmB,CAAC,CAAC;IAC9D,OAAO,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ,kBAAkB,EAAE,qBAAqB;AAC9E;AACA,QAAQ,cAAc,GAAG;AACzB,SAAS,yBAAyB,QAAQ;IACtC,OAAO,CAAC,WAAW,QAAQ,kBAAkB,CAAC,sBAAsB,MAAM;AAC9E;AACA,QAAQ,wBAAwB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 11512, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/titan/titanClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TitanClient = exports.SwapMode = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst msgpack_1 = require(\"@msgpack/msgpack\");\nvar SwapMode;\n(function (SwapMode) {\n    SwapMode[\"ExactIn\"] = \"ExactIn\";\n    SwapMode[\"ExactOut\"] = \"ExactOut\";\n})(SwapMode || (exports.SwapMode = SwapMode = {}));\nconst TITAN_API_URL = 'https://api.titan.exchange';\nclass TitanClient {\n    constructor({ connection, authToken, url, }) {\n        this.connection = connection;\n        this.authToken = authToken;\n        this.url = url !== null && url !== void 0 ? url : TITAN_API_URL;\n    }\n    /**\n     * Get routes for a swap\n     */\n    async getQuote({ inputMint, outputMint, amount, userPublicKey, maxAccounts = 50, // 50 is an estimated amount with buffer\n    slippageBps, swapMode, onlyDirectRoutes, excludeDexes, sizeConstraint, accountsLimitWritable, }) {\n        var _a;\n        const params = new URLSearchParams({\n            inputMint: inputMint.toString(),\n            outputMint: outputMint.toString(),\n            amount: amount.toString(),\n            userPublicKey: userPublicKey.toString(),\n            ...(slippageBps && { slippageBps: slippageBps.toString() }),\n            ...(swapMode && {\n                swapMode: swapMode === 'ExactOut' ? SwapMode.ExactOut : SwapMode.ExactIn,\n            }),\n            ...(onlyDirectRoutes && {\n                onlyDirectRoutes: onlyDirectRoutes.toString(),\n            }),\n            ...(maxAccounts && { accountsLimitTotal: maxAccounts.toString() }),\n            ...(excludeDexes && { excludeDexes: excludeDexes.join(',') }),\n            ...(sizeConstraint && { sizeConstraint: sizeConstraint.toString() }),\n            ...(accountsLimitWritable && {\n                accountsLimitWritable: accountsLimitWritable.toString(),\n            }),\n        });\n        const response = await fetch(`${this.url}/api/v1/quote/swap?${params.toString()}`, {\n            headers: {\n                Accept: 'application/vnd.msgpack',\n                'Accept-Encoding': 'gzip, deflate, br',\n                Authorization: `Bearer ${this.authToken}`,\n            },\n        });\n        if (!response.ok) {\n            throw new Error(`Titan API error: ${response.status} ${response.statusText}`);\n        }\n        const buffer = await response.arrayBuffer();\n        const data = (0, msgpack_1.decode)(buffer);\n        const route = data.quotes[Object.keys(data.quotes).find((key) => key.toLowerCase() === 'titan') ||\n            ''];\n        if (!route) {\n            throw new Error('No routes available');\n        }\n        return {\n            inputMint: inputMint.toString(),\n            inAmount: amount.toString(),\n            outputMint: outputMint.toString(),\n            outAmount: route.outAmount.toString(),\n            swapMode: data.swapMode,\n            slippageBps: route.slippageBps,\n            platformFee: route.platformFee\n                ? {\n                    amount: route.platformFee.amount.toString(),\n                    feeBps: route.platformFee.fee_bps,\n                }\n                : undefined,\n            routePlan: ((_a = route.steps) === null || _a === void 0 ? void 0 : _a.map((step) => {\n                var _a;\n                return ({\n                    swapInfo: {\n                        ammKey: new web3_js_1.PublicKey(step.ammKey).toString(),\n                        label: step.label,\n                        inputMint: new web3_js_1.PublicKey(step.inputMint).toString(),\n                        outputMint: new web3_js_1.PublicKey(step.outputMint).toString(),\n                        inAmount: step.inAmount.toString(),\n                        outAmount: step.outAmount.toString(),\n                        feeAmount: ((_a = step.feeAmount) === null || _a === void 0 ? void 0 : _a.toString()) || '0',\n                        feeMint: step.feeMint ? new web3_js_1.PublicKey(step.feeMint).toString() : '',\n                    },\n                    percent: 100,\n                });\n            })) || [],\n            contextSlot: route.contextSlot,\n            timeTaken: route.timeTaken,\n        };\n    }\n    /**\n     * Get a swap transaction for quote\n     */\n    async getSwap({ inputMint, outputMint, amount, userPublicKey, maxAccounts = 50, // 50 is an estimated amount with buffer\n    slippageBps, swapMode, onlyDirectRoutes, excludeDexes, sizeConstraint, accountsLimitWritable, }) {\n        const params = new URLSearchParams({\n            inputMint: inputMint.toString(),\n            outputMint: outputMint.toString(),\n            amount: amount.toString(),\n            userPublicKey: userPublicKey.toString(),\n            ...(slippageBps && { slippageBps: slippageBps.toString() }),\n            ...(swapMode && { swapMode: swapMode }),\n            ...(maxAccounts && { accountsLimitTotal: maxAccounts.toString() }),\n            ...(excludeDexes && { excludeDexes: excludeDexes.join(',') }),\n            ...(onlyDirectRoutes && {\n                onlyDirectRoutes: onlyDirectRoutes.toString(),\n            }),\n            ...(sizeConstraint && { sizeConstraint: sizeConstraint.toString() }),\n            ...(accountsLimitWritable && {\n                accountsLimitWritable: accountsLimitWritable.toString(),\n            }),\n        });\n        const response = await fetch(`${this.url}/api/v1/quote/swap?${params.toString()}`, {\n            headers: {\n                Accept: 'application/vnd.msgpack',\n                'Accept-Encoding': 'gzip, deflate, br',\n                Authorization: `Bearer ${this.authToken}`,\n            },\n        });\n        if (!response.ok) {\n            if (response.status === 404) {\n                throw new Error('No routes available');\n            }\n            throw new Error(`Titan API error: ${response.status} ${response.statusText}`);\n        }\n        const buffer = await response.arrayBuffer();\n        const data = (0, msgpack_1.decode)(buffer);\n        const route = data.quotes[Object.keys(data.quotes).find((key) => key.toLowerCase() === 'titan') ||\n            ''];\n        if (!route) {\n            throw new Error('No routes available');\n        }\n        if (route.instructions && route.instructions.length > 0) {\n            try {\n                const { transactionMessage, lookupTables } = await this.getTransactionMessageAndLookupTables(route, userPublicKey);\n                return { transactionMessage, lookupTables };\n            }\n            catch (err) {\n                throw new Error('Something went wrong with creating the Titan swap transaction. Please try again.');\n            }\n        }\n        throw new Error('No instructions provided in the route');\n    }\n    /**\n     * Get the titan instructions from transaction by filtering out instructions to compute budget and associated token programs\n     * @param transactionMessage the transaction message\n     * @param inputMint the input mint\n     * @param outputMint the output mint\n     */\n    getTitanInstructions({ transactionMessage, inputMint, outputMint, }) {\n        // Filter out common system instructions that can be handled by DriftClient\n        const filteredInstructions = transactionMessage.instructions.filter((instruction) => {\n            const programId = instruction.programId.toString();\n            // Filter out system programs\n            if (programId === 'ComputeBudget111111111111111111111111111111') {\n                return false;\n            }\n            if (programId === 'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA') {\n                return false;\n            }\n            if (programId === '11111111111111111111111111111111') {\n                return false;\n            }\n            // Filter out Associated Token Account creation for input/output mints\n            if (programId === 'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL') {\n                if (instruction.keys.length > 3) {\n                    const mint = instruction.keys[3].pubkey;\n                    if (mint.equals(inputMint) || mint.equals(outputMint)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        });\n        return filteredInstructions;\n    }\n    async getTransactionMessageAndLookupTables(route, userPublicKey) {\n        const solanaInstructions = route.instructions.map((instruction) => ({\n            programId: new web3_js_1.PublicKey(instruction.p),\n            keys: instruction.a.map((meta) => ({\n                pubkey: new web3_js_1.PublicKey(meta.p),\n                isSigner: meta.s,\n                isWritable: meta.w,\n            })),\n            data: Buffer.from(instruction.d),\n        }));\n        // Get recent blockhash\n        const { blockhash } = await this.connection.getLatestBlockhash();\n        // Build address lookup tables if provided\n        const addressLookupTables = [];\n        if (route.addressLookupTables && route.addressLookupTables.length > 0) {\n            for (const altPubkey of route.addressLookupTables) {\n                try {\n                    const altAccount = await this.connection.getAddressLookupTable(new web3_js_1.PublicKey(altPubkey));\n                    if (altAccount.value) {\n                        addressLookupTables.push(altAccount.value);\n                    }\n                }\n                catch (err) {\n                    console.warn(`Failed to fetch address lookup table:`, err);\n                }\n            }\n        }\n        const transactionMessage = new web3_js_1.TransactionMessage({\n            payerKey: userPublicKey,\n            recentBlockhash: blockhash,\n            instructions: solanaInstructions,\n        });\n        return { transactionMessage, lookupTables: addressLookupTables };\n    }\n}\nexports.TitanClient = TitanClient;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11744, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/swap/UnifiedSwapClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnifiedSwapClient = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst jupiterClient_1 = require(\"../jupiter/jupiterClient\");\nconst titanClient_1 = require(\"../titan/titanClient\");\nclass UnifiedSwapClient {\n    constructor({ clientType, connection, authToken, url, }) {\n        this.clientType = clientType;\n        if (clientType === 'jupiter') {\n            this.client = new jupiterClient_1.JupiterClient({\n                connection,\n                url,\n            });\n        }\n        else if (clientType === 'titan') {\n            if (!authToken) {\n                throw new Error('authToken is required for Titan client');\n            }\n            this.client = new titanClient_1.TitanClient({\n                connection,\n                authToken,\n                url,\n            });\n        }\n        else {\n            throw new Error(`Unsupported client type: ${clientType}`);\n        }\n    }\n    /**\n     * Get a swap quote from the underlying client\n     */\n    async getQuote(params) {\n        if (this.clientType === 'jupiter') {\n            const jupiterClient = this.client;\n            const { userPublicKey: _userPublicKey, // Not needed for Jupiter\n            sizeConstraint: _sizeConstraint, // Jupiter-specific params to exclude\n            accountsLimitWritable: _accountsLimitWritable, ...jupiterParams } = params;\n            return await jupiterClient.getQuote(jupiterParams);\n        }\n        else {\n            const titanClient = this.client;\n            const { autoSlippage: _autoSlippage, // Titan-specific params to exclude\n            maxAutoSlippageBps: _maxAutoSlippageBps, usdEstimate: _usdEstimate, ...titanParams } = params;\n            if (!titanParams.userPublicKey) {\n                throw new Error('userPublicKey is required for Titan quotes');\n            }\n            // Cast to ensure TypeScript knows userPublicKey is defined\n            const titanParamsWithUser = {\n                ...titanParams,\n                userPublicKey: titanParams.userPublicKey,\n                swapMode: titanParams.swapMode, // Titan expects string\n            };\n            return await titanClient.getQuote(titanParamsWithUser);\n        }\n    }\n    /**\n     * Get a swap transaction from the underlying client\n     */\n    async getSwap(params) {\n        if (this.clientType === 'jupiter') {\n            const jupiterClient = this.client;\n            // Cast the quote to Jupiter's specific QuoteResponse type\n            const jupiterParams = {\n                ...params,\n                quote: params.quote,\n            };\n            const transaction = await jupiterClient.getSwap(jupiterParams);\n            return { transaction };\n        }\n        else {\n            const titanClient = this.client;\n            const { quote, userPublicKey, slippageBps } = params;\n            // For Titan, we need to reconstruct the parameters from the quote\n            const titanQuote = quote;\n            const result = await titanClient.getSwap({\n                inputMint: new web3_js_1.PublicKey(titanQuote.inputMint),\n                outputMint: new web3_js_1.PublicKey(titanQuote.outputMint),\n                amount: new anchor_1.BN(titanQuote.inAmount),\n                userPublicKey,\n                slippageBps: slippageBps || titanQuote.slippageBps,\n                swapMode: titanQuote.swapMode,\n            });\n            return {\n                transactionMessage: result.transactionMessage,\n                lookupTables: result.lookupTables,\n            };\n        }\n    }\n    /**\n     * Get swap instructions from the underlying client (Jupiter or Titan)\n     * This is the core swap logic without any context preparation\n     */\n    async getSwapInstructions({ inputMint, outputMint, amount, userPublicKey, slippageBps, swapMode = 'ExactIn', onlyDirectRoutes = false, quote, sizeConstraint, }) {\n        const isExactOut = swapMode === 'ExactOut';\n        let swapInstructions;\n        let lookupTables;\n        if (this.clientType === 'jupiter') {\n            const jupiterClient = this.client;\n            // Get quote if not provided\n            let finalQuote = quote;\n            if (!finalQuote) {\n                finalQuote = await jupiterClient.getQuote({\n                    inputMint,\n                    outputMint,\n                    amount,\n                    slippageBps,\n                    swapMode,\n                    onlyDirectRoutes,\n                });\n            }\n            if (!finalQuote) {\n                throw new Error('Could not fetch swap quote. Please try again.');\n            }\n            // Get swap transaction and extract instructions\n            const transaction = await jupiterClient.getSwap({\n                quote: finalQuote,\n                userPublicKey,\n                slippageBps,\n            });\n            const { transactionMessage, lookupTables: jupiterLookupTables } = await jupiterClient.getTransactionMessageAndLookupTables({\n                transaction,\n            });\n            swapInstructions = jupiterClient.getJupiterInstructions({\n                transactionMessage,\n                inputMint,\n                outputMint,\n            });\n            lookupTables = jupiterLookupTables;\n        }\n        else {\n            const titanClient = this.client;\n            // For Titan, get swap directly (it handles quote internally)\n            const { transactionMessage, lookupTables: titanLookupTables } = await titanClient.getSwap({\n                inputMint,\n                outputMint,\n                amount,\n                userPublicKey,\n                slippageBps,\n                swapMode: isExactOut ? titanClient_1.SwapMode.ExactOut : titanClient_1.SwapMode.ExactIn,\n                onlyDirectRoutes,\n                sizeConstraint: sizeConstraint || 1280 - 375, // MAX_TX_BYTE_SIZE - buffer for drift instructions\n            });\n            swapInstructions = titanClient.getTitanInstructions({\n                transactionMessage,\n                inputMint,\n                outputMint,\n            });\n            lookupTables = titanLookupTables;\n        }\n        return { instructions: swapInstructions, lookupTables };\n    }\n    /**\n     * Get the underlying client instance\n     */\n    getClient() {\n        return this.client;\n    }\n    /**\n     * Get the client type\n     */\n    getClientType() {\n        return this.clientType;\n    }\n    /**\n     * Check if this is a Jupiter client\n     */\n    isJupiter() {\n        return this.clientType === 'jupiter';\n    }\n    /**\n     * Check if this is a Titan client\n     */\n    isTitan() {\n        return this.clientType === 'titan';\n    }\n}\nexports.UnifiedSwapClient = UnifiedSwapClient;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11918, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/testClient.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TestClient = void 0;\nconst adminClient_1 = require(\"./adminClient\");\nclass TestClient extends adminClient_1.AdminClient {\n    constructor(config) {\n        config.txVersion = 'legacy';\n        if (config.accountSubscription.type !== 'polling') {\n            throw new Error('Test client must be polling');\n        }\n        super(config);\n    }\n    async sendTransaction(tx, additionalSigners, opts, preSigned) {\n        const { txSig, slot } = await super.sendTransaction(tx, additionalSigners, opts, preSigned);\n        let lastFetchedSlot = this.accountSubscriber.accountLoader.mostRecentSlot;\n        await this.fetchAccounts();\n        while (lastFetchedSlot < slot) {\n            await this.fetchAccounts();\n            lastFetchedSlot = this.accountSubscriber.accountLoader.mostRecentSlot;\n        }\n        return { txSig, slot };\n    }\n}\nexports.TestClient = TestClient;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,UAAU,GAAG,KAAK;AAC1B,MAAM;AACN,MAAM,mBAAmB,cAAc,WAAW;IAC9C,YAAY,MAAM,CAAE;QAChB,OAAO,SAAS,GAAG;QACnB,IAAI,OAAO,mBAAmB,CAAC,IAAI,KAAK,WAAW;YAC/C,MAAM,IAAI,MAAM;QACpB;QACA,KAAK,CAAC;IACV;IACA,MAAM,gBAAgB,EAAE,EAAE,iBAAiB,EAAE,IAAI,EAAE,SAAS,EAAE;QAC1D,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,gBAAgB,IAAI,mBAAmB,MAAM;QACjF,IAAI,kBAAkB,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,cAAc;QACzE,MAAM,IAAI,CAAC,aAAa;QACxB,MAAO,kBAAkB,KAAM;YAC3B,MAAM,IAAI,CAAC,aAAa;YACxB,kBAAkB,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,cAAc;QACzE;QACA,OAAO;YAAE;YAAO;QAAK;IACzB;AACJ;AACA,QAAQ,UAAU,GAAG","ignoreList":[0]}},
    {"offset": {"line": 11950, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userConfig.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 11957, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userStatsConfig.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 11964, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/decode/user.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeUser = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst types_1 = require(\"../types\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nfunction readUnsignedBigInt64LE(buffer, offset) {\n    return new anchor_1.BN(buffer.subarray(offset, offset + 8), 10, 'le');\n}\nfunction readSignedBigInt64LE(buffer, offset) {\n    const unsignedValue = new anchor_1.BN(buffer.subarray(offset, offset + 8), 10, 'le');\n    if (unsignedValue.testn(63)) {\n        const inverted = unsignedValue.notn(64).addn(1);\n        return inverted.neg();\n    }\n    else {\n        return unsignedValue;\n    }\n}\nfunction decodeUser(buffer) {\n    let offset = 8;\n    const authority = new web3_js_1.PublicKey(buffer.slice(offset, offset + 32));\n    offset += 32;\n    const delegate = new web3_js_1.PublicKey(buffer.slice(offset, offset + 32));\n    offset += 32;\n    const name = [];\n    for (let i = 0; i < 32; i++) {\n        name.push(buffer.readUint8(offset + i));\n    }\n    offset += 32;\n    const spotPositions = [];\n    for (let i = 0; i < 8; i++) {\n        const scaledBalance = readUnsignedBigInt64LE(buffer, offset);\n        const openOrders = buffer.readUInt8(offset + 35);\n        if (scaledBalance.eq(numericConstants_1.ZERO) && openOrders === 0) {\n            offset += 40;\n            continue;\n        }\n        offset += 8;\n        const openBids = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const openAsks = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const cumulativeDeposits = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const marketIndex = buffer.readUInt16LE(offset);\n        offset += 2;\n        const balanceTypeNum = buffer.readUInt8(offset);\n        let balanceType;\n        if (balanceTypeNum === 0) {\n            balanceType = types_1.SpotBalanceType.DEPOSIT;\n        }\n        else {\n            balanceType = types_1.SpotBalanceType.BORROW;\n        }\n        offset += 6;\n        spotPositions.push({\n            scaledBalance,\n            openBids,\n            openAsks,\n            cumulativeDeposits,\n            marketIndex,\n            balanceType,\n            openOrders,\n        });\n    }\n    const perpPositions = [];\n    for (let i = 0; i < 8; i++) {\n        const baseAssetAmount = readSignedBigInt64LE(buffer, offset + 8);\n        const quoteAssetAmount = readSignedBigInt64LE(buffer, offset + 16);\n        const lpShares = readUnsignedBigInt64LE(buffer, offset + 64);\n        const openOrders = buffer.readUInt8(offset + 94);\n        const positionFlag = buffer.readUInt8(offset + 95);\n        const isolatedPositionScaledBalance = readUnsignedBigInt64LE(buffer, offset + 96);\n        if (baseAssetAmount.eq(numericConstants_1.ZERO) &&\n            openOrders === 0 &&\n            quoteAssetAmount.eq(numericConstants_1.ZERO) &&\n            lpShares.eq(numericConstants_1.ZERO)) {\n            offset += 96;\n            continue;\n        }\n        const lastCumulativeFundingRate = readSignedBigInt64LE(buffer, offset);\n        offset += 24;\n        const quoteBreakEvenAmount = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const quoteEntryAmount = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const openBids = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const openAsks = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const settledPnl = readSignedBigInt64LE(buffer, offset);\n        offset += 16;\n        const lastBaseAssetAmountPerLp = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const lastQuoteAssetAmountPerLp = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const maxMarginRatio = buffer.readUInt16LE(offset);\n        offset += 4;\n        const marketIndex = buffer.readUInt16LE(offset);\n        offset += 3;\n        const perLpBase = buffer.readUInt8(offset);\n        offset += 1;\n        perpPositions.push({\n            lastCumulativeFundingRate,\n            baseAssetAmount,\n            quoteAssetAmount,\n            quoteBreakEvenAmount,\n            quoteEntryAmount,\n            openBids,\n            openAsks,\n            settledPnl,\n            lpShares,\n            remainderBaseAssetAmount: 0,\n            lastBaseAssetAmountPerLp,\n            lastQuoteAssetAmountPerLp,\n            marketIndex,\n            openOrders,\n            perLpBase,\n            maxMarginRatio,\n            isolatedPositionScaledBalance,\n            positionFlag,\n        });\n    }\n    const orders = [];\n    for (let i = 0; i < 32; i++) {\n        // skip order if it's not open\n        if (buffer.readUint8(offset + 82) !== 1) {\n            offset += 96;\n            continue;\n        }\n        const slot = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const price = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const baseAssetAmount = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const baseAssetAmountFilled = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const quoteAssetAmountFilled = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const triggerPrice = readUnsignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const auctionStartPrice = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const auctionEndPrice = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const maxTs = readSignedBigInt64LE(buffer, offset);\n        offset += 8;\n        const oraclePriceOffset = buffer.readInt32LE(offset);\n        offset += 4;\n        const orderId = buffer.readUInt32LE(offset);\n        offset += 4;\n        const marketIndex = buffer.readUInt16LE(offset);\n        offset += 2;\n        const orderStatusNum = buffer.readUInt8(offset);\n        let status;\n        if (orderStatusNum === 0) {\n            status = types_1.OrderStatus.INIT;\n        }\n        else if (orderStatusNum === 1) {\n            status = types_1.OrderStatus.OPEN;\n        }\n        offset += 1;\n        const orderTypeNum = buffer.readUInt8(offset);\n        let orderType;\n        if (orderTypeNum === 0) {\n            orderType = types_1.OrderType.MARKET;\n        }\n        else if (orderTypeNum === 1) {\n            orderType = types_1.OrderType.LIMIT;\n        }\n        else if (orderTypeNum === 2) {\n            orderType = types_1.OrderType.TRIGGER_MARKET;\n        }\n        else if (orderTypeNum === 3) {\n            orderType = types_1.OrderType.TRIGGER_LIMIT;\n        }\n        else if (orderTypeNum === 4) {\n            orderType = types_1.OrderType.ORACLE;\n        }\n        offset += 1;\n        const marketTypeNum = buffer.readUInt8(offset);\n        let marketType;\n        if (marketTypeNum === 0) {\n            marketType = types_1.MarketType.SPOT;\n        }\n        else {\n            marketType = types_1.MarketType.PERP;\n        }\n        offset += 1;\n        const userOrderId = buffer.readUint8(offset);\n        offset += 1;\n        const existingPositionDirectionNum = buffer.readUInt8(offset);\n        let existingPositionDirection;\n        if (existingPositionDirectionNum === 0) {\n            existingPositionDirection = types_1.PositionDirection.LONG;\n        }\n        else {\n            existingPositionDirection = types_1.PositionDirection.SHORT;\n        }\n        offset += 1;\n        const positionDirectionNum = buffer.readUInt8(offset);\n        let direction;\n        if (positionDirectionNum === 0) {\n            direction = types_1.PositionDirection.LONG;\n        }\n        else {\n            direction = types_1.PositionDirection.SHORT;\n        }\n        offset += 1;\n        const reduceOnly = buffer.readUInt8(offset) === 1;\n        offset += 1;\n        const postOnly = buffer.readUInt8(offset) === 1;\n        offset += 1;\n        const immediateOrCancel = buffer.readUInt8(offset) === 1;\n        offset += 1;\n        const triggerConditionNum = buffer.readUInt8(offset);\n        let triggerCondition;\n        if (triggerConditionNum === 0) {\n            triggerCondition = types_1.OrderTriggerCondition.ABOVE;\n        }\n        else if (triggerConditionNum === 1) {\n            triggerCondition = types_1.OrderTriggerCondition.BELOW;\n        }\n        else if (triggerConditionNum === 2) {\n            triggerCondition = types_1.OrderTriggerCondition.TRIGGERED_ABOVE;\n        }\n        else if (triggerConditionNum === 3) {\n            triggerCondition = types_1.OrderTriggerCondition.TRIGGERED_BELOW;\n        }\n        offset += 1;\n        const auctionDuration = buffer.readUInt8(offset);\n        offset += 1;\n        const postedSlotTail = buffer.readUint8(offset);\n        offset += 1;\n        const bitFlags = buffer.readUint8(offset);\n        offset += 1;\n        offset += 1; // padding\n        orders.push({\n            slot,\n            price,\n            baseAssetAmount,\n            quoteAssetAmount: undefined,\n            baseAssetAmountFilled,\n            quoteAssetAmountFilled,\n            triggerPrice,\n            auctionStartPrice,\n            auctionEndPrice,\n            maxTs,\n            oraclePriceOffset,\n            orderId,\n            marketIndex,\n            status,\n            orderType,\n            marketType,\n            userOrderId,\n            existingPositionDirection,\n            direction,\n            reduceOnly,\n            postOnly,\n            immediateOrCancel,\n            triggerCondition,\n            auctionDuration,\n            bitFlags,\n            postedSlotTail,\n        });\n    }\n    const lastAddPerpLpSharesTs = readSignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const totalDeposits = readUnsignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const totalWithdraws = readUnsignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const totalSocialLoss = readUnsignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const settledPerpPnl = readSignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const cumulativeSpotFees = readSignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const cumulativePerpFunding = readSignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const liquidationMarginFreed = readUnsignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const lastActiveSlot = readUnsignedBigInt64LE(buffer, offset);\n    offset += 8;\n    const nextOrderId = buffer.readUInt32LE(offset);\n    offset += 4;\n    const maxMarginRatio = buffer.readUInt32LE(offset);\n    offset += 4;\n    const nextLiquidationId = buffer.readUInt16LE(offset);\n    offset += 2;\n    const subAccountId = buffer.readUInt16LE(offset);\n    offset += 2;\n    const status = buffer.readUInt8(offset);\n    offset += 1;\n    const isMarginTradingEnabled = buffer.readUInt8(offset) === 1;\n    offset += 1;\n    const idle = buffer.readUInt8(offset) === 1;\n    offset += 1;\n    const openOrders = buffer.readUInt8(offset);\n    offset += 1;\n    const hasOpenOrder = buffer.readUInt8(offset) === 1;\n    offset += 1;\n    const openAuctions = buffer.readUInt8(offset);\n    offset += 1;\n    const hasOpenAuction = buffer.readUInt8(offset) === 1;\n    offset += 1;\n    let marginMode;\n    const marginModeNum = buffer.readUInt8(offset);\n    if (marginModeNum === 0) {\n        marginMode = types_1.MarginMode.DEFAULT;\n    }\n    else if (marginModeNum === 1) {\n        marginMode = types_1.MarginMode.HIGH_LEVERAGE;\n    }\n    else if (marginModeNum === 2) {\n        marginMode = types_1.MarginMode.HIGH_LEVERAGE_MAINTENANCE;\n    }\n    else {\n        console.error(`Detected unknown margin mode: ${marginModeNum}. Please update @drift-labs/sdk for latest IDL.`);\n        marginMode = types_1.MarginMode.DEFAULT;\n    }\n    offset += 1;\n    const poolId = buffer.readUint8(offset);\n    offset += 1;\n    offset += 3; // padding\n    const lastFuelBonusUpdateTs = buffer.readUint32LE(offset);\n    offset += 4;\n    return {\n        authority,\n        delegate,\n        name,\n        spotPositions,\n        perpPositions,\n        orders,\n        lastAddPerpLpSharesTs,\n        totalDeposits,\n        totalWithdraws,\n        totalSocialLoss,\n        settledPerpPnl,\n        cumulativeSpotFees,\n        cumulativePerpFunding,\n        liquidationMarginFreed,\n        lastActiveSlot,\n        nextOrderId,\n        maxMarginRatio,\n        nextLiquidationId,\n        subAccountId,\n        status,\n        isMarginTradingEnabled,\n        idle,\n        openOrders,\n        hasOpenOrder,\n        openAuctions,\n        hasOpenAuction,\n        marginMode,\n        poolId,\n        lastFuelBonusUpdateTs,\n    };\n}\nexports.decodeUser = decodeUser;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12313, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/decode/customCoder.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CustomBorshAccountsCoder = exports.CustomBorshCoder = void 0;\nconst buffer_1 = require(\"buffer\");\nconst camelcase_1 = __importDefault(require(\"camelcase\"));\nconst coder_1 = require(\"@coral-xyz/anchor/dist/cjs/coder\");\nconst types_1 = require(\"@coral-xyz/anchor/dist/cjs/coder/borsh/types\");\nconst discriminator_1 = require(\"@coral-xyz/anchor/dist/cjs/coder/borsh/discriminator\");\nclass CustomBorshCoder {\n    constructor(idl) {\n        this.instruction = new coder_1.BorshInstructionCoder(idl);\n        this.accounts = new CustomBorshAccountsCoder(idl);\n        this.events = new coder_1.BorshEventCoder(idl);\n        this.types = new types_1.BorshTypesCoder(idl);\n        this.idl = idl;\n    }\n}\nexports.CustomBorshCoder = CustomBorshCoder;\n/**\n * Custom accounts coder that wraps BorshAccountsCoder to fix encode buffer sizing.\n */\nclass CustomBorshAccountsCoder {\n    constructor(idl) {\n        this.baseCoder = new coder_1.BorshAccountsCoder(idl);\n        this.idl = idl;\n    }\n    async encode(accountName, account) {\n        var _a;\n        const idlAcc = (_a = this.idl.accounts) === null || _a === void 0 ? void 0 : _a.find((acc) => acc.name === accountName);\n        if (!idlAcc) {\n            throw new Error(`Unknown account not found in idl: ${accountName}`);\n        }\n        const buffer = buffer_1.Buffer.alloc(this.size(idlAcc)); // fix encode issue - use proper size instead of fixed 1000\n        const layout = this.baseCoder['accountLayouts'].get(accountName);\n        if (!layout) {\n            throw new Error(`Unknown account: ${accountName}`);\n        }\n        const len = layout.encode(account, buffer);\n        const accountData = buffer.slice(0, len);\n        const discriminator = coder_1.BorshAccountsCoder.accountDiscriminator(accountName);\n        return buffer_1.Buffer.concat([discriminator, accountData]);\n    }\n    // Delegate all other methods to the base coder\n    decode(accountName, data) {\n        return this.baseCoder.decode(accountName, data);\n    }\n    decodeAny(data) {\n        return this.baseCoder.decodeAny(data);\n    }\n    decodeUnchecked(accountName, ix) {\n        return this.baseCoder.decodeUnchecked(accountName, ix);\n    }\n    memcmp(accountName, appendData) {\n        return this.baseCoder.memcmp(accountName, appendData);\n    }\n    size(idlAccount) {\n        return this.baseCoder.size(idlAccount);\n    }\n    /**\n     * Calculates and returns a unique 8 byte discriminator prepended to all anchor accounts.\n     *\n     * @param name The name of the account to calculate the discriminator.\n     */\n    static accountDiscriminator(name) {\n        const discriminatorPreimage = `account:${(0, camelcase_1.default)(name, {\n            pascalCase: true,\n            preserveConsecutiveUppercase: true,\n        })}`;\n        return (0, discriminator_1.discriminator)(discriminatorPreimage);\n    }\n}\nexports.CustomBorshAccountsCoder = CustomBorshAccountsCoder;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,QAAQ,gBAAgB,GAAG,KAAK;AACnE,MAAM;AACN,MAAM,cAAc;AACpB,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,GAAG,CAAE;QACb,IAAI,CAAC,WAAW,GAAG,IAAI,QAAQ,qBAAqB,CAAC;QACrD,IAAI,CAAC,QAAQ,GAAG,IAAI,yBAAyB;QAC7C,IAAI,CAAC,MAAM,GAAG,IAAI,QAAQ,eAAe,CAAC;QAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,eAAe,CAAC;QACzC,IAAI,CAAC,GAAG,GAAG;IACf;AACJ;AACA,QAAQ,gBAAgB,GAAG;AAC3B;;CAEC,GACD,MAAM;IACF,YAAY,GAAG,CAAE;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,kBAAkB,CAAC;QAChD,IAAI,CAAC,GAAG,GAAG;IACf;IACA,MAAM,OAAO,WAAW,EAAE,OAAO,EAAE;QAC/B,IAAI;QACJ,MAAM,SAAS,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,KAAK;QAC3G,IAAI,CAAC,QAAQ;YACT,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,aAAa;QACtE;QACA,MAAM,SAAS,SAAS,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,2DAA2D;QACpH,MAAM,SAAS,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG,CAAC;QACpD,IAAI,CAAC,QAAQ;YACT,MAAM,IAAI,MAAM,CAAC,iBAAiB,EAAE,aAAa;QACrD;QACA,MAAM,MAAM,OAAO,MAAM,CAAC,SAAS;QACnC,MAAM,cAAc,OAAO,KAAK,CAAC,GAAG;QACpC,MAAM,gBAAgB,QAAQ,kBAAkB,CAAC,oBAAoB,CAAC;QACtE,OAAO,SAAS,MAAM,CAAC,MAAM,CAAC;YAAC;YAAe;SAAY;IAC9D;IACA,+CAA+C;IAC/C,OAAO,WAAW,EAAE,IAAI,EAAE;QACtB,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa;IAC9C;IACA,UAAU,IAAI,EAAE;QACZ,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;IACpC;IACA,gBAAgB,WAAW,EAAE,EAAE,EAAE;QAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,aAAa;IACvD;IACA,OAAO,WAAW,EAAE,UAAU,EAAE;QAC5B,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa;IAC9C;IACA,KAAK,UAAU,EAAE;QACb,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;IAC/B;IACA;;;;KAIC,GACD,OAAO,qBAAqB,IAAI,EAAE;QAC9B,MAAM,wBAAwB,CAAC,QAAQ,EAAE,CAAC,GAAG,YAAY,OAAO,EAAE,MAAM;YACpE,YAAY;YACZ,8BAA8B;QAClC,IAAI;QACJ,OAAO,CAAC,GAAG,gBAAgB,aAAa,EAAE;IAC9C;AACJ;AACA,QAAQ,wBAAwB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 12396, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/decode/phoenix.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fastDecode = exports.restingOrderBeet = exports.orderIdBeet = void 0;\nconst phoenix_sdk_1 = require(\"@ellipsis-labs/phoenix-sdk\");\nconst beet = __importStar(require(\"@metaplex-foundation/beet\"));\nexports.orderIdBeet = new beet.BeetArgsStruct([\n    ['priceInTicks', beet.u64],\n    ['orderSequenceNumber', beet.u64],\n], 'fIFOOrderId');\nexports.restingOrderBeet = new beet.BeetArgsStruct([\n    ['traderIndex', beet.u64],\n    ['numBaseLots', beet.u64],\n    ['lastValidSlot', beet.u64],\n    ['lastValidUnixTimestampInSeconds', beet.u64],\n], 'fIFORestingOrder');\nfunction deserializeRedBlackTree(data, keyDeserializer, valueDeserializer) {\n    const tree = new Map();\n    const treeNodes = deserializeRedBlackTreeNodes(data, keyDeserializer, valueDeserializer);\n    const nodes = treeNodes[0];\n    const freeNodes = treeNodes[1];\n    for (const [index, [key, value]] of nodes.entries()) {\n        if (!freeNodes.has(index)) {\n            tree.set(key, value);\n        }\n    }\n    return tree;\n}\nfunction deserializeRedBlackTreeNodes(data, keyDeserializer, valueDeserializer) {\n    let offset = 0;\n    const keySize = keyDeserializer.byteSize;\n    const valueSize = valueDeserializer.byteSize;\n    const nodes = new Array();\n    // Skip RBTree header\n    offset += 16;\n    // Skip node allocator size\n    offset += 8;\n    const bumpIndex = data.readInt32LE(offset);\n    offset += 4;\n    let freeListHead = data.readInt32LE(offset);\n    offset += 4;\n    const freeListPointers = new Array();\n    for (let index = 0; offset < data.length && index < bumpIndex - 1; index++) {\n        const registers = new Array();\n        for (let i = 0; i < 4; i++) {\n            registers.push(data.readInt32LE(offset)); // skip padding\n            offset += 4;\n        }\n        const [key] = keyDeserializer.deserialize(data.subarray(offset, offset + keySize));\n        offset += keySize;\n        const [value] = valueDeserializer.deserialize(data.subarray(offset, offset + valueSize));\n        offset += valueSize;\n        nodes.push([key, value]);\n        freeListPointers.push([index, registers[0]]);\n    }\n    const freeNodes = new Set();\n    let indexToRemove = freeListHead - 1;\n    let counter = 0;\n    // If there's an infinite loop here, that means that the state is corrupted\n    while (freeListHead < bumpIndex) {\n        // We need to subtract 1 because the node allocator is 1-indexed\n        const next = freeListPointers[freeListHead - 1];\n        [indexToRemove, freeListHead] = next;\n        freeNodes.add(indexToRemove);\n        counter += 1;\n        if (counter > bumpIndex) {\n            throw new Error('Infinite loop detected');\n        }\n    }\n    return [nodes, freeNodes];\n}\nconst fastDecode = (buffer) => {\n    let offset = phoenix_sdk_1.marketHeaderBeet.byteSize;\n    const [header] = phoenix_sdk_1.marketHeaderBeet.deserialize(buffer.subarray(0, offset));\n    const paddingLen = 8 * 32;\n    let remaining = buffer.subarray(offset + paddingLen);\n    offset = 0;\n    const baseLotsPerBaseUnit = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    const quoteLotsPerBaseUnitPerTick = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    const sequenceNumber = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    const takerFeeBps = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    const collectedQuoteLotFees = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    const unclaimedQuoteLotFees = Number(remaining.readBigUInt64LE(offset));\n    offset += 8;\n    remaining = remaining.subarray(offset);\n    const totalNumBids = (0, phoenix_sdk_1.toNum)(header.marketSizeParams.bidsSize);\n    const totalNumAsks = (0, phoenix_sdk_1.toNum)(header.marketSizeParams.asksSize);\n    const totalBidsSize = 16 +\n        16 +\n        (16 + exports.orderIdBeet.byteSize + exports.restingOrderBeet.byteSize) * totalNumBids;\n    const totalAsksSize = 16 +\n        16 +\n        (16 + exports.orderIdBeet.byteSize + exports.restingOrderBeet.byteSize) * totalNumAsks;\n    offset = 0;\n    const bidBuffer = remaining.subarray(offset, offset + totalBidsSize);\n    offset += totalBidsSize;\n    const askBuffer = remaining.subarray(offset, offset + totalAsksSize);\n    const bidsUnsorted = deserializeRedBlackTree(bidBuffer, exports.orderIdBeet, exports.restingOrderBeet);\n    const asksUnsorted = deserializeRedBlackTree(askBuffer, exports.orderIdBeet, exports.restingOrderBeet);\n    const bids = [...bidsUnsorted].sort((a, b) => {\n        const priceComparison = (0, phoenix_sdk_1.sign)((0, phoenix_sdk_1.toBN)(b[0].priceInTicks).sub((0, phoenix_sdk_1.toBN)(a[0].priceInTicks)));\n        if (priceComparison !== 0) {\n            return priceComparison;\n        }\n        return (0, phoenix_sdk_1.sign)((0, phoenix_sdk_1.getUiOrderSequenceNumber)(a[0]).sub((0, phoenix_sdk_1.getUiOrderSequenceNumber)(b[0])));\n    });\n    const asks = [...asksUnsorted].sort((a, b) => {\n        const priceComparison = (0, phoenix_sdk_1.sign)((0, phoenix_sdk_1.toBN)(a[0].priceInTicks).sub((0, phoenix_sdk_1.toBN)(b[0].priceInTicks)));\n        if (priceComparison !== 0) {\n            return priceComparison;\n        }\n        return (0, phoenix_sdk_1.sign)((0, phoenix_sdk_1.getUiOrderSequenceNumber)(a[0]).sub((0, phoenix_sdk_1.getUiOrderSequenceNumber)(b[0])));\n    });\n    const traders = new Map();\n    const traderPubkeyToTraderIndex = new Map();\n    const traderIndexToTraderPubkey = new Map();\n    return {\n        header,\n        baseLotsPerBaseUnit,\n        quoteLotsPerBaseUnitPerTick,\n        sequenceNumber,\n        takerFeeBps,\n        collectedQuoteLotFees,\n        unclaimedQuoteLotFees,\n        bids,\n        asks,\n        traders,\n        traderPubkeyToTraderIndex,\n        traderIndexToTraderPubkey,\n    };\n};\nexports.fastDecode = fastDecode;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12597, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultEventSubscriptionOptions = void 0;\nexports.DefaultEventSubscriptionOptions = {\n    eventTypes: [\n        'DepositRecord',\n        'FundingPaymentRecord',\n        'LiquidationRecord',\n        'OrderRecord',\n        'OrderActionRecord',\n        'FundingRateRecord',\n        'NewUserRecord',\n        'SettlePnlRecord',\n        'LPRecord',\n        'InsuranceFundRecord',\n        'SpotInterestRecord',\n        'InsuranceFundStakeRecord',\n        'CurveRecord',\n        'SwapRecord',\n        'SpotMarketVaultDepositRecord',\n        'SignedMsgOrderRecord',\n        'DeleteUserRecord',\n        'FuelSweepRecord',\n        'FuelSeasonRecord',\n        'InsuranceFundSwapRecord',\n        'TransferProtocolIfSharesToRevenuePoolRecord',\n        'LPMintRedeemRecord',\n        'LPSettleRecord',\n        'LPSwapRecord',\n    ],\n    maxEventsPerType: 4096,\n    orderBy: 'blockchain',\n    orderDir: 'asc',\n    commitment: 'confirmed',\n    maxTx: 4096,\n    logProviderConfig: {\n        type: 'websocket',\n    },\n};\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,+BAA+B,GAAG,KAAK;AAC/C,QAAQ,+BAA+B,GAAG;IACtC,YAAY;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,YAAY;IACZ,OAAO;IACP,mBAAmB;QACf,MAAM;IACV;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12641, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/txEventCache.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TxEventCache = void 0;\nclass Node {\n    constructor(key, value, next, prev) {\n        this.key = key;\n        this.value = value;\n        this.next = next;\n        this.prev = prev;\n    }\n}\n// lru cache\nclass TxEventCache {\n    constructor(maxTx = 1024) {\n        this.maxTx = maxTx;\n        this.size = 0;\n        this.cacheMap = {};\n    }\n    add(key, events) {\n        const existingNode = this.cacheMap[key];\n        if (existingNode) {\n            this.detach(existingNode);\n            this.size--;\n        }\n        else if (this.size === this.maxTx) {\n            delete this.cacheMap[this.tail.key];\n            this.detach(this.tail);\n            this.size--;\n        }\n        // Write to head of LinkedList\n        if (!this.head) {\n            this.head = this.tail = new Node(key, events);\n        }\n        else {\n            const node = new Node(key, events, this.head);\n            this.head.prev = node;\n            this.head = node;\n        }\n        // update cacheMap with LinkedList key and Node reference\n        this.cacheMap[key] = this.head;\n        this.size++;\n    }\n    has(key) {\n        return this.cacheMap.hasOwnProperty(key);\n    }\n    get(key) {\n        var _a;\n        return (_a = this.cacheMap[key]) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    detach(node) {\n        if (node.prev !== undefined) {\n            node.prev.next = node.next;\n        }\n        else {\n            this.head = node.next;\n        }\n        if (node.next !== undefined) {\n            node.next.prev = node.prev;\n        }\n        else {\n            this.tail = node.prev;\n        }\n    }\n    clear() {\n        this.head = undefined;\n        this.tail = undefined;\n        this.size = 0;\n        this.cacheMap = {};\n    }\n}\nexports.TxEventCache = TxEventCache;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,YAAY,GAAG,KAAK;AAC5B,MAAM;IACF,YAAY,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAE;QAChC,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG;IAChB;AACJ;AACA,YAAY;AACZ,MAAM;IACF,YAAY,QAAQ,IAAI,CAAE;QACtB,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,QAAQ,GAAG,CAAC;IACrB;IACA,IAAI,GAAG,EAAE,MAAM,EAAE;QACb,MAAM,eAAe,IAAI,CAAC,QAAQ,CAAC,IAAI;QACvC,IAAI,cAAc;YACd,IAAI,CAAC,MAAM,CAAC;YACZ,IAAI,CAAC,IAAI;QACb,OACK,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,EAAE;YAC/B,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI;YACrB,IAAI,CAAC,IAAI;QACb;QACA,8BAA8B;QAC9B,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,KAAK,KAAK;QAC1C,OACK;YACD,MAAM,OAAO,IAAI,KAAK,KAAK,QAAQ,IAAI,CAAC,IAAI;YAC5C,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;YACjB,IAAI,CAAC,IAAI,GAAG;QAChB;QACA,yDAAyD;QACzD,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;QAC9B,IAAI,CAAC,IAAI;IACb;IACA,IAAI,GAAG,EAAE;QACL,OAAO,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;IACxC;IACA,IAAI,GAAG,EAAE;QACL,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK;IAClF;IACA,OAAO,IAAI,EAAE;QACT,IAAI,KAAK,IAAI,KAAK,WAAW;YACzB,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC9B,OACK;YACD,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACzB;QACA,IAAI,KAAK,IAAI,KAAK,WAAW;YACzB,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC9B,OACK;YACD,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACzB;IACJ;IACA,QAAQ;QACJ,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,QAAQ,GAAG,CAAC;IACrB;AACJ;AACA,QAAQ,YAAY,GAAG","ignoreList":[0]}},
    {"offset": {"line": 12713, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/eventList.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventList = void 0;\nclass Node {\n    constructor(event, next, prev) {\n        this.event = event;\n        this.next = next;\n        this.prev = prev;\n    }\n}\nclass EventList {\n    constructor(eventType, maxSize, sortFn, orderDirection) {\n        this.eventType = eventType;\n        this.maxSize = maxSize;\n        this.sortFn = sortFn;\n        this.orderDirection = orderDirection;\n        this.size = 0;\n    }\n    insert(event) {\n        this.size++;\n        const newNode = new Node(event);\n        if (this.head === undefined) {\n            this.head = this.tail = newNode;\n            return;\n        }\n        if (this.sortFn(this.head.event, newNode.event) ===\n            (this.orderDirection === 'asc' ? 'less than' : 'greater than')) {\n            this.head.prev = newNode;\n            newNode.next = this.head;\n            this.head = newNode;\n        }\n        else {\n            let currentNode = this.head;\n            while (currentNode.next !== undefined &&\n                this.sortFn(currentNode.next.event, newNode.event) !==\n                    (this.orderDirection === 'asc' ? 'less than' : 'greater than')) {\n                currentNode = currentNode.next;\n            }\n            newNode.next = currentNode.next;\n            if (currentNode.next !== undefined) {\n                newNode.next.prev = newNode;\n            }\n            else {\n                this.tail = newNode;\n            }\n            currentNode.next = newNode;\n            newNode.prev = currentNode;\n        }\n        if (this.size > this.maxSize) {\n            this.detach();\n        }\n    }\n    detach() {\n        const node = this.tail;\n        if (node.prev !== undefined) {\n            node.prev.next = node.next;\n        }\n        else {\n            this.head = node.next;\n        }\n        if (node.next !== undefined) {\n            node.next.prev = node.prev;\n        }\n        else {\n            this.tail = node.prev;\n        }\n        this.size--;\n    }\n    toArray() {\n        return Array.from(this);\n    }\n    *[Symbol.iterator]() {\n        let node = this.head;\n        while (node) {\n            yield node.event;\n            node = node.next;\n        }\n    }\n}\nexports.EventList = EventList;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,SAAS,GAAG,KAAK;AACzB,MAAM;IACF,YAAY,KAAK,EAAE,IAAI,EAAE,IAAI,CAAE;QAC3B,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG;IAChB;AACJ;AACA,MAAM;IACF,YAAY,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,cAAc,CAAE;QACpD,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,IAAI,GAAG;IAChB;IACA,OAAO,KAAK,EAAE;QACV,IAAI,CAAC,IAAI;QACT,MAAM,UAAU,IAAI,KAAK;QACzB,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW;YACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG;YACxB;QACJ;QACA,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,KAAK,MAC1C,CAAC,IAAI,CAAC,cAAc,KAAK,QAAQ,cAAc,cAAc,GAAG;YAChE,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;YACjB,QAAQ,IAAI,GAAG,IAAI,CAAC,IAAI;YACxB,IAAI,CAAC,IAAI,GAAG;QAChB,OACK;YACD,IAAI,cAAc,IAAI,CAAC,IAAI;YAC3B,MAAO,YAAY,IAAI,KAAK,aACxB,IAAI,CAAC,MAAM,CAAC,YAAY,IAAI,CAAC,KAAK,EAAE,QAAQ,KAAK,MAC7C,CAAC,IAAI,CAAC,cAAc,KAAK,QAAQ,cAAc,cAAc,EAAG;gBACpE,cAAc,YAAY,IAAI;YAClC;YACA,QAAQ,IAAI,GAAG,YAAY,IAAI;YAC/B,IAAI,YAAY,IAAI,KAAK,WAAW;gBAChC,QAAQ,IAAI,CAAC,IAAI,GAAG;YACxB,OACK;gBACD,IAAI,CAAC,IAAI,GAAG;YAChB;YACA,YAAY,IAAI,GAAG;YACnB,QAAQ,IAAI,GAAG;QACnB;QACA,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE;YAC1B,IAAI,CAAC,MAAM;QACf;IACJ;IACA,SAAS;QACL,MAAM,OAAO,IAAI,CAAC,IAAI;QACtB,IAAI,KAAK,IAAI,KAAK,WAAW;YACzB,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC9B,OACK;YACD,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACzB;QACA,IAAI,KAAK,IAAI,KAAK,WAAW;YACzB,KAAK,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QAC9B,OACK;YACD,IAAI,CAAC,IAAI,GAAG,KAAK,IAAI;QACzB;QACA,IAAI,CAAC,IAAI;IACb;IACA,UAAU;QACN,OAAO,MAAM,IAAI,CAAC,IAAI;IAC1B;IACA,CAAC,CAAC,OAAO,QAAQ,CAAC,GAAG;QACjB,IAAI,OAAO,IAAI,CAAC,IAAI;QACpB,MAAO,KAAM;YACT,MAAM,KAAK,KAAK;YAChB,OAAO,KAAK,IAAI;QACpB;IACJ;AACJ;AACA,QAAQ,SAAS,GAAG","ignoreList":[0]}},
    {"offset": {"line": 12791, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/parse.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseLogsForCuUsage = exports.parseLogsWithRaw = exports.parseLogs = void 0;\nconst driftProgramId = 'dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH';\nconst PROGRAM_LOG = 'Program log: ';\nconst PROGRAM_INSTRUCTION = 'Program log: Instruction: ';\nconst PROGRAM_DATA = 'Program data: ';\nconst PROGRAM_LOG_START_INDEX = PROGRAM_LOG.length;\nconst PROGRAM_DATA_START_INDEX = PROGRAM_DATA.length;\nconst PROGRAM_INSTRUCTION_START_INDEX = PROGRAM_INSTRUCTION.length;\nfunction parseLogs(program, logs, programId = driftProgramId) {\n    const { events } = parseLogsWithRaw(program, logs, programId);\n    return events;\n}\nexports.parseLogs = parseLogs;\nfunction parseLogsWithRaw(program, logs, programId = driftProgramId) {\n    const events = [];\n    const rawLogs = [];\n    const execution = new ExecutionContext();\n    for (const log of logs) {\n        if (log.startsWith('Log truncated')) {\n            break;\n        }\n        const [event, newProgram, didPop] = handleLog(execution, log, program, programId);\n        if (event) {\n            events.push(event);\n            rawLogs.push(log);\n        }\n        if (newProgram) {\n            execution.push(newProgram);\n        }\n        if (didPop) {\n            execution.pop();\n        }\n    }\n    return { events, rawLogs };\n}\nexports.parseLogsWithRaw = parseLogsWithRaw;\nfunction handleLog(execution, log, program, programId = driftProgramId) {\n    // Executing program is drift program.\n    if (execution.stack.length > 0 && execution.program() === programId) {\n        return handleProgramLog(log, program, programId);\n    }\n    // Executing program is not drift program.\n    else {\n        return [null, ...handleSystemLog(log, programId)];\n    }\n}\n// Handles logs from *drift* program.\nfunction handleProgramLog(log, program, programId = driftProgramId) {\n    // This is a `msg!` log or a `sol_log_data` log.\n    if (log.startsWith(PROGRAM_LOG)) {\n        const logStr = log.slice(PROGRAM_LOG_START_INDEX);\n        const event = program.coder.events.decode(logStr);\n        return [event, null, false];\n    }\n    else if (log.startsWith(PROGRAM_DATA)) {\n        const logStr = log.slice(PROGRAM_DATA_START_INDEX);\n        const event = program.coder.events.decode(logStr);\n        return [event, null, false];\n    }\n    else {\n        return [null, ...handleSystemLog(log, programId)];\n    }\n}\n// Handles logs when the current program being executing is *not* drift.\nfunction handleSystemLog(log, programId = driftProgramId) {\n    // System component.\n    const logStart = log.split(':')[0];\n    const programStart = `Program ${programId} invoke`;\n    // Did the program finish executing?\n    if (logStart.match(/^Program (.*) success/g) !== null) {\n        return [null, true];\n        // Recursive call.\n    }\n    else if (logStart.startsWith(programStart)) {\n        return [programId, false];\n    }\n    // CPI call.\n    else if (logStart.includes('invoke')) {\n        return ['cpi', false]; // Any string will do.\n    }\n    else {\n        return [null, false];\n    }\n}\n// Stack frame execution context, allowing one to track what program is\n// executing for a given log.\nclass ExecutionContext {\n    constructor() {\n        this.stack = [];\n        this.ixStack = [];\n    }\n    program() {\n        if (!this.stack.length) {\n            throw new Error('Expected the stack to have elements');\n        }\n        return this.stack[this.stack.length - 1];\n    }\n    push(newProgram) {\n        this.stack.push(newProgram);\n    }\n    pop() {\n        if (!this.stack.length) {\n            throw new Error('Expected the stack to have elements');\n        }\n        this.stack.pop();\n    }\n    ix() {\n        if (!this.ixStack.length) {\n            throw new Error('Expected the ix stack to have elements');\n        }\n        return this.ixStack[this.ixStack.length - 1];\n    }\n    pushIx(newIx) {\n        this.ixStack.push(newIx);\n    }\n    popIx() {\n        this.ixStack.pop();\n    }\n}\nfunction parseLogsForCuUsage(logs, programId = driftProgramId) {\n    const cuUsageEvents = [];\n    const execution = new ExecutionContext();\n    for (const log of logs) {\n        if (log.startsWith('Log truncated')) {\n            break;\n        }\n        const [newProgram, newIx, didPopProgram, didPopIx] = handleLogForCuUsage(execution, log, programId);\n        if (newProgram) {\n            execution.push(newProgram);\n        }\n        if (newIx) {\n            execution.pushIx(newIx);\n        }\n        if (didPopProgram) {\n            execution.pop();\n        }\n        if (didPopIx !== null) {\n            cuUsageEvents.push({\n                name: 'CuUsage',\n                data: {\n                    instruction: execution.ix(),\n                    cuUsage: didPopIx,\n                },\n            });\n            execution.popIx();\n        }\n    }\n    return cuUsageEvents;\n}\nexports.parseLogsForCuUsage = parseLogsForCuUsage;\nfunction handleLogForCuUsage(execution, log, programId = driftProgramId) {\n    if (execution.stack.length > 0 && execution.program() === programId) {\n        return handleProgramLogForCuUsage(log, programId);\n    }\n    else {\n        return handleSystemLogForCuUsage(log, programId);\n    }\n}\nfunction handleProgramLogForCuUsage(log, programId = driftProgramId) {\n    if (log.startsWith(PROGRAM_INSTRUCTION)) {\n        const ixStr = log.slice(PROGRAM_INSTRUCTION_START_INDEX);\n        return [null, ixStr, false, null];\n    }\n    else {\n        return handleSystemLogForCuUsage(log, programId);\n    }\n}\nfunction handleSystemLogForCuUsage(log, programId = driftProgramId) {\n    // System component.\n    const logStart = log.split(':')[0];\n    const programStart = `Program ${programId} invoke`;\n    // Did the program finish executing?\n    if (logStart.match(/^Program (.*) success/g) !== null) {\n        return [null, null, true, null];\n        // Recursive call.\n    }\n    else if (logStart.startsWith(programStart)) {\n        return [programId, null, false, null];\n        // Consumed CU log.\n    }\n    else if (log.startsWith(`Program ${programId} consumed `)) {\n        // Extract CU usage, e.g. 'Program ... consumed 29242 of 199700 compute units'\n        // We need to extract the consumed value (29242)\n        const matches = log.match(/consumed (\\d+) of \\d+ compute units/);\n        if (matches) {\n            return [null, null, false, Number(matches[1])];\n        }\n        return [null, null, false, null];\n    }\n    // CPI call.\n    else if (logStart.includes('invoke')) {\n        return ['cpi', null, false, null]; // Any string will do.\n    }\n    else {\n        return [null, null, false, null];\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13044, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/fetchLogs.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LogParser = exports.fetchTransactionLogs = exports.fetchLogs = void 0;\nconst promiseTimeout_1 = require(\"../util/promiseTimeout\");\nconst parse_1 = require(\"./parse\");\nfunction mapTransactionResponseToLog(transaction) {\n    return {\n        txSig: transaction.transaction.signatures[0],\n        slot: transaction.slot,\n        logs: transaction.meta.logMessages,\n    };\n}\nasync function fetchLogs(connection, address, finality, beforeTx, untilTx, limit, batchSize = 25) {\n    const signatures = await connection.getSignaturesForAddress(address, {\n        before: beforeTx,\n        until: untilTx,\n        limit,\n    }, finality);\n    const sortedSignatures = signatures.sort((a, b) => a.slot === b.slot ? 0 : a.slot < b.slot ? -1 : 1);\n    const filteredSignatures = sortedSignatures.filter((signature) => !signature.err);\n    if (filteredSignatures.length === 0) {\n        return undefined;\n    }\n    const chunkedSignatures = chunk(filteredSignatures, batchSize);\n    const transactionLogs = (await Promise.all(chunkedSignatures.map(async (chunk) => {\n        return await fetchTransactionLogs(connection, chunk.map((confirmedSignature) => confirmedSignature.signature), finality);\n    }))).flat();\n    const earliest = filteredSignatures[0];\n    const mostRecent = filteredSignatures[filteredSignatures.length - 1];\n    return {\n        transactionLogs: transactionLogs,\n        earliestTx: earliest.signature,\n        mostRecentTx: mostRecent.signature,\n        earliestSlot: earliest.slot,\n        mostRecentSlot: mostRecent.slot,\n        mostRecentBlockTime: mostRecent.blockTime,\n    };\n}\nexports.fetchLogs = fetchLogs;\nasync function fetchTransactionLogs(connection, signatures, finality) {\n    const requests = new Array();\n    for (const signature of signatures) {\n        const args = [\n            signature,\n            { commitment: finality, maxSupportedTransactionVersion: 0 },\n        ];\n        requests.push({\n            methodName: 'getTransaction',\n            args,\n        });\n    }\n    const rpcResponses = await (0, promiseTimeout_1.promiseTimeout)(\n    // @ts-ignore\n    connection._rpcBatchRequest(requests), 10 * 1000 // 10 second timeout\n    );\n    if (rpcResponses === null) {\n        return Promise.reject('RPC request timed out fetching transactions');\n    }\n    const logs = new Array();\n    for (const rpcResponse of rpcResponses) {\n        if (rpcResponse.result) {\n            logs.push(mapTransactionResponseToLog(rpcResponse.result));\n        }\n    }\n    return logs;\n}\nexports.fetchTransactionLogs = fetchTransactionLogs;\nfunction chunk(array, size) {\n    return new Array(Math.ceil(array.length / size))\n        .fill(null)\n        .map((_, index) => index * size)\n        .map((begin) => array.slice(begin, begin + size));\n}\nclass LogParser {\n    constructor(program) {\n        this.program = program;\n    }\n    parseEventsFromTransaction(transaction) {\n        const transactionLogObject = mapTransactionResponseToLog(transaction);\n        return this.parseEventsFromLogs(transactionLogObject);\n    }\n    parseEventsFromLogs(event) {\n        const records = [];\n        if (!event.logs)\n            return records;\n        let runningEventIndex = 0;\n        for (const eventLog of (0, parse_1.parseLogs)(this.program, event.logs)) {\n            eventLog.data.txSig = event.txSig;\n            eventLog.data.slot = event.slot;\n            eventLog.data.eventType = eventLog.name;\n            eventLog.data.txSigIndex = runningEventIndex;\n            // @ts-ignore\n            records.push(eventLog.data);\n            runningEventIndex++;\n        }\n        return records;\n    }\n}\nexports.LogParser = LogParser;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13146, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/pollingLogProvider.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PollingLogProvider = void 0;\nconst fetchLogs_1 = require(\"./fetchLogs\");\nclass PollingLogProvider {\n    constructor(connection, address, commitment, frequency = 15 * 1000, batchSize) {\n        this.connection = connection;\n        this.address = address;\n        this.frequency = frequency;\n        this.batchSize = batchSize;\n        this.firstFetch = true;\n        this.finality = commitment === 'finalized' ? 'finalized' : 'confirmed';\n    }\n    async subscribe(callback, skipHistory) {\n        if (this.intervalId) {\n            return true;\n        }\n        this.intervalId = setInterval(async () => {\n            if (this.mutex === 1) {\n                return;\n            }\n            this.mutex = 1;\n            try {\n                const response = await (0, fetchLogs_1.fetchLogs)(this.connection, this.address, this.finality, undefined, this.mostRecentSeenTx, \n                // If skipping history, only fetch one log back, not the maximum amount available\n                skipHistory && this.firstFetch ? 1 : undefined, this.batchSize);\n                if (response === undefined) {\n                    return;\n                }\n                this.firstFetch = false;\n                const { mostRecentTx, transactionLogs } = response;\n                for (const { txSig, slot, logs } of transactionLogs) {\n                    callback(txSig, slot, logs, response.mostRecentBlockTime, undefined);\n                }\n                this.mostRecentSeenTx = mostRecentTx;\n            }\n            catch (e) {\n                console.error('PollingLogProvider threw an Error');\n                console.error(e);\n            }\n            finally {\n                this.mutex = 0;\n            }\n        }, this.frequency);\n        return true;\n    }\n    isSubscribed() {\n        return this.intervalId !== undefined;\n    }\n    async unsubscribe() {\n        if (this.intervalId !== undefined) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n        return true;\n    }\n}\nexports.PollingLogProvider = PollingLogProvider;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,kBAAkB,GAAG,KAAK;AAClC,MAAM;AACN,MAAM;IACF,YAAY,UAAU,EAAE,OAAO,EAAE,UAAU,EAAE,YAAY,KAAK,IAAI,EAAE,SAAS,CAAE;QAC3E,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,QAAQ,GAAG,eAAe,cAAc,cAAc;IAC/D;IACA,MAAM,UAAU,QAAQ,EAAE,WAAW,EAAE;QACnC,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,OAAO;QACX;QACA,IAAI,CAAC,UAAU,GAAG,YAAY;YAC1B,IAAI,IAAI,CAAC,KAAK,KAAK,GAAG;gBAClB;YACJ;YACA,IAAI,CAAC,KAAK,GAAG;YACb,IAAI;gBACA,MAAM,WAAW,MAAM,CAAC,GAAG,YAAY,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,WAAW,IAAI,CAAC,gBAAgB,EAChI,iFAAiF;gBACjF,eAAe,IAAI,CAAC,UAAU,GAAG,IAAI,WAAW,IAAI,CAAC,SAAS;gBAC9D,IAAI,aAAa,WAAW;oBACxB;gBACJ;gBACA,IAAI,CAAC,UAAU,GAAG;gBAClB,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG;gBAC1C,KAAK,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,gBAAiB;oBACjD,SAAS,OAAO,MAAM,MAAM,SAAS,mBAAmB,EAAE;gBAC9D;gBACA,IAAI,CAAC,gBAAgB,GAAG;YAC5B,EACA,OAAO,GAAG;gBACN,QAAQ,KAAK,CAAC;gBACd,QAAQ,KAAK,CAAC;YAClB,SACQ;gBACJ,IAAI,CAAC,KAAK,GAAG;YACjB;QACJ,GAAG,IAAI,CAAC,SAAS;QACjB,OAAO;IACX;IACA,eAAe;QACX,OAAO,IAAI,CAAC,UAAU,KAAK;IAC/B;IACA,MAAM,cAAc;QAChB,IAAI,IAAI,CAAC,UAAU,KAAK,WAAW;YAC/B,cAAc,IAAI,CAAC,UAAU;YAC7B,IAAI,CAAC,UAAU,GAAG;QACtB;QACA,OAAO;IACX;AACJ;AACA,QAAQ,kBAAkB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 13206, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/webSocketLogProvider.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocketLogProvider = void 0;\nconst events_1 = require(\"events\");\nclass WebSocketLogProvider {\n    constructor(connection, address, commitment, resubTimeoutMs) {\n        this.connection = connection;\n        this.address = address;\n        this.commitment = commitment;\n        this.resubTimeoutMs = resubTimeoutMs;\n        this.isUnsubscribing = false;\n        this.externalUnsubscribe = false;\n        this.receivingData = false;\n        this.reconnectAttempts = 0;\n        if (this.resubTimeoutMs) {\n            this.eventEmitter = new events_1.EventEmitter();\n        }\n    }\n    async subscribe(callback) {\n        if (this.subscriptionId != null) {\n            return true;\n        }\n        this.callback = callback;\n        try {\n            this.setSubscription(callback);\n        }\n        catch (error) {\n            // Sometimes ws connection isn't ready, give it a few secs\n            setTimeout(() => this.setSubscription(callback), 2000);\n        }\n        if (this.resubTimeoutMs) {\n            this.setTimeout();\n        }\n        return true;\n    }\n    setSubscription(callback) {\n        this.subscriptionId = this.connection.onLogs(this.address, (logs, ctx) => {\n            if (this.resubTimeoutMs && !this.isUnsubscribing) {\n                this.receivingData = true;\n                clearTimeout(this.timeoutId);\n                this.setTimeout();\n                if (this.reconnectAttempts > 0) {\n                    console.log('Resetting reconnect attempts to 0');\n                }\n                this.reconnectAttempts = 0;\n            }\n            if (logs.err !== null) {\n                return;\n            }\n            callback(logs.signature, ctx.slot, logs.logs, undefined, undefined);\n        }, this.commitment);\n    }\n    isSubscribed() {\n        return this.subscriptionId != null;\n    }\n    async unsubscribe(external = false) {\n        this.isUnsubscribing = true;\n        this.externalUnsubscribe = external;\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n        if (this.subscriptionId != null) {\n            try {\n                await this.connection.removeOnLogsListener(this.subscriptionId);\n                this.subscriptionId = undefined;\n                this.isUnsubscribing = false;\n                return true;\n            }\n            catch (err) {\n                console.log('Error unsubscribing from logs: ', err);\n                this.isUnsubscribing = false;\n                return false;\n            }\n        }\n        else {\n            this.isUnsubscribing = false;\n            return true;\n        }\n    }\n    setTimeout() {\n        this.timeoutId = setTimeout(async () => {\n            if (this.isUnsubscribing || this.externalUnsubscribe) {\n                // If we are in the process of unsubscribing, do not attempt to resubscribe\n                return;\n            }\n            if (this.receivingData) {\n                console.log(`webSocketLogProvider: No log data in ${this.resubTimeoutMs}ms, resubscribing on attempt ${this.reconnectAttempts + 1}`);\n                await this.unsubscribe();\n                this.receivingData = false;\n                this.reconnectAttempts++;\n                this.eventEmitter.emit('reconnect', this.reconnectAttempts);\n                this.subscribe(this.callback);\n            }\n        }, this.resubTimeoutMs);\n    }\n}\nexports.WebSocketLogProvider = WebSocketLogProvider;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13304, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/sort.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSortFn = void 0;\nfunction clientSortAscFn() {\n    return 'less than';\n}\nfunction clientSortDescFn() {\n    return 'greater than';\n}\nfunction blockchainSortFn(currentEvent, newEvent) {\n    if (currentEvent.slot == newEvent.slot) {\n        return currentEvent.txSigIndex < newEvent.txSigIndex\n            ? 'less than'\n            : 'greater than';\n    }\n    return currentEvent.slot < newEvent.slot ? 'less than' : 'greater than';\n}\nfunction getSortFn(orderBy, orderDir) {\n    if (orderBy === 'client') {\n        return orderDir === 'asc' ? clientSortAscFn : clientSortDescFn;\n    }\n    return blockchainSortFn;\n}\nexports.getSortFn = getSortFn;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,SAAS,GAAG,KAAK;AACzB,SAAS;IACL,OAAO;AACX;AACA,SAAS;IACL,OAAO;AACX;AACA,SAAS,iBAAiB,YAAY,EAAE,QAAQ;IAC5C,IAAI,aAAa,IAAI,IAAI,SAAS,IAAI,EAAE;QACpC,OAAO,aAAa,UAAU,GAAG,SAAS,UAAU,GAC9C,cACA;IACV;IACA,OAAO,aAAa,IAAI,GAAG,SAAS,IAAI,GAAG,cAAc;AAC7D;AACA,SAAS,UAAU,OAAO,EAAE,QAAQ;IAChC,IAAI,YAAY,UAAU;QACtB,OAAO,aAAa,QAAQ,kBAAkB;IAClD;IACA,OAAO;AACX;AACA,QAAQ,SAAS,GAAG","ignoreList":[0]}},
    {"offset": {"line": 13331, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/eventsServerLogProvider.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventsServerLogProvider = void 0;\nconst events_1 = require(\"events\");\n// browser support\nlet WebSocketImpl;\nif (typeof window !== 'undefined' && window.WebSocket) {\n    WebSocketImpl = window.WebSocket;\n}\nelse {\n    WebSocketImpl = require('ws');\n}\nconst EVENT_SERVER_HEARTBEAT_INTERVAL_MS = 5000;\nconst ALLOWED_MISSED_HEARTBEATS = 3;\nclass EventsServerLogProvider {\n    constructor(url, eventTypes, userAccount) {\n        this.url = url;\n        this.eventTypes = eventTypes;\n        this.userAccount = userAccount;\n        this.isUnsubscribing = false;\n        this.externalUnsubscribe = false;\n        this.lastHeartbeat = 0;\n        this.reconnectAttempts = 0;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    isSubscribed() {\n        return this.ws !== undefined;\n    }\n    async subscribe(callback) {\n        if (this.ws !== undefined) {\n            return true;\n        }\n        this.ws = new WebSocketImpl(this.url);\n        this.callback = callback;\n        this.ws.addEventListener('open', () => {\n            for (const channel of this.eventTypes) {\n                const subscribeMessage = {\n                    type: 'subscribe',\n                    channel: channel,\n                };\n                if (this.userAccount) {\n                    subscribeMessage['user'] = this.userAccount;\n                }\n                this.ws.send(JSON.stringify(subscribeMessage));\n            }\n            this.reconnectAttempts = 0;\n        });\n        this.ws.addEventListener('message', (data) => {\n            try {\n                if (!this.isUnsubscribing) {\n                    clearTimeout(this.timeoutId);\n                    this.setTimeout();\n                    if (this.reconnectAttempts > 0) {\n                        console.log('eventsServerLogProvider: Resetting reconnect attempts to 0');\n                    }\n                    this.reconnectAttempts = 0;\n                }\n                const parsedData = JSON.parse(data.data.toString());\n                if (parsedData.channel === 'heartbeat') {\n                    this.lastHeartbeat = Date.now();\n                    return;\n                }\n                if (parsedData.message !== undefined) {\n                    return;\n                }\n                const event = JSON.parse(parsedData.data);\n                this.callback(event.txSig, event.slot, [\n                    'Program dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH invoke [1]',\n                    event.rawLog,\n                    'Program dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH success',\n                ], undefined, event.txSigIndex);\n            }\n            catch (error) {\n                console.error('Error parsing message:', error);\n            }\n        });\n        this.ws.addEventListener('close', () => {\n            console.log('eventsServerLogProvider: WebSocket closed');\n        });\n        this.ws.addEventListener('error', (error) => {\n            console.error('eventsServerLogProvider: WebSocket error:', error);\n        });\n        this.setTimeout();\n        return true;\n    }\n    async unsubscribe(external = false) {\n        this.isUnsubscribing = true;\n        this.externalUnsubscribe = external;\n        if (this.timeoutId) {\n            clearInterval(this.timeoutId);\n            this.timeoutId = undefined;\n        }\n        if (this.ws !== undefined) {\n            this.ws.close();\n            this.ws = undefined;\n            return true;\n        }\n        else {\n            this.isUnsubscribing = false;\n            return true;\n        }\n    }\n    setTimeout() {\n        this.timeoutId = setTimeout(async () => {\n            if (this.isUnsubscribing || this.externalUnsubscribe) {\n                // If we are in the process of unsubscribing, do not attempt to resubscribe\n                return;\n            }\n            const timeSinceLastHeartbeat = Date.now() - this.lastHeartbeat;\n            if (timeSinceLastHeartbeat >\n                EVENT_SERVER_HEARTBEAT_INTERVAL_MS * ALLOWED_MISSED_HEARTBEATS) {\n                console.log(`eventServerLogProvider: No heartbeat in ${timeSinceLastHeartbeat}ms, resubscribing on attempt ${this.reconnectAttempts + 1}`);\n                await this.unsubscribe();\n                this.reconnectAttempts++;\n                this.eventEmitter.emit('reconnect', this.reconnectAttempts);\n                this.subscribe(this.callback);\n            }\n        }, EVENT_SERVER_HEARTBEAT_INTERVAL_MS * 2);\n    }\n}\nexports.EventsServerLogProvider = EventsServerLogProvider;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13453, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/events/eventSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventSubscriber = void 0;\nconst types_1 = require(\"./types\");\nconst txEventCache_1 = require(\"./txEventCache\");\nconst eventList_1 = require(\"./eventList\");\nconst pollingLogProvider_1 = require(\"./pollingLogProvider\");\nconst fetchLogs_1 = require(\"./fetchLogs\");\nconst webSocketLogProvider_1 = require(\"./webSocketLogProvider\");\nconst events_1 = require(\"events\");\nconst sort_1 = require(\"./sort\");\nconst parse_1 = require(\"./parse\");\nconst eventsServerLogProvider_1 = require(\"./eventsServerLogProvider\");\nclass EventSubscriber {\n    constructor(connection, program, options = types_1.DefaultEventSubscriptionOptions) {\n        var _a;\n        this.connection = connection;\n        this.program = program;\n        this.options = options;\n        this.awaitTxPromises = new Map();\n        this.awaitTxResolver = new Map();\n        this.options = Object.assign({}, types_1.DefaultEventSubscriptionOptions, options);\n        this.address = (_a = this.options.address) !== null && _a !== void 0 ? _a : program.programId;\n        this.txEventCache = new txEventCache_1.TxEventCache(this.options.maxTx);\n        this.eventListMap = new Map();\n        this.eventEmitter = new events_1.EventEmitter();\n        this._currentProviderType = this.options.logProviderConfig.type;\n        this.initializeLogProvider();\n    }\n    get currentProviderType() {\n        return this._currentProviderType;\n    }\n    initializeLogProvider(subscribe = false) {\n        const logProviderConfig = this.options.logProviderConfig;\n        if (this._currentProviderType === 'websocket') {\n            this.logProvider = new webSocketLogProvider_1.WebSocketLogProvider(\n            // @ts-ignore\n            this.connection, this.address, this.options.commitment, this.options.logProviderConfig.resubTimeoutMs);\n        }\n        else if (this._currentProviderType === 'polling') {\n            const frequency = 'frequency' in logProviderConfig\n                ? logProviderConfig.frequency\n                : logProviderConfig.fallbackFrequency;\n            const batchSize = 'batchSize' in logProviderConfig\n                ? logProviderConfig.batchSize\n                : logProviderConfig.fallbackBatchSize;\n            this.logProvider = new pollingLogProvider_1.PollingLogProvider(\n            // @ts-ignore\n            this.connection, this.address, this.options.commitment, frequency, batchSize);\n        }\n        else if (this._currentProviderType === 'events-server') {\n            this.logProvider = new eventsServerLogProvider_1.EventsServerLogProvider(logProviderConfig.url, this.options.eventTypes, this.options.address ? this.options.address.toString() : undefined);\n        }\n        else {\n            throw new Error(`Invalid log provider type: ${this._currentProviderType}`);\n        }\n        if (subscribe) {\n            this.logProvider.subscribe((txSig, slot, logs, mostRecentBlockTime, txSigIndex) => {\n                this.handleTxLogs(txSig, slot, logs, mostRecentBlockTime, this._currentProviderType === 'events-server', txSigIndex);\n            }, true);\n        }\n    }\n    populateInitialEventListMap() {\n        for (const eventType of this.options.eventTypes) {\n            this.eventListMap.set(eventType, new eventList_1.EventList(eventType, this.options.maxEventsPerType, (0, sort_1.getSortFn)(this.options.orderBy, this.options.orderDir), this.options.orderDir));\n        }\n    }\n    /**\n     * Implements fallback logic for reconnecting to LogProvider. Currently terminates at polling,\n     * could be improved to try the original type again after some cooldown.\n     */\n    updateFallbackProviderType(reconnectAttempts, maxReconnectAttempts) {\n        if (reconnectAttempts < maxReconnectAttempts) {\n            return;\n        }\n        let nextProviderType = this._currentProviderType;\n        if (this._currentProviderType === 'events-server') {\n            nextProviderType = 'websocket';\n        }\n        else if (this._currentProviderType === 'websocket') {\n            nextProviderType = 'polling';\n        }\n        else if (this._currentProviderType === 'polling') {\n            nextProviderType = 'polling';\n        }\n        console.log(`EventSubscriber: Failing over providerType ${this._currentProviderType} to ${nextProviderType}`);\n        this._currentProviderType = nextProviderType;\n    }\n    async subscribe() {\n        try {\n            if (this.logProvider.isSubscribed()) {\n                return true;\n            }\n            this.populateInitialEventListMap();\n            if (this.options.logProviderConfig.type === 'websocket' ||\n                this.options.logProviderConfig.type === 'events-server') {\n                const logProviderConfig = this.options\n                    .logProviderConfig;\n                if (this.logProvider.eventEmitter) {\n                    this.logProvider.eventEmitter.on('reconnect', async (reconnectAttempts) => {\n                        if (reconnectAttempts > logProviderConfig.maxReconnectAttempts) {\n                            console.log(`EventSubscriber: Reconnect attempts ${reconnectAttempts}/${logProviderConfig.maxReconnectAttempts}, reconnecting...`);\n                            this.logProvider.eventEmitter.removeAllListeners('reconnect');\n                            await this.unsubscribe();\n                            this.updateFallbackProviderType(reconnectAttempts, logProviderConfig.maxReconnectAttempts);\n                            this.initializeLogProvider(true);\n                        }\n                    });\n                }\n            }\n            this.logProvider.subscribe((txSig, slot, logs, mostRecentBlockTime, txSigIndex) => {\n                this.handleTxLogs(txSig, slot, logs, mostRecentBlockTime, this._currentProviderType === 'events-server', txSigIndex);\n            }, true);\n            return true;\n        }\n        catch (e) {\n            console.error('Error fetching previous txs in event subscriber');\n            console.error(e);\n            return false;\n        }\n    }\n    handleTxLogs(txSig, slot, logs, mostRecentBlockTime, fromEventsServer = false, txSigIndex = undefined) {\n        if (!fromEventsServer && this.txEventCache.has(txSig)) {\n            return;\n        }\n        const wrappedEvents = this.parseEventsFromLogs(txSig, slot, logs, txSigIndex);\n        for (const wrappedEvent of wrappedEvents) {\n            this.eventListMap.get(wrappedEvent.eventType).insert(wrappedEvent);\n        }\n        // dont emit event till we've added all the events to the eventListMap\n        for (const wrappedEvent of wrappedEvents) {\n            this.eventEmitter.emit('newEvent', wrappedEvent);\n        }\n        if (this.awaitTxPromises.has(txSig)) {\n            this.awaitTxPromises.delete(txSig);\n            this.awaitTxResolver.get(txSig)();\n            this.awaitTxResolver.delete(txSig);\n        }\n        if (!this.lastSeenSlot || slot > this.lastSeenSlot) {\n            this.lastSeenTxSig = txSig;\n            this.lastSeenSlot = slot;\n        }\n        if (this.lastSeenBlockTime === undefined ||\n            mostRecentBlockTime > this.lastSeenBlockTime) {\n            this.lastSeenBlockTime = mostRecentBlockTime;\n        }\n        this.txEventCache.add(txSig, wrappedEvents);\n    }\n    async fetchPreviousTx(fetchMax) {\n        if (!this.options.untilTx && !fetchMax) {\n            return;\n        }\n        let txFetched = 0;\n        let beforeTx = undefined;\n        const untilTx = this.options.untilTx;\n        while (txFetched < this.options.maxTx) {\n            const response = await (0, fetchLogs_1.fetchLogs)(\n            // @ts-ignore\n            this.connection, this.address, this.options.commitment === 'finalized' ? 'finalized' : 'confirmed', beforeTx, untilTx);\n            if (response === undefined) {\n                break;\n            }\n            txFetched += response.transactionLogs.length;\n            beforeTx = response.earliestTx;\n            for (const { txSig, slot, logs } of response.transactionLogs) {\n                this.handleTxLogs(txSig, slot, logs, response.mostRecentBlockTime);\n            }\n        }\n    }\n    async unsubscribe() {\n        this.eventListMap.clear();\n        this.txEventCache.clear();\n        this.awaitTxPromises.clear();\n        this.awaitTxResolver.clear();\n        return await this.logProvider.unsubscribe(true);\n    }\n    parseEventsFromLogs(txSig, slot, logs, txSigIndex) {\n        const records = [];\n        // @ts-ignore\n        const events = (0, parse_1.parseLogs)(this.program, logs);\n        let runningEventIndex = 0;\n        for (const event of events) {\n            // @ts-ignore\n            const expectRecordType = this.eventListMap.has(event.name);\n            if (expectRecordType) {\n                event.data.txSig = txSig;\n                event.data.slot = slot;\n                event.data.eventType = event.name;\n                event.data.txSigIndex =\n                    txSigIndex !== undefined ? txSigIndex : runningEventIndex;\n                records.push(event.data);\n            }\n            runningEventIndex++;\n        }\n        return records;\n    }\n    awaitTx(txSig) {\n        if (this.awaitTxPromises.has(txSig)) {\n            return this.awaitTxPromises.get(txSig);\n        }\n        if (this.txEventCache.has(txSig)) {\n            return Promise.resolve();\n        }\n        const promise = new Promise((resolve) => {\n            this.awaitTxResolver.set(txSig, resolve);\n        });\n        this.awaitTxPromises.set(txSig, promise);\n        return promise;\n    }\n    getEventList(eventType) {\n        return this.eventListMap.get(eventType);\n    }\n    /**\n     * This requires the EventList be cast to an array, which requires reallocation of memory.\n     * Would bias to using getEventList over getEvents\n     *\n     * @param eventType\n     */\n    getEventsArray(eventType) {\n        return this.eventListMap.get(eventType).toArray();\n    }\n    getEventsByTx(txSig) {\n        return this.txEventCache.get(txSig);\n    }\n}\nexports.EventSubscriber = EventSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13665, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/slot/SlotSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SlotSubscriber = void 0;\nconst events_1 = require(\"events\");\nclass SlotSubscriber {\n    constructor(connection, config) {\n        this.connection = connection;\n        this.isUnsubscribing = false;\n        this.receivingData = false;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubTimeoutMs = config === null || config === void 0 ? void 0 : config.resubTimeoutMs;\n        if (this.resubTimeoutMs < 1000) {\n            console.log('resubTimeoutMs should be at least 1000ms to avoid spamming resub');\n        }\n    }\n    async subscribe() {\n        if (this.subscriptionId != null) {\n            return;\n        }\n        const newSlot = await this.connection.getSlot('confirmed');\n        this.updateCurrentSlot(newSlot);\n        this.subscriptionId = this.connection.onSlotChange((slotInfo) => {\n            const newSlot = slotInfo.slot;\n            if (!this.currentSlot || this.currentSlot < newSlot) {\n                if (this.resubTimeoutMs && !this.isUnsubscribing) {\n                    this.receivingData = true;\n                    clearTimeout(this.timeoutId);\n                    this.setTimeout();\n                }\n                this.updateCurrentSlot(newSlot);\n            }\n        });\n        if (this.resubTimeoutMs) {\n            this.receivingData = true;\n            this.setTimeout();\n        }\n    }\n    updateCurrentSlot(slot) {\n        this.currentSlot = slot;\n        this.eventEmitter.emit('newSlot', slot);\n    }\n    setTimeout() {\n        this.timeoutId = setTimeout(async () => {\n            if (this.isUnsubscribing) {\n                // If we are in the process of unsubscribing, do not attempt to resubscribe\n                return;\n            }\n            if (this.receivingData) {\n                console.log(`No new slot in ${this.resubTimeoutMs}ms, slot subscriber resubscribing`);\n                await this.unsubscribe(true);\n                this.receivingData = false;\n                await this.subscribe();\n            }\n        }, this.resubTimeoutMs);\n    }\n    getSlot() {\n        return this.currentSlot;\n    }\n    async unsubscribe(onResub = false) {\n        if (!onResub) {\n            this.resubTimeoutMs = undefined;\n        }\n        this.isUnsubscribing = true;\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n        if (this.subscriptionId != null) {\n            await this.connection.removeSlotChangeListener(this.subscriptionId);\n            this.subscriptionId = undefined;\n            this.isUnsubscribing = false;\n        }\n        else {\n            this.isUnsubscribing = false;\n        }\n    }\n}\nexports.SlotSubscriber = SlotSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,cAAc,GAAG,KAAK;AAC9B,MAAM;AACN,MAAM;IACF,YAAY,UAAU,EAAE,MAAM,CAAE;QAC5B,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;QAC7C,IAAI,CAAC,cAAc,GAAG,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,cAAc;QAC3F,IAAI,IAAI,CAAC,cAAc,GAAG,MAAM;YAC5B,QAAQ,GAAG,CAAC;QAChB;IACJ;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B;QACJ;QACA,MAAM,UAAU,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QAC9C,IAAI,CAAC,iBAAiB,CAAC;QACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YAChD,MAAM,UAAU,SAAS,IAAI;YAC7B,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,GAAG,SAAS;gBACjD,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;oBAC9C,IAAI,CAAC,aAAa,GAAG;oBACrB,aAAa,IAAI,CAAC,SAAS;oBAC3B,IAAI,CAAC,UAAU;gBACnB;gBACA,IAAI,CAAC,iBAAiB,CAAC;YAC3B;QACJ;QACA,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,UAAU;QACnB;IACJ;IACA,kBAAkB,IAAI,EAAE;QACpB,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW;IACtC;IACA,aAAa;QACT,IAAI,CAAC,SAAS,GAAG,WAAW;YACxB,IAAI,IAAI,CAAC,eAAe,EAAE;gBACtB,2EAA2E;gBAC3E;YACJ;YACA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,iCAAiC,CAAC;gBACpF,MAAM,IAAI,CAAC,WAAW,CAAC;gBACvB,IAAI,CAAC,aAAa,GAAG;gBACrB,MAAM,IAAI,CAAC,SAAS;YACxB;QACJ,GAAG,IAAI,CAAC,cAAc;IAC1B;IACA,UAAU;QACN,OAAO,IAAI,CAAC,WAAW;IAC3B;IACA,MAAM,YAAY,UAAU,KAAK,EAAE;QAC/B,IAAI,CAAC,SAAS;YACV,IAAI,CAAC,cAAc,GAAG;QAC1B;QACA,IAAI,CAAC,eAAe,GAAG;QACvB,aAAa,IAAI,CAAC,SAAS;QAC3B,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B,MAAM,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc;YAClE,IAAI,CAAC,cAAc,GAAG;YACtB,IAAI,CAAC,eAAe,GAAG;QAC3B,OACK;YACD,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,cAAc,GAAG","ignoreList":[0]}},
    {"offset": {"line": 13745, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/slot/SlothashSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SlothashSubscriber = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bytes_1 = require(\"@coral-xyz/anchor/dist/cjs/utils/bytes\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nclass SlothashSubscriber {\n    constructor(connection, config) {\n        var _a;\n        this.connection = connection;\n        this.isUnsubscribing = false;\n        this.receivingData = false;\n        this.resubTimeoutMs = config === null || config === void 0 ? void 0 : config.resubTimeoutMs;\n        this.commitment = (_a = config === null || config === void 0 ? void 0 : config.commitment) !== null && _a !== void 0 ? _a : 'processed';\n        if (this.resubTimeoutMs < 1000) {\n            console.log('resubTimeoutMs should be at least 1000ms to avoid spamming resub');\n        }\n    }\n    async subscribe() {\n        if (this.subscriptionId != null) {\n            return;\n        }\n        const currentAccountData = await this.connection.getAccountInfo(web3_js_1.SYSVAR_SLOT_HASHES_PUBKEY, this.commitment);\n        if (currentAccountData == null) {\n            throw new Error('Failed to retrieve current slot hash');\n        }\n        this.currentSlothash = deserializeSlothash(currentAccountData.data);\n        this.subscriptionId = this.connection.onAccountChange(web3_js_1.SYSVAR_SLOT_HASHES_PUBKEY, (slothashInfo, context) => {\n            if (!this.currentSlothash || this.currentSlothash.slot < context.slot) {\n                if (this.resubTimeoutMs && !this.isUnsubscribing) {\n                    this.receivingData = true;\n                    clearTimeout(this.timeoutId);\n                    this.setTimeout();\n                }\n                this.currentSlothash = deserializeSlothash(slothashInfo.data);\n            }\n        }, this.commitment);\n        if (this.resubTimeoutMs) {\n            this.receivingData = true;\n            this.setTimeout();\n        }\n    }\n    setTimeout() {\n        this.timeoutId = setTimeout(async () => {\n            if (this.isUnsubscribing) {\n                // If we are in the process of unsubscribing, do not attempt to resubscribe\n                return;\n            }\n            if (this.receivingData) {\n                console.log(`No new slot in ${this.resubTimeoutMs}ms, slot subscriber resubscribing`);\n                await this.unsubscribe(true);\n                this.receivingData = false;\n                await this.subscribe();\n            }\n        }, this.resubTimeoutMs);\n    }\n    getSlothash() {\n        return this.currentSlothash;\n    }\n    async unsubscribe(onResub = false) {\n        if (!onResub) {\n            this.resubTimeoutMs = undefined;\n        }\n        this.isUnsubscribing = true;\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n        if (this.subscriptionId != null) {\n            await this.connection.removeSlotChangeListener(this.subscriptionId);\n            this.subscriptionId = undefined;\n            this.isUnsubscribing = false;\n        }\n        else {\n            this.isUnsubscribing = false;\n        }\n    }\n}\nexports.SlothashSubscriber = SlothashSubscriber;\nfunction deserializeSlothash(data) {\n    const slotNumber = new anchor_1.BN(data.subarray(8, 16), 10, 'le');\n    const hash = bytes_1.bs58.encode(data.subarray(16, 48));\n    return {\n        slot: slotNumber.toNumber(),\n        hash,\n    };\n}\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,kBAAkB,GAAG,KAAK;AAClC,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,UAAU,EAAE,MAAM,CAAE;QAC5B,IAAI;QACJ,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,cAAc,GAAG,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,cAAc;QAC3F,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,UAAU,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC5H,IAAI,IAAI,CAAC,cAAc,GAAG,MAAM;YAC5B,QAAQ,GAAG,CAAC;QAChB;IACJ;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B;QACJ;QACA,MAAM,qBAAqB,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,UAAU,yBAAyB,EAAE,IAAI,CAAC,UAAU;QACpH,IAAI,sBAAsB,MAAM;YAC5B,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,CAAC,eAAe,GAAG,oBAAoB,mBAAmB,IAAI;QAClE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,UAAU,yBAAyB,EAAE,CAAC,cAAc;YACtG,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,GAAG,QAAQ,IAAI,EAAE;gBACnE,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;oBAC9C,IAAI,CAAC,aAAa,GAAG;oBACrB,aAAa,IAAI,CAAC,SAAS;oBAC3B,IAAI,CAAC,UAAU;gBACnB;gBACA,IAAI,CAAC,eAAe,GAAG,oBAAoB,aAAa,IAAI;YAChE;QACJ,GAAG,IAAI,CAAC,UAAU;QAClB,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,UAAU;QACnB;IACJ;IACA,aAAa;QACT,IAAI,CAAC,SAAS,GAAG,WAAW;YACxB,IAAI,IAAI,CAAC,eAAe,EAAE;gBACtB,2EAA2E;gBAC3E;YACJ;YACA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,iCAAiC,CAAC;gBACpF,MAAM,IAAI,CAAC,WAAW,CAAC;gBACvB,IAAI,CAAC,aAAa,GAAG;gBACrB,MAAM,IAAI,CAAC,SAAS;YACxB;QACJ,GAAG,IAAI,CAAC,cAAc;IAC1B;IACA,cAAc;QACV,OAAO,IAAI,CAAC,eAAe;IAC/B;IACA,MAAM,YAAY,UAAU,KAAK,EAAE;QAC/B,IAAI,CAAC,SAAS;YACV,IAAI,CAAC,cAAc,GAAG;QAC1B;QACA,IAAI,CAAC,eAAe,GAAG;QACvB,aAAa,IAAI,CAAC,SAAS;QAC3B,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B,MAAM,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,IAAI,CAAC,cAAc;YAClE,IAAI,CAAC,cAAc,GAAG;YACtB,IAAI,CAAC,eAAe,GAAG;QAC3B,OACK;YACD,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,kBAAkB,GAAG;AAC7B,SAAS,oBAAoB,IAAI;IAC7B,MAAM,aAAa,IAAI,SAAS,EAAE,CAAC,KAAK,QAAQ,CAAC,GAAG,KAAK,IAAI;IAC7D,MAAM,OAAO,QAAQ,IAAI,CAAC,MAAM,CAAC,KAAK,QAAQ,CAAC,IAAI;IACnD,OAAO;QACH,MAAM,WAAW,QAAQ;QACzB;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 13834, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/keypair.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadKeypair = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst web3_js_1 = require(\"@solana/web3.js\");\nfunction loadKeypair(privateKey) {\n    // try to load privateKey as a filepath\n    let loadedKey;\n    if (fs_1.default.existsSync(privateKey)) {\n        privateKey = fs_1.default.readFileSync(privateKey).toString();\n    }\n    if (privateKey.includes('[') && privateKey.includes(']')) {\n        loadedKey = Uint8Array.from(JSON.parse(privateKey));\n    }\n    else if (privateKey.includes(',')) {\n        loadedKey = Uint8Array.from(privateKey.split(',').map((val) => Number(val)));\n    }\n    else {\n        privateKey = privateKey.replace(/\\s/g, '');\n        loadedKey = new Uint8Array(bs58_1.default.decode(privateKey));\n    }\n    return web3_js_1.Keypair.fromSecretKey(Uint8Array.from(loadedKey));\n}\nexports.loadKeypair = loadKeypair;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,WAAW,GAAG,KAAK;AAC3B,MAAM,OAAO;AACb,MAAM,SAAS;AACf,MAAM;AACN,SAAS,YAAY,UAAU;IAC3B,uCAAuC;IACvC,IAAI;IACJ,IAAI,KAAK,OAAO,CAAC,UAAU,CAAC,aAAa;QACrC,aAAa,KAAK,OAAO,CAAC,YAAY,CAAC,YAAY,QAAQ;IAC/D;IACA,IAAI,WAAW,QAAQ,CAAC,QAAQ,WAAW,QAAQ,CAAC,MAAM;QACtD,YAAY,WAAW,IAAI,CAAC,KAAK,KAAK,CAAC;IAC3C,OACK,IAAI,WAAW,QAAQ,CAAC,MAAM;QAC/B,YAAY,WAAW,IAAI,CAAC,WAAW,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,MAAQ,OAAO;IAC1E,OACK;QACD,aAAa,WAAW,OAAO,CAAC,OAAO;QACvC,YAAY,IAAI,WAAW,OAAO,OAAO,CAAC,MAAM,CAAC;IACrD;IACA,OAAO,UAAU,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC;AAC3D;AACA,QAAQ,WAAW,GAAG","ignoreList":[0]}},
    {"offset": {"line": 13867, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/serum/serumSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SerumSubscriber = void 0;\nconst serum_1 = require(\"@project-serum/serum\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nclass SerumSubscriber {\n    constructor(config) {\n        this.connection = config.connection;\n        this.programId = config.programId;\n        this.marketAddress = config.marketAddress;\n        if (config.accountSubscription.type === 'polling') {\n            this.subscriptionType = 'polling';\n            this.accountLoader = config.accountSubscription.accountLoader;\n        }\n        else {\n            this.subscriptionType = 'websocket';\n        }\n    }\n    async subscribe() {\n        if (this.subscribed) {\n            return;\n        }\n        this.market = await serum_1.Market.load(this.connection, this.marketAddress, undefined, this.programId);\n        this.asksAddress = this.market.asksAddress;\n        this.asks = await this.market.loadAsks(this.connection);\n        if (this.subscriptionType === 'websocket') {\n            this.asksCallbackId = this.connection.onAccountChange(this.asksAddress, (accountInfo, ctx) => {\n                this.lastAsksSlot = ctx.slot;\n                this.asks = serum_1.Orderbook.decode(this.market, accountInfo.data);\n            });\n        }\n        else {\n            this.asksCallbackId = await this.accountLoader.addAccount(this.asksAddress, (buffer, slot) => {\n                this.lastAsksSlot = slot;\n                this.asks = serum_1.Orderbook.decode(this.market, buffer);\n            });\n        }\n        this.bidsAddress = this.market.bidsAddress;\n        this.bids = await this.market.loadBids(this.connection);\n        if (this.subscriptionType === 'websocket') {\n            this.bidsCallbackId = this.connection.onAccountChange(this.bidsAddress, (accountInfo, ctx) => {\n                this.lastBidsSlot = ctx.slot;\n                this.bids = serum_1.Orderbook.decode(this.market, accountInfo.data);\n            });\n        }\n        else {\n            this.bidsCallbackId = await this.accountLoader.addAccount(this.bidsAddress, (buffer, slot) => {\n                this.lastBidsSlot = slot;\n                this.bids = serum_1.Orderbook.decode(this.market, buffer);\n            });\n        }\n        this.subscribed = true;\n    }\n    getBestBid() {\n        const bestBid = this.bids.getL2(1)[0];\n        if (!bestBid) {\n            return undefined;\n        }\n        return new anchor_1.BN(bestBid[0] * numericConstants_1.PRICE_PRECISION.toNumber());\n    }\n    getBestAsk() {\n        const bestAsk = this.asks.getL2(1)[0];\n        if (!bestAsk) {\n            return undefined;\n        }\n        return new anchor_1.BN(bestAsk[0] * numericConstants_1.PRICE_PRECISION.toNumber());\n    }\n    getL2Bids() {\n        return this.getL2Levels('bids');\n    }\n    getL2Asks() {\n        return this.getL2Levels('asks');\n    }\n    *getL2Levels(side) {\n        // @ts-ignore\n        const basePrecision = Math.pow(10, this.market._baseSplTokenDecimals);\n        const pricePrecision = numericConstants_1.PRICE_PRECISION.toNumber();\n        for (const { price: priceNum, size: sizeNum } of this[side].items(side === 'bids')) {\n            const price = new anchor_1.BN(priceNum * pricePrecision);\n            const size = new anchor_1.BN(sizeNum * basePrecision);\n            yield {\n                price,\n                size,\n                sources: {\n                    serum: size,\n                },\n            };\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscribed) {\n            return;\n        }\n        // remove listeners\n        if (this.subscriptionType === 'websocket') {\n            await this.connection.removeAccountChangeListener(this.asksCallbackId);\n            await this.connection.removeAccountChangeListener(this.bidsCallbackId);\n        }\n        else {\n            this.accountLoader.removeAccount(this.asksAddress, this.asksCallbackId);\n            this.accountLoader.removeAccount(this.bidsAddress, this.bidsCallbackId);\n        }\n        this.subscribed = false;\n    }\n}\nexports.SerumSubscriber = SerumSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13975, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/serum/serumFulfillmentConfigMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SerumFulfillmentConfigMap = void 0;\nclass SerumFulfillmentConfigMap {\n    constructor(driftClient) {\n        this.map = new Map();\n        this.driftClient = driftClient;\n    }\n    async add(marketIndex, serumMarketAddress) {\n        const account = await this.driftClient.getSerumV3FulfillmentConfig(serumMarketAddress);\n        this.map.set(marketIndex, account);\n    }\n    get(marketIndex) {\n        return this.map.get(marketIndex);\n    }\n}\nexports.SerumFulfillmentConfigMap = SerumFulfillmentConfigMap;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,yBAAyB,GAAG,KAAK;AACzC,MAAM;IACF,YAAY,WAAW,CAAE;QACrB,IAAI,CAAC,GAAG,GAAG,IAAI;QACf,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,IAAI,WAAW,EAAE,kBAAkB,EAAE;QACvC,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,CAAC,2BAA2B,CAAC;QACnE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa;IAC9B;IACA,IAAI,WAAW,EAAE;QACb,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;IACxB;AACJ;AACA,QAAQ,yBAAyB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 13997, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/phoenix/phoenixSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PhoenixSubscriber = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst phoenix_sdk_1 = require(\"@ellipsis-labs/phoenix-sdk\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst phoenix_1 = require(\"../decode/phoenix\");\nclass PhoenixSubscriber {\n    constructor(config) {\n        var _a;\n        this.connection = config.connection;\n        this.programId = config.programId;\n        this.marketAddress = config.marketAddress;\n        if (config.accountSubscription.type === 'polling') {\n            this.subscriptionType = 'polling';\n            this.accountLoader = config.accountSubscription.accountLoader;\n        }\n        else {\n            this.subscriptionType = 'websocket';\n        }\n        this.lastSlot = 0;\n        this.lastUnixTimestamp = 0;\n        this.fastDecode = (_a = config.fastDecode) !== null && _a !== void 0 ? _a : true;\n    }\n    async subscribe() {\n        if (this.subscribed) {\n            return;\n        }\n        this.market = await phoenix_sdk_1.Market.loadFromAddress({\n            connection: this.connection,\n            address: this.marketAddress,\n        });\n        const clock = (0, phoenix_sdk_1.deserializeClockData)((await this.connection.getAccountInfo(web3_js_1.SYSVAR_CLOCK_PUBKEY, 'confirmed'))\n            .data);\n        this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n        if (this.subscriptionType === 'websocket') {\n            this.marketCallbackId = this.connection.onAccountChange(this.marketAddress, (accountInfo, _ctx) => {\n                try {\n                    if (this.fastDecode) {\n                        this.market.data = (0, phoenix_1.fastDecode)(accountInfo.data);\n                    }\n                    else {\n                        this.market = this.market.reload(accountInfo.data);\n                    }\n                }\n                catch {\n                    console.error('Failed to reload Phoenix market data');\n                }\n            });\n            this.clockCallbackId = this.connection.onAccountChange(web3_js_1.SYSVAR_CLOCK_PUBKEY, (accountInfo, ctx) => {\n                try {\n                    this.lastSlot = ctx.slot;\n                    const clock = (0, phoenix_sdk_1.deserializeClockData)(accountInfo.data);\n                    this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n                }\n                catch {\n                    console.error('Failed to reload clock data');\n                }\n            });\n        }\n        else {\n            this.marketCallbackId = await this.accountLoader.addAccount(this.marketAddress, (buffer, slot) => {\n                try {\n                    this.lastSlot = slot;\n                    if (buffer) {\n                        if (this.fastDecode) {\n                            this.market.data = (0, phoenix_1.fastDecode)(buffer);\n                        }\n                        else {\n                            this.market = this.market.reload(buffer);\n                        }\n                    }\n                }\n                catch {\n                    console.error('Failed to reload Phoenix market data');\n                }\n            });\n            this.clockCallbackId = await this.accountLoader.addAccount(web3_js_1.SYSVAR_CLOCK_PUBKEY, (buffer, slot) => {\n                try {\n                    this.lastSlot = slot;\n                    const clock = (0, phoenix_sdk_1.deserializeClockData)(buffer);\n                    this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n                }\n                catch {\n                    console.error('Failed to reload clock data');\n                }\n            });\n        }\n        this.subscribed = true;\n    }\n    getBestBid() {\n        const ladder = (0, phoenix_sdk_1.getMarketLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 1);\n        const bestBid = ladder.bids[0];\n        if (!bestBid) {\n            return undefined;\n        }\n        return this.convertPriceInTicksToPricePrecision(bestBid.priceInTicks);\n    }\n    getBestAsk() {\n        const ladder = (0, phoenix_sdk_1.getMarketLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 1);\n        const bestAsk = ladder.asks[0];\n        if (!bestAsk) {\n            return undefined;\n        }\n        return this.convertPriceInTicksToPricePrecision(bestAsk.priceInTicks);\n    }\n    convertPriceInTicksToPricePrecision(priceInTicks) {\n        const quotePrecision = new anchor_1.BN(Math.pow(10, this.market.data.header.quoteParams.decimals));\n        const denom = quotePrecision.muln(this.market.data.header.rawBaseUnitsPerBaseUnit);\n        const price = priceInTicks\n            .muln(this.market.data.quoteLotsPerBaseUnitPerTick)\n            .muln((0, phoenix_sdk_1.toNum)(this.market.data.header.quoteLotSize));\n        return price.mul(numericConstants_1.PRICE_PRECISION).div(denom);\n    }\n    convertSizeInBaseLotsToMarketPrecision(sizeInBaseLots) {\n        return sizeInBaseLots.muln((0, phoenix_sdk_1.toNum)(this.market.data.header.baseLotSize));\n    }\n    getL2Bids() {\n        return this.getL2Levels('bids');\n    }\n    getL2Asks() {\n        return this.getL2Levels('asks');\n    }\n    *getL2Levels(side) {\n        const ladder = (0, phoenix_sdk_1.getMarketLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 20);\n        for (let i = 0; i < ladder[side].length; i++) {\n            const { priceInTicks, sizeInBaseLots } = ladder[side][i];\n            try {\n                const size = this.convertSizeInBaseLotsToMarketPrecision(sizeInBaseLots);\n                const updatedPrice = this.convertPriceInTicksToPricePrecision(priceInTicks);\n                yield {\n                    price: updatedPrice,\n                    size,\n                    sources: {\n                        phoenix: size,\n                    },\n                };\n            }\n            catch {\n                continue;\n            }\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscribed) {\n            return;\n        }\n        // remove listeners\n        if (this.subscriptionType === 'websocket') {\n            await this.connection.removeAccountChangeListener(this.marketCallbackId);\n            await this.connection.removeAccountChangeListener(this.clockCallbackId);\n        }\n        else {\n            this.accountLoader.removeAccount(this.marketAddress, this.marketCallbackId);\n            this.accountLoader.removeAccount(web3_js_1.SYSVAR_CLOCK_PUBKEY, this.clockCallbackId);\n        }\n        this.subscribed = false;\n    }\n}\nexports.PhoenixSubscriber = PhoenixSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14150, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/phoenix/phoenixFulfillmentConfigMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PhoenixFulfillmentConfigMap = void 0;\nclass PhoenixFulfillmentConfigMap {\n    constructor(driftClient) {\n        this.map = new Map();\n        this.driftClient = driftClient;\n    }\n    async add(marketIndex, phoenixMarketAddress) {\n        const account = await this.driftClient.getPhoenixV1FulfillmentConfig(phoenixMarketAddress);\n        this.map.set(marketIndex, account);\n    }\n    get(marketIndex) {\n        return this.map.get(marketIndex);\n    }\n}\nexports.PhoenixFulfillmentConfigMap = PhoenixFulfillmentConfigMap;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,2BAA2B,GAAG,KAAK;AAC3C,MAAM;IACF,YAAY,WAAW,CAAE;QACrB,IAAI,CAAC,GAAG,GAAG,IAAI;QACf,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,IAAI,WAAW,EAAE,oBAAoB,EAAE;QACzC,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,CAAC,6BAA6B,CAAC;QACrE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa;IAC9B;IACA,IAAI,WAAW,EAAE;QACb,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;IACxB;AACJ;AACA,QAAQ,2BAA2B,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14172, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/averageOverSlotsStrategy.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AverageOverSlotsStrategy = void 0;\nclass AverageOverSlotsStrategy {\n    calculate(samples) {\n        if (samples.length === 0) {\n            return 0;\n        }\n        let runningSumFees = 0;\n        for (let i = 0; i < samples.length; i++) {\n            runningSumFees += samples[i].prioritizationFee;\n        }\n        return runningSumFees / samples.length;\n    }\n}\nexports.AverageOverSlotsStrategy = AverageOverSlotsStrategy;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,KAAK;AACxC,MAAM;IACF,UAAU,OAAO,EAAE;QACf,IAAI,QAAQ,MAAM,KAAK,GAAG;YACtB,OAAO;QACX;QACA,IAAI,iBAAiB;QACrB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;YACrC,kBAAkB,OAAO,CAAC,EAAE,CAAC,iBAAiB;QAClD;QACA,OAAO,iBAAiB,QAAQ,MAAM;IAC1C;AACJ;AACA,QAAQ,wBAAwB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14193, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/averageStrategy.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AverageStrategy = void 0;\nclass AverageStrategy {\n    calculate(samples) {\n        return (samples.reduce((a, b) => {\n            return a + b.prioritizationFee;\n        }, 0) / samples.length);\n    }\n}\nexports.AverageStrategy = AverageStrategy;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,eAAe,GAAG,KAAK;AAC/B,MAAM;IACF,UAAU,OAAO,EAAE;QACf,OAAQ,QAAQ,MAAM,CAAC,CAAC,GAAG;YACvB,OAAO,IAAI,EAAE,iBAAiB;QAClC,GAAG,KAAK,QAAQ,MAAM;IAC1B;AACJ;AACA,QAAQ,eAAe,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14209, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/ewmaStrategy.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EwmaStrategy = void 0;\nclass EwmaStrategy {\n    /**\n     * @param halfLife The half life of the EWMA in slots. Default is 25 slots, approx 10 seconds.\n     */\n    constructor(halfLife = 25) {\n        this.halfLife = halfLife;\n    }\n    // samples provided in desc slot order\n    calculate(samples) {\n        if (samples.length === 0) {\n            return 0;\n        }\n        if (samples.length === 1) {\n            return samples[0].prioritizationFee;\n        }\n        let ewma = 0;\n        const samplesReversed = samples.slice().reverse();\n        for (let i = 0; i < samplesReversed.length; i++) {\n            if (i === 0) {\n                ewma = samplesReversed[i].prioritizationFee;\n                continue;\n            }\n            const gap = samplesReversed[i].slot - samplesReversed[i - 1].slot;\n            const alpha = 1 - Math.exp((Math.log(0.5) / this.halfLife) * gap);\n            ewma = alpha * samplesReversed[i].prioritizationFee + (1 - alpha) * ewma;\n        }\n        return ewma;\n    }\n}\nexports.EwmaStrategy = EwmaStrategy;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,YAAY,GAAG,KAAK;AAC5B,MAAM;IACF;;KAEC,GACD,YAAY,WAAW,EAAE,CAAE;QACvB,IAAI,CAAC,QAAQ,GAAG;IACpB;IACA,sCAAsC;IACtC,UAAU,OAAO,EAAE;QACf,IAAI,QAAQ,MAAM,KAAK,GAAG;YACtB,OAAO;QACX;QACA,IAAI,QAAQ,MAAM,KAAK,GAAG;YACtB,OAAO,OAAO,CAAC,EAAE,CAAC,iBAAiB;QACvC;QACA,IAAI,OAAO;QACX,MAAM,kBAAkB,QAAQ,KAAK,GAAG,OAAO;QAC/C,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;YAC7C,IAAI,MAAM,GAAG;gBACT,OAAO,eAAe,CAAC,EAAE,CAAC,iBAAiB;gBAC3C;YACJ;YACA,MAAM,MAAM,eAAe,CAAC,EAAE,CAAC,IAAI,GAAG,eAAe,CAAC,IAAI,EAAE,CAAC,IAAI;YACjE,MAAM,QAAQ,IAAI,KAAK,GAAG,CAAC,AAAC,KAAK,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,GAAI;YAC7D,OAAO,QAAQ,eAAe,CAAC,EAAE,CAAC,iBAAiB,GAAG,CAAC,IAAI,KAAK,IAAI;QACxE;QACA,OAAO;IACX;AACJ;AACA,QAAQ,YAAY,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14246, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/maxOverSlotsStrategy.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MaxOverSlotsStrategy = void 0;\nclass MaxOverSlotsStrategy {\n    calculate(samples) {\n        if (samples.length === 0) {\n            return 0;\n        }\n        // Assuming samples are sorted in descending order of slot.\n        let currMaxFee = samples[0].prioritizationFee;\n        for (let i = 0; i < samples.length; i++) {\n            currMaxFee = Math.max(samples[i].prioritizationFee, currMaxFee);\n        }\n        return currMaxFee;\n    }\n}\nexports.MaxOverSlotsStrategy = MaxOverSlotsStrategy;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,oBAAoB,GAAG,KAAK;AACpC,MAAM;IACF,UAAU,OAAO,EAAE;QACf,IAAI,QAAQ,MAAM,KAAK,GAAG;YACtB,OAAO;QACX;QACA,2DAA2D;QAC3D,IAAI,aAAa,OAAO,CAAC,EAAE,CAAC,iBAAiB;QAC7C,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;YACrC,aAAa,KAAK,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,iBAAiB,EAAE;QACxD;QACA,OAAO;IACX;AACJ;AACA,QAAQ,oBAAoB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14268, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/maxStrategy.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MaxStrategy = void 0;\nclass MaxStrategy {\n    calculate(samples) {\n        return Math.max(...samples.map((result) => result.prioritizationFee));\n    }\n}\nexports.MaxStrategy = MaxStrategy;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,WAAW,GAAG,KAAK;AAC3B,MAAM;IACF,UAAU,OAAO,EAAE;QACf,OAAO,KAAK,GAAG,IAAI,QAAQ,GAAG,CAAC,CAAC,SAAW,OAAO,iBAAiB;IACvE;AACJ;AACA,QAAQ,WAAW,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14282, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PriorityFeeMethod = exports.DEFAULT_PRIORITY_FEE_MAP_FREQUENCY_MS = void 0;\nexports.DEFAULT_PRIORITY_FEE_MAP_FREQUENCY_MS = 10000;\nvar PriorityFeeMethod;\n(function (PriorityFeeMethod) {\n    PriorityFeeMethod[\"SOLANA\"] = \"solana\";\n    PriorityFeeMethod[\"HELIUS\"] = \"helius\";\n    PriorityFeeMethod[\"DRIFT\"] = \"drift\";\n})(PriorityFeeMethod || (exports.PriorityFeeMethod = PriorityFeeMethod = {}));\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,QAAQ,qCAAqC,GAAG,KAAK;AACjF,QAAQ,qCAAqC,GAAG;AAChD,IAAI;AACJ,CAAC,SAAU,iBAAiB;IACxB,iBAAiB,CAAC,SAAS,GAAG;IAC9B,iBAAiB,CAAC,SAAS,GAAG;IAC9B,iBAAiB,CAAC,QAAQ,GAAG;AACjC,CAAC,EAAE,qBAAqB,CAAC,QAAQ,iBAAiB,GAAG,oBAAoB,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 14297, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/solanaPriorityFeeMethod.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchSolanaPriorityFee = void 0;\nasync function fetchSolanaPriorityFee(connection, lookbackDistance, addresses) {\n    try {\n        // @ts-ignore\n        const rpcJSONResponse = await connection._rpcRequest('getRecentPrioritizationFees', [addresses]);\n        const results = rpcJSONResponse === null || rpcJSONResponse === void 0 ? void 0 : rpcJSONResponse.result;\n        if (!results.length)\n            return;\n        // Sort and filter results based on the slot lookback setting\n        const descResults = results.sort((a, b) => b.slot - a.slot);\n        const cutoffSlot = descResults[0].slot - lookbackDistance;\n        return descResults.filter((result) => result.slot >= cutoffSlot);\n    }\n    catch (err) {\n        console.error(err);\n    }\n    return [];\n}\nexports.fetchSolanaPriorityFee = fetchSolanaPriorityFee;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,KAAK;AACtC,eAAe,uBAAuB,UAAU,EAAE,gBAAgB,EAAE,SAAS;IACzE,IAAI;QACA,aAAa;QACb,MAAM,kBAAkB,MAAM,WAAW,WAAW,CAAC,+BAA+B;YAAC;SAAU;QAC/F,MAAM,UAAU,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,KAAK,IAAI,gBAAgB,MAAM;QACxG,IAAI,CAAC,QAAQ,MAAM,EACf;QACJ,6DAA6D;QAC7D,MAAM,cAAc,QAAQ,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI;QAC1D,MAAM,aAAa,WAAW,CAAC,EAAE,CAAC,IAAI,GAAG;QACzC,OAAO,YAAY,MAAM,CAAC,CAAC,SAAW,OAAO,IAAI,IAAI;IACzD,EACA,OAAO,KAAK;QACR,QAAQ,KAAK,CAAC;IAClB;IACA,OAAO,EAAE;AACb;AACA,QAAQ,sBAAsB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14323, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/heliusPriorityFeeMethod.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchHeliusPriorityFee = exports.HeliusPriorityLevel = void 0;\nconst node_fetch_1 = __importDefault(require(\"node-fetch\"));\nvar HeliusPriorityLevel;\n(function (HeliusPriorityLevel) {\n    HeliusPriorityLevel[\"MIN\"] = \"min\";\n    HeliusPriorityLevel[\"LOW\"] = \"low\";\n    HeliusPriorityLevel[\"MEDIUM\"] = \"medium\";\n    HeliusPriorityLevel[\"HIGH\"] = \"high\";\n    HeliusPriorityLevel[\"VERY_HIGH\"] = \"veryHigh\";\n    HeliusPriorityLevel[\"UNSAFE_MAX\"] = \"unsafeMax\";\n})(HeliusPriorityLevel || (exports.HeliusPriorityLevel = HeliusPriorityLevel = {}));\n/// Fetches the priority fee from the Helius API\n/// https://docs.helius.dev/solana-rpc-nodes/alpha-priority-fee-api\nasync function fetchHeliusPriorityFee(heliusRpcUrl, lookbackDistance, addresses) {\n    try {\n        const response = await (0, node_fetch_1.default)(heliusRpcUrl, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                jsonrpc: '2.0',\n                id: '1',\n                method: 'getPriorityFeeEstimate',\n                params: [\n                    {\n                        accountKeys: addresses,\n                        options: {\n                            includeAllPriorityFeeLevels: true,\n                            lookbackSlots: lookbackDistance,\n                        },\n                    },\n                ],\n            }),\n        });\n        return await response.json();\n    }\n    catch (err) {\n        console.error(err);\n    }\n    return undefined;\n}\nexports.fetchHeliusPriorityFee = fetchHeliusPriorityFee;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,sBAAsB,GAAG,QAAQ,mBAAmB,GAAG,KAAK;AACpE,MAAM,eAAe;AACrB,IAAI;AACJ,CAAC,SAAU,mBAAmB;IAC1B,mBAAmB,CAAC,MAAM,GAAG;IAC7B,mBAAmB,CAAC,MAAM,GAAG;IAC7B,mBAAmB,CAAC,SAAS,GAAG;IAChC,mBAAmB,CAAC,OAAO,GAAG;IAC9B,mBAAmB,CAAC,YAAY,GAAG;IACnC,mBAAmB,CAAC,aAAa,GAAG;AACxC,CAAC,EAAE,uBAAuB,CAAC,QAAQ,mBAAmB,GAAG,sBAAsB,CAAC,CAAC;AACjF,gDAAgD;AAChD,mEAAmE;AACnE,eAAe,uBAAuB,YAAY,EAAE,gBAAgB,EAAE,SAAS;IAC3E,IAAI;QACA,MAAM,WAAW,MAAM,CAAC,GAAG,aAAa,OAAO,EAAE,cAAc;YAC3D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACjB,SAAS;gBACT,IAAI;gBACJ,QAAQ;gBACR,QAAQ;oBACJ;wBACI,aAAa;wBACb,SAAS;4BACL,6BAA6B;4BAC7B,eAAe;wBACnB;oBACJ;iBACH;YACL;QACJ;QACA,OAAO,MAAM,SAAS,IAAI;IAC9B,EACA,OAAO,KAAK;QACR,QAAQ,KAAK,CAAC;IAClB;IACA,OAAO;AACX;AACA,QAAQ,sBAAsB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14377, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/driftPriorityFeeMethod.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchDriftPriorityFee = void 0;\nconst node_fetch_1 = __importDefault(require(\"node-fetch\"));\nasync function fetchDriftPriorityFee(url, marketTypes, marketIndexes) {\n    try {\n        const response = await (0, node_fetch_1.default)(`${url}/batchPriorityFees?marketType=${marketTypes.join(',')}&marketIndex=${marketIndexes.join(',')}`);\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        return await response.json();\n    }\n    catch (err) {\n        if (err instanceof Error) {\n            console.error('Error fetching priority fees:', err.message);\n        }\n        else {\n            console.error('Unknown error fetching priority fees:', err);\n        }\n    }\n    return [];\n}\nexports.fetchDriftPriorityFee = fetchDriftPriorityFee;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM,eAAe;AACrB,eAAe,sBAAsB,GAAG,EAAE,WAAW,EAAE,aAAa;IAChE,IAAI;QACA,MAAM,WAAW,MAAM,CAAC,GAAG,aAAa,OAAO,EAAE,GAAG,IAAI,8BAA8B,EAAE,YAAY,IAAI,CAAC,KAAK,aAAa,EAAE,cAAc,IAAI,CAAC,MAAM;QACtJ,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;QAC5D;QACA,OAAO,MAAM,SAAS,IAAI;IAC9B,EACA,OAAO,KAAK;QACR,IAAI,eAAe,OAAO;YACtB,QAAQ,KAAK,CAAC,iCAAiC,IAAI,OAAO;QAC9D,OACK;YACD,QAAQ,KAAK,CAAC,yCAAyC;QAC3D;IACJ;IACA,OAAO,EAAE;AACb;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14408, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/priorityFeeSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PriorityFeeSubscriber = void 0;\nconst types_1 = require(\"./types\");\nconst averageOverSlotsStrategy_1 = require(\"./averageOverSlotsStrategy\");\nconst maxOverSlotsStrategy_1 = require(\"./maxOverSlotsStrategy\");\nconst solanaPriorityFeeMethod_1 = require(\"./solanaPriorityFeeMethod\");\nconst heliusPriorityFeeMethod_1 = require(\"./heliusPriorityFeeMethod\");\nconst driftPriorityFeeMethod_1 = require(\"./driftPriorityFeeMethod\");\nclass PriorityFeeSubscriber {\n    constructor(config) {\n        var _a, _b, _c;\n        this.averageStrategy = new averageOverSlotsStrategy_1.AverageOverSlotsStrategy();\n        this.maxStrategy = new maxOverSlotsStrategy_1.MaxOverSlotsStrategy();\n        this.priorityFeeMethod = types_1.PriorityFeeMethod.SOLANA;\n        this.latestPriorityFee = 0;\n        this.lastCustomStrategyResult = 0;\n        this.lastAvgStrategyResult = 0;\n        this.lastMaxStrategyResult = 0;\n        this.lastSlotSeen = 0;\n        this.connection = config.connection;\n        this.frequencyMs =\n            (_a = config.frequencyMs) !== null && _a !== void 0 ? _a : types_1.DEFAULT_PRIORITY_FEE_MAP_FREQUENCY_MS;\n        this.addresses = config.addresses\n            ? config.addresses.map((address) => address.toBase58())\n            : [];\n        this.driftMarkets = config.driftMarkets;\n        if (config.customStrategy) {\n            this.customStrategy = config.customStrategy;\n        }\n        else {\n            this.customStrategy = this.averageStrategy;\n        }\n        this.lookbackDistance = (_b = config.slotsToCheck) !== null && _b !== void 0 ? _b : 50;\n        if (config.priorityFeeMethod) {\n            this.priorityFeeMethod = config.priorityFeeMethod;\n            if (this.priorityFeeMethod === types_1.PriorityFeeMethod.HELIUS) {\n                if (config.heliusRpcUrl === undefined) {\n                    if (this.connection.rpcEndpoint.includes('helius')) {\n                        this.heliusRpcUrl = this.connection.rpcEndpoint;\n                    }\n                    else {\n                        throw new Error('Connection must be helius, or heliusRpcUrl must be provided to use PriorityFeeMethod.HELIUS');\n                    }\n                }\n                else {\n                    this.heliusRpcUrl = config.heliusRpcUrl;\n                }\n            }\n            else if (this.priorityFeeMethod === types_1.PriorityFeeMethod.DRIFT) {\n                this.driftPriorityFeeEndpoint = config.driftPriorityFeeEndpoint;\n            }\n        }\n        if (this.priorityFeeMethod === types_1.PriorityFeeMethod.SOLANA) {\n            if (this.connection === undefined) {\n                throw new Error('connection must be provided to use SOLANA priority fee API');\n            }\n        }\n        this.maxFeeMicroLamports = config.maxFeeMicroLamports;\n        this.priorityFeeMultiplier = (_c = config.priorityFeeMultiplier) !== null && _c !== void 0 ? _c : 1.0;\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        this.intervalId = setInterval(this.load.bind(this), this.frequencyMs); // we set the intervalId first, preventing a side effect of unsubscribing failing during the race condition where unsubscribes happens before subscribe is finished\n        await this.load();\n    }\n    async loadForSolana() {\n        const samples = await (0, solanaPriorityFeeMethod_1.fetchSolanaPriorityFee)(this.connection, this.lookbackDistance, this.addresses);\n        if (samples.length > 0) {\n            this.latestPriorityFee = samples[0].prioritizationFee;\n            this.lastSlotSeen = samples[0].slot;\n            this.lastAvgStrategyResult = this.averageStrategy.calculate(samples);\n            this.lastMaxStrategyResult = this.maxStrategy.calculate(samples);\n            if (this.customStrategy) {\n                this.lastCustomStrategyResult = this.customStrategy.calculate(samples);\n            }\n        }\n    }\n    async loadForHelius() {\n        var _a, _b;\n        const sample = await (0, heliusPriorityFeeMethod_1.fetchHeliusPriorityFee)(this.heliusRpcUrl, this.lookbackDistance, this.addresses);\n        this.lastHeliusSample = (_b = (_a = sample === null || sample === void 0 ? void 0 : sample.result) === null || _a === void 0 ? void 0 : _a.priorityFeeLevels) !== null && _b !== void 0 ? _b : undefined;\n        if (this.lastHeliusSample) {\n            this.lastAvgStrategyResult =\n                this.lastHeliusSample[heliusPriorityFeeMethod_1.HeliusPriorityLevel.MEDIUM];\n            this.lastMaxStrategyResult =\n                this.lastHeliusSample[heliusPriorityFeeMethod_1.HeliusPriorityLevel.UNSAFE_MAX];\n            if (this.customStrategy) {\n                this.lastCustomStrategyResult = this.customStrategy.calculate(sample);\n            }\n        }\n    }\n    async loadForDrift() {\n        if (!this.driftMarkets) {\n            return;\n        }\n        const sample = await (0, driftPriorityFeeMethod_1.fetchDriftPriorityFee)(this.driftPriorityFeeEndpoint, this.driftMarkets.map((m) => m.marketType), this.driftMarkets.map((m) => m.marketIndex));\n        if (sample.length > 0) {\n            this.lastAvgStrategyResult = sample[heliusPriorityFeeMethod_1.HeliusPriorityLevel.MEDIUM];\n            this.lastMaxStrategyResult = sample[heliusPriorityFeeMethod_1.HeliusPriorityLevel.UNSAFE_MAX];\n            if (this.customStrategy) {\n                this.lastCustomStrategyResult = this.customStrategy.calculate(sample);\n            }\n        }\n    }\n    getMaxPriorityFee() {\n        return this.maxFeeMicroLamports;\n    }\n    updateMaxPriorityFee(newMaxFee) {\n        this.maxFeeMicroLamports = newMaxFee;\n    }\n    getPriorityFeeMultiplier() {\n        var _a;\n        return (_a = this.priorityFeeMultiplier) !== null && _a !== void 0 ? _a : 1.0;\n    }\n    updatePriorityFeeMultiplier(newPriorityFeeMultiplier) {\n        this.priorityFeeMultiplier = newPriorityFeeMultiplier;\n    }\n    updateCustomStrategy(newStrategy) {\n        this.customStrategy = newStrategy;\n    }\n    getHeliusPriorityFeeLevel(level = heliusPriorityFeeMethod_1.HeliusPriorityLevel.MEDIUM) {\n        if (this.lastHeliusSample === undefined) {\n            return 0;\n        }\n        if (this.maxFeeMicroLamports !== undefined) {\n            return Math.min(this.maxFeeMicroLamports, this.lastHeliusSample[level]);\n        }\n        return this.lastHeliusSample[level];\n    }\n    getCustomStrategyResult() {\n        const result = this.lastCustomStrategyResult * this.getPriorityFeeMultiplier();\n        if (this.maxFeeMicroLamports !== undefined) {\n            return Math.min(this.maxFeeMicroLamports, result);\n        }\n        return result;\n    }\n    getAvgStrategyResult() {\n        const result = this.lastAvgStrategyResult * this.getPriorityFeeMultiplier();\n        if (this.maxFeeMicroLamports !== undefined) {\n            return Math.min(this.maxFeeMicroLamports, result);\n        }\n        return result;\n    }\n    getMaxStrategyResult() {\n        const result = this.lastMaxStrategyResult * this.getPriorityFeeMultiplier();\n        if (this.maxFeeMicroLamports !== undefined) {\n            return Math.min(this.maxFeeMicroLamports, result);\n        }\n        return result;\n    }\n    async load() {\n        try {\n            if (this.priorityFeeMethod === types_1.PriorityFeeMethod.SOLANA) {\n                await this.loadForSolana();\n            }\n            else if (this.priorityFeeMethod === types_1.PriorityFeeMethod.HELIUS) {\n                await this.loadForHelius();\n            }\n            else if (this.priorityFeeMethod === types_1.PriorityFeeMethod.DRIFT) {\n                await this.loadForDrift();\n            }\n            else {\n                throw new Error(`${this.priorityFeeMethod} load not implemented`);\n            }\n        }\n        catch (err) {\n            const e = err;\n            console.error(`Error loading priority fee ${this.priorityFeeMethod}: ${e.message}\\n${e.stack ? e.stack : ''}`);\n            return;\n        }\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n    updateAddresses(addresses) {\n        this.addresses = addresses.map((k) => k.toBase58());\n    }\n    updateMarketTypeAndIndex(driftMarkets) {\n        this.driftMarkets = driftMarkets;\n    }\n}\nexports.PriorityFeeSubscriber = PriorityFeeSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,MAAM,CAAE;QAChB,IAAI,IAAI,IAAI;QACZ,IAAI,CAAC,eAAe,GAAG,IAAI,2BAA2B,wBAAwB;QAC9E,IAAI,CAAC,WAAW,GAAG,IAAI,uBAAuB,oBAAoB;QAClE,IAAI,CAAC,iBAAiB,GAAG,QAAQ,iBAAiB,CAAC,MAAM;QACzD,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,wBAAwB,GAAG;QAChC,IAAI,CAAC,qBAAqB,GAAG;QAC7B,IAAI,CAAC,qBAAqB,GAAG;QAC7B,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,UAAU,GAAG,OAAO,UAAU;QACnC,IAAI,CAAC,WAAW,GACZ,CAAC,KAAK,OAAO,WAAW,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,QAAQ,qCAAqC;QAC5G,IAAI,CAAC,SAAS,GAAG,OAAO,SAAS,GAC3B,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,UAAY,QAAQ,QAAQ,MAClD,EAAE;QACR,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY;QACvC,IAAI,OAAO,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,GAAG,OAAO,cAAc;QAC/C,OACK;YACD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe;QAC9C;QACA,IAAI,CAAC,gBAAgB,GAAG,CAAC,KAAK,OAAO,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QACpF,IAAI,OAAO,iBAAiB,EAAE;YAC1B,IAAI,CAAC,iBAAiB,GAAG,OAAO,iBAAiB;YACjD,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,MAAM,EAAE;gBAC7D,IAAI,OAAO,YAAY,KAAK,WAAW;oBACnC,IAAI,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW;wBAChD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW;oBACnD,OACK;wBACD,MAAM,IAAI,MAAM;oBACpB;gBACJ,OACK;oBACD,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY;gBAC3C;YACJ,OACK,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,KAAK,EAAE;gBACjE,IAAI,CAAC,wBAAwB,GAAG,OAAO,wBAAwB;YACnE;QACJ;QACA,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,MAAM,EAAE;YAC7D,IAAI,IAAI,CAAC,UAAU,KAAK,WAAW;gBAC/B,MAAM,IAAI,MAAM;YACpB;QACJ;QACA,IAAI,CAAC,mBAAmB,GAAG,OAAO,mBAAmB;QACrD,IAAI,CAAC,qBAAqB,GAAG,CAAC,KAAK,OAAO,qBAAqB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;IACtG;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB;QACJ;QACA,IAAI,CAAC,UAAU,GAAG,YAAY,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,GAAG,mKAAmK;QAC1O,MAAM,IAAI,CAAC,IAAI;IACnB;IACA,MAAM,gBAAgB;QAClB,MAAM,UAAU,MAAM,CAAC,GAAG,0BAA0B,sBAAsB,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS;QAClI,IAAI,QAAQ,MAAM,GAAG,GAAG;YACpB,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,EAAE,CAAC,iBAAiB;YACrD,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,EAAE,CAAC,IAAI;YACnC,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC;YAC5D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;YACxD,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;YAClE;QACJ;IACJ;IACA,MAAM,gBAAgB;QAClB,IAAI,IAAI;QACR,MAAM,SAAS,MAAM,CAAC,GAAG,0BAA0B,sBAAsB,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,SAAS;QACnI,IAAI,CAAC,gBAAgB,GAAG,CAAC,KAAK,CAAC,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,MAAM,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,iBAAiB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC/L,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,IAAI,CAAC,qBAAqB,GACtB,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,mBAAmB,CAAC,MAAM,CAAC;YAC/E,IAAI,CAAC,qBAAqB,GACtB,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,mBAAmB,CAAC,UAAU,CAAC;YACnF,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;YAClE;QACJ;IACJ;IACA,MAAM,eAAe;QACjB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB;QACJ;QACA,MAAM,SAAS,MAAM,CAAC,GAAG,yBAAyB,qBAAqB,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,WAAW;QAC9L,IAAI,OAAO,MAAM,GAAG,GAAG;YACnB,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,0BAA0B,mBAAmB,CAAC,MAAM,CAAC;YACzF,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,0BAA0B,mBAAmB,CAAC,UAAU,CAAC;YAC7F,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;YAClE;QACJ;IACJ;IACA,oBAAoB;QAChB,OAAO,IAAI,CAAC,mBAAmB;IACnC;IACA,qBAAqB,SAAS,EAAE;QAC5B,IAAI,CAAC,mBAAmB,GAAG;IAC/B;IACA,2BAA2B;QACvB,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,qBAAqB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;IAC9E;IACA,4BAA4B,wBAAwB,EAAE;QAClD,IAAI,CAAC,qBAAqB,GAAG;IACjC;IACA,qBAAqB,WAAW,EAAE;QAC9B,IAAI,CAAC,cAAc,GAAG;IAC1B;IACA,0BAA0B,QAAQ,0BAA0B,mBAAmB,CAAC,MAAM,EAAE;QACpF,IAAI,IAAI,CAAC,gBAAgB,KAAK,WAAW;YACrC,OAAO;QACX;QACA,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW;YACxC,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM;QAC1E;QACA,OAAO,IAAI,CAAC,gBAAgB,CAAC,MAAM;IACvC;IACA,0BAA0B;QACtB,MAAM,SAAS,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,wBAAwB;QAC5E,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW;YACxC,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAC9C;QACA,OAAO;IACX;IACA,uBAAuB;QACnB,MAAM,SAAS,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,wBAAwB;QACzE,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW;YACxC,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAC9C;QACA,OAAO;IACX;IACA,uBAAuB;QACnB,MAAM,SAAS,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,wBAAwB;QACzE,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW;YACxC,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAC9C;QACA,OAAO;IACX;IACA,MAAM,OAAO;QACT,IAAI;YACA,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,MAAM,EAAE;gBAC7D,MAAM,IAAI,CAAC,aAAa;YAC5B,OACK,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,MAAM,EAAE;gBAClE,MAAM,IAAI,CAAC,aAAa;YAC5B,OACK,IAAI,IAAI,CAAC,iBAAiB,KAAK,QAAQ,iBAAiB,CAAC,KAAK,EAAE;gBACjE,MAAM,IAAI,CAAC,YAAY;YAC3B,OACK;gBACD,MAAM,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;YACpE;QACJ,EACA,OAAO,KAAK;YACR,MAAM,IAAI;YACV,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,IAAI,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK,GAAG,EAAE,KAAK,GAAG,IAAI;YAC7G;QACJ;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,cAAc,IAAI,CAAC,UAAU;YAC7B,IAAI,CAAC,UAAU,GAAG;QACtB;IACJ;IACA,gBAAgB,SAAS,EAAE;QACvB,IAAI,CAAC,SAAS,GAAG,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ;IACpD;IACA,yBAAyB,YAAY,EAAE;QACnC,IAAI,CAAC,YAAY,GAAG;IACxB;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14588, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/priorityFeeSubscriberMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PriorityFeeSubscriberMap = void 0;\nconst driftPriorityFeeMethod_1 = require(\"./driftPriorityFeeMethod\");\nconst types_1 = require(\"./types\");\n/**\n * takes advantage of /batchPriorityFees endpoint from drift hosted priority fee service\n */\nclass PriorityFeeSubscriberMap {\n    constructor(config) {\n        var _a;\n        this.frequencyMs = config.frequencyMs;\n        this.frequencyMs =\n            (_a = config.frequencyMs) !== null && _a !== void 0 ? _a : types_1.DEFAULT_PRIORITY_FEE_MAP_FREQUENCY_MS;\n        this.driftPriorityFeeEndpoint = config.driftPriorityFeeEndpoint;\n        this.driftMarkets = config.driftMarkets;\n        this.feesMap = new Map();\n        this.feesMap.set('perp', new Map());\n        this.feesMap.set('spot', new Map());\n    }\n    updateFeesMap(driftPriorityFeeResponse) {\n        driftPriorityFeeResponse.forEach((fee) => {\n            this.feesMap.get(fee.marketType).set(fee.marketIndex, fee);\n        });\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        await this.load();\n        this.intervalId = setInterval(this.load.bind(this), this.frequencyMs);\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n    async load() {\n        try {\n            if (!this.driftMarkets) {\n                return;\n            }\n            const fees = await (0, driftPriorityFeeMethod_1.fetchDriftPriorityFee)(this.driftPriorityFeeEndpoint, this.driftMarkets.map((m) => m.marketType), this.driftMarkets.map((m) => m.marketIndex));\n            this.updateFeesMap(fees);\n        }\n        catch (e) {\n            console.error('Error fetching drift priority fees', e);\n        }\n    }\n    updateMarketTypeAndIndex(driftMarkets) {\n        this.driftMarkets = driftMarkets;\n    }\n    getPriorityFees(marketType, marketIndex) {\n        var _a;\n        return (_a = this.feesMap.get(marketType)) === null || _a === void 0 ? void 0 : _a.get(marketIndex);\n    }\n}\nexports.PriorityFeeSubscriberMap = PriorityFeeSubscriberMap;\n/** Example usage:\nasync function main() {\n    const driftMarkets: DriftMarketInfo[] = [\n        { marketType: 'perp', marketIndex: 0 },\n        { marketType: 'perp', marketIndex: 1 },\n        { marketType: 'spot', marketIndex: 2 }\n    ];\n\n    const subscriber = new PriorityFeeSubscriberMap({\n        driftPriorityFeeEndpoint: 'https://dlob.drift.trade',\n        frequencyMs: 5000,\n        driftMarkets\n    });\n    await subscriber.subscribe();\n\n    for (let i = 0; i < 20; i++) {\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        driftMarkets.forEach(market => {\n            const fees = subscriber.getPriorityFees(market.marketType, market.marketIndex);\n            console.log(`Priority fees for ${market.marketType} market ${market.marketIndex}:`, fees);\n        });\n    }\n\n\n    await subscriber.unsubscribe();\n}\n\nmain().catch(console.error);\n*/\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,KAAK;AACxC,MAAM;AACN,MAAM;AACN;;CAEC,GACD,MAAM;IACF,YAAY,MAAM,CAAE;QAChB,IAAI;QACJ,IAAI,CAAC,WAAW,GAAG,OAAO,WAAW;QACrC,IAAI,CAAC,WAAW,GACZ,CAAC,KAAK,OAAO,WAAW,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,QAAQ,qCAAqC;QAC5G,IAAI,CAAC,wBAAwB,GAAG,OAAO,wBAAwB;QAC/D,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY;QACvC,IAAI,CAAC,OAAO,GAAG,IAAI;QACnB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI;QAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,IAAI;IACjC;IACA,cAAc,wBAAwB,EAAE;QACpC,yBAAyB,OAAO,CAAC,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,UAAU,EAAE,GAAG,CAAC,IAAI,WAAW,EAAE;QAC1D;IACJ;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB;QACJ;QACA,MAAM,IAAI,CAAC,IAAI;QACf,IAAI,CAAC,UAAU,GAAG,YAAY,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW;IACxE;IACA,MAAM,cAAc;QAChB,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,cAAc,IAAI,CAAC,UAAU;YAC7B,IAAI,CAAC,UAAU,GAAG;QACtB;IACJ;IACA,MAAM,OAAO;QACT,IAAI;YACA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB;YACJ;YACA,MAAM,OAAO,MAAM,CAAC,GAAG,yBAAyB,qBAAqB,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,WAAW;YAC5L,IAAI,CAAC,aAAa,CAAC;QACvB,EACA,OAAO,GAAG;YACN,QAAQ,KAAK,CAAC,sCAAsC;QACxD;IACJ;IACA,yBAAyB,YAAY,EAAE;QACnC,IAAI,CAAC,YAAY,GAAG;IACxB;IACA,gBAAgB,UAAU,EAAE,WAAW,EAAE;QACrC,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,GAAG,CAAC;IAC3F;AACJ;AACA,QAAQ,wBAAwB,GAAG,0BACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA","ignoreList":[0]}},
    {"offset": {"line": 14677, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/priorityFee/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./averageOverSlotsStrategy\"), exports);\n__exportStar(require(\"./averageStrategy\"), exports);\n__exportStar(require(\"./ewmaStrategy\"), exports);\n__exportStar(require(\"./maxOverSlotsStrategy\"), exports);\n__exportStar(require(\"./maxStrategy\"), exports);\n__exportStar(require(\"./priorityFeeSubscriber\"), exports);\n__exportStar(require(\"./priorityFeeSubscriberMap\"), exports);\n__exportStar(require(\"./solanaPriorityFeeMethod\"), exports);\n__exportStar(require(\"./heliusPriorityFeeMethod\"), exports);\n__exportStar(require(\"./driftPriorityFeeMethod\"), exports);\n__exportStar(require(\"./types\"), exports);\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,mTAAoD;AACpD,0SAA2C;AAC3C,uSAAwC;AACxC,+SAAgD;AAChD,sSAAuC;AACvC,gTAAiD;AACjD,mTAAoD;AACpD,kTAAmD;AACnD,kTAAmD;AACnD,iTAAkD;AAClD,gSAAiC","ignoreList":[0]}},
    {"offset": {"line": 14714, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/openbook/openbookV2Subscriber.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OpenbookV2Subscriber = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst openbook_v2_1 = require(\"@openbook-dex/openbook-v2\");\nconst openbook_json_1 = __importDefault(require(\"../idl/openbook.json\"));\nclass OpenbookV2Subscriber {\n    constructor(config) {\n        this.connection = config.connection;\n        this.programId = config.programId;\n        this.marketAddress = config.marketAddress;\n        this.subscribed = false;\n        if (config.accountSubscription.type === 'polling') {\n            this.subscriptionType = 'polling';\n            this.accountLoader = config.accountSubscription.accountLoader;\n        }\n        else {\n            this.subscriptionType = 'websocket';\n        }\n    }\n    async subscribe() {\n        if (this.subscribed === true) {\n            return;\n        }\n        const anchorProvider = new anchor_1.AnchorProvider(this.connection, new anchor_1.Wallet(web3_js_1.Keypair.generate()), {});\n        const openbookV2Program = new anchor_1.Program(openbook_json_1.default, this.programId, anchorProvider);\n        this.client = new openbook_v2_1.OpenBookV2Client(anchorProvider);\n        const market = await openbook_v2_1.Market.load(this.client, this.marketAddress);\n        this.market = await market.loadOrderBook();\n        if (this.subscriptionType === 'websocket') {\n            this.marketCallbackId = this.connection.onAccountChange(this.marketAddress, async (accountInfo, _) => {\n                const marketRaw = openbookV2Program.coder.accounts.decode('Market', accountInfo.data);\n                const market = new openbook_v2_1.Market(this.client, this.marketAddress, marketRaw);\n                await market.loadOrderBook();\n                this.market = market;\n            });\n        }\n        else {\n            this.marketCallbackId = await this.accountLoader.addAccount(this.marketAddress, async (buffer, _) => {\n                const marketRaw = openbookV2Program.coder.accounts.decode('Market', buffer);\n                const market = new openbook_v2_1.Market(this.client, this.marketAddress, marketRaw);\n                await market.loadOrderBook();\n                this.market = market;\n            });\n        }\n        this.subscribed = true;\n    }\n    getBestBid() {\n        var _a;\n        const bestBid = (_a = this.market.bids) === null || _a === void 0 ? void 0 : _a.best();\n        if (bestBid === undefined) {\n            return undefined;\n        }\n        return this.convertPriceInLotsToPricePrecision(bestBid.priceLots);\n    }\n    getBestAsk() {\n        var _a;\n        const bestAsk = (_a = this.market.asks) === null || _a === void 0 ? void 0 : _a.best();\n        if (bestAsk === undefined) {\n            return undefined;\n        }\n        return this.convertPriceInLotsToPricePrecision(bestAsk.priceLots);\n    }\n    getL2Bids() {\n        return this.getL2Levels('bids');\n    }\n    getL2Asks() {\n        return this.getL2Levels('asks');\n    }\n    convertSizeInBaseLotsToMarketPrecision(sizeInLots) {\n        return sizeInLots.mul(this.market.account.baseLotSize);\n    }\n    convertPriceInLotsToPricePrecision(priceInLots) {\n        const adjPrice = priceInLots\n            .mul(numericConstants_1.PRICE_PRECISION)\n            .muln(10 **\n            (this.market.account.baseDecimals - this.market.account.quoteDecimals))\n            .mul(this.market.account.quoteLotSize)\n            .div(this.market.account.baseLotSize);\n        return adjPrice;\n    }\n    *getL2Levels(side) {\n        var _a;\n        const levels = side === 'bids' ? this.market.bids : this.market.asks;\n        for (const order of (_a = levels === null || levels === void 0 ? void 0 : levels.items()) !== null && _a !== void 0 ? _a : []) {\n            const size = this.convertSizeInBaseLotsToMarketPrecision(order.sizeLots);\n            const price = this.convertPriceInLotsToPricePrecision(order.priceLots);\n            yield {\n                price,\n                size,\n                sources: {\n                    openbook: size,\n                },\n            };\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscribed) {\n            return;\n        }\n        if (this.subscriptionType === 'websocket') {\n            await this.connection.removeAccountChangeListener(this.marketCallbackId);\n        }\n        else {\n            this.accountLoader.removeAccount(this.marketAddress, this.marketCallbackId);\n        }\n        this.subscribed = false;\n    }\n}\nexports.OpenbookV2Subscriber = OpenbookV2Subscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14828, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/openbook/openbookV2FulfillmentConfigMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OpenbookV2FulfillmentConfigMap = void 0;\nclass OpenbookV2FulfillmentConfigMap {\n    constructor(driftClient) {\n        this.map = new Map();\n        this.driftClient = driftClient;\n    }\n    async add(marketIndex, openbookV2MarketAddress) {\n        const account = await this.driftClient.getOpenbookV2FulfillmentConfig(openbookV2MarketAddress);\n        this.map.set(marketIndex, account);\n    }\n    get(marketIndex) {\n        return this.map.get(marketIndex);\n    }\n}\nexports.OpenbookV2FulfillmentConfigMap = OpenbookV2FulfillmentConfigMap;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,8BAA8B,GAAG,KAAK;AAC9C,MAAM;IACF,YAAY,WAAW,CAAE;QACrB,IAAI,CAAC,GAAG,GAAG,IAAI;QACf,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,IAAI,WAAW,EAAE,uBAAuB,EAAE;QAC5C,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,CAAC,8BAA8B,CAAC;QACtE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa;IAC9B;IACA,IAAI,WAAW,EAAE;QACb,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;IACxB;AACJ;AACA,QAAQ,8BAA8B,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14850, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/swift/swiftOrderSubscriber.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SwiftOrderSubscriber = void 0;\nconst perpMarkets_1 = require(\"../constants/perpMarkets\");\nconst pda_1 = require(\"../addresses/pda\");\nconst types_1 = require(\"../types\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst tweetnacl_util_1 = require(\"tweetnacl-util\");\nconst ws_1 = __importDefault(require(\"ws\"));\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nclass SwiftOrderSubscriber {\n    constructor(config) {\n        this.config = config;\n        this.heartbeatTimeout = null;\n        this.heartbeatIntervalMs = 60000;\n        this.ws = null;\n        this.subscribed = false;\n        this.driftClient = config.driftClient;\n        this.userAccountGetter = config.userAccountGetter;\n    }\n    unsubscribe() {\n        if (this.subscribed) {\n            this.ws.removeAllListeners();\n            this.ws.terminate();\n            this.ws = null;\n            this.subscribed = false;\n        }\n    }\n    getSymbolForMarketIndex(marketIndex) {\n        const markets = this.config.driftEnv === 'devnet'\n            ? perpMarkets_1.DevnetPerpMarkets\n            : perpMarkets_1.MainnetPerpMarkets;\n        return markets[marketIndex].symbol;\n    }\n    generateChallengeResponse(nonce) {\n        const messageBytes = (0, tweetnacl_util_1.decodeUTF8)(nonce);\n        const signature = tweetnacl_1.default.sign.detached(messageBytes, this.config.keypair.secretKey);\n        const signatureBase64 = Buffer.from(signature).toString('base64');\n        return signatureBase64;\n    }\n    handleAuthMessage(message) {\n        var _a, _b;\n        if (message['channel'] === 'auth' && message['nonce'] != null) {\n            const signatureBase64 = this.generateChallengeResponse(message['nonce']);\n            (_a = this.ws) === null || _a === void 0 ? void 0 : _a.send(JSON.stringify({\n                pubkey: this.config.keypair.publicKey.toBase58(),\n                signature: signatureBase64,\n            }));\n        }\n        if (message['channel'] === 'auth' &&\n            ((_b = message['message']) === null || _b === void 0 ? void 0 : _b.toLowerCase()) === 'authenticated') {\n            this.subscribed = true;\n            this.config.marketIndexes.forEach(async (marketIndex) => {\n                var _a;\n                (_a = this.ws) === null || _a === void 0 ? void 0 : _a.send(JSON.stringify({\n                    action: 'subscribe',\n                    market_type: 'perp',\n                    market_name: this.getSymbolForMarketIndex(marketIndex),\n                }));\n                await new Promise((resolve) => setTimeout(resolve, 100));\n            });\n        }\n    }\n    async subscribe(onOrder, acceptSanitized = false, acceptDepositTrade = false) {\n        this.onOrder = onOrder;\n        const endpoint = this.config.endpoint || this.config.driftEnv === 'devnet'\n            ? 'wss://master.swift.drift.trade/ws'\n            : 'wss://swift.drift.trade/ws';\n        const ws = new ws_1.default(endpoint + '?pubkey=' + this.config.keypair.publicKey.toBase58());\n        this.ws = ws;\n        ws.on('open', async () => {\n            console.log('Connected to the server');\n            ws.on('message', async (data) => {\n                const message = JSON.parse(data.toString());\n                this.startHeartbeatTimer();\n                if (message['channel'] === 'auth') {\n                    this.handleAuthMessage(message);\n                }\n                if (message['order']) {\n                    const order = message['order'];\n                    // ignore likely sanitized orders by default\n                    if (order.will_sanitize === true && !acceptSanitized) {\n                        return;\n                    }\n                    // order has a prerequisite deposit tx attached\n                    if (message['deposit']) {\n                        order.depositTx = message['deposit'];\n                        if (!acceptDepositTrade) {\n                            return;\n                        }\n                    }\n                    const signedMsgOrderParamsBuf = Buffer.from(order.order_message, 'hex');\n                    const isDelegateSigner = signedMsgOrderParamsBuf\n                        .slice(0, 8)\n                        .equals(Uint8Array.from(Buffer.from((0, sha256_1.sha256)('global' + ':' + 'SignedMsgOrderParamsDelegateMessage')).slice(0, 8)));\n                    const signedMessage = this.driftClient.decodeSignedMsgOrderParamsMessage(signedMsgOrderParamsBuf, isDelegateSigner);\n                    if (!signedMessage.signedMsgOrderParams.price) {\n                        console.error(`order has no price: ${JSON.stringify(signedMessage.signedMsgOrderParams)}`);\n                        return;\n                    }\n                    onOrder(order, signedMessage, isDelegateSigner);\n                }\n            });\n            ws.on('close', () => {\n                console.log('Disconnected from the server');\n                this.reconnect();\n            });\n            ws.on('error', (error) => {\n                console.error('WebSocket error:', error);\n                this.reconnect();\n            });\n        });\n        ws.on('unexpected-response', async (request, response) => {\n            console.error('Unexpected response, reconnecting in 5s:', response.statusCode);\n            setTimeout(() => {\n                if (this.heartbeatTimeout)\n                    clearTimeout(this.heartbeatTimeout);\n                this.reconnect();\n            }, 5000);\n        });\n        ws.on('error', async (request, response) => {\n            console.error('WS closed from error, reconnecting in 1s:', response.statusCode);\n            setTimeout(() => {\n                if (this.heartbeatTimeout)\n                    clearTimeout(this.heartbeatTimeout);\n                this.reconnect();\n            }, 1000);\n        });\n    }\n    async getPlaceAndMakeSignedMsgOrderIxs(orderMessageRaw, signedMsgOrderParamsMessage, makerOrderParams) {\n        if (!this.userAccountGetter) {\n            throw new Error('userAccountGetter must be set to use this function');\n        }\n        const signedMsgOrderParamsBuf = Buffer.from(orderMessageRaw.order_message, 'hex');\n        const isDelegateSigner = signedMsgOrderParamsBuf\n            .slice(0, 8)\n            .equals(Uint8Array.from(Buffer.from((0, sha256_1.sha256)('global' + ':' + 'SignedMsgOrderParamsDelegateMessage')).slice(0, 8)));\n        const signedMessage = this.driftClient.decodeSignedMsgOrderParamsMessage(signedMsgOrderParamsBuf, isDelegateSigner);\n        const takerAuthority = new web3_js_1.PublicKey(orderMessageRaw.taker_authority);\n        const signingAuthority = new web3_js_1.PublicKey(orderMessageRaw.signing_authority);\n        const takerUserPubkey = isDelegateSigner\n            ? signedMessage.takerPubkey\n            : await (0, pda_1.getUserAccountPublicKey)(this.driftClient.program.programId, takerAuthority, signedMessage.subAccountId);\n        const takerUserAccount = await this.userAccountGetter.mustGetUserAccount(takerUserPubkey.toString());\n        const ixs = await this.driftClient.getPlaceAndMakeSignedMsgPerpOrderIxs({\n            orderParams: signedMsgOrderParamsBuf,\n            signature: Buffer.from(orderMessageRaw.order_signature, 'base64'),\n        }, (0, tweetnacl_util_1.decodeUTF8)(orderMessageRaw.uuid), {\n            taker: takerUserPubkey,\n            takerUserAccount,\n            takerStats: (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, takerUserAccount.authority),\n            signingAuthority: signingAuthority,\n        }, Object.assign({}, makerOrderParams, {\n            postOnly: types_1.PostOnlyParams.MUST_POST_ONLY,\n            immediateOrCancel: true,\n            marketType: types_1.MarketType.PERP,\n        }));\n        return ixs;\n    }\n    startHeartbeatTimer() {\n        if (this.heartbeatTimeout) {\n            clearTimeout(this.heartbeatTimeout);\n        }\n        if (!this.onOrder) {\n            throw new Error('onOrder callback function must be set');\n        }\n        this.heartbeatTimeout = setTimeout(() => {\n            console.warn('No heartbeat received within 30 seconds, reconnecting...');\n            this.reconnect();\n        }, this.heartbeatIntervalMs);\n    }\n    reconnect() {\n        if (this.ws) {\n            this.ws.removeAllListeners();\n            this.ws.terminate();\n        }\n        console.log('Reconnecting to WebSocket...');\n        setTimeout(() => {\n            this.subscribe(this.onOrder);\n        }, 1000);\n    }\n}\nexports.SwiftOrderSubscriber = SwiftOrderSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15031, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/swift/signedMsgUserAccountSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignedMsgUserOrdersAccountSubscriber = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst webSocketProgramAccountSubscriber_1 = require(\"../accounts/webSocketProgramAccountSubscriber\");\nconst events_1 = require(\"events\");\nclass SignedMsgUserOrdersAccountSubscriber {\n    constructor({ driftClient, commitment, resubOpts, decodeFn, resyncIntervalMs, }) {\n        this.signedMsgUserOrderAccounts = new Map();\n        this.commitment = commitment !== null && commitment !== void 0 ? commitment : 'confirmed';\n        this.resubOpts = resubOpts;\n        this.driftClient = driftClient;\n        this.decodeFn =\n            decodeFn !== null && decodeFn !== void 0 ? decodeFn : this.driftClient.program.account.signedMsgUserOrders.coder.accounts.decodeUnchecked.bind(this.driftClient.program.account.signedMsgUserOrders.coder.accounts);\n        this.resyncIntervalMs = resyncIntervalMs;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubOpts = resubOpts;\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            const filters = [(0, memcmp_1.getSignedMsgUserOrdersFilter)()];\n            this.subscriber =\n                new webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber('SingedMsgUserOrdersAccountMap', 'SignedMsgUserOrders', this.driftClient.program, this.decodeFn, {\n                    filters,\n                    commitment: this.commitment,\n                }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((_accountId, account, context) => {\n            this.tryUpdateSignedMsgUserOrdersAccount(account, 'decoded', context.slot);\n        });\n        await this.fetch();\n        if (this.resyncIntervalMs) {\n            const recursiveResync = () => {\n                this.resyncTimeoutId = setTimeout(() => {\n                    this.fetch()\n                        .catch((e) => {\n                        console.error('Failed to resync in OrderSubscriber');\n                        console.log(e);\n                    })\n                        .finally(() => {\n                        if (!this.resyncTimeoutId)\n                            return;\n                        recursiveResync();\n                    });\n                }, this.resyncIntervalMs);\n            };\n            recursiveResync();\n        }\n    }\n    async fetch() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        this.fetchPromise = new Promise((resolver) => {\n            this.fetchPromiseResolver = resolver;\n        });\n        const skipEventEmitting = this.signedMsgUserOrderAccounts.size === 0;\n        try {\n            const rpcResponseAndContext = await this.driftClient.connection.getProgramAccounts(this.driftClient.program.programId, {\n                commitment: this.commitment,\n                filters: [(0, memcmp_1.getSignedMsgUserOrdersFilter)()],\n                encoding: 'base64',\n                withContext: true,\n            });\n            const slot = rpcResponseAndContext.context.slot;\n            for (const programAccount of rpcResponseAndContext.value) {\n                this.tryUpdateSignedMsgUserOrdersAccount(programAccount.account.data, 'buffer', slot, skipEventEmitting);\n                await new Promise((resolve) => setTimeout(resolve, 0));\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n        finally {\n            this.fetchPromiseResolver();\n            this.fetchPromise = undefined;\n        }\n    }\n    tryUpdateSignedMsgUserOrdersAccount(data, dataType, slot, skipEventEmitting = false) {\n        var _a;\n        if (!this.mostRecentSlot || slot > this.mostRecentSlot) {\n            this.mostRecentSlot = slot;\n        }\n        const signedMsgUserOrdersAccount = dataType === 'buffer'\n            ? this.decodeFn('SignedMsgUserOrders', data)\n            : data;\n        const key = signedMsgUserOrdersAccount.authorityPubkey.toBase58();\n        const slotAndSignedMsgUserOrdersAccount = this.signedMsgUserOrderAccounts.get(key);\n        if (!slotAndSignedMsgUserOrdersAccount ||\n            slotAndSignedMsgUserOrdersAccount.slot <= slot) {\n            if (!skipEventEmitting) {\n                this.eventEmitter.emit('onAccountUpdate', signedMsgUserOrdersAccount.signedMsgOrderData.filter((signedMsgOrderId) => signedMsgOrderId.orderId !== 0), signedMsgUserOrdersAccount.authorityPubkey, slot);\n            }\n            const existingSignedMsgOrderIds = (_a = slotAndSignedMsgUserOrdersAccount === null || slotAndSignedMsgUserOrdersAccount === void 0 ? void 0 : slotAndSignedMsgUserOrdersAccount.signedMsgUserOrdersAccount.signedMsgOrderData.map((signedMsgOrderId) => signedMsgOrderId.orderId)) !== null && _a !== void 0 ? _a : [];\n            const newSignedMsgOrderIds = signedMsgUserOrdersAccount.signedMsgOrderData.filter((signedMsgOrderId) => !existingSignedMsgOrderIds.includes(signedMsgOrderId.orderId) &&\n                signedMsgOrderId.orderId !== 0);\n            if (newSignedMsgOrderIds.length > 0 && !skipEventEmitting) {\n                this.eventEmitter.emit('newSignedMsgOrderIds', newSignedMsgOrderIds, signedMsgUserOrdersAccount.authorityPubkey, slot);\n            }\n            this.signedMsgUserOrderAccounts.set(key, {\n                slot,\n                signedMsgUserOrdersAccount,\n            });\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n        if (this.resyncTimeoutId !== undefined) {\n            clearTimeout(this.resyncTimeoutId);\n            this.resyncTimeoutId = undefined;\n        }\n    }\n}\nexports.SignedMsgUserOrdersAccountSubscriber = SignedMsgUserOrdersAccountSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15145, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/swift/grpcSignedMsgUserAccountSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.grpcSignedMsgUserOrdersAccountSubscriber = void 0;\nconst grpcProgramAccountSubscriber_1 = require(\"../accounts/grpcProgramAccountSubscriber\");\nconst memcmp_1 = require(\"../memcmp\");\nconst signedMsgUserAccountSubscriber_1 = require(\"./signedMsgUserAccountSubscriber\");\nclass grpcSignedMsgUserOrdersAccountSubscriber extends signedMsgUserAccountSubscriber_1.SignedMsgUserOrdersAccountSubscriber {\n    constructor({ grpcConfigs, driftClient, commitment, resubOpts, decodeFn, resyncIntervalMs, }) {\n        super({\n            driftClient,\n            commitment,\n            resubOpts,\n            decodeFn,\n            resyncIntervalMs,\n        });\n        this.grpcConfigs = grpcConfigs;\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            this.subscriber =\n                await grpcProgramAccountSubscriber_1.grpcProgramAccountSubscriber.create(this.grpcConfigs, 'SingedMsgUserOrdersAccountMap', 'SignedMsgUserOrders', this.driftClient.program, this.decodeFn, {\n                    filters: [(0, memcmp_1.getSignedMsgUserOrdersFilter)()],\n                }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((_accountId, account, context) => {\n            this.tryUpdateSignedMsgUserOrdersAccount(account, 'decoded', context.slot);\n        });\n        if (this.resyncIntervalMs) {\n            const recursiveResync = () => {\n                this.resyncTimeoutId = setTimeout(() => {\n                    this.fetch()\n                        .catch((e) => {\n                        console.error('Failed to resync in OrderSubscriber');\n                        console.log(e);\n                    })\n                        .finally(() => {\n                        if (!this.resyncTimeoutId)\n                            return;\n                        recursiveResync();\n                    });\n                }, this.resyncIntervalMs);\n            };\n            recursiveResync();\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n        if (this.resyncTimeoutId !== undefined) {\n            clearTimeout(this.resyncTimeoutId);\n            this.resyncTimeoutId = undefined;\n        }\n    }\n}\nexports.grpcSignedMsgUserOrdersAccountSubscriber = grpcSignedMsgUserOrdersAccountSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wCAAwC,GAAG,KAAK;AACxD,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,iDAAiD,iCAAiC,oCAAoC;IACxH,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,gBAAgB,EAAG,CAAE;QAC1F,KAAK,CAAC;YACF;YACA;YACA;YACA;YACA;QACJ;QACA,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,YAAY;QACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,IAAI,CAAC,UAAU,GACX,MAAM,+BAA+B,4BAA4B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,iCAAiC,uBAAuB,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE;gBACxL,SAAS;oBAAC,CAAC,GAAG,SAAS,4BAA4B;iBAAI;YAC3D,GAAG,IAAI,CAAC,SAAS;QACzB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,YAAY,SAAS;YAClD,IAAI,CAAC,mCAAmC,CAAC,SAAS,WAAW,QAAQ,IAAI;QAC7E;QACA,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,MAAM,kBAAkB;gBACpB,IAAI,CAAC,eAAe,GAAG,WAAW;oBAC9B,IAAI,CAAC,KAAK,GACL,KAAK,CAAC,CAAC;wBACR,QAAQ,KAAK,CAAC;wBACd,QAAQ,GAAG,CAAC;oBAChB,GACK,OAAO,CAAC;wBACT,IAAI,CAAC,IAAI,CAAC,eAAe,EACrB;wBACJ;oBACJ;gBACJ,GAAG,IAAI,CAAC,gBAAgB;YAC5B;YACA;QACJ;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAChB;QACJ,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW;QACjC,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACpC,aAAa,IAAI,CAAC,eAAe;YACjC,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,wCAAwC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 15204, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/driftClientConfig.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 15211, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/DLOBNode.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNode = exports.SignedMsgOrderNode = exports.TriggerOrderNode = exports.MarketOrderNode = exports.FloatingLimitOrderNode = exports.RestingLimitOrderNode = exports.TakingLimitOrderNode = exports.OrderNode = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst orders_1 = require(\"../math/orders\");\nconst types_1 = require(\"../types\");\nconst conversion_1 = require(\"../math/conversion\");\nconst NodeList_1 = require(\"./NodeList\");\nclass OrderNode {\n    constructor(order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount, isSignedMsg = false) {\n        this.haveFilled = false;\n        this.haveTrigger = false;\n        // Copy the order over to the node\n        this.order = { ...order };\n        this.userAccount = userAccount;\n        this.sortValue = this.getSortValue(order);\n        this.isProtectedMaker = isProtectedMaker;\n        this.protectedMakerParams = protectedMakerParams;\n        this.baseAssetAmount = baseAssetAmount !== null && baseAssetAmount !== void 0 ? baseAssetAmount : order.baseAssetAmount;\n        this.isSignedMsg = isSignedMsg;\n    }\n    getLabel() {\n        let msg = `Order ${(0, NodeList_1.getOrderSignature)(this.order.orderId, this.userAccount)}`;\n        msg += ` ${(0, types_1.isVariant)(this.order.direction, 'long') ? 'LONG' : 'SHORT'} `;\n        msg += `${(0, conversion_1.convertToNumber)(this.order.baseAssetAmount, numericConstants_1.AMM_RESERVE_PRECISION).toFixed(3)}`;\n        if (this.order.price.gt(numericConstants_1.ZERO)) {\n            msg += ` @ ${(0, conversion_1.convertToNumber)(this.order.price, numericConstants_1.PRICE_PRECISION).toFixed(3)}`;\n        }\n        if (this.order.triggerPrice.gt(numericConstants_1.ZERO)) {\n            msg += ` ${(0, types_1.isVariant)(this.order.triggerCondition, 'below') ? 'BELOW' : 'ABOVE'}`;\n            msg += ` ${(0, conversion_1.convertToNumber)(this.order.triggerPrice, numericConstants_1.PRICE_PRECISION).toFixed(3)}`;\n        }\n        return msg;\n    }\n    getPrice(oraclePriceData, slot) {\n        return (0, orders_1.getLimitPrice)(this.order, oraclePriceData, slot, undefined, this.isProtectedMaker ? this.protectedMakerParams : undefined);\n    }\n    isBaseFilled() {\n        return this.order.baseAssetAmountFilled.eq(this.order.baseAssetAmount);\n    }\n    isVammNode() {\n        return false;\n    }\n}\nexports.OrderNode = OrderNode;\nclass TakingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.slot;\n    }\n}\nexports.TakingLimitOrderNode = TakingLimitOrderNode;\nclass RestingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        let sortValue = order.price;\n        if (this.protectedMakerParams && this.isProtectedMaker) {\n            const offset = sortValue.divn(1000);\n            if ((0, types_1.isVariant)(order.direction, 'long')) {\n                sortValue = sortValue.sub(offset);\n            }\n            else {\n                sortValue = sortValue.add(offset);\n            }\n        }\n        return sortValue;\n    }\n}\nexports.RestingLimitOrderNode = RestingLimitOrderNode;\nclass FloatingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        return new anchor_1.BN(order.oraclePriceOffset);\n    }\n}\nexports.FloatingLimitOrderNode = FloatingLimitOrderNode;\nclass MarketOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.slot;\n    }\n}\nexports.MarketOrderNode = MarketOrderNode;\nclass TriggerOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.triggerPrice;\n    }\n}\nexports.TriggerOrderNode = TriggerOrderNode;\n// We'll use the signedMsg uuid for the order id since it's not yet on-chain\nclass SignedMsgOrderNode extends OrderNode {\n    constructor(order, userAccount, baseAssetAmount) {\n        super(order, userAccount, false, undefined, baseAssetAmount, true);\n    }\n    getSortValue(order) {\n        return order.slot;\n    }\n}\nexports.SignedMsgOrderNode = SignedMsgOrderNode;\nfunction createNode(nodeType, order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount) {\n    switch (nodeType) {\n        case 'floatingLimit':\n            return new FloatingLimitOrderNode(order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount);\n        case 'protectedFloatingLimit':\n            return new FloatingLimitOrderNode(order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount);\n        case 'restingLimit':\n            return new RestingLimitOrderNode(order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount);\n        case 'takingLimit':\n            return new TakingLimitOrderNode(order, userAccount, isProtectedMaker, protectedMakerParams, baseAssetAmount);\n        case 'market':\n            return new MarketOrderNode(order, userAccount, isProtectedMaker, undefined, baseAssetAmount);\n        case 'trigger':\n            return new TriggerOrderNode(order, userAccount, isProtectedMaker, undefined, baseAssetAmount);\n        case 'signedMsg':\n            return new SignedMsgOrderNode(order, userAccount, baseAssetAmount);\n        default:\n            throw Error(`Unknown DLOBNode type ${nodeType}`);\n    }\n}\nexports.createNode = createNode;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15334, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/NodeList.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeList = exports.getOrderSignature = void 0;\nconst types_1 = require(\"../types\");\nconst DLOBNode_1 = require(\"./DLOBNode\");\nfunction getOrderSignature(orderId, userAccount) {\n    return `${userAccount.toString()}-${orderId.toString()}`;\n}\nexports.getOrderSignature = getOrderSignature;\nclass NodeList {\n    constructor(nodeType, sortDirection) {\n        this.nodeType = nodeType;\n        this.sortDirection = sortDirection;\n        this.length = 0;\n        this.nodeMap = new Map();\n    }\n    clear() {\n        this.head = undefined;\n        this.length = 0;\n        this.nodeMap.clear();\n    }\n    insert(order, marketType, userAccount, isProtectedMaker, protectedMakerParamsMap, baseAssetAmount) {\n        if (!(0, types_1.isVariant)(order.status, 'open')) {\n            return;\n        }\n        const newNode = (0, DLOBNode_1.createNode)(this.nodeType, order, userAccount, isProtectedMaker, protectedMakerParamsMap, baseAssetAmount);\n        const orderSignature = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderSignature)) {\n            return;\n        }\n        this.nodeMap.set(orderSignature, newNode);\n        this.length += 1;\n        if (this.head === undefined) {\n            this.head = newNode;\n            return;\n        }\n        if (this.prependNode(this.head, newNode)) {\n            this.head.previous = newNode;\n            newNode.next = this.head;\n            this.head = newNode;\n            return;\n        }\n        let currentNode = this.head;\n        while (currentNode.next !== undefined &&\n            !this.prependNode(currentNode.next, newNode)) {\n            currentNode = currentNode.next;\n        }\n        newNode.next = currentNode.next;\n        if (currentNode.next !== undefined) {\n            newNode.next.previous = newNode;\n        }\n        currentNode.next = newNode;\n        newNode.previous = currentNode;\n    }\n    prependNode(currentNode, newNode) {\n        const currentOrder = currentNode.order;\n        const newOrder = newNode.order;\n        const currentOrderSortPrice = currentNode.sortValue;\n        const newOrderSortPrice = newNode.sortValue;\n        if (newOrderSortPrice.eq(currentOrderSortPrice)) {\n            return newOrder.slot.lt(currentOrder.slot);\n        }\n        if (this.sortDirection === 'asc') {\n            return newOrderSortPrice.lt(currentOrderSortPrice);\n        }\n        else {\n            return newOrderSortPrice.gt(currentOrderSortPrice);\n        }\n    }\n    update(order, userAccount) {\n        const orderId = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderId)) {\n            const node = this.nodeMap.get(orderId);\n            Object.assign(node.order, order);\n            node.haveFilled = false;\n        }\n    }\n    remove(order, userAccount) {\n        const orderId = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderId)) {\n            const node = this.nodeMap.get(orderId);\n            if (node.next) {\n                node.next.previous = node.previous;\n            }\n            if (node.previous) {\n                node.previous.next = node.next;\n            }\n            if (this.head && node.order.orderId === this.head.order.orderId) {\n                this.head = node.next;\n            }\n            node.previous = undefined;\n            node.next = undefined;\n            this.nodeMap.delete(orderId);\n            this.length--;\n        }\n    }\n    *getGenerator() {\n        let node = this.head;\n        while (node !== undefined) {\n            yield node;\n            node = node.next;\n        }\n    }\n    has(order, userAccount) {\n        return this.nodeMap.has(getOrderSignature(order.orderId, userAccount));\n    }\n    get(orderSignature) {\n        return this.nodeMap.get(orderSignature);\n    }\n    print() {\n        let currentNode = this.head;\n        while (currentNode !== undefined) {\n            console.log(currentNode.getLabel());\n            currentNode = currentNode.next;\n        }\n    }\n    printTop() {\n        if (this.head) {\n            console.log(this.sortDirection.toUpperCase(), this.head.getLabel());\n        }\n        else {\n            console.log('---');\n        }\n    }\n}\nexports.NodeList = NodeList;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15462, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/orderBookLevels.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uncrossL2 = exports.groupL2 = exports.getVammL2Generator = exports.createL2Levels = exports.mergeL2LevelGenerators = exports.getL2GeneratorFromDLOBNodes = exports.MAJORS_TOP_OF_BOOK_QUOTE_AMOUNTS = exports.DEFAULT_TOP_OF_BOOK_QUOTE_AMOUNTS = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst amm_1 = require(\"../math/amm\");\nconst exchangeStatus_1 = require(\"../math/exchangeStatus\");\nconst types_1 = require(\"../types\");\nconst orders_1 = require(\"../math/orders\");\nexports.DEFAULT_TOP_OF_BOOK_QUOTE_AMOUNTS = [\n    new anchor_1.BN(500).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(1000).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(2000).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(5000).mul(numericConstants_1.QUOTE_PRECISION),\n];\nexports.MAJORS_TOP_OF_BOOK_QUOTE_AMOUNTS = [\n    new anchor_1.BN(5000).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(10000).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(20000).mul(numericConstants_1.QUOTE_PRECISION),\n    new anchor_1.BN(50000).mul(numericConstants_1.QUOTE_PRECISION),\n];\nconst INDICATIVE_QUOTES_PUBKEY = 'inDNdu3ML4vG5LNExqcwuCQtLcCU8KfK5YM2qYV3JJz';\n/**\n * Get an {@link Generator<L2Level>} generator from a {@link Generator<DLOBNode>}\n * @param dlobNodes e.g. {@link DLOB#getRestingLimitAsks} or {@link DLOB#getRestingLimitBids}\n * @param oraclePriceData\n * @param slot\n */\nfunction* getL2GeneratorFromDLOBNodes(dlobNodes, oraclePriceData, slot) {\n    for (const dlobNode of dlobNodes) {\n        const size = dlobNode.baseAssetAmount.sub(dlobNode.order.baseAssetAmountFilled);\n        if (size.lte(numericConstants_1.ZERO)) {\n            continue;\n        }\n        yield {\n            size,\n            price: dlobNode.getPrice(oraclePriceData, slot),\n            sources: dlobNode.userAccount == INDICATIVE_QUOTES_PUBKEY\n                ? { indicative: size }\n                : {\n                    dlob: size,\n                },\n        };\n    }\n}\nexports.getL2GeneratorFromDLOBNodes = getL2GeneratorFromDLOBNodes;\nfunction* mergeL2LevelGenerators(l2LevelGenerators, compare) {\n    const generators = l2LevelGenerators.map((generator) => {\n        return {\n            generator,\n            next: generator.next(),\n        };\n    });\n    let next;\n    do {\n        next = generators.reduce((best, next) => {\n            if (next.next.done) {\n                return best;\n            }\n            if (!best) {\n                return next;\n            }\n            if (compare(next.next.value, best.next.value)) {\n                return next;\n            }\n            else {\n                return best;\n            }\n        }, undefined);\n        if (next) {\n            yield next.next.value;\n            next.next = next.generator.next();\n        }\n    } while (next !== undefined);\n}\nexports.mergeL2LevelGenerators = mergeL2LevelGenerators;\nfunction createL2Levels(generator, depth) {\n    const levels = [];\n    for (const level of generator) {\n        const price = level.price;\n        const size = level.size;\n        if (levels.length > 0 && levels[levels.length - 1].price.eq(price)) {\n            const currentLevel = levels[levels.length - 1];\n            currentLevel.size = currentLevel.size.add(size);\n            for (const [source, size] of Object.entries(level.sources)) {\n                if (currentLevel.sources[source]) {\n                    currentLevel.sources[source] = currentLevel.sources[source].add(size);\n                }\n                else {\n                    currentLevel.sources[source] = size;\n                }\n            }\n        }\n        else if (levels.length === depth) {\n            break;\n        }\n        else {\n            levels.push(level);\n        }\n    }\n    return levels;\n}\nexports.createL2Levels = createL2Levels;\nfunction getVammL2Generator({ marketAccount, mmOraclePriceData, numOrders, now = new anchor_1.BN(Math.floor(Date.now() / 1000)), topOfBookQuoteAmounts = [], latestSlot, }) {\n    const updatedAmm = (0, amm_1.calculateUpdatedAMM)(marketAccount.amm, mmOraclePriceData);\n    const paused = (0, exchangeStatus_1.isOperationPaused)(marketAccount.pausedOperations, types_1.PerpOperation.AMM_FILL);\n    let [openBids, openAsks] = paused\n        ? [numericConstants_1.ZERO, numericConstants_1.ZERO]\n        : (0, amm_1.calculateMarketOpenBidAsk)(updatedAmm.baseAssetReserve, updatedAmm.minBaseAssetReserve, updatedAmm.maxBaseAssetReserve, updatedAmm.orderStepSize);\n    if (openBids.lt(marketAccount.amm.minOrderSize.muln(2)))\n        openBids = numericConstants_1.ZERO;\n    if (openAsks.abs().lt(marketAccount.amm.minOrderSize.muln(2)))\n        openAsks = numericConstants_1.ZERO;\n    const [bidReserves, askReserves] = (0, amm_1.calculateSpreadReserves)(updatedAmm, mmOraclePriceData, now, (0, types_1.isVariant)(marketAccount.contractType, 'prediction'), latestSlot);\n    const numBaseOrders = Math.max(1, numOrders - topOfBookQuoteAmounts.length);\n    const commonOpts = {\n        numOrders,\n        numBaseOrders,\n        mmOraclePriceData,\n        orderTickSize: marketAccount.amm.orderTickSize,\n        orderStepSize: marketAccount.amm.orderStepSize,\n        pegMultiplier: updatedAmm.pegMultiplier,\n        sqrtK: updatedAmm.sqrtK,\n        topOfBookQuoteAmounts,\n    };\n    const makeL2Gen = ({ openLiquidity, startReserves, swapDir, positionDir, }) => {\n        return function* () {\n            let count = 0;\n            let topSize = numericConstants_1.ZERO;\n            let size = openLiquidity.abs().divn(commonOpts.numBaseOrders);\n            const amm = {\n                ...startReserves,\n                sqrtK: commonOpts.sqrtK,\n                pegMultiplier: commonOpts.pegMultiplier,\n            };\n            while (count < commonOpts.numOrders && size.gt(numericConstants_1.ZERO)) {\n                let baseSwap = size;\n                if (count < commonOpts.topOfBookQuoteAmounts.length) {\n                    const raw = commonOpts.topOfBookQuoteAmounts[count]\n                        .mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO)\n                        .mul(numericConstants_1.PRICE_PRECISION)\n                        .div(commonOpts.mmOraclePriceData.price);\n                    baseSwap = (0, orders_1.standardizeBaseAssetAmount)(raw, commonOpts.orderStepSize);\n                    const remaining = openLiquidity.abs().sub(topSize);\n                    if (remaining.lt(baseSwap))\n                        baseSwap = remaining;\n                }\n                if (baseSwap.isZero())\n                    return;\n                const [newQuoteRes, newBaseRes] = (0, amm_1.calculateAmmReservesAfterSwap)(amm, 'base', baseSwap, swapDir);\n                const quoteSwapped = (0, amm_1.calculateQuoteAssetAmountSwapped)(amm.quoteAssetReserve.sub(newQuoteRes).abs(), amm.pegMultiplier, swapDir);\n                const price = (0, orders_1.standardizePrice)(quoteSwapped.mul(numericConstants_1.BASE_PRECISION).div(baseSwap), commonOpts.orderTickSize, positionDir);\n                amm.baseAssetReserve = newBaseRes;\n                amm.quoteAssetReserve = newQuoteRes;\n                if (count < commonOpts.topOfBookQuoteAmounts.length) {\n                    topSize = topSize.add(baseSwap);\n                    size = openLiquidity\n                        .abs()\n                        .sub(topSize)\n                        .divn(commonOpts.numBaseOrders);\n                }\n                yield { price, size: baseSwap, sources: { vamm: baseSwap } };\n                count++;\n            }\n        };\n    };\n    return {\n        getL2Bids: makeL2Gen({\n            openLiquidity: openBids,\n            startReserves: bidReserves,\n            swapDir: types_1.SwapDirection.ADD,\n            positionDir: types_1.PositionDirection.LONG,\n        }),\n        getL2Asks: makeL2Gen({\n            openLiquidity: openAsks,\n            startReserves: askReserves,\n            swapDir: types_1.SwapDirection.REMOVE,\n            positionDir: types_1.PositionDirection.SHORT,\n        }),\n    };\n}\nexports.getVammL2Generator = getVammL2Generator;\nfunction groupL2(l2, grouping, depth) {\n    return {\n        bids: groupL2Levels(l2.bids, grouping, types_1.PositionDirection.LONG, depth),\n        asks: groupL2Levels(l2.asks, grouping, types_1.PositionDirection.SHORT, depth),\n        slot: l2.slot,\n    };\n}\nexports.groupL2 = groupL2;\nfunction cloneL2Level(level) {\n    if (!level)\n        return level;\n    return {\n        price: level.price,\n        size: level.size,\n        sources: { ...level.sources },\n    };\n}\nfunction groupL2Levels(levels, grouping, direction, depth) {\n    const groupedLevels = [];\n    for (const level of levels) {\n        const price = (0, orders_1.standardizePrice)(level.price, grouping, direction);\n        const size = level.size;\n        if (groupedLevels.length > 0 &&\n            groupedLevels[groupedLevels.length - 1].price.eq(price)) {\n            // Clones things so we don't mutate the original\n            const currentLevel = cloneL2Level(groupedLevels[groupedLevels.length - 1]);\n            currentLevel.size = currentLevel.size.add(size);\n            for (const [source, size] of Object.entries(level.sources)) {\n                if (currentLevel.sources[source]) {\n                    currentLevel.sources[source] = currentLevel.sources[source].add(size);\n                }\n                else {\n                    currentLevel.sources[source] = size;\n                }\n            }\n            groupedLevels[groupedLevels.length - 1] = currentLevel;\n        }\n        else {\n            const groupedLevel = {\n                price: price,\n                size,\n                sources: level.sources,\n            };\n            groupedLevels.push(groupedLevel);\n        }\n        if (groupedLevels.length === depth) {\n            break;\n        }\n    }\n    return groupedLevels;\n}\n/**\n * Method to merge bids or asks by price\n */\nconst mergeByPrice = (bidsOrAsks) => {\n    const merged = new Map();\n    for (const level of bidsOrAsks) {\n        const key = level.price.toString();\n        if (merged.has(key)) {\n            const existing = merged.get(key);\n            existing.size = existing.size.add(level.size);\n            for (const [source, size] of Object.entries(level.sources)) {\n                if (existing.sources[source]) {\n                    existing.sources[source] = existing.sources[source].add(size);\n                }\n                else {\n                    existing.sources[source] = size;\n                }\n            }\n        }\n        else {\n            merged.set(key, cloneL2Level(level));\n        }\n    }\n    return Array.from(merged.values());\n};\n/**\n * The purpose of this function is uncross the L2 orderbook by modifying the bid/ask price at the top of the book\n * This will make the liquidity look worse but more intuitive (users familiar with clob get confused w temporarily\n * crossing book)\n *\n * Things to note about how it works:\n * - it will not uncross the user's liquidity\n * - it does the uncrossing by \"shifting\" the crossing liquidity to the nearest uncrossed levels. Thus the output liquidity maintains the same total size.\n *\n * @param bids\n * @param asks\n * @param oraclePrice\n * @param oracleTwap5Min\n * @param markTwap5Min\n * @param grouping\n * @param userBids\n * @param userAsks\n */\nfunction uncrossL2(bids, asks, oraclePrice, oracleTwap5Min, markTwap5Min, grouping, userBids, userAsks) {\n    // If there are no bids or asks, there is nothing to center\n    if (bids.length === 0 || asks.length === 0) {\n        return { bids, asks };\n    }\n    // If the top of the book is already centered, there is nothing to do\n    if (bids[0].price.lt(asks[0].price)) {\n        return { bids, asks };\n    }\n    const newBids = [];\n    const newAsks = [];\n    const updateLevels = (newPrice, oldLevel, levels) => {\n        if (levels.length > 0 && levels[levels.length - 1].price.eq(newPrice)) {\n            levels[levels.length - 1].size = levels[levels.length - 1].size.add(oldLevel.size);\n            for (const [source, size] of Object.entries(oldLevel.sources)) {\n                if (levels[levels.length - 1].sources[source]) {\n                    levels[levels.length - 1].sources = {\n                        ...levels[levels.length - 1].sources,\n                        [source]: levels[levels.length - 1].sources[source].add(size),\n                    };\n                }\n                else {\n                    levels[levels.length - 1].sources[source] = size;\n                }\n            }\n        }\n        else {\n            levels.push({\n                price: newPrice,\n                size: oldLevel.size,\n                sources: oldLevel.sources,\n            });\n        }\n    };\n    // This is the best estimate of the premium in the market vs oracle to filter crossing around\n    const referencePrice = oraclePrice.add(markTwap5Min.sub(oracleTwap5Min));\n    let bidIndex = 0;\n    let askIndex = 0;\n    let maxBid;\n    let minAsk;\n    const getPriceAndSetBound = (newPrice, direction) => {\n        if ((0, types_1.isVariant)(direction, 'long')) {\n            maxBid = maxBid ? anchor_1.BN.min(maxBid, newPrice) : newPrice;\n            return maxBid;\n        }\n        else {\n            minAsk = minAsk ? anchor_1.BN.max(minAsk, newPrice) : newPrice;\n            return minAsk;\n        }\n    };\n    while (bidIndex < bids.length || askIndex < asks.length) {\n        const nextBid = cloneL2Level(bids[bidIndex]);\n        const nextAsk = cloneL2Level(asks[askIndex]);\n        if (!nextBid) {\n            newAsks.push(nextAsk);\n            askIndex++;\n            continue;\n        }\n        if (!nextAsk) {\n            newBids.push(nextBid);\n            bidIndex++;\n            continue;\n        }\n        if (userBids.has(nextBid.price.toString())) {\n            newBids.push(nextBid);\n            bidIndex++;\n            continue;\n        }\n        if (userAsks.has(nextAsk.price.toString())) {\n            newAsks.push(nextAsk);\n            askIndex++;\n            continue;\n        }\n        if (nextBid.price.gte(nextAsk.price)) {\n            if (nextBid.price.gt(referencePrice) &&\n                nextAsk.price.gt(referencePrice)) {\n                let newBidPrice = nextAsk.price.sub(grouping);\n                newBidPrice = getPriceAndSetBound(newBidPrice, types_1.PositionDirection.LONG);\n                updateLevels(newBidPrice, nextBid, newBids);\n                bidIndex++;\n            }\n            else if (nextAsk.price.lt(referencePrice) &&\n                nextBid.price.lt(referencePrice)) {\n                let newAskPrice = nextBid.price.add(grouping);\n                newAskPrice = getPriceAndSetBound(newAskPrice, types_1.PositionDirection.SHORT);\n                updateLevels(newAskPrice, nextAsk, newAsks);\n                askIndex++;\n            }\n            else {\n                let newBidPrice = referencePrice.sub(grouping);\n                let newAskPrice = referencePrice.add(grouping);\n                newBidPrice = getPriceAndSetBound(newBidPrice, types_1.PositionDirection.LONG);\n                newAskPrice = getPriceAndSetBound(newAskPrice, types_1.PositionDirection.SHORT);\n                updateLevels(newBidPrice, nextBid, newBids);\n                updateLevels(newAskPrice, nextAsk, newAsks);\n                bidIndex++;\n                askIndex++;\n            }\n        }\n        else {\n            if (minAsk && nextAsk.price.lte(minAsk)) {\n                const newAskPrice = getPriceAndSetBound(nextAsk.price, types_1.PositionDirection.SHORT);\n                updateLevels(newAskPrice, nextAsk, newAsks);\n            }\n            else {\n                newAsks.push(nextAsk);\n            }\n            askIndex++;\n            if (maxBid && nextBid.price.gte(maxBid)) {\n                const newBidPrice = getPriceAndSetBound(nextBid.price, types_1.PositionDirection.LONG);\n                updateLevels(newBidPrice, nextBid, newBids);\n            }\n            else {\n                newBids.push(nextBid);\n            }\n            bidIndex++;\n        }\n    }\n    newBids.sort((a, b) => b.price.cmp(a.price));\n    newAsks.sort((a, b) => a.price.cmp(b.price));\n    const finalNewBids = mergeByPrice(newBids);\n    const finalNewAsks = mergeByPrice(newAsks);\n    return {\n        bids: finalNewBids,\n        asks: finalNewAsks,\n    };\n}\nexports.uncrossL2 = uncrossL2;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15853, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/DLOB.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DLOB = void 0;\nconst NodeList_1 = require(\"./NodeList\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nconst userName_1 = require(\"../userName\");\nconst orders_1 = require(\"../math/orders\");\nconst types_1 = require(\"../types\");\nconst userStatus_1 = require(\"../math/userStatus\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst exchangeStatus_1 = require(\"../math/exchangeStatus\");\nconst orderBookLevels_1 = require(\"./orderBookLevels\");\nconst auction_1 = require(\"../math/auction\");\nconst conversion_1 = require(\"../math/conversion\");\nconst SUPPORTED_ORDER_TYPES = [\n    'market',\n    'limit',\n    'triggerMarket',\n    'triggerLimit',\n    'oracle',\n];\nclass DLOB {\n    constructor(protectedMakerParamsMap) {\n        this.openOrders = new Map();\n        this.orderLists = new Map();\n        this.maxSlotForRestingLimitOrders = 0;\n        this.initialized = false;\n        this.protectedMakerParamsMap = protectedMakerParamsMap || {\n            perp: new Map(),\n            spot: new Map(),\n        };\n        this.init();\n    }\n    init() {\n        this.openOrders.set('perp', new Set());\n        this.openOrders.set('spot', new Set());\n        this.orderLists.set('perp', new Map());\n        this.orderLists.set('spot', new Map());\n    }\n    clear() {\n        for (const marketType of this.openOrders.keys()) {\n            this.openOrders.get(marketType).clear();\n        }\n        this.openOrders.clear();\n        for (const marketType of this.orderLists.keys()) {\n            for (const marketIndex of this.orderLists.get(marketType).keys()) {\n                const marketNodeLists = this.orderLists\n                    .get(marketType)\n                    .get(marketIndex);\n                for (const side of Object.keys(marketNodeLists)) {\n                    for (const orderType of Object.keys(marketNodeLists[side])) {\n                        marketNodeLists[side][orderType].clear();\n                    }\n                }\n            }\n        }\n        this.orderLists.clear();\n        this.maxSlotForRestingLimitOrders = 0;\n        this.init();\n    }\n    /**\n     * initializes a new DLOB instance\n     *\n     * @returns a promise that resolves when the DLOB is initialized\n     */\n    async initFromUserMap(userMap, slot) {\n        var _a;\n        if (this.initialized) {\n            return false;\n        }\n        // initialize the dlob with the user map\n        for (const user of userMap.values()) {\n            const userAccount = user.getUserAccount();\n            const userAccountPubkey = user.getUserAccountPublicKey();\n            const userAccountPubkeyString = userAccountPubkey.toString();\n            const protectedMaker = (0, userStatus_1.isUserProtectedMaker)(userAccount);\n            for (const order of userAccount.orders) {\n                let baseAssetAmount = order.baseAssetAmount;\n                if (order.reduceOnly) {\n                    const existingBaseAmount = ((_a = userAccount.perpPositions.find((pos) => pos.marketIndex === order.marketIndex && pos.openOrders > 0)) === null || _a === void 0 ? void 0 : _a.baseAssetAmount) || numericConstants_1.ZERO;\n                    baseAssetAmount = (0, orders_1.calculateOrderBaseAssetAmount)(order, existingBaseAmount);\n                }\n                this.insertOrder(order, userAccountPubkeyString, slot, protectedMaker, baseAssetAmount);\n            }\n        }\n        this.initialized = true;\n        return true;\n    }\n    insertOrder(order, userAccount, slot, isUserProtectedMaker, baseAssetAmount, onInsert) {\n        var _a;\n        if (!(0, types_1.isVariant)(order.status, 'open')) {\n            return;\n        }\n        if (!(0, types_1.isOneOfVariant)(order.orderType, SUPPORTED_ORDER_TYPES)) {\n            return;\n        }\n        const marketType = (0, types_1.getVariant)(order.marketType);\n        if (!this.orderLists.get(marketType).has(order.marketIndex)) {\n            this.addOrderList(marketType, order.marketIndex);\n        }\n        if ((0, types_1.isVariant)(order.status, 'open')) {\n            this.openOrders\n                .get(marketType)\n                .add((0, NodeList_1.getOrderSignature)(order.orderId, userAccount));\n        }\n        (_a = this.getListForOnChainOrder(order, slot, isUserProtectedMaker)) === null || _a === void 0 ? void 0 : _a.insert(order, marketType, userAccount, isUserProtectedMaker, this.protectedMakerParamsMap[marketType].get(order.marketIndex), baseAssetAmount);\n        if (onInsert) {\n            onInsert();\n        }\n    }\n    insertSignedMsgOrder(order, userAccount, isUserProtectedMaker, baseAssetAmount, onInsert) {\n        const marketType = (0, types_1.getVariant)(order.marketType);\n        const marketIndex = order.marketIndex;\n        const bidOrAsk = (0, types_1.isVariant)(order.direction, 'long') ? 'bid' : 'ask';\n        if (!this.orderLists.get(marketType).has(order.marketIndex)) {\n            this.addOrderList(marketType, order.marketIndex);\n        }\n        this.openOrders\n            .get(marketType)\n            .add((0, NodeList_1.getOrderSignature)(order.orderId, userAccount));\n        this.orderLists\n            .get(marketType)\n            .get(marketIndex)\n            .signedMsg[bidOrAsk].insert(order, marketType, userAccount, isUserProtectedMaker, this.protectedMakerParamsMap[marketType].get(order.marketIndex), baseAssetAmount);\n        if (onInsert) {\n            onInsert();\n        }\n    }\n    addOrderList(marketType, marketIndex) {\n        this.orderLists.get(marketType).set(marketIndex, {\n            restingLimit: {\n                ask: new NodeList_1.NodeList('restingLimit', 'asc'),\n                bid: new NodeList_1.NodeList('restingLimit', 'desc'),\n            },\n            floatingLimit: {\n                ask: new NodeList_1.NodeList('floatingLimit', 'asc'),\n                bid: new NodeList_1.NodeList('floatingLimit', 'desc'),\n            },\n            protectedFloatingLimit: {\n                ask: new NodeList_1.NodeList('protectedFloatingLimit', 'asc'),\n                bid: new NodeList_1.NodeList('protectedFloatingLimit', 'desc'),\n            },\n            takingLimit: {\n                ask: new NodeList_1.NodeList('takingLimit', 'asc'),\n                bid: new NodeList_1.NodeList('takingLimit', 'asc'), // always sort ascending for market orders\n            },\n            market: {\n                ask: new NodeList_1.NodeList('market', 'asc'),\n                bid: new NodeList_1.NodeList('market', 'asc'), // always sort ascending for market orders\n            },\n            trigger: {\n                above: new NodeList_1.NodeList('trigger', 'asc'),\n                below: new NodeList_1.NodeList('trigger', 'desc'),\n            },\n            signedMsg: {\n                ask: new NodeList_1.NodeList('signedMsg', 'asc'),\n                bid: new NodeList_1.NodeList('signedMsg', 'asc'),\n            },\n        });\n    }\n    delete(order, userAccount, slot, isUserProtectedMaker, onDelete) {\n        var _a;\n        if (!(0, types_1.isVariant)(order.status, 'open')) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        (_a = this.getListForOnChainOrder(order, slot, isUserProtectedMaker)) === null || _a === void 0 ? void 0 : _a.remove(order, userAccount.toString());\n        if (onDelete) {\n            onDelete();\n        }\n    }\n    getListForOnChainOrder(order, slot, isProtectedMaker) {\n        const isInactiveTriggerOrder = (0, orders_1.mustBeTriggered)(order) && !(0, orders_1.isTriggered)(order);\n        let type;\n        if (isInactiveTriggerOrder) {\n            type = 'trigger';\n        }\n        else if ((0, types_1.isOneOfVariant)(order.orderType, ['market', 'triggerMarket', 'oracle'])) {\n            type = 'market';\n        }\n        else if (order.oraclePriceOffset !== 0) {\n            type = isProtectedMaker ? 'protectedFloatingLimit' : 'floatingLimit';\n        }\n        else {\n            const isResting = (0, orders_1.isRestingLimitOrder)(order, slot);\n            type = isResting ? 'restingLimit' : 'takingLimit';\n        }\n        let subType;\n        if (isInactiveTriggerOrder) {\n            subType = (0, types_1.isVariant)(order.triggerCondition, 'above') ? 'above' : 'below';\n        }\n        else {\n            subType = (0, types_1.isVariant)(order.direction, 'long') ? 'bid' : 'ask';\n        }\n        const marketType = (0, types_1.getVariant)(order.marketType);\n        if (!this.orderLists.has(marketType)) {\n            return undefined;\n        }\n        return this.orderLists.get(marketType).get(order.marketIndex)[type][subType];\n    }\n    updateRestingLimitOrders(slot) {\n        if (slot <= this.maxSlotForRestingLimitOrders) {\n            return;\n        }\n        this.maxSlotForRestingLimitOrders = slot;\n        this.updateRestingLimitOrdersForMarketType(slot, 'perp');\n        this.updateRestingLimitOrdersForMarketType(slot, 'spot');\n    }\n    updateRestingLimitOrdersForMarketType(slot, marketTypeStr) {\n        for (const [_, nodeLists] of this.orderLists.get(marketTypeStr)) {\n            const nodesToUpdate = [];\n            for (const node of nodeLists.takingLimit.ask.getGenerator()) {\n                if (!(0, orders_1.isRestingLimitOrder)(node.order, slot)) {\n                    continue;\n                }\n                nodesToUpdate.push({\n                    side: 'ask',\n                    node,\n                });\n            }\n            for (const node of nodeLists.takingLimit.bid.getGenerator()) {\n                if (!(0, orders_1.isRestingLimitOrder)(node.order, slot)) {\n                    continue;\n                }\n                nodesToUpdate.push({\n                    side: 'bid',\n                    node,\n                });\n            }\n            for (const nodeToUpdate of nodesToUpdate) {\n                const { side, node } = nodeToUpdate;\n                nodeLists.takingLimit[side].remove(node.order, node.userAccount);\n                nodeLists.restingLimit[side].insert(node.order, marketTypeStr, node.userAccount, node.isProtectedMaker, this.protectedMakerParamsMap[marketTypeStr].get(node.order.marketIndex));\n            }\n        }\n    }\n    getOrder(orderId, userAccount) {\n        const orderSignature = (0, NodeList_1.getOrderSignature)(orderId, userAccount.toString());\n        for (const nodeList of this.getNodeLists()) {\n            const node = nodeList.get(orderSignature);\n            if (node) {\n                return node.order;\n            }\n        }\n        return undefined;\n    }\n    findNodesToFill(marketIndex, fallbackBid, fallbackAsk, slot, ts, marketType, oraclePriceData, stateAccount, marketAccount) {\n        if ((0, exchangeStatus_1.fillPaused)(stateAccount, marketAccount)) {\n            return [];\n        }\n        const isAmmPaused = (0, exchangeStatus_1.ammPaused)(stateAccount, marketAccount);\n        const { makerRebateNumerator, makerRebateDenominator } = this.getMakerRebate(marketType, stateAccount, marketAccount);\n        const takingOrderNodesToFill = this.findTakingNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, stateAccount, marketAccount, fallbackAsk, fallbackBid);\n        const restingLimitOrderNodesToFill = this.findRestingLimitOrderNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, stateAccount, marketAccount, makerRebateNumerator, makerRebateDenominator, fallbackAsk, fallbackBid);\n        // get expired market nodes\n        const expiredNodesToFill = this.findExpiredNodesToFill(marketIndex, ts, marketType, new anchor_1.BN(slot));\n        const stepSize = (0, types_1.isVariant)(marketType, 'perp')\n            ? marketAccount.amm.orderStepSize\n            : marketAccount.orderStepSize;\n        const cancelReduceOnlyNodesToFill = this.findUnfillableReduceOnlyOrdersToCancel(marketIndex, marketType, stepSize);\n        return this.mergeNodesToFill(restingLimitOrderNodesToFill, takingOrderNodesToFill)\n            .concat(expiredNodesToFill)\n            .concat(cancelReduceOnlyNodesToFill);\n    }\n    getMakerRebate(marketType, stateAccount, marketAccount) {\n        let makerRebateNumerator;\n        let makerRebateDenominator;\n        if ((0, types_1.isVariant)(marketType, 'perp')) {\n            makerRebateNumerator =\n                stateAccount.perpFeeStructure.feeTiers[0].makerRebateNumerator;\n            makerRebateDenominator =\n                stateAccount.perpFeeStructure.feeTiers[0].makerRebateDenominator;\n        }\n        else {\n            makerRebateNumerator =\n                stateAccount.spotFeeStructure.feeTiers[0].makerRebateNumerator;\n            makerRebateDenominator =\n                stateAccount.spotFeeStructure.feeTiers[0].makerRebateDenominator;\n        }\n        // @ts-ignore\n        const feeAdjustment = marketAccount.feeAdjustment || 0;\n        if (feeAdjustment !== 0) {\n            makerRebateNumerator += (makerRebateNumerator * feeAdjustment) / 100;\n        }\n        return { makerRebateNumerator, makerRebateDenominator };\n    }\n    mergeNodesToFill(restingLimitOrderNodesToFill, takingOrderNodesToFill) {\n        const mergedNodesToFill = new Map();\n        const mergeNodesToFillHelper = (nodesToFillArray) => {\n            nodesToFillArray.forEach((nodeToFill) => {\n                const nodeSignature = (0, NodeList_1.getOrderSignature)(nodeToFill.node.order.orderId, nodeToFill.node.userAccount);\n                if (!mergedNodesToFill.has(nodeSignature)) {\n                    mergedNodesToFill.set(nodeSignature, {\n                        node: nodeToFill.node,\n                        makerNodes: [],\n                    });\n                }\n                if (nodeToFill.makerNodes) {\n                    mergedNodesToFill\n                        .get(nodeSignature)\n                        .makerNodes.push(...nodeToFill.makerNodes);\n                }\n            });\n        };\n        mergeNodesToFillHelper(restingLimitOrderNodesToFill);\n        mergeNodesToFillHelper(takingOrderNodesToFill);\n        return Array.from(mergedNodesToFill.values());\n    }\n    findRestingLimitOrderNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, stateAccount, marketAccount, makerRebateNumerator, makerRebateDenominator, fallbackAsk, fallbackBid) {\n        const nodesToFill = new Array();\n        const crossingNodes = this.findCrossingRestingLimitOrders(marketIndex, slot, marketType, oraclePriceData);\n        for (const crossingNode of crossingNodes) {\n            nodesToFill.push(crossingNode);\n        }\n        if (fallbackBid && !isAmmPaused) {\n            const askGenerator = this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n            const fallbackBidWithBuffer = fallbackBid.sub(fallbackBid.muln(makerRebateNumerator).divn(makerRebateDenominator));\n            const asksCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, askGenerator, (askPrice) => {\n                return askPrice.lte(fallbackBidWithBuffer);\n            }, stateAccount, marketAccount);\n            for (const askCrossingFallback of asksCrossingFallback) {\n                nodesToFill.push(askCrossingFallback);\n            }\n        }\n        if (fallbackAsk && !isAmmPaused) {\n            const bidGenerator = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n            const fallbackAskWithBuffer = fallbackAsk.add(fallbackAsk.muln(makerRebateNumerator).divn(makerRebateDenominator));\n            const bidsCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, bidGenerator, (bidPrice) => {\n                return bidPrice.gte(fallbackAskWithBuffer);\n            }, stateAccount, marketAccount);\n            for (const bidCrossingFallback of bidsCrossingFallback) {\n                nodesToFill.push(bidCrossingFallback);\n            }\n        }\n        return nodesToFill;\n    }\n    findTakingNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, state, marketAccount, fallbackAsk, fallbackBid) {\n        const nodesToFill = new Array();\n        let takingOrderGenerator = this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData);\n        const takingAsksCrossingBids = this.findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takingOrderGenerator, this.getRestingLimitBids.bind(this), (takerPrice, makerPrice) => {\n            if ((0, types_1.isVariant)(marketType, 'spot')) {\n                if (takerPrice === undefined) {\n                    return false;\n                }\n                if (fallbackBid && makerPrice.lt(fallbackBid)) {\n                    return false;\n                }\n            }\n            return takerPrice === undefined || takerPrice.lte(makerPrice);\n        });\n        for (const takingAskCrossingBid of takingAsksCrossingBids) {\n            nodesToFill.push(takingAskCrossingBid);\n        }\n        if (fallbackBid && !isAmmPaused) {\n            takingOrderGenerator = this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData);\n            const takingAsksCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, takingOrderGenerator, (takerPrice) => {\n                return takerPrice === undefined || takerPrice.lte(fallbackBid);\n            }, state, marketAccount);\n            for (const takingAskCrossingFallback of takingAsksCrossingFallback) {\n                nodesToFill.push(takingAskCrossingFallback);\n            }\n        }\n        takingOrderGenerator = this.getTakingBids(marketIndex, marketType, slot, oraclePriceData);\n        const takingBidsToFill = this.findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takingOrderGenerator, this.getRestingLimitAsks.bind(this), (takerPrice, makerPrice) => {\n            if ((0, types_1.isVariant)(marketType, 'spot')) {\n                if (takerPrice === undefined) {\n                    return false;\n                }\n                if (fallbackAsk && makerPrice.gt(fallbackAsk)) {\n                    return false;\n                }\n            }\n            return takerPrice === undefined || takerPrice.gte(makerPrice);\n        });\n        for (const takingBidToFill of takingBidsToFill) {\n            nodesToFill.push(takingBidToFill);\n        }\n        if (fallbackAsk && !isAmmPaused) {\n            takingOrderGenerator = this.getTakingBids(marketIndex, marketType, slot, oraclePriceData);\n            const takingBidsCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, takingOrderGenerator, (takerPrice) => {\n                return takerPrice === undefined || takerPrice.gte(fallbackAsk);\n            }, state, marketAccount);\n            for (const marketBidCrossingFallback of takingBidsCrossingFallback) {\n                nodesToFill.push(marketBidCrossingFallback);\n            }\n        }\n        return nodesToFill;\n    }\n    findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takerNodeGenerator, makerNodeGeneratorFn, doesCross) {\n        const nodesToFill = new Array();\n        for (const takerNode of takerNodeGenerator) {\n            const makerNodeGenerator = makerNodeGeneratorFn(marketIndex, slot, marketType, oraclePriceData);\n            for (const makerNode of makerNodeGenerator) {\n                // Can't match orders from the same user\n                const sameUser = takerNode.userAccount === makerNode.userAccount;\n                if (sameUser) {\n                    continue;\n                }\n                const makerPrice = makerNode.getPrice(oraclePriceData, slot);\n                const takerPrice = takerNode.getPrice(oraclePriceData, slot);\n                const ordersCross = doesCross(takerPrice, makerPrice);\n                if (!ordersCross) {\n                    // market orders aren't sorted by price, they are sorted by time, so we need to traverse\n                    // through all of em\n                    break;\n                }\n                nodesToFill.push({\n                    node: takerNode,\n                    makerNodes: [makerNode],\n                });\n                const makerOrder = makerNode.order;\n                const takerOrder = takerNode.order;\n                const makerBaseRemaining = makerOrder.baseAssetAmount.sub(makerOrder.baseAssetAmountFilled);\n                const takerBaseRemaining = takerOrder.baseAssetAmount.sub(takerOrder.baseAssetAmountFilled);\n                const baseFilled = anchor_1.BN.min(makerBaseRemaining, takerBaseRemaining);\n                const newMakerOrder = { ...makerOrder };\n                newMakerOrder.baseAssetAmountFilled =\n                    makerOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOnChainOrder(newMakerOrder, slot, makerNode.isProtectedMaker).update(newMakerOrder, makerNode.userAccount);\n                const newTakerOrder = { ...takerOrder };\n                newTakerOrder.baseAssetAmountFilled =\n                    takerOrder.baseAssetAmountFilled.add(baseFilled);\n                if (takerNode.isSignedMsg) {\n                    const marketTypeStr = (0, types_1.getVariant)(marketType);\n                    const orderList = (0, types_1.isVariant)(takerOrder.direction, 'long')\n                        ? this.orderLists.get(marketTypeStr).get(marketIndex).signedMsg.bid\n                        : this.orderLists.get(marketTypeStr).get(marketIndex).signedMsg.ask;\n                    orderList.update(newTakerOrder, takerNode.userAccount);\n                }\n                else {\n                    this.getListForOnChainOrder(newTakerOrder, slot, takerNode.isProtectedMaker).update(newTakerOrder, takerNode.userAccount);\n                }\n                if (newTakerOrder.baseAssetAmountFilled.eq(takerOrder.baseAssetAmount)) {\n                    break;\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, nodeGenerator, doesCross, state, marketAccount) {\n        var _a;\n        const nodesToFill = new Array();\n        let nextNode = nodeGenerator.next();\n        while (!nextNode.done) {\n            const node = nextNode.value;\n            if ((0, types_1.isVariant)(marketType, 'spot') && ((_a = node.order) === null || _a === void 0 ? void 0 : _a.postOnly)) {\n                nextNode = nodeGenerator.next();\n                continue;\n            }\n            const nodePrice = (0, orders_1.getLimitPrice)(node.order, oraclePriceData, slot);\n            // order crosses if there is no limit price or it crosses fallback price\n            const crosses = doesCross(nodePrice);\n            // fallback is available if auction is complete or it's a spot order\n            const fallbackAvailable = (0, types_1.isVariant)(marketType, 'spot') ||\n                (0, auction_1.isFallbackAvailableLiquiditySource)(node.order, oraclePriceData, slot, state, marketAccount);\n            if (crosses && fallbackAvailable) {\n                nodesToFill.push({\n                    node: node,\n                    makerNodes: [], // filled by fallback\n                });\n            }\n            nextNode = nodeGenerator.next();\n        }\n        return nodesToFill;\n    }\n    findExpiredNodesToFill(marketIndex, ts, marketType, slot) {\n        const nodesToFill = new Array();\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return nodesToFill;\n        }\n        // All bids/asks that can expire\n        // dont try to expire limit orders with tif as its inefficient use of blockspace\n        const bidGenerators = [\n            nodeLists.takingLimit.bid.getGenerator(),\n            nodeLists.restingLimit.bid.getGenerator(),\n            nodeLists.floatingLimit.bid.getGenerator(),\n            nodeLists.market.bid.getGenerator(),\n            nodeLists.signedMsg.bid.getGenerator(),\n        ];\n        const askGenerators = [\n            nodeLists.takingLimit.ask.getGenerator(),\n            nodeLists.restingLimit.ask.getGenerator(),\n            nodeLists.floatingLimit.ask.getGenerator(),\n            nodeLists.market.ask.getGenerator(),\n            nodeLists.signedMsg.ask.getGenerator(),\n        ];\n        for (const bidGenerator of bidGenerators) {\n            for (const bid of bidGenerator) {\n                if (bid.isSignedMsg &&\n                    slot.gt(bid.order.slot.addn(bid.order.auctionDuration))) {\n                    this.orderLists\n                        .get(marketTypeStr)\n                        .get(marketIndex)\n                        .signedMsg.bid.remove(bid.order, bid.userAccount);\n                }\n                else if ((0, orders_1.isOrderExpired)(bid.order, ts, true, 25)) {\n                    nodesToFill.push({\n                        node: bid,\n                        makerNodes: [],\n                    });\n                }\n            }\n        }\n        for (const askGenerator of askGenerators) {\n            for (const ask of askGenerator) {\n                if (ask.isSignedMsg &&\n                    slot.gt(ask.order.slot.addn(ask.order.auctionDuration))) {\n                    this.orderLists\n                        .get(marketTypeStr)\n                        .get(marketIndex)\n                        .signedMsg.ask.remove(ask.order, ask.userAccount);\n                }\n                else if ((0, orders_1.isOrderExpired)(ask.order, ts, true, 25)) {\n                    nodesToFill.push({\n                        node: ask,\n                        makerNodes: [],\n                    });\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    findUnfillableReduceOnlyOrdersToCancel(marketIndex, marketType, stepSize) {\n        const nodesToFill = new Array();\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return nodesToFill;\n        }\n        const generators = [\n            nodeLists.takingLimit.bid.getGenerator(),\n            nodeLists.restingLimit.bid.getGenerator(),\n            nodeLists.floatingLimit.bid.getGenerator(),\n            nodeLists.market.bid.getGenerator(),\n            nodeLists.signedMsg.bid.getGenerator(),\n            nodeLists.takingLimit.ask.getGenerator(),\n            nodeLists.restingLimit.ask.getGenerator(),\n            nodeLists.floatingLimit.ask.getGenerator(),\n            nodeLists.market.ask.getGenerator(),\n            nodeLists.signedMsg.ask.getGenerator(),\n            nodeLists.trigger.above.getGenerator(),\n            nodeLists.trigger.below.getGenerator(),\n        ];\n        for (const generator of generators) {\n            for (const node of generator) {\n                if (!node.order.reduceOnly) {\n                    continue;\n                }\n                if (node.baseAssetAmount.lt(stepSize)) {\n                    nodesToFill.push({\n                        node,\n                        makerNodes: [],\n                    });\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    *getTakingBids(marketIndex, marketType, slot, oraclePriceData, filterFcn) {\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const orderLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!orderLists) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        const generatorList = [\n            orderLists.market.bid.getGenerator(),\n            orderLists.takingLimit.bid.getGenerator(),\n            this.signedMsgGenerator(orderLists.signedMsg.bid, (x) => !(0, orders_1.isRestingLimitOrder)(x.order, slot)),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode) => {\n            return bestNode.order.slot.lt(currentNode.order.slot);\n        }, filterFcn);\n    }\n    *getTakingAsks(marketIndex, marketType, slot, oraclePriceData, filterFcn) {\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const orderLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!orderLists) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        const generatorList = [\n            orderLists.market.ask.getGenerator(),\n            orderLists.takingLimit.ask.getGenerator(),\n            this.signedMsgGenerator(orderLists.signedMsg.ask, (x) => !(0, orders_1.isRestingLimitOrder)(x.order, slot)),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode) => {\n            return bestNode.order.slot.lt(currentNode.order.slot);\n        }, filterFcn);\n    }\n    *signedMsgGenerator(signedMsgOrderList, filter) {\n        for (const signedMsgOrder of signedMsgOrderList.getGenerator()) {\n            if (filter(signedMsgOrder)) {\n                yield signedMsgOrder;\n            }\n        }\n    }\n    *getBestNode(generatorList, oraclePriceData, slot, compareFcn, filterFcn) {\n        const generators = generatorList.map((generator) => {\n            return {\n                next: generator.next(),\n                generator,\n            };\n        });\n        let sideExhausted = false;\n        while (!sideExhausted) {\n            const bestGenerator = generators.reduce((bestGenerator, currentGenerator) => {\n                if (currentGenerator.next.done) {\n                    return bestGenerator;\n                }\n                if (bestGenerator.next.done) {\n                    return currentGenerator;\n                }\n                const bestValue = bestGenerator.next.value;\n                const currentValue = currentGenerator.next.value;\n                return compareFcn(bestValue, currentValue, slot, oraclePriceData)\n                    ? bestGenerator\n                    : currentGenerator;\n            });\n            if (!bestGenerator.next.done) {\n                // skip this node if it's already completely filled\n                if (bestGenerator.next.value.isBaseFilled()) {\n                    bestGenerator.next = bestGenerator.generator.next();\n                    continue;\n                }\n                if (filterFcn && !filterFcn(bestGenerator.next.value)) {\n                    bestGenerator.next = bestGenerator.generator.next();\n                    continue;\n                }\n                yield bestGenerator.next.value;\n                bestGenerator.next = bestGenerator.generator.next();\n            }\n            else {\n                sideExhausted = true;\n            }\n        }\n    }\n    *getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData, filterFcn) {\n        if ((0, types_1.isVariant)(marketType, 'spot') && !oraclePriceData) {\n            throw new Error('Must provide OraclePriceData to get spot asks');\n        }\n        this.updateRestingLimitOrders(slot);\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return;\n        }\n        const generatorList = [\n            nodeLists.restingLimit.ask.getGenerator(),\n            nodeLists.floatingLimit.ask.getGenerator(),\n            nodeLists.protectedFloatingLimit.ask.getGenerator(),\n            this.signedMsgGenerator(nodeLists.signedMsg.ask, (x) => (0, orders_1.isRestingLimitOrder)(x.order, slot)),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData) => {\n            return bestNode\n                .getPrice(oraclePriceData, slot)\n                .lt(currentNode.getPrice(oraclePriceData, slot));\n        }, filterFcn);\n    }\n    *getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData, filterFcn) {\n        if ((0, types_1.isVariant)(marketType, 'spot') && !oraclePriceData) {\n            throw new Error('Must provide OraclePriceData to get spot bids');\n        }\n        this.updateRestingLimitOrders(slot);\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return;\n        }\n        const generatorList = [\n            nodeLists.restingLimit.bid.getGenerator(),\n            nodeLists.floatingLimit.bid.getGenerator(),\n            nodeLists.protectedFloatingLimit.bid.getGenerator(),\n            this.signedMsgGenerator(nodeLists.signedMsg.bid, (x) => (0, orders_1.isRestingLimitOrder)(x.order, slot)),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData) => {\n            return bestNode\n                .getPrice(oraclePriceData, slot)\n                .gt(currentNode.getPrice(oraclePriceData, slot));\n        }, filterFcn);\n    }\n    /**\n     * This will look at both the taking and resting limit asks\n     * @param marketIndex\n     * @param fallbackAsk\n     * @param slot\n     * @param marketType\n     * @param oraclePriceData\n     * @param filterFcn\n     */\n    *getAsks(marketIndex, _fallbackAsk, slot, marketType, oraclePriceData, filterFcn) {\n        if ((0, types_1.isVariant)(marketType, 'spot') && !oraclePriceData) {\n            throw new Error('Must provide OraclePriceData to get spot asks');\n        }\n        const generatorList = [\n            this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData),\n            this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData) => {\n            var _a, _b;\n            const bestNodePrice = (_a = bestNode.getPrice(oraclePriceData, slot)) !== null && _a !== void 0 ? _a : numericConstants_1.ZERO;\n            const currentNodePrice = (_b = currentNode.getPrice(oraclePriceData, slot)) !== null && _b !== void 0 ? _b : numericConstants_1.ZERO;\n            if (bestNodePrice.eq(currentNodePrice)) {\n                return bestNode.order.slot.lt(currentNode.order.slot);\n            }\n            return bestNodePrice.lt(currentNodePrice);\n        }, filterFcn);\n    }\n    /**\n     * This will look at both the taking and resting limit bids\n     * @param marketIndex\n     * @param fallbackBid\n     * @param slot\n     * @param marketType\n     * @param oraclePriceData\n     * @param filterFcn\n     */\n    *getBids(marketIndex, _fallbackBid, slot, marketType, oraclePriceData, filterFcn) {\n        if ((0, types_1.isVariant)(marketType, 'spot') && !oraclePriceData) {\n            throw new Error('Must provide OraclePriceData to get spot bids');\n        }\n        const generatorList = [\n            this.getTakingBids(marketIndex, marketType, slot, oraclePriceData),\n            this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData),\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData) => {\n            var _a, _b;\n            const bestNodePrice = (_a = bestNode.getPrice(oraclePriceData, slot)) !== null && _a !== void 0 ? _a : numericConstants_1.BN_MAX;\n            const currentNodePrice = (_b = currentNode.getPrice(oraclePriceData, slot)) !== null && _b !== void 0 ? _b : numericConstants_1.BN_MAX;\n            if (bestNodePrice.eq(currentNodePrice)) {\n                return bestNode.order.slot.lt(currentNode.order.slot);\n            }\n            return bestNodePrice.gt(currentNodePrice);\n        }, filterFcn);\n    }\n    findCrossingRestingLimitOrders(marketIndex, slot, marketType, oraclePriceData) {\n        const nodesToFill = new Array();\n        for (const askNode of this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData)) {\n            const bidGenerator = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n            for (const bidNode of bidGenerator) {\n                const bidPrice = bidNode.getPrice(oraclePriceData, slot);\n                const askPrice = askNode.getPrice(oraclePriceData, slot);\n                // orders don't cross\n                if (bidPrice.lt(askPrice)) {\n                    break;\n                }\n                const bidOrder = bidNode.order;\n                const askOrder = askNode.order;\n                // Can't match orders from the same user\n                const sameUser = bidNode.userAccount === askNode.userAccount;\n                if (sameUser) {\n                    continue;\n                }\n                const makerAndTaker = this.determineMakerAndTaker(askNode, bidNode);\n                // unable to match maker and taker due to post only or slot\n                if (!makerAndTaker) {\n                    continue;\n                }\n                const { takerNode, makerNode } = makerAndTaker;\n                const bidBaseRemaining = bidOrder.baseAssetAmount.sub(bidOrder.baseAssetAmountFilled);\n                const askBaseRemaining = askOrder.baseAssetAmount.sub(askOrder.baseAssetAmountFilled);\n                const baseFilled = anchor_1.BN.min(bidBaseRemaining, askBaseRemaining);\n                const newBidOrder = { ...bidOrder };\n                newBidOrder.baseAssetAmountFilled =\n                    bidOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOnChainOrder(newBidOrder, slot, bidNode.isProtectedMaker).update(newBidOrder, bidNode.userAccount);\n                // ask completely filled\n                const newAskOrder = { ...askOrder };\n                newAskOrder.baseAssetAmountFilled =\n                    askOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOnChainOrder(newAskOrder, slot, askNode.isProtectedMaker).update(newAskOrder, askNode.userAccount);\n                nodesToFill.push({\n                    node: takerNode,\n                    makerNodes: [makerNode],\n                });\n                if (newAskOrder.baseAssetAmount.eq(newAskOrder.baseAssetAmountFilled)) {\n                    break;\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    determineMakerAndTaker(askNode, bidNode) {\n        const askSlot = askNode.order.slot.add(new anchor_1.BN(askNode.order.auctionDuration));\n        const bidSlot = bidNode.order.slot.add(new anchor_1.BN(bidNode.order.auctionDuration));\n        if (bidNode.order.postOnly && askNode.order.postOnly) {\n            return undefined;\n        }\n        else if (bidNode.order.postOnly) {\n            return {\n                takerNode: askNode,\n                makerNode: bidNode,\n            };\n        }\n        else if (askNode.order.postOnly) {\n            return {\n                takerNode: bidNode,\n                makerNode: askNode,\n            };\n        }\n        else if (askSlot.lte(bidSlot)) {\n            return {\n                takerNode: bidNode,\n                makerNode: askNode,\n            };\n        }\n        else {\n            return {\n                takerNode: askNode,\n                makerNode: bidNode,\n            };\n        }\n    }\n    getBestAsk(marketIndex, slot, marketType, oraclePriceData) {\n        const bestAsk = this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData).next().value;\n        if (bestAsk) {\n            return bestAsk.getPrice(oraclePriceData, slot);\n        }\n        return undefined;\n    }\n    getBestBid(marketIndex, slot, marketType, oraclePriceData) {\n        const bestBid = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData).next().value;\n        if (bestBid) {\n            return bestBid.getPrice(oraclePriceData, slot);\n        }\n        return undefined;\n    }\n    *getStopLosses(marketIndex, marketType, direction) {\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const marketNodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if ((0, types_1.isVariant)(direction, 'long') && marketNodeLists.trigger.below) {\n            for (const node of marketNodeLists.trigger.below.getGenerator()) {\n                if ((0, types_1.isVariant)(node.order.direction, 'short')) {\n                    yield node;\n                }\n            }\n        }\n        else if ((0, types_1.isVariant)(direction, 'short') && marketNodeLists.trigger.above) {\n            for (const node of marketNodeLists.trigger.above.getGenerator()) {\n                if ((0, types_1.isVariant)(node.order.direction, 'long')) {\n                    yield node;\n                }\n            }\n        }\n    }\n    *getStopLossMarkets(marketIndex, marketType, direction) {\n        for (const node of this.getStopLosses(marketIndex, marketType, direction)) {\n            if ((0, types_1.isVariant)(node.order.orderType, 'triggerMarket')) {\n                yield node;\n            }\n        }\n    }\n    *getStopLossLimits(marketIndex, marketType, direction) {\n        for (const node of this.getStopLosses(marketIndex, marketType, direction)) {\n            if ((0, types_1.isVariant)(node.order.orderType, 'triggerLimit')) {\n                yield node;\n            }\n        }\n    }\n    *getTakeProfits(marketIndex, marketType, direction) {\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const marketNodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if ((0, types_1.isVariant)(direction, 'long') && marketNodeLists.trigger.above) {\n            for (const node of marketNodeLists.trigger.above.getGenerator()) {\n                if ((0, types_1.isVariant)(node.order.direction, 'short')) {\n                    yield node;\n                }\n            }\n        }\n        else if ((0, types_1.isVariant)(direction, 'short') && marketNodeLists.trigger.below) {\n            for (const node of marketNodeLists.trigger.below.getGenerator()) {\n                if ((0, types_1.isVariant)(node.order.direction, 'long')) {\n                    yield node;\n                }\n            }\n        }\n    }\n    *getTakeProfitMarkets(marketIndex, marketType, direction) {\n        for (const node of this.getTakeProfits(marketIndex, marketType, direction)) {\n            if ((0, types_1.isVariant)(node.order.orderType, 'triggerMarket')) {\n                yield node;\n            }\n        }\n    }\n    *getTakeProfitLimits(marketIndex, marketType, direction) {\n        for (const node of this.getTakeProfits(marketIndex, marketType, direction)) {\n            if ((0, types_1.isVariant)(node.order.orderType, 'triggerLimit')) {\n                yield node;\n            }\n        }\n    }\n    findNodesToTrigger(marketIndex, slot, triggerPrice, marketType, stateAccount) {\n        if ((0, exchangeStatus_1.exchangePaused)(stateAccount)) {\n            return [];\n        }\n        const nodesToTrigger = [];\n        const marketTypeStr = (0, types_1.getVariant)(marketType);\n        const marketNodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        const triggerAboveList = marketNodeLists\n            ? marketNodeLists.trigger.above\n            : undefined;\n        if (triggerAboveList) {\n            for (const node of triggerAboveList.getGenerator()) {\n                if (triggerPrice.gt(node.order.triggerPrice)) {\n                    nodesToTrigger.push({\n                        node: node,\n                    });\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        const triggerBelowList = marketNodeLists\n            ? marketNodeLists.trigger.below\n            : undefined;\n        if (triggerBelowList) {\n            for (const node of triggerBelowList.getGenerator()) {\n                if (triggerPrice.lt(node.order.triggerPrice)) {\n                    nodesToTrigger.push({\n                        node: node,\n                    });\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return nodesToTrigger;\n    }\n    printTop(driftClient, slotSubscriber, marketIndex, marketType) {\n        if ((0, types_1.isVariant)(marketType, 'perp')) {\n            const slot = slotSubscriber.getSlot();\n            const oraclePriceData = driftClient.getMMOracleDataForPerpMarket(marketIndex);\n            const bestAsk = this.getBestAsk(marketIndex, slot, marketType, oraclePriceData);\n            const bestBid = this.getBestBid(marketIndex, slot, marketType, oraclePriceData);\n            const mid = bestAsk.add(bestBid).div(new anchor_1.BN(2));\n            const bidSpread = ((0, conversion_1.convertToNumber)(bestBid, numericConstants_1.PRICE_PRECISION) /\n                (0, conversion_1.convertToNumber)(oraclePriceData.price, numericConstants_1.PRICE_PRECISION) -\n                1) *\n                100.0;\n            const askSpread = ((0, conversion_1.convertToNumber)(bestAsk, numericConstants_1.PRICE_PRECISION) /\n                (0, conversion_1.convertToNumber)(oraclePriceData.price, numericConstants_1.PRICE_PRECISION) -\n                1) *\n                100.0;\n            const name = (0, userName_1.decodeName)(driftClient.getPerpMarketAccount(marketIndex).name);\n            console.log(`Market ${name} Orders`);\n            console.log(`  Ask`, (0, conversion_1.convertToNumber)(bestAsk, numericConstants_1.PRICE_PRECISION).toFixed(3), `(${askSpread.toFixed(4)}%)`);\n            console.log(`  Mid`, (0, conversion_1.convertToNumber)(mid, numericConstants_1.PRICE_PRECISION).toFixed(3));\n            console.log(`  Bid`, (0, conversion_1.convertToNumber)(bestBid, numericConstants_1.PRICE_PRECISION).toFixed(3), `(${bidSpread.toFixed(4)}%)`);\n        }\n        else if ((0, types_1.isVariant)(marketType, 'spot')) {\n            const slot = slotSubscriber.getSlot();\n            const oraclePriceData = driftClient.getOracleDataForSpotMarket(marketIndex);\n            const bestAsk = this.getBestAsk(marketIndex, slot, types_1.MarketType.SPOT, oraclePriceData);\n            const bestBid = this.getBestBid(marketIndex, slot, types_1.MarketType.SPOT, oraclePriceData);\n            const mid = bestAsk.add(bestBid).div(new anchor_1.BN(2));\n            const bidSpread = ((0, conversion_1.convertToNumber)(bestBid, numericConstants_1.PRICE_PRECISION) /\n                (0, conversion_1.convertToNumber)(oraclePriceData.price, numericConstants_1.PRICE_PRECISION) -\n                1) *\n                100.0;\n            const askSpread = ((0, conversion_1.convertToNumber)(bestAsk, numericConstants_1.PRICE_PRECISION) /\n                (0, conversion_1.convertToNumber)(oraclePriceData.price, numericConstants_1.PRICE_PRECISION) -\n                1) *\n                100.0;\n            const name = (0, userName_1.decodeName)(driftClient.getSpotMarketAccount(marketIndex).name);\n            console.log(`Market ${name} Orders`);\n            console.log(`  Ask`, (0, conversion_1.convertToNumber)(bestAsk, numericConstants_1.PRICE_PRECISION).toFixed(3), `(${askSpread.toFixed(4)}%)`);\n            console.log(`  Mid`, (0, conversion_1.convertToNumber)(mid, numericConstants_1.PRICE_PRECISION).toFixed(3));\n            console.log(`  Bid`, (0, conversion_1.convertToNumber)(bestBid, numericConstants_1.PRICE_PRECISION).toFixed(3), `(${bidSpread.toFixed(4)}%)`);\n        }\n    }\n    getDLOBOrders() {\n        const dlobOrders = [];\n        for (const nodeList of this.getNodeLists()) {\n            for (const node of nodeList.getGenerator()) {\n                dlobOrders.push({\n                    user: new web3_js_1.PublicKey(node.userAccount),\n                    order: node.order,\n                });\n            }\n        }\n        return dlobOrders;\n    }\n    *getNodeLists() {\n        for (const [_, nodeLists] of this.orderLists.get('perp')) {\n            yield nodeLists.restingLimit.bid;\n            yield nodeLists.restingLimit.ask;\n            yield nodeLists.takingLimit.bid;\n            yield nodeLists.takingLimit.ask;\n            yield nodeLists.market.bid;\n            yield nodeLists.market.ask;\n            yield nodeLists.floatingLimit.bid;\n            yield nodeLists.floatingLimit.ask;\n            yield nodeLists.protectedFloatingLimit.bid;\n            yield nodeLists.protectedFloatingLimit.ask;\n            yield nodeLists.trigger.above;\n            yield nodeLists.trigger.below;\n        }\n        for (const [_, nodeLists] of this.orderLists.get('spot')) {\n            yield nodeLists.restingLimit.bid;\n            yield nodeLists.restingLimit.ask;\n            yield nodeLists.takingLimit.bid;\n            yield nodeLists.takingLimit.ask;\n            yield nodeLists.market.bid;\n            yield nodeLists.market.ask;\n            yield nodeLists.floatingLimit.bid;\n            yield nodeLists.floatingLimit.ask;\n            yield nodeLists.protectedFloatingLimit.bid;\n            yield nodeLists.protectedFloatingLimit.ask;\n            yield nodeLists.trigger.above;\n            yield nodeLists.trigger.below;\n        }\n    }\n    /**\n     * Get an L2 view of the order book for a given market.\n     *\n     * @param marketIndex\n     * @param marketType\n     * @param slot\n     * @param oraclePriceData\n     * @param depth how many levels of the order book to return\n     * @param fallbackL2Generators L2 generators for fallback liquidity e.g. vAMM {@link getVammL2Generator}, openbook {@link SerumSubscriber}\n     */\n    getL2({ marketIndex, marketType, slot, oraclePriceData, depth, fallbackL2Generators = [], }) {\n        const makerAskL2LevelGenerator = (0, orderBookLevels_1.getL2GeneratorFromDLOBNodes)(this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData), oraclePriceData, slot);\n        const fallbackAskGenerators = fallbackL2Generators.map((fallbackL2Generator) => {\n            return fallbackL2Generator.getL2Asks();\n        });\n        const askL2LevelGenerator = (0, orderBookLevels_1.mergeL2LevelGenerators)([makerAskL2LevelGenerator, ...fallbackAskGenerators], (a, b) => {\n            return a.price.lt(b.price);\n        });\n        const asks = (0, orderBookLevels_1.createL2Levels)(askL2LevelGenerator, depth);\n        const makerBidGenerator = (0, orderBookLevels_1.getL2GeneratorFromDLOBNodes)(this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData), oraclePriceData, slot);\n        const fallbackBidGenerators = fallbackL2Generators.map((fallbackOrders) => {\n            return fallbackOrders.getL2Bids();\n        });\n        const bidL2LevelGenerator = (0, orderBookLevels_1.mergeL2LevelGenerators)([makerBidGenerator, ...fallbackBidGenerators], (a, b) => {\n            return a.price.gt(b.price);\n        });\n        const bids = (0, orderBookLevels_1.createL2Levels)(bidL2LevelGenerator, depth);\n        return {\n            bids,\n            asks,\n            slot,\n        };\n    }\n    /**\n     * Get an L3 view of the order book for a given market. Does not include fallback liquidity sources\n     *\n     * @param marketIndex\n     * @param marketType\n     * @param slot\n     * @param oraclePriceData\n     */\n    getL3({ marketIndex, marketType, slot, oraclePriceData, }) {\n        const bids = [];\n        const asks = [];\n        const restingAsks = this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n        for (const ask of restingAsks) {\n            asks.push({\n                price: ask.getPrice(oraclePriceData, slot),\n                size: ask.order.baseAssetAmount.sub(ask.order.baseAssetAmountFilled),\n                maker: new web3_js_1.PublicKey(ask.userAccount),\n                orderId: ask.order.orderId,\n            });\n        }\n        const restingBids = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n        for (const bid of restingBids) {\n            bids.push({\n                price: bid.getPrice(oraclePriceData, slot),\n                size: bid.order.baseAssetAmount.sub(bid.order.baseAssetAmountFilled),\n                maker: new web3_js_1.PublicKey(bid.userAccount),\n                orderId: bid.order.orderId,\n            });\n        }\n        return {\n            bids,\n            asks,\n            slot,\n        };\n    }\n    estimateFillExactBaseAmountInForSide(baseAmountIn, oraclePriceData, slot, dlobSide) {\n        let runningSumQuote = numericConstants_1.ZERO;\n        let runningSumBase = numericConstants_1.ZERO;\n        for (const side of dlobSide) {\n            const price = side.getPrice(oraclePriceData, slot); //side.order.quoteAssetAmount.div(side.order.baseAssetAmount);\n            const baseAmountRemaining = side.order.baseAssetAmount.sub(side.order.baseAssetAmountFilled);\n            if (runningSumBase.add(baseAmountRemaining).gt(baseAmountIn)) {\n                const remainingBase = baseAmountIn.sub(runningSumBase);\n                runningSumBase = runningSumBase.add(remainingBase);\n                runningSumQuote = runningSumQuote.add(remainingBase.mul(price));\n                break;\n            }\n            else {\n                runningSumBase = runningSumBase.add(baseAmountRemaining);\n                runningSumQuote = runningSumQuote.add(baseAmountRemaining.mul(price));\n            }\n        }\n        return runningSumQuote\n            .mul(numericConstants_1.QUOTE_PRECISION)\n            .div(numericConstants_1.BASE_PRECISION.mul(numericConstants_1.PRICE_PRECISION));\n    }\n    /**\n     *\n     * @param param.marketIndex the index of the market\n     * @param param.marketType the type of the market\n     * @param param.baseAmount the base amount in to estimate\n     * @param param.orderDirection the direction of the trade\n     * @param param.slot current slot for estimating dlob node price\n     * @param param.oraclePriceData the oracle price data\n     * @returns the estimated quote amount filled: QUOTE_PRECISION\n     */\n    estimateFillWithExactBaseAmount({ marketIndex, marketType, baseAmount, orderDirection, slot, oraclePriceData, }) {\n        if ((0, types_1.isVariant)(orderDirection, 'long')) {\n            return this.estimateFillExactBaseAmountInForSide(baseAmount, oraclePriceData, slot, this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData));\n        }\n        else if ((0, types_1.isVariant)(orderDirection, 'short')) {\n            return this.estimateFillExactBaseAmountInForSide(baseAmount, oraclePriceData, slot, this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData));\n        }\n    }\n    getBestMakers({ marketIndex, marketType, direction, slot, oraclePriceData, numMakers, }) {\n        const makers = new Map();\n        const generator = (0, types_1.isVariant)(direction, 'long')\n            ? this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData)\n            : this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n        for (const node of generator) {\n            if (!makers.has(node.userAccount.toString())) {\n                makers.set(node.userAccount.toString(), new web3_js_1.PublicKey(node.userAccount));\n            }\n            if (makers.size === numMakers) {\n                break;\n            }\n        }\n        return Array.from(makers.values());\n    }\n}\nexports.DLOB = DLOB;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 16936, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/DLOBSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DLOBSubscriber = void 0;\nconst DLOB_1 = require(\"./DLOB\");\nconst events_1 = require(\"events\");\nconst types_1 = require(\"../types\");\nconst orderBookLevels_1 = require(\"./orderBookLevels\");\nconst protectedMakerParams_1 = require(\"../math/protectedMakerParams\");\nclass DLOBSubscriber {\n    constructor(config) {\n        this.driftClient = config.driftClient;\n        this.dlobSource = config.dlobSource;\n        this.slotSource = config.slotSource;\n        this.updateFrequency = config.updateFrequency;\n        this.protectedMakerView = config.protectedMakerView || false;\n        this.dlob = new DLOB_1.DLOB(this.getProtectedMakerParamsMap());\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        await this.updateDLOB();\n        this.intervalId = setInterval(async () => {\n            try {\n                await this.updateDLOB();\n                this.eventEmitter.emit('update', this.dlob);\n            }\n            catch (e) {\n                this.eventEmitter.emit('error', e);\n            }\n        }, this.updateFrequency);\n    }\n    getProtectedMakerParamsMap() {\n        return this.protectedMakerView\n            ? (0, protectedMakerParams_1.getProtectedMakerParamsMap)(this.driftClient.getPerpMarketAccounts())\n            : undefined;\n    }\n    async updateDLOB() {\n        this.dlob = await this.dlobSource.getDLOB(this.slotSource.getSlot(), this.getProtectedMakerParamsMap());\n    }\n    getDLOB() {\n        return this.dlob;\n    }\n    /**\n     * Get the L2 order book for a given market.\n     *\n     * @param marketName e.g. \"SOL-PERP\" or \"SOL\". If not provided, marketIndex and marketType must be provided.\n     * @param marketIndex\n     * @param marketType\n     * @param depth Number of orders to include in the order book. Defaults to 10.\n     * @param includeVamm Whether to include the VAMM orders in the order book. Defaults to false. If true, creates vAMM generator {@link getVammL2Generator} and adds it to fallbackL2Generators.\n     * @param fallbackL2Generators L2 generators for fallback liquidity e.g. vAMM {@link getVammL2Generator}, openbook {@link SerumSubscriber}\n     * @param latestSlot Latest slot observed via slot subscriber or similar for accuarate vamm quotes (if including the vAMM).\n     */\n    getL2({ marketName, marketIndex, marketType, depth = 10, includeVamm = false, numVammOrders, fallbackL2Generators = [], latestSlot, }) {\n        if (marketName) {\n            const derivedMarketInfo = this.driftClient.getMarketIndexAndType(marketName);\n            if (!derivedMarketInfo) {\n                throw new Error(`Market ${marketName} not found`);\n            }\n            marketIndex = derivedMarketInfo.marketIndex;\n            marketType = derivedMarketInfo.marketType;\n        }\n        else {\n            if (marketIndex === undefined || marketType === undefined) {\n                throw new Error('Either marketName or marketIndex and marketType must be provided');\n            }\n        }\n        let oraclePriceData;\n        const isPerp = (0, types_1.isVariant)(marketType, 'perp');\n        if (isPerp) {\n            const perpMarketAccount = this.driftClient.getPerpMarketAccount(marketIndex);\n            oraclePriceData = this.driftClient.getOracleDataForPerpMarket(perpMarketAccount.marketIndex);\n        }\n        else {\n            oraclePriceData =\n                this.driftClient.getOracleDataForSpotMarket(marketIndex);\n        }\n        if (isPerp && includeVamm) {\n            if (fallbackL2Generators.length > 0) {\n                throw new Error('includeVamm can only be used if fallbackL2Generators is empty');\n            }\n            fallbackL2Generators = [\n                (0, orderBookLevels_1.getVammL2Generator)({\n                    marketAccount: this.driftClient.getPerpMarketAccount(marketIndex),\n                    mmOraclePriceData: this.driftClient.getMMOracleDataForPerpMarket(marketIndex),\n                    numOrders: numVammOrders !== null && numVammOrders !== void 0 ? numVammOrders : depth,\n                    topOfBookQuoteAmounts: marketIndex < 3\n                        ? orderBookLevels_1.MAJORS_TOP_OF_BOOK_QUOTE_AMOUNTS\n                        : orderBookLevels_1.DEFAULT_TOP_OF_BOOK_QUOTE_AMOUNTS,\n                    latestSlot,\n                }),\n            ];\n        }\n        return this.dlob.getL2({\n            marketIndex,\n            marketType,\n            depth,\n            oraclePriceData,\n            slot: this.slotSource.getSlot(),\n            fallbackL2Generators: fallbackL2Generators,\n        });\n    }\n    /**\n     * Get the L3 order book for a given market.\n     *\n     * @param marketName e.g. \"SOL-PERP\" or \"SOL\". If not provided, marketIndex and marketType must be provided.\n     * @param marketIndex\n     * @param marketType\n     */\n    getL3({ marketName, marketIndex, marketType, }) {\n        if (marketName) {\n            const derivedMarketInfo = this.driftClient.getMarketIndexAndType(marketName);\n            if (!derivedMarketInfo) {\n                throw new Error(`Market ${marketName} not found`);\n            }\n            marketIndex = derivedMarketInfo.marketIndex;\n            marketType = derivedMarketInfo.marketType;\n        }\n        else {\n            if (marketIndex === undefined || marketType === undefined) {\n                throw new Error('Either marketName or marketIndex and marketType must be provided');\n            }\n        }\n        let oraclePriceData;\n        const isPerp = (0, types_1.isVariant)(marketType, 'perp');\n        if (isPerp) {\n            oraclePriceData =\n                this.driftClient.getOracleDataForPerpMarket(marketIndex);\n        }\n        else {\n            oraclePriceData =\n                this.driftClient.getOracleDataForSpotMarket(marketIndex);\n        }\n        return this.dlob.getL3({\n            marketIndex,\n            marketType,\n            oraclePriceData,\n            slot: this.slotSource.getSlot(),\n        });\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n}\nexports.DLOBSubscriber = DLOBSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17077, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/dlob/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 17084, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/WebsocketSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebsocketSubscription = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst webSocketProgramAccountSubscriber_1 = require(\"../accounts/webSocketProgramAccountSubscriber\");\nclass WebsocketSubscription {\n    constructor({ userMap, commitment, skipInitialLoad = false, resubOpts, includeIdle = false, decodeFn, additionalFilters = undefined, }) {\n        this.userMap = userMap;\n        this.commitment = commitment;\n        this.skipInitialLoad = skipInitialLoad;\n        this.resubOpts = resubOpts;\n        this.includeIdle = includeIdle || false;\n        this.decodeFn = decodeFn;\n        this.additionalFilters = additionalFilters;\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            const filters = [(0, memcmp_1.getUserFilter)()];\n            if (!this.includeIdle) {\n                filters.push((0, memcmp_1.getNonIdleUserFilter)());\n            }\n            if (this.additionalFilters) {\n                filters.push(...this.additionalFilters);\n            }\n            this.subscriber = new webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber('UserMap', 'User', this.userMap.driftClient.program, this.decodeFn, {\n                filters,\n                commitment: this.commitment,\n            }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((accountId, account, context) => {\n            const userKey = accountId.toBase58();\n            this.userMap.updateUserAccount(userKey, account, context.slot);\n        });\n        if (!this.skipInitialLoad) {\n            await this.userMap.sync();\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n    }\n}\nexports.WebsocketSubscription = WebsocketSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE,kBAAkB,KAAK,EAAE,SAAS,EAAE,cAAc,KAAK,EAAE,QAAQ,EAAE,oBAAoB,SAAS,EAAG,CAAE;QACpI,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,WAAW,GAAG,eAAe;QAClC,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,iBAAiB,GAAG;IAC7B;IACA,MAAM,YAAY;QACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,MAAM,UAAU;gBAAC,CAAC,GAAG,SAAS,aAAa;aAAI;YAC/C,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACnB,QAAQ,IAAI,CAAC,CAAC,GAAG,SAAS,oBAAoB;YAClD;YACA,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBACxB,QAAQ,IAAI,IAAI,IAAI,CAAC,iBAAiB;YAC1C;YACA,IAAI,CAAC,UAAU,GAAG,IAAI,oCAAoC,iCAAiC,CAAC,WAAW,QAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE;gBAC5J;gBACA,YAAY,IAAI,CAAC,UAAU;YAC/B,GAAG,IAAI,CAAC,SAAS;QACrB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,SAAS;YACjD,MAAM,UAAU,UAAU,QAAQ;YAClC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,SAAS,SAAS,QAAQ,IAAI;QACjE;QACA,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACvB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI;QAC3B;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAChB;QACJ,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW;QACjC,IAAI,CAAC,UAAU,GAAG;IACtB;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 17135, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/PollingSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PollingSubscription = void 0;\nclass PollingSubscription {\n    constructor({ userMap, frequency, skipInitialLoad = false, }) {\n        this.userMap = userMap;\n        this.frequency = frequency;\n        this.skipInitialLoad = skipInitialLoad;\n    }\n    async subscribe() {\n        if (this.intervalId || this.frequency <= 0) {\n            return;\n        }\n        const executeSync = async () => {\n            await this.userMap.sync();\n            this.intervalId = setTimeout(executeSync, this.frequency);\n        };\n        if (!this.skipInitialLoad) {\n            await this.userMap.sync();\n        }\n        executeSync();\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n}\nexports.PollingSubscription = PollingSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,mBAAmB,GAAG,KAAK;AACnC,MAAM;IACF,YAAY,EAAE,OAAO,EAAE,SAAS,EAAE,kBAAkB,KAAK,EAAG,CAAE;QAC1D,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,eAAe,GAAG;IAC3B;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,IAAI,GAAG;YACxC;QACJ;QACA,MAAM,cAAc;YAChB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI;YACvB,IAAI,CAAC,UAAU,GAAG,WAAW,aAAa,IAAI,CAAC,SAAS;QAC5D;QACA,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACvB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI;QAC3B;QACA;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,cAAc,IAAI,CAAC,UAAU;YAC7B,IAAI,CAAC,UAAU,GAAG;QACtB;IACJ;AACJ;AACA,QAAQ,mBAAmB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 17170, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/grpcSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.grpcSubscription = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst grpcProgramAccountSubscriber_1 = require(\"../accounts/grpcProgramAccountSubscriber\");\nclass grpcSubscription {\n    constructor({ grpcConfigs, userMap, skipInitialLoad = false, resubOpts, includeIdle = false, decodeFn, additionalFilters = undefined, }) {\n        this.userMap = userMap;\n        this.skipInitialLoad = skipInitialLoad;\n        this.resubOpts = resubOpts;\n        this.includeIdle = includeIdle || false;\n        this.decodeFn = decodeFn;\n        this.grpcConfigs = grpcConfigs;\n        this.additionalFilters = additionalFilters;\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            const filters = [(0, memcmp_1.getUserFilter)()];\n            if (!this.includeIdle) {\n                filters.push((0, memcmp_1.getNonIdleUserFilter)());\n            }\n            if (this.additionalFilters) {\n                filters.push(...this.additionalFilters);\n            }\n            this.subscriber = await grpcProgramAccountSubscriber_1.grpcProgramAccountSubscriber.create(this.grpcConfigs, 'UserMap', 'User', this.userMap.driftClient.program, this.decodeFn, {\n                filters,\n            }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((accountId, account, context) => {\n            const userKey = accountId.toBase58();\n            this.userMap.updateUserAccount(userKey, account, context.slot);\n        });\n        if (!this.skipInitialLoad) {\n            await this.userMap.sync();\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n    }\n}\nexports.grpcSubscription = grpcSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,gBAAgB,GAAG,KAAK;AAChC,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,WAAW,EAAE,OAAO,EAAE,kBAAkB,KAAK,EAAE,SAAS,EAAE,cAAc,KAAK,EAAE,QAAQ,EAAE,oBAAoB,SAAS,EAAG,CAAE;QACrI,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,WAAW,GAAG,eAAe;QAClC,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,iBAAiB,GAAG;IAC7B;IACA,MAAM,YAAY;QACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,MAAM,UAAU;gBAAC,CAAC,GAAG,SAAS,aAAa;aAAI;YAC/C,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACnB,QAAQ,IAAI,CAAC,CAAC,GAAG,SAAS,oBAAoB;YAClD;YACA,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBACxB,QAAQ,IAAI,IAAI,IAAI,CAAC,iBAAiB;YAC1C;YACA,IAAI,CAAC,UAAU,GAAG,MAAM,+BAA+B,4BAA4B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,QAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE;gBAC7K;YACJ,GAAG,IAAI,CAAC,SAAS;QACrB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,SAAS;YACjD,MAAM,UAAU,UAAU,QAAQ;YAClC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,SAAS,SAAS,QAAQ,IAAI;QACjE;QACA,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACvB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI;QAC3B;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAChB;QACJ,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW;QACjC,IAAI,CAAC,UAAU,GAAG;IACtB;AACJ;AACA,QAAQ,gBAAgB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 17220, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/userMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserMap = void 0;\nconst user_1 = require(\"../user\");\nconst DLOB_1 = require(\"../dlob/DLOB\");\nconst oneShotUserAccountSubscriber_1 = require(\"../accounts/oneShotUserAccountSubscriber\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst buffer_1 = require(\"buffer\");\nconst zstddec_1 = require(\"zstddec\");\nconst memcmp_1 = require(\"../memcmp\");\nconst WebsocketSubscription_1 = require(\"./WebsocketSubscription\");\nconst PollingSubscription_1 = require(\"./PollingSubscription\");\nconst user_2 = require(\"../decode/user\");\nconst grpcSubscription_1 = require(\"./grpcSubscription\");\nconst events_1 = require(\"events\");\nconst MAX_USER_ACCOUNT_SIZE_BYTES = 4376;\nclass UserMap {\n    /**\n     * Constructs a new UserMap instance.\n     */\n    constructor(config) {\n        var _a, _b, _c, _d, _e, _f;\n        this.userMap = new Map();\n        this.stateAccountUpdateCallback = async (state) => {\n            if (!state.numberOfSubAccounts.eq(this.lastNumberOfSubAccounts)) {\n                await this.sync();\n                this.lastNumberOfSubAccounts = state.numberOfSubAccounts;\n            }\n        };\n        this.mostRecentSlot = 0;\n        this.driftClient = config.driftClient;\n        if (config.connection) {\n            this.connection = config.connection;\n        }\n        else {\n            this.connection = this.driftClient.connection;\n        }\n        this.commitment =\n            config.subscriptionConfig.type === 'websocket' ||\n                config.subscriptionConfig.type === 'polling'\n                ? (_a = config.subscriptionConfig.commitment) !== null && _a !== void 0 ? _a : this.driftClient.opts.commitment\n                : this.driftClient.opts.commitment;\n        this.includeIdle = (_b = config.includeIdle) !== null && _b !== void 0 ? _b : false;\n        this.filterByPoolId = config.filterByPoolId;\n        this.additionalFilters = config.additionalFilters;\n        this.disableSyncOnTotalAccountsChange =\n            (_c = config.disableSyncOnTotalAccountsChange) !== null && _c !== void 0 ? _c : false;\n        let decodeFn;\n        if ((_d = config.fastDecode) !== null && _d !== void 0 ? _d : true) {\n            decodeFn = (name, buffer) => (0, user_2.decodeUser)(buffer);\n        }\n        else {\n            decodeFn =\n                this.driftClient.program.account.user.coder.accounts.decodeUnchecked.bind(this.driftClient.program.account.user.coder.accounts);\n        }\n        this.decode = decodeFn;\n        if (config.subscriptionConfig.type === 'polling') {\n            this.subscription = new PollingSubscription_1.PollingSubscription({\n                userMap: this,\n                frequency: config.subscriptionConfig.frequency,\n                skipInitialLoad: config.skipInitialLoad,\n            });\n        }\n        else if (config.subscriptionConfig.type === 'grpc') {\n            this.subscription = new grpcSubscription_1.grpcSubscription({\n                userMap: this,\n                grpcConfigs: config.subscriptionConfig.grpcConfigs,\n                resubOpts: {\n                    resubTimeoutMs: config.subscriptionConfig.resubTimeoutMs,\n                    logResubMessages: config.subscriptionConfig.logResubMessages,\n                },\n                skipInitialLoad: config.skipInitialLoad,\n                decodeFn,\n            });\n        }\n        else {\n            this.subscription = new WebsocketSubscription_1.WebsocketSubscription({\n                userMap: this,\n                commitment: this.commitment,\n                resubOpts: {\n                    resubTimeoutMs: config.subscriptionConfig.resubTimeoutMs,\n                    logResubMessages: config.subscriptionConfig.logResubMessages,\n                },\n                skipInitialLoad: config.skipInitialLoad,\n                decodeFn,\n            });\n        }\n        this.syncConfig = (_e = config.syncConfig) !== null && _e !== void 0 ? _e : {\n            type: 'default',\n        };\n        // Whether to throw an error if the userMap fails to sync. Defaults to false.\n        this.throwOnFailedSync = (_f = config.throwOnFailedSync) !== null && _f !== void 0 ? _f : false;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        this.lastNumberOfSubAccounts =\n            this.driftClient.getStateAccount().numberOfSubAccounts;\n        if (!this.disableSyncOnTotalAccountsChange) {\n            this.driftClient.eventEmitter.on('stateAccountUpdate', this.stateAccountUpdateCallback);\n        }\n        await this.subscription.subscribe();\n    }\n    async addPubkey(userAccountPublicKey, userAccount, slot, accountSubscription) {\n        var _a;\n        const user = new user_1.User({\n            driftClient: this.driftClient,\n            userAccountPublicKey,\n            accountSubscription: accountSubscription !== null && accountSubscription !== void 0 ? accountSubscription : {\n                type: 'custom',\n                // OneShotUserAccountSubscriber used here so we don't load up the RPC with AccountSubscribes\n                userAccountSubscriber: new oneShotUserAccountSubscriber_1.OneShotUserAccountSubscriber(this.driftClient.program, userAccountPublicKey, userAccount, slot, this.commitment),\n            },\n        });\n        await user.subscribe(userAccount);\n        this.userMap.set(userAccountPublicKey.toString(), {\n            data: user,\n            slot: slot !== null && slot !== void 0 ? slot : (_a = user.getUserAccountAndSlot()) === null || _a === void 0 ? void 0 : _a.slot,\n        });\n        this.eventEmitter.emit('userUpdate', user);\n    }\n    has(key) {\n        return this.userMap.has(key);\n    }\n    /**\n     * gets the User for a particular userAccountPublicKey, if no User exists, undefined is returned\n     * @param key userAccountPublicKey to get User for\n     * @returns user User | undefined\n     */\n    get(key) {\n        var _a;\n        return (_a = this.userMap.get(key)) === null || _a === void 0 ? void 0 : _a.data;\n    }\n    getWithSlot(key) {\n        return this.userMap.get(key);\n    }\n    /**\n     * gets the User for a particular userAccountPublicKey, if no User exists, new one is created\n     * @param key userAccountPublicKey to get User for\n     * @returns  User\n     */\n    async mustGet(key, accountSubscription) {\n        if (!this.has(key)) {\n            await this.addPubkey(new web3_js_1.PublicKey(key), undefined, undefined, accountSubscription);\n        }\n        return this.userMap.get(key).data;\n    }\n    async mustGetWithSlot(key, accountSubscription) {\n        if (!this.has(key)) {\n            await this.addPubkey(new web3_js_1.PublicKey(key), undefined, undefined, accountSubscription);\n        }\n        return this.userMap.get(key);\n    }\n    async mustGetUserAccount(key) {\n        const user = await this.mustGet(key);\n        return user.getUserAccount();\n    }\n    /**\n     * gets the Authority for a particular userAccountPublicKey, if no User exists, undefined is returned\n     * @param key userAccountPublicKey to get User for\n     * @returns authority PublicKey | undefined\n     */\n    getUserAuthority(key) {\n        const user = this.userMap.get(key);\n        if (!user) {\n            return undefined;\n        }\n        return user.data.getUserAccount().authority;\n    }\n    /**\n     * implements the {@link DLOBSource} interface\n     * create a DLOB from all the subscribed users\n     * @param slot\n     */\n    async getDLOB(slot, protectedMakerParamsMap) {\n        const dlob = new DLOB_1.DLOB(protectedMakerParamsMap);\n        await dlob.initFromUserMap(this, slot);\n        return dlob;\n    }\n    async updateWithOrderRecord(record) {\n        if (!this.has(record.user.toString())) {\n            await this.addPubkey(record.user);\n        }\n    }\n    async updateWithEventRecord(record) {\n        if (record.eventType === 'DepositRecord') {\n            const depositRecord = record;\n            await this.mustGet(depositRecord.user.toString());\n        }\n        else if (record.eventType === 'FundingPaymentRecord') {\n            const fundingPaymentRecord = record;\n            await this.mustGet(fundingPaymentRecord.user.toString());\n        }\n        else if (record.eventType === 'LiquidationRecord') {\n            const liqRecord = record;\n            await this.mustGet(liqRecord.user.toString());\n            await this.mustGet(liqRecord.liquidator.toString());\n        }\n        else if (record.eventType === 'OrderRecord') {\n            const orderRecord = record;\n            await this.updateWithOrderRecord(orderRecord);\n        }\n        else if (record.eventType === 'OrderActionRecord') {\n            const actionRecord = record;\n            if (actionRecord.taker) {\n                await this.mustGet(actionRecord.taker.toString());\n            }\n            if (actionRecord.maker) {\n                await this.mustGet(actionRecord.maker.toString());\n            }\n        }\n        else if (record.eventType === 'SettlePnlRecord') {\n            const settlePnlRecord = record;\n            await this.mustGet(settlePnlRecord.user.toString());\n        }\n        else if (record.eventType === 'NewUserRecord') {\n            const newUserRecord = record;\n            await this.mustGet(newUserRecord.user.toString());\n        }\n        else if (record.eventType === 'LPRecord') {\n            const lpRecord = record;\n            await this.mustGet(lpRecord.user.toString());\n        }\n    }\n    *values() {\n        for (const dataAndSlot of this.userMap.values()) {\n            yield dataAndSlot.data;\n        }\n    }\n    valuesWithSlot() {\n        return this.userMap.values();\n    }\n    *entries() {\n        for (const [key, dataAndSlot] of this.userMap.entries()) {\n            yield [key, dataAndSlot.data];\n        }\n    }\n    entriesWithSlot() {\n        return this.userMap.entries();\n    }\n    size() {\n        return this.userMap.size;\n    }\n    /**\n     * Returns a unique list of authorities for all users in the UserMap that meet the filter criteria\n     * @param filterCriteria: Users must meet these criteria to be included\n     * @returns\n     */\n    getUniqueAuthorities(filterCriteria) {\n        const usersMeetingCriteria = Array.from(this.values()).filter((user) => {\n            let pass = true;\n            if (filterCriteria && filterCriteria.hasOpenOrders) {\n                pass = pass && user.getUserAccount().hasOpenOrder;\n            }\n            return pass;\n        });\n        const userAuths = new Set(usersMeetingCriteria.map((user) => user.getUserAccount().authority.toBase58()));\n        const userAuthKeys = Array.from(userAuths).map((userAuth) => new web3_js_1.PublicKey(userAuth));\n        return userAuthKeys;\n    }\n    async sync() {\n        if (this.syncConfig.type === 'default') {\n            return this.defaultSync();\n        }\n        else {\n            return this.paginatedSync();\n        }\n    }\n    getFilters() {\n        const filters = [(0, memcmp_1.getUserFilter)()];\n        if (!this.includeIdle) {\n            filters.push((0, memcmp_1.getNonIdleUserFilter)());\n        }\n        if (this.filterByPoolId !== undefined) {\n            filters.push((0, memcmp_1.getUsersWithPoolId)(this.filterByPoolId));\n        }\n        if (this.additionalFilters) {\n            filters.push(...this.additionalFilters);\n        }\n        return filters;\n    }\n    /**\n     * Syncs the UserMap using the default sync method (single getProgramAccounts call with filters).\n     * This method may fail when drift has too many users. (nodejs response size limits)\n     * @returns\n     */\n    async defaultSync() {\n        var _a;\n        if (this.syncPromise) {\n            return this.syncPromise;\n        }\n        this.syncPromise = new Promise((resolver) => {\n            this.syncPromiseResolver = resolver;\n        });\n        try {\n            const rpcRequestArgs = [\n                this.driftClient.program.programId.toBase58(),\n                {\n                    commitment: this.commitment,\n                    filters: this.getFilters(),\n                    encoding: 'base64+zstd',\n                    withContext: true,\n                },\n            ];\n            // @ts-ignore\n            const rpcJSONResponse = await this.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n            const rpcResponseAndContext = rpcJSONResponse.result;\n            const slot = rpcResponseAndContext.context.slot;\n            this.updateLatestSlot(slot);\n            const programAccountBufferMap = new Map();\n            const decodingPromises = rpcResponseAndContext.value.map(async (programAccount) => {\n                const compressedUserData = buffer_1.Buffer.from(programAccount.account.data[0], 'base64');\n                const decoder = new zstddec_1.ZSTDDecoder();\n                await decoder.init();\n                const userBuffer = decoder.decode(compressedUserData, MAX_USER_ACCOUNT_SIZE_BYTES);\n                programAccountBufferMap.set(programAccount.pubkey.toString(), buffer_1.Buffer.from(userBuffer));\n            });\n            await Promise.all(decodingPromises);\n            const promises = Array.from(programAccountBufferMap.entries()).map(([key, buffer]) => (async () => {\n                const currAccountWithSlot = this.getWithSlot(key);\n                if (currAccountWithSlot) {\n                    if (slot >= currAccountWithSlot.slot) {\n                        const userAccount = this.decode('User', buffer);\n                        this.updateUserAccount(key, userAccount, slot);\n                    }\n                }\n                else {\n                    const userAccount = this.decode('User', buffer);\n                    await this.addPubkey(new web3_js_1.PublicKey(key), userAccount, slot);\n                }\n            })());\n            await Promise.all(promises);\n            for (const [key] of this.entries()) {\n                if (!programAccountBufferMap.has(key)) {\n                    const user = this.get(key);\n                    if (user) {\n                        await user.unsubscribe();\n                        this.userMap.delete(key);\n                    }\n                }\n            }\n        }\n        catch (err) {\n            const e = err;\n            console.error(`Error in UserMap.sync(): ${e.message} ${(_a = e.stack) !== null && _a !== void 0 ? _a : ''}`);\n            if (this.throwOnFailedSync) {\n                throw e;\n            }\n        }\n        finally {\n            this.syncPromiseResolver();\n            this.syncPromise = undefined;\n        }\n    }\n    /**\n     * Syncs the UserMap using the paginated sync method (multiple getMultipleAccounts calls with filters).\n     * This method is more reliable when drift has many users.\n     * @returns\n     */\n    async paginatedSync() {\n        var _a, _b;\n        if (this.syncPromise) {\n            return this.syncPromise;\n        }\n        this.syncPromise = new Promise((resolve) => {\n            this.syncPromiseResolver = resolve;\n        });\n        try {\n            const accountsPrefetch = await this.connection.getProgramAccounts(this.driftClient.program.programId, {\n                dataSlice: { offset: 0, length: 0 },\n                filters: this.getFilters(),\n            });\n            const accountPublicKeys = accountsPrefetch.map((account) => account.pubkey);\n            const limitConcurrency = async (tasks, limit) => {\n                const executing = [];\n                const results = [];\n                for (let i = 0; i < tasks.length; i++) {\n                    const executor = Promise.resolve().then(tasks[i]);\n                    results.push(executor);\n                    if (executing.length < limit) {\n                        executing.push(executor);\n                        executor.finally(() => {\n                            const index = executing.indexOf(executor);\n                            if (index > -1) {\n                                executing.splice(index, 1);\n                            }\n                        });\n                    }\n                    else {\n                        await Promise.race(executing);\n                    }\n                }\n                return Promise.all(results);\n            };\n            const programAccountBufferMap = new Map();\n            // @ts-ignore\n            const chunkSize = (_a = this.syncConfig.chunkSize) !== null && _a !== void 0 ? _a : 100;\n            const tasks = [];\n            for (let i = 0; i < accountPublicKeys.length; i += chunkSize) {\n                const chunk = accountPublicKeys.slice(i, i + chunkSize);\n                tasks.push(async () => {\n                    const accountInfos = await this.connection.getMultipleAccountsInfoAndContext(chunk, {\n                        commitment: this.commitment,\n                    });\n                    const accountInfosSlot = accountInfos.context.slot;\n                    for (let j = 0; j < accountInfos.value.length; j += 1) {\n                        const accountInfo = accountInfos.value[j];\n                        if (accountInfo === null)\n                            continue;\n                        const publicKeyString = chunk[j].toString();\n                        const buffer = buffer_1.Buffer.from(accountInfo.data);\n                        programAccountBufferMap.set(publicKeyString, buffer);\n                        const decodedUser = this.decode('User', buffer);\n                        const currAccountWithSlot = this.getWithSlot(publicKeyString);\n                        if (currAccountWithSlot &&\n                            currAccountWithSlot.slot <= accountInfosSlot) {\n                            this.updateUserAccount(publicKeyString, decodedUser, accountInfosSlot);\n                        }\n                        else {\n                            await this.addPubkey(new web3_js_1.PublicKey(publicKeyString), decodedUser, accountInfosSlot);\n                        }\n                    }\n                });\n            }\n            // @ts-ignore\n            const concurrencyLimit = (_b = this.syncConfig.concurrencyLimit) !== null && _b !== void 0 ? _b : 10;\n            await limitConcurrency(tasks, concurrencyLimit);\n            for (const [key] of this.entries()) {\n                if (!programAccountBufferMap.has(key)) {\n                    const user = this.get(key);\n                    if (user) {\n                        await user.unsubscribe();\n                        this.userMap.delete(key);\n                    }\n                }\n            }\n        }\n        catch (err) {\n            console.error(`Error in UserMap.sync():`, err);\n            if (this.throwOnFailedSync) {\n                throw err;\n            }\n        }\n        finally {\n            if (this.syncPromiseResolver) {\n                this.syncPromiseResolver();\n            }\n            this.syncPromise = undefined;\n        }\n    }\n    async unsubscribe() {\n        await this.subscription.unsubscribe();\n        for (const [key, user] of this.entries()) {\n            await user.unsubscribe();\n            this.userMap.delete(key);\n        }\n        if (this.lastNumberOfSubAccounts) {\n            if (!this.disableSyncOnTotalAccountsChange) {\n                this.driftClient.eventEmitter.removeListener('stateAccountUpdate', this.stateAccountUpdateCallback);\n            }\n            this.lastNumberOfSubAccounts = undefined;\n        }\n    }\n    async updateUserAccount(key, userAccount, slot) {\n        const userWithSlot = this.getWithSlot(key);\n        this.updateLatestSlot(slot);\n        if (userWithSlot) {\n            if (slot >= userWithSlot.slot) {\n                userWithSlot.data.accountSubscriber.updateData(userAccount, slot);\n                this.userMap.set(key, {\n                    data: userWithSlot.data,\n                    slot,\n                });\n                this.eventEmitter.emit('userUpdate', userWithSlot.data);\n            }\n        }\n        else {\n            this.addPubkey(new web3_js_1.PublicKey(key), userAccount, slot);\n        }\n    }\n    updateLatestSlot(slot) {\n        this.mostRecentSlot = Math.max(slot, this.mostRecentSlot);\n    }\n    getSlot() {\n        return this.mostRecentSlot;\n    }\n}\nexports.UserMap = UserMap;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17687, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/referrerMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReferrerMap = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst pda_1 = require(\"../addresses/pda\");\nconst memcmp_1 = require(\"../memcmp\");\nconst bytes_1 = require(\"@coral-xyz/anchor/dist/cjs/utils/bytes\");\nconst DEFAULT_PUBLIC_KEY = web3_js_1.PublicKey.default.toBase58();\nclass ReferrerMap {\n    /**\n     * Creates a new UserStatsMap instance.\n     *\n     * @param {DriftClient} driftClient - The DriftClient instance.\n     */\n    constructor(driftClient, parallelSync) {\n        /**\n         * map from authority pubkey to referrer pubkey.\n         */\n        this.authorityReferrerMap = new Map();\n        /**\n         * map from referrer pubkey to ReferrerInfo.\n         * Will be undefined if the referrer is not in the map yet.\n         */\n        this.referrerReferrerInfoMap = new Map();\n        this.driftClient = driftClient;\n        this.parallelSync = parallelSync !== undefined ? parallelSync : true;\n    }\n    /**\n     * Subscribe to all UserStats accounts.\n     */\n    async subscribe() {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        await this.sync();\n    }\n    has(authorityPublicKey) {\n        return this.authorityReferrerMap.has(authorityPublicKey);\n    }\n    get(authorityPublicKey) {\n        return this.getReferrer(authorityPublicKey);\n    }\n    async addReferrer(authority, referrer) {\n        if (referrer) {\n            this.authorityReferrerMap.set(authority, referrer);\n        }\n        else if (referrer === undefined) {\n            const userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, new web3_js_1.PublicKey(authority));\n            const buffer = (await this.driftClient.connection.getAccountInfo(userStatsAccountPublicKey, 'processed')).data;\n            const referrer = bytes_1.bs58.encode(buffer.subarray(40, 72));\n            this.addReferrer(authority, referrer);\n        }\n    }\n    /**\n     * Enforce that a UserStats will exist for the given authorityPublicKey,\n     * reading one from the blockchain if necessary.\n     * @param authorityPublicKey\n     * @returns\n     */\n    async mustGet(authorityPublicKey) {\n        if (!this.has(authorityPublicKey)) {\n            await this.addReferrer(authorityPublicKey);\n        }\n        return this.getReferrer(authorityPublicKey);\n    }\n    getReferrer(authorityPublicKey) {\n        const referrer = this.authorityReferrerMap.get(authorityPublicKey);\n        if (!referrer) {\n            // return undefined if the referrer is not in the map\n            return undefined;\n        }\n        if (referrer === DEFAULT_PUBLIC_KEY) {\n            return undefined;\n        }\n        if (this.referrerReferrerInfoMap.has(referrer)) {\n            return this.referrerReferrerInfoMap.get(referrer);\n        }\n        const referrerKey = new web3_js_1.PublicKey(referrer);\n        const referrerInfo = {\n            referrer: (0, pda_1.getUserAccountPublicKeySync)(this.driftClient.program.programId, referrerKey, 0),\n            referrerStats: (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, referrerKey),\n        };\n        this.referrerReferrerInfoMap.set(referrer, referrerInfo);\n        return referrerInfo;\n    }\n    size() {\n        return this.authorityReferrerMap.size;\n    }\n    numberOfReferred() {\n        return Array.from(this.authorityReferrerMap.values()).filter((referrer) => referrer !== DEFAULT_PUBLIC_KEY).length;\n    }\n    async sync() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        this.fetchPromise = new Promise((resolver) => {\n            this.fetchPromiseResolver = resolver;\n        });\n        try {\n            if (this.parallelSync) {\n                await Promise.all([\n                    this.syncAll(),\n                    this.syncReferrer((0, memcmp_1.getUserStatsIsReferredFilter)()),\n                    this.syncReferrer((0, memcmp_1.getUserStatsIsReferredOrReferrerFilter)()),\n                ]);\n            }\n            else {\n                await this.syncAll();\n                await this.syncReferrer((0, memcmp_1.getUserStatsIsReferredFilter)());\n                await this.syncReferrer((0, memcmp_1.getUserStatsIsReferredOrReferrerFilter)());\n            }\n        }\n        finally {\n            this.fetchPromiseResolver();\n            this.fetchPromise = undefined;\n        }\n    }\n    async syncAll() {\n        const rpcRequestArgs = [\n            this.driftClient.program.programId.toBase58(),\n            {\n                commitment: this.driftClient.opts.commitment,\n                filters: [(0, memcmp_1.getUserStatsFilter)()],\n                encoding: 'base64',\n                dataSlice: {\n                    offset: 0,\n                    length: 0,\n                },\n                withContext: true,\n            },\n        ];\n        const rpcJSONResponse = \n        // @ts-ignore\n        await this.driftClient.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n        const rpcResponseAndContext = rpcJSONResponse.result;\n        for (const account of rpcResponseAndContext.value) {\n            // only add if it isn't already in the map\n            // so that if syncReferrer already set it, we dont overwrite\n            if (!this.has(account.pubkey)) {\n                this.addReferrer(account.pubkey, DEFAULT_PUBLIC_KEY);\n            }\n        }\n    }\n    async syncReferrer(referrerFilter) {\n        const rpcRequestArgs = [\n            this.driftClient.program.programId.toBase58(),\n            {\n                commitment: this.driftClient.opts.commitment,\n                filters: [(0, memcmp_1.getUserStatsFilter)(), referrerFilter],\n                encoding: 'base64',\n                dataSlice: {\n                    offset: 0,\n                    length: 72,\n                },\n                withContext: true,\n            },\n        ];\n        const rpcJSONResponse = \n        // @ts-ignore\n        await this.driftClient.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n        const rpcResponseAndContext = rpcJSONResponse.result;\n        const batchSize = 1000;\n        for (let i = 0; i < rpcResponseAndContext.value.length; i += batchSize) {\n            const batch = rpcResponseAndContext.value.slice(i, i + batchSize);\n            await Promise.all(batch.map(async (programAccount) => {\n                // @ts-ignore\n                const buffer = Buffer.from(programAccount.account.data[0], programAccount.account.data[1]);\n                const authority = bytes_1.bs58.encode(buffer.subarray(8, 40));\n                const referrer = bytes_1.bs58.encode(buffer.subarray(40, 72));\n                this.addReferrer(authority, referrer);\n            }));\n            await new Promise((resolve) => setTimeout(resolve, 0));\n        }\n    }\n    async unsubscribe() {\n        this.authorityReferrerMap.clear();\n        this.referrerReferrerInfoMap.clear();\n    }\n}\nexports.ReferrerMap = ReferrerMap;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17868, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/userStatsMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserStatsMap = void 0;\nconst pda_1 = require(\"../addresses/pda\");\nconst userStats_1 = require(\"../userStats\");\nconst bulkAccountLoader_1 = require(\"../accounts/bulkAccountLoader\");\nconst memcmp_1 = require(\"../memcmp\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nclass UserStatsMap {\n    /**\n     * Creates a new UserStatsMap instance.\n     *\n     * @param {DriftClient} driftClient - The DriftClient instance.\n     * @param {BulkAccountLoader} [bulkAccountLoader] - If not provided, a new BulkAccountLoader with polling disabled will be created.\n     */\n    constructor(driftClient, bulkAccountLoader, syncConfig) {\n        /**\n         * map from authority pubkey to UserStats\n         */\n        this.userStatsMap = new Map();\n        this.driftClient = driftClient;\n        if (!bulkAccountLoader) {\n            bulkAccountLoader = new bulkAccountLoader_1.BulkAccountLoader(driftClient.connection, driftClient.opts.commitment, 0);\n        }\n        this.bulkAccountLoader = bulkAccountLoader;\n        this.syncConfig = syncConfig !== null && syncConfig !== void 0 ? syncConfig : {\n            type: 'default',\n        };\n        this.decode =\n            this.driftClient.program.account.userStats.coder.accounts.decodeUnchecked.bind(this.driftClient.program.account.userStats.coder.accounts);\n    }\n    async subscribe(authorities) {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        await this.sync(authorities);\n    }\n    /**\n     *\n     * @param authority that owns the UserStatsAccount\n     * @param userStatsAccount optional UserStatsAccount to subscribe to, if undefined will be fetched later\n     * @param skipFetch if true, will not immediately fetch the UserStatsAccount\n     */\n    async addUserStat(authority, userStatsAccount, skipFetch) {\n        const userStat = new userStats_1.UserStats({\n            driftClient: this.driftClient,\n            userStatsAccountPublicKey: (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, authority),\n            accountSubscription: {\n                type: 'polling',\n                accountLoader: this.bulkAccountLoader,\n            },\n        });\n        if (skipFetch) {\n            await userStat.accountSubscriber.addToAccountLoader();\n        }\n        else {\n            await userStat.subscribe(userStatsAccount);\n        }\n        this.userStatsMap.set(authority.toString(), userStat);\n    }\n    async updateWithOrderRecord(record, userMap) {\n        const user = await userMap.mustGet(record.user.toString());\n        if (!this.has(user.getUserAccount().authority.toString())) {\n            await this.addUserStat(user.getUserAccount().authority, undefined, false);\n        }\n    }\n    async updateWithEventRecord(record, userMap) {\n        if (record.eventType === 'DepositRecord') {\n            const depositRecord = record;\n            await this.mustGet(depositRecord.userAuthority.toString());\n        }\n        else if (record.eventType === 'FundingPaymentRecord') {\n            const fundingPaymentRecord = record;\n            await this.mustGet(fundingPaymentRecord.userAuthority.toString());\n        }\n        else if (record.eventType === 'LiquidationRecord') {\n            if (!userMap) {\n                return;\n            }\n            const liqRecord = record;\n            const user = await userMap.mustGet(liqRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n            const liquidatorUser = await userMap.mustGet(liqRecord.liquidator.toString());\n            await this.mustGet(liquidatorUser.getUserAccount().authority.toString());\n        }\n        else if (record.eventType === 'OrderRecord') {\n            if (!userMap) {\n                return;\n            }\n            const orderRecord = record;\n            await userMap.updateWithOrderRecord(orderRecord);\n        }\n        else if (record.eventType === 'OrderActionRecord') {\n            if (!userMap) {\n                return;\n            }\n            const actionRecord = record;\n            if (actionRecord.taker) {\n                const taker = await userMap.mustGet(actionRecord.taker.toString());\n                await this.mustGet(taker.getUserAccount().authority.toString());\n            }\n            if (actionRecord.maker) {\n                const maker = await userMap.mustGet(actionRecord.maker.toString());\n                await this.mustGet(maker.getUserAccount().authority.toString());\n            }\n        }\n        else if (record.eventType === 'SettlePnlRecord') {\n            if (!userMap) {\n                return;\n            }\n            const settlePnlRecord = record;\n            const user = await userMap.mustGet(settlePnlRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n        }\n        else if (record.eventType === 'NewUserRecord') {\n            const newUserRecord = record;\n            await this.mustGet(newUserRecord.userAuthority.toString());\n        }\n        else if (record.eventType === 'LPRecord') {\n            if (!userMap) {\n                return;\n            }\n            const lpRecord = record;\n            const user = await userMap.mustGet(lpRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n        }\n        else if (record.eventType === 'InsuranceFundStakeRecord') {\n            const ifStakeRecord = record;\n            await this.mustGet(ifStakeRecord.userAuthority.toString());\n        }\n    }\n    has(authorityPublicKey) {\n        return this.userStatsMap.has(authorityPublicKey);\n    }\n    get(authorityPublicKey) {\n        return this.userStatsMap.get(authorityPublicKey);\n    }\n    /**\n     * Enforce that a UserStats will exist for the given authorityPublicKey,\n     * reading one from the blockchain if necessary.\n     * @param authorityPublicKey\n     * @returns\n     */\n    async mustGet(authorityPublicKey) {\n        if (!this.has(authorityPublicKey)) {\n            await this.addUserStat(new web3_js_1.PublicKey(authorityPublicKey), undefined, false);\n        }\n        return this.get(authorityPublicKey);\n    }\n    values() {\n        return this.userStatsMap.values();\n    }\n    size() {\n        return this.userStatsMap.size;\n    }\n    /**\n     * Sync the UserStatsMap\n     * @param authorities list of authorities to derive UserStatsAccount public keys from.\n     * You may want to get this list from UserMap in order to filter out idle users\n     */\n    async sync(authorities) {\n        if (this.syncConfig.type === 'default') {\n            return this.defaultSync(authorities);\n        }\n        else {\n            return this.paginatedSync(authorities);\n        }\n    }\n    /**\n     * Sync the UserStatsMap using the default sync method, which loads individual users into the bulkAccountLoader and\n     * loads them. (bulkAccountLoader uses batch getMultipleAccounts)\n     * @param authorities\n     */\n    async defaultSync(authorities) {\n        await Promise.all(authorities.map((authority) => this.addUserStat(authority, undefined, true)));\n        await this.bulkAccountLoader.load();\n    }\n    /**\n     * Sync the UserStatsMap using the paginated sync method, which uses multiple getMultipleAccounts calls (without RPC batching), and limits concurrency.\n     * @param authorities\n     */\n    async paginatedSync(authorities) {\n        var _a, _b;\n        if (this.syncPromise) {\n            return this.syncPromise;\n        }\n        this.syncPromise = new Promise((resolve) => {\n            this.syncPromiseResolver = resolve;\n        });\n        try {\n            let accountsToLoad = authorities;\n            if (authorities.length === 0) {\n                const accountsPrefetch = await this.driftClient.connection.getProgramAccounts(this.driftClient.program.programId, {\n                    dataSlice: { offset: 0, length: 0 },\n                    filters: [(0, memcmp_1.getUserStatsFilter)()],\n                });\n                accountsToLoad = accountsPrefetch.map((account) => account.pubkey);\n            }\n            const limitConcurrency = async (tasks, limit) => {\n                const executing = [];\n                const results = [];\n                for (let i = 0; i < tasks.length; i++) {\n                    const executor = Promise.resolve().then(tasks[i]);\n                    results.push(executor);\n                    if (executing.length < limit) {\n                        executing.push(executor);\n                        executor.finally(() => {\n                            const index = executing.indexOf(executor);\n                            if (index > -1) {\n                                executing.splice(index, 1);\n                            }\n                        });\n                    }\n                    else {\n                        await Promise.race(executing);\n                    }\n                }\n                return Promise.all(results);\n            };\n            const programAccountBufferMap = new Set();\n            // @ts-ignore\n            const chunkSize = (_a = this.syncConfig.chunkSize) !== null && _a !== void 0 ? _a : 100;\n            const tasks = [];\n            for (let i = 0; i < accountsToLoad.length; i += chunkSize) {\n                const chunk = accountsToLoad.slice(i, i + chunkSize);\n                tasks.push(async () => {\n                    const accountInfos = await this.driftClient.connection.getMultipleAccountsInfoAndContext(chunk, {\n                        commitment: this.driftClient.opts.commitment,\n                    });\n                    for (let j = 0; j < accountInfos.value.length; j += 1) {\n                        const accountInfo = accountInfos.value[j];\n                        if (accountInfo === null)\n                            continue;\n                        const publicKeyString = chunk[j].toString();\n                        if (!this.has(publicKeyString)) {\n                            const buffer = Buffer.from(accountInfo.data);\n                            const decodedUserStats = this.decode('UserStats', buffer);\n                            programAccountBufferMap.add(decodedUserStats.authority.toBase58());\n                            this.addUserStat(decodedUserStats.authority, decodedUserStats, false);\n                        }\n                    }\n                });\n            }\n            // @ts-ignore\n            const concurrencyLimit = (_b = this.syncConfig.concurrencyLimit) !== null && _b !== void 0 ? _b : 10;\n            await limitConcurrency(tasks, concurrencyLimit);\n            for (const [key] of this.userStatsMap.entries()) {\n                if (!programAccountBufferMap.has(key)) {\n                    const user = this.get(key);\n                    if (user) {\n                        await user.unsubscribe();\n                        this.userStatsMap.delete(key);\n                    }\n                }\n            }\n        }\n        catch (err) {\n            console.error(`Error in UserStatsMap.paginatedSync():`, err);\n        }\n        finally {\n            if (this.syncPromiseResolver) {\n                this.syncPromiseResolver();\n            }\n            this.syncPromise = undefined;\n        }\n    }\n    async unsubscribe() {\n        for (const [key, userStats] of this.userStatsMap.entries()) {\n            await userStats.unsubscribe();\n            this.userStatsMap.delete(key);\n        }\n    }\n}\nexports.UserStatsMap = UserStatsMap;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 18131, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/revenueShareEscrowMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RevenueShareEscrowMap = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst pda_1 = require(\"../addresses/pda\");\nconst memcmp_1 = require(\"../memcmp\");\nclass RevenueShareEscrowMap {\n    /**\n     * Creates a new RevenueShareEscrowMap instance.\n     *\n     * @param {DriftClient} driftClient - The DriftClient instance.\n     * @param {boolean} parallelSync - Whether to sync accounts in parallel.\n     */\n    constructor(driftClient, parallelSync) {\n        /**\n         * map from authority pubkey to RevenueShareEscrow account data.\n         */\n        this.authorityEscrowMap = new Map();\n        this.driftClient = driftClient;\n        this.parallelSync = parallelSync !== undefined ? parallelSync : true;\n    }\n    /**\n     * Subscribe to all RevenueShareEscrow accounts.\n     */\n    async subscribe() {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        await this.sync();\n    }\n    has(authorityPublicKey) {\n        return this.authorityEscrowMap.has(authorityPublicKey);\n    }\n    get(authorityPublicKey) {\n        return this.authorityEscrowMap.get(authorityPublicKey);\n    }\n    /**\n     * Enforce that a RevenueShareEscrow will exist for the given authorityPublicKey,\n     * reading one from the blockchain if necessary.\n     * @param authorityPublicKey\n     * @returns\n     */\n    async mustGet(authorityPublicKey) {\n        if (!this.has(authorityPublicKey)) {\n            await this.addRevenueShareEscrow(authorityPublicKey);\n        }\n        return this.get(authorityPublicKey);\n    }\n    async addRevenueShareEscrow(authority) {\n        const escrowAccountPublicKey = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.driftClient.program.programId, new web3_js_1.PublicKey(authority));\n        try {\n            const accountInfo = await this.driftClient.connection.getAccountInfo(escrowAccountPublicKey, 'processed');\n            if (accountInfo && accountInfo.data) {\n                const escrow = this.driftClient.program.account.revenueShareEscrow.coder.accounts.decode('RevenueShareEscrow', accountInfo.data);\n                this.authorityEscrowMap.set(authority, escrow);\n            }\n        }\n        catch (error) {\n            // RevenueShareEscrow account doesn't exist for this authority, which is normal\n            console.debug(`No RevenueShareEscrow account found for authority: ${authority}`);\n        }\n    }\n    size() {\n        return this.authorityEscrowMap.size;\n    }\n    async sync() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        this.fetchPromise = new Promise((resolver) => {\n            this.fetchPromiseResolver = resolver;\n        });\n        try {\n            await this.syncAll();\n        }\n        finally {\n            this.fetchPromiseResolver();\n            this.fetchPromise = undefined;\n        }\n    }\n    /**\n     * A slow, bankrun test friendly version of sync(), uses getAccountInfo on every cached account to refresh data\n     * @returns\n     */\n    async slowSync() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        for (const authority of this.authorityEscrowMap.keys()) {\n            const accountInfo = await this.driftClient.connection.getAccountInfo((0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.driftClient.program.programId, new web3_js_1.PublicKey(authority)), 'confirmed');\n            const escrowNew = this.driftClient.program.account.revenueShareEscrow.coder.accounts.decode('RevenueShareEscrow', accountInfo.data);\n            this.authorityEscrowMap.set(authority, escrowNew);\n        }\n    }\n    async syncAll() {\n        const rpcRequestArgs = [\n            this.driftClient.program.programId.toBase58(),\n            {\n                commitment: this.driftClient.opts.commitment,\n                filters: [(0, memcmp_1.getRevenueShareEscrowFilter)()],\n                encoding: 'base64',\n                withContext: true,\n            },\n        ];\n        const rpcJSONResponse = \n        // @ts-ignore\n        await this.driftClient.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n        const rpcResponseAndContext = rpcJSONResponse.result;\n        const batchSize = 100;\n        for (let i = 0; i < rpcResponseAndContext.value.length; i += batchSize) {\n            const batch = rpcResponseAndContext.value.slice(i, i + batchSize);\n            if (this.parallelSync) {\n                await Promise.all(batch.map(async (programAccount) => {\n                    try {\n                        // @ts-ignore\n                        const buffer = Buffer.from(programAccount.account.data[0], programAccount.account.data[1]);\n                        const escrow = this.driftClient.program.account.revenueShareEscrow.coder.accounts.decode('RevenueShareEscrow', buffer);\n                        // Extract authority from the account data\n                        const authorityKey = escrow.authority.toBase58();\n                        this.authorityEscrowMap.set(authorityKey, escrow);\n                    }\n                    catch (error) {\n                        console.warn(`Failed to decode RevenueShareEscrow account ${programAccount.pubkey}:`, error);\n                    }\n                }));\n            }\n            else {\n                for (const programAccount of batch) {\n                    try {\n                        // @ts-ignore\n                        const buffer = Buffer.from(programAccount.account.data[0], programAccount.account.data[1]);\n                        const escrow = this.driftClient.program.account.revenueShareEscrow.coder.accounts.decode('RevenueShareEscrow', buffer);\n                        // Extract authority from the account data\n                        const authorityKey = escrow.authority.toBase58();\n                        this.authorityEscrowMap.set(authorityKey, escrow);\n                    }\n                    catch (error) {\n                        console.warn(`Failed to decode RevenueShareEscrow account ${programAccount.pubkey}:`, error);\n                    }\n                }\n            }\n            // Add a small delay between batches to avoid overwhelming the RPC\n            await new Promise((resolve) => setTimeout(resolve, 10));\n        }\n    }\n    /**\n     * Get all RevenueShareEscrow accounts\n     */\n    getAll() {\n        return new Map(this.authorityEscrowMap);\n    }\n    /**\n     * Get all authorities that have RevenueShareEscrow accounts\n     */\n    getAuthorities() {\n        return Array.from(this.authorityEscrowMap.keys());\n    }\n    /**\n     * Get RevenueShareEscrow accounts that have approved referrers\n     */\n    getEscrowsWithApprovedReferrers() {\n        const result = new Map();\n        for (const [authority, escrow] of this.authorityEscrowMap) {\n            if (escrow.approvedBuilders && escrow.approvedBuilders.length > 0) {\n                result.set(authority, escrow);\n            }\n        }\n        return result;\n    }\n    /**\n     * Get RevenueShareEscrow accounts that have active orders\n     */\n    getEscrowsWithOrders() {\n        const result = new Map();\n        for (const [authority, escrow] of this.authorityEscrowMap) {\n            if (escrow.orders && escrow.orders.length > 0) {\n                result.set(authority, escrow);\n            }\n        }\n        return result;\n    }\n    /**\n     * Get RevenueShareEscrow account by referrer\n     */\n    getByReferrer(referrerPublicKey) {\n        for (const escrow of this.authorityEscrowMap.values()) {\n            if (escrow.referrer.toBase58() === referrerPublicKey) {\n                return escrow;\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Get all RevenueShareEscrow accounts for a specific referrer\n     */\n    getAllByReferrer(referrerPublicKey) {\n        const result = [];\n        for (const escrow of this.authorityEscrowMap.values()) {\n            if (escrow.referrer.toBase58() === referrerPublicKey) {\n                result.push(escrow);\n            }\n        }\n        return result;\n    }\n    async unsubscribe() {\n        this.authorityEscrowMap.clear();\n    }\n}\nexports.RevenueShareEscrowMap = RevenueShareEscrowMap;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 18331, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/userMap/userMapConfig.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 18338, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/PollingSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PollingSubscription = void 0;\nclass PollingSubscription {\n    constructor({ orderSubscriber, frequency, }) {\n        this.orderSubscriber = orderSubscriber;\n        this.frequency = frequency;\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        this.intervalId = setInterval(this.orderSubscriber.fetch.bind(this.orderSubscriber), this.frequency);\n        await this.orderSubscriber.fetch();\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n}\nexports.PollingSubscription = PollingSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,mBAAmB,GAAG,KAAK;AACnC,MAAM;IACF,YAAY,EAAE,eAAe,EAAE,SAAS,EAAG,CAAE;QACzC,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,SAAS,GAAG;IACrB;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB;QACJ;QACA,IAAI,CAAC,UAAU,GAAG,YAAY,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS;QACnG,MAAM,IAAI,CAAC,eAAe,CAAC,KAAK;IACpC;IACA,MAAM,cAAc;QAChB,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,cAAc,IAAI,CAAC,UAAU;YAC7B,IAAI,CAAC,UAAU,GAAG;QACtB;IACJ;AACJ;AACA,QAAQ,mBAAmB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18366, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/WebsocketSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebsocketSubscription = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst webSocketProgramAccountSubscriber_1 = require(\"../accounts/webSocketProgramAccountSubscriber\");\nclass WebsocketSubscription {\n    constructor({ orderSubscriber, commitment, skipInitialLoad = false, resubOpts, resyncIntervalMs, decoded = true, }) {\n        this.orderSubscriber = orderSubscriber;\n        this.commitment = commitment;\n        this.skipInitialLoad = skipInitialLoad;\n        this.resubOpts = resubOpts;\n        this.resyncIntervalMs = resyncIntervalMs;\n        this.decoded = decoded;\n    }\n    async subscribe() {\n        if (this.subscriber) {\n            return;\n        }\n        this.subscriber = new webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber('OrderSubscriber', 'User', this.orderSubscriber.driftClient.program, this.orderSubscriber.decodeFn, {\n            filters: [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getNonIdleUserFilter)()],\n            commitment: this.commitment,\n        }, this.resubOpts);\n        await this.subscriber.subscribe((accountId, account, context, buffer) => {\n            var _a;\n            const userKey = accountId.toBase58();\n            if ((_a = this.decoded) !== null && _a !== void 0 ? _a : true) {\n                this.orderSubscriber.tryUpdateUserAccount(userKey, 'decoded', account, context.slot);\n            }\n            else {\n                this.orderSubscriber.tryUpdateUserAccount(userKey, 'buffer', buffer, context.slot);\n            }\n        });\n        if (!this.skipInitialLoad) {\n            await this.orderSubscriber.fetch();\n        }\n        if (this.resyncIntervalMs) {\n            const recursiveResync = () => {\n                this.resyncTimeoutId = setTimeout(() => {\n                    this.orderSubscriber\n                        .fetch()\n                        .catch((e) => {\n                        console.error('Failed to resync in OrderSubscriber');\n                        console.log(e);\n                    })\n                        .finally(() => {\n                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                        if (!this.resyncTimeoutId)\n                            return;\n                        recursiveResync();\n                    });\n                }, this.resyncIntervalMs);\n            };\n            recursiveResync();\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n        if (this.resyncTimeoutId !== undefined) {\n            clearTimeout(this.resyncTimeoutId);\n            this.resyncTimeoutId = undefined;\n        }\n    }\n}\nexports.WebsocketSubscription = WebsocketSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,eAAe,EAAE,UAAU,EAAE,kBAAkB,KAAK,EAAE,SAAS,EAAE,gBAAgB,EAAE,UAAU,IAAI,EAAG,CAAE;QAChH,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,OAAO,GAAG;IACnB;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB;QACJ;QACA,IAAI,CAAC,UAAU,GAAG,IAAI,oCAAoC,iCAAiC,CAAC,mBAAmB,QAAQ,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE;YAC5L,SAAS;gBAAC,CAAC,GAAG,SAAS,aAAa;gBAAK,CAAC,GAAG,SAAS,oBAAoB;aAAI;YAC9E,YAAY,IAAI,CAAC,UAAU;QAC/B,GAAG,IAAI,CAAC,SAAS;QACjB,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,SAAS,SAAS;YAC1D,IAAI;YACJ,MAAM,UAAU,UAAU,QAAQ;YAClC,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,MAAM;gBAC3D,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,SAAS,WAAW,SAAS,QAAQ,IAAI;YACvF,OACK;gBACD,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,SAAS,UAAU,QAAQ,QAAQ,IAAI;YACrF;QACJ;QACA,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACvB,MAAM,IAAI,CAAC,eAAe,CAAC,KAAK;QACpC;QACA,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,MAAM,kBAAkB;gBACpB,IAAI,CAAC,eAAe,GAAG,WAAW;oBAC9B,IAAI,CAAC,eAAe,CACf,KAAK,GACL,KAAK,CAAC,CAAC;wBACR,QAAQ,KAAK,CAAC;wBACd,QAAQ,GAAG,CAAC;oBAChB,GACK,OAAO,CAAC;wBACT,6DAA6D;wBAC7D,IAAI,CAAC,IAAI,CAAC,eAAe,EACrB;wBACJ;oBACJ;gBACJ,GAAG,IAAI,CAAC,gBAAgB;YAC5B;YACA;QACJ;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAChB;QACJ,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW;QACjC,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACpC,aAAa,IAAI,CAAC,eAAe;YACjC,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18435, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/grpcSubscription.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.grpcSubscription = void 0;\nconst grpcProgramAccountSubscriber_1 = require(\"../accounts/grpcProgramAccountSubscriber\");\nconst memcmp_1 = require(\"../memcmp\");\nconst laserProgramAccountSubscriber_1 = require(\"../accounts/laserProgramAccountSubscriber\");\nclass grpcSubscription {\n    constructor({ grpcConfigs, orderSubscriber, skipInitialLoad = false, resubOpts, resyncIntervalMs, decoded = true, }) {\n        this.orderSubscriber = orderSubscriber;\n        this.skipInitialLoad = skipInitialLoad;\n        this.resubOpts = resubOpts;\n        this.resyncIntervalMs = resyncIntervalMs;\n        this.decoded = decoded;\n        this.grpcConfigs = grpcConfigs;\n    }\n    async subscribe() {\n        if (this.subscriber) {\n            return;\n        }\n        if (this.grpcConfigs.client === 'laser') {\n            this.subscriber =\n                await laserProgramAccountSubscriber_1.LaserstreamProgramAccountSubscriber.create(this.grpcConfigs, 'OrderSubscriber', 'User', this.orderSubscriber.driftClient.program, this.orderSubscriber.decodeFn, {\n                    filters: [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getNonIdleUserFilter)()],\n                }, this.resubOpts);\n        }\n        else {\n            this.subscriber = await grpcProgramAccountSubscriber_1.grpcProgramAccountSubscriber.create(this.grpcConfigs, 'OrderSubscriber', 'User', this.orderSubscriber.driftClient.program, this.orderSubscriber.decodeFn, {\n                filters: [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getNonIdleUserFilter)()],\n            }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((accountId, account, context, buffer) => {\n            var _a;\n            const userKey = accountId.toBase58();\n            if ((_a = this.decoded) !== null && _a !== void 0 ? _a : true) {\n                this.orderSubscriber.tryUpdateUserAccount(userKey, 'decoded', account, context.slot);\n            }\n            else {\n                this.orderSubscriber.tryUpdateUserAccount(userKey, 'buffer', buffer, context.slot);\n            }\n        });\n        if (!this.skipInitialLoad) {\n            await this.orderSubscriber.fetch();\n        }\n        if (this.resyncIntervalMs) {\n            const recursiveResync = () => {\n                this.resyncTimeoutId = setTimeout(() => {\n                    this.orderSubscriber\n                        .fetch()\n                        .catch((e) => {\n                        console.error('Failed to resync in OrderSubscriber');\n                        console.log(e);\n                    })\n                        .finally(() => {\n                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                        if (!this.resyncTimeoutId)\n                            return;\n                        recursiveResync();\n                    });\n                }, this.resyncIntervalMs);\n            };\n            recursiveResync();\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscriber)\n            return;\n        await this.subscriber.unsubscribe();\n        this.subscriber = undefined;\n        if (this.resyncTimeoutId !== undefined) {\n            clearTimeout(this.resyncTimeoutId);\n            this.resyncTimeoutId = undefined;\n        }\n    }\n}\nexports.grpcSubscription = grpcSubscription;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,gBAAgB,GAAG,KAAK;AAChC,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,WAAW,EAAE,eAAe,EAAE,kBAAkB,KAAK,EAAE,SAAS,EAAE,gBAAgB,EAAE,UAAU,IAAI,EAAG,CAAE;QACjH,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB;QACJ;QACA,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,SAAS;YACrC,IAAI,CAAC,UAAU,GACX,MAAM,gCAAgC,mCAAmC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,mBAAmB,QAAQ,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE;gBACnM,SAAS;oBAAC,CAAC,GAAG,SAAS,aAAa;oBAAK,CAAC,GAAG,SAAS,oBAAoB;iBAAI;YAClF,GAAG,IAAI,CAAC,SAAS;QACzB,OACK;YACD,IAAI,CAAC,UAAU,GAAG,MAAM,+BAA+B,4BAA4B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,mBAAmB,QAAQ,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE;gBAC7M,SAAS;oBAAC,CAAC,GAAG,SAAS,aAAa;oBAAK,CAAC,GAAG,SAAS,oBAAoB;iBAAI;YAClF,GAAG,IAAI,CAAC,SAAS;QACrB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,SAAS,SAAS;YAC1D,IAAI;YACJ,MAAM,UAAU,UAAU,QAAQ;YAClC,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,MAAM;gBAC3D,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,SAAS,WAAW,SAAS,QAAQ,IAAI;YACvF,OACK;gBACD,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,SAAS,UAAU,QAAQ,QAAQ,IAAI;YACrF;QACJ;QACA,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACvB,MAAM,IAAI,CAAC,eAAe,CAAC,KAAK;QACpC;QACA,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,MAAM,kBAAkB;gBACpB,IAAI,CAAC,eAAe,GAAG,WAAW;oBAC9B,IAAI,CAAC,eAAe,CACf,KAAK,GACL,KAAK,CAAC,CAAC;wBACR,QAAQ,KAAK,CAAC;wBACd,QAAQ,GAAG,CAAC;oBAChB,GACK,OAAO,CAAC;wBACT,6DAA6D;wBAC7D,IAAI,CAAC,IAAI,CAAC,eAAe,EACrB;wBACJ;oBACJ;gBACJ,GAAG,IAAI,CAAC,gBAAgB;YAC5B;YACA;QACJ;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAChB;QACJ,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW;QACjC,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACpC,aAAa,IAAI,CAAC,eAAe;YACjC,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,gBAAgB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18513, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/OrderSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OrderSubscriber = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst buffer_1 = require(\"buffer\");\nconst DLOB_1 = require(\"../dlob/DLOB\");\nconst PollingSubscription_1 = require(\"./PollingSubscription\");\nconst WebsocketSubscription_1 = require(\"./WebsocketSubscription\");\nconst events_1 = require(\"events\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst user_1 = require(\"../decode/user\");\nconst grpcSubscription_1 = require(\"./grpcSubscription\");\nconst userStatus_1 = require(\"../math/userStatus\");\nconst orders_1 = require(\"../math/orders\");\nconst numericConstants_1 = require(\"../constants/numericConstants\");\nclass OrderSubscriber {\n    constructor(config) {\n        var _a, _b, _c, _d, _e;\n        this.usersAccounts = new Map();\n        this.driftClient = config.driftClient;\n        this.commitment = config.subscriptionConfig.commitment || 'processed';\n        if (config.subscriptionConfig.type === 'polling') {\n            this.subscription = new PollingSubscription_1.PollingSubscription({\n                orderSubscriber: this,\n                frequency: config.subscriptionConfig.frequency,\n            });\n        }\n        else if (config.subscriptionConfig.type === 'grpc') {\n            this.subscription = new grpcSubscription_1.grpcSubscription({\n                orderSubscriber: this,\n                grpcConfigs: config.subscriptionConfig.grpcConfigs,\n                skipInitialLoad: config.subscriptionConfig.skipInitialLoad,\n                resubOpts: {\n                    resubTimeoutMs: (_a = config.subscriptionConfig) === null || _a === void 0 ? void 0 : _a.resubTimeoutMs,\n                    logResubMessages: (_b = config.subscriptionConfig) === null || _b === void 0 ? void 0 : _b.logResubMessages,\n                },\n                resyncIntervalMs: config.subscriptionConfig.resyncIntervalMs,\n                decoded: config.decodeData,\n            });\n        }\n        else {\n            this.subscription = new WebsocketSubscription_1.WebsocketSubscription({\n                orderSubscriber: this,\n                commitment: this.commitment,\n                skipInitialLoad: config.subscriptionConfig.skipInitialLoad,\n                resubOpts: {\n                    resubTimeoutMs: (_c = config.subscriptionConfig) === null || _c === void 0 ? void 0 : _c.resubTimeoutMs,\n                    logResubMessages: (_d = config.subscriptionConfig) === null || _d === void 0 ? void 0 : _d.logResubMessages,\n                },\n                resyncIntervalMs: config.subscriptionConfig.resyncIntervalMs,\n                decoded: config.decodeData,\n            });\n        }\n        if ((_e = config.fastDecode) !== null && _e !== void 0 ? _e : true) {\n            this.decodeFn = (name, data) => (0, user_1.decodeUser)(data);\n        }\n        else {\n            this.decodeFn =\n                this.driftClient.program.account.user.coder.accounts.decodeUnchecked.bind(this.driftClient.program.account.user.coder.accounts);\n        }\n        this.eventEmitter = new events_1.EventEmitter();\n        this.fetchAllNonIdleUsers = config.fetchAllNonIdleUsers;\n    }\n    async subscribe() {\n        await this.subscription.subscribe();\n    }\n    async fetch() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        this.fetchPromise = new Promise((resolver) => {\n            this.fetchPromiseResolver = resolver;\n        });\n        const filters = this.fetchAllNonIdleUsers\n            ? [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getNonIdleUserFilter)()]\n            : [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getUserWithOrderFilter)()];\n        try {\n            const rpcRequestArgs = [\n                this.driftClient.program.programId.toBase58(),\n                {\n                    commitment: this.commitment,\n                    filters,\n                    encoding: 'base64',\n                    withContext: true,\n                },\n            ];\n            const rpcJSONResponse = \n            // @ts-ignore\n            await this.driftClient.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n            const rpcResponseAndContext = rpcJSONResponse.result;\n            const slot = rpcResponseAndContext.context.slot;\n            for (const programAccount of rpcResponseAndContext.value) {\n                const key = programAccount.pubkey.toString();\n                this.tryUpdateUserAccount(key, 'raw', programAccount.account.data, slot);\n                // give event loop a chance to breathe\n                await new Promise((resolve) => setTimeout(resolve, 0));\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n        finally {\n            this.fetchPromiseResolver();\n            this.fetchPromise = undefined;\n        }\n    }\n    tryUpdateUserAccount(key, dataType, data, slot) {\n        if (!this.mostRecentSlot || slot > this.mostRecentSlot) {\n            this.mostRecentSlot = slot;\n        }\n        this.eventEmitter.emit('updateReceived', new web3_js_1.PublicKey(key), slot, dataType);\n        const slotAndUserAccount = this.usersAccounts.get(key);\n        if (!slotAndUserAccount || slotAndUserAccount.slot <= slot) {\n            let userAccount;\n            // Polling leads to a lot of redundant decoding, so we only decode if data is from a fresh slot\n            if (dataType === 'raw') {\n                // @ts-ignore\n                const buffer = buffer_1.Buffer.from(data[0], data[1]);\n                const newLastActiveSlot = new anchor_1.BN(buffer.subarray(4328, 4328 + 8), undefined, 'le');\n                if (slotAndUserAccount &&\n                    slotAndUserAccount.userAccount.lastActiveSlot.gt(newLastActiveSlot)) {\n                    return;\n                }\n                userAccount = this.decodeFn('User', buffer);\n            }\n            else if (dataType === 'buffer') {\n                const buffer = data;\n                const newLastActiveSlot = new anchor_1.BN(buffer.subarray(4328, 4328 + 8), undefined, 'le');\n                if (slotAndUserAccount &&\n                    slotAndUserAccount.userAccount.lastActiveSlot.gt(newLastActiveSlot)) {\n                    return;\n                }\n                userAccount = this.decodeFn('User', data);\n            }\n            else {\n                userAccount = data;\n            }\n            this.eventEmitter.emit('userUpdated', userAccount, new web3_js_1.PublicKey(key), slot, dataType);\n            const newOrders = userAccount.orders.filter((order) => {\n                var _a;\n                return order.slot.toNumber() > ((_a = slotAndUserAccount === null || slotAndUserAccount === void 0 ? void 0 : slotAndUserAccount.slot) !== null && _a !== void 0 ? _a : 0) &&\n                    order.slot.toNumber() <= slot;\n            });\n            if (newOrders.length > 0) {\n                this.eventEmitter.emit('orderCreated', userAccount, newOrders, new web3_js_1.PublicKey(key), slot, dataType);\n            }\n            this.usersAccounts.set(key, { slot, userAccount });\n        }\n    }\n    /**\n     * Creates a new DLOB for the order subscriber to fill. This will allow a\n     * caller to extend the DLOB Subscriber with a custom DLOB type.\n     * @returns New, empty DLOB object.\n     */\n    createDLOB(protectedMakerParamsMap) {\n        return new DLOB_1.DLOB(protectedMakerParamsMap);\n    }\n    async getDLOB(slot, protectedMakerParamsMap) {\n        var _a;\n        const dlob = this.createDLOB(protectedMakerParamsMap);\n        for (const [key, { userAccount }] of this.usersAccounts.entries()) {\n            const protectedMaker = (0, userStatus_1.isUserProtectedMaker)(userAccount);\n            for (const order of userAccount.orders) {\n                let baseAssetAmount = order.baseAssetAmount;\n                if (order.reduceOnly) {\n                    const existingBaseAmount = ((_a = userAccount.perpPositions.find((pos) => pos.marketIndex === order.marketIndex && pos.openOrders > 0)) === null || _a === void 0 ? void 0 : _a.baseAssetAmount) || numericConstants_1.ZERO;\n                    baseAssetAmount = (0, orders_1.calculateOrderBaseAssetAmount)(order, existingBaseAmount);\n                }\n                dlob.insertOrder(order, key, slot, protectedMaker, baseAssetAmount);\n            }\n        }\n        return dlob;\n    }\n    getSlot() {\n        var _a;\n        return (_a = this.mostRecentSlot) !== null && _a !== void 0 ? _a : 0;\n    }\n    async addPubkey(userAccountPublicKey) {\n        const accountInfo = await this.driftClient.connection.getAccountInfoAndContext(userAccountPublicKey, this.commitment);\n        if (accountInfo) {\n            this.tryUpdateUserAccount(userAccountPublicKey.toString(), 'buffer', accountInfo.value.data, accountInfo.context.slot);\n        }\n    }\n    async mustGetUserAccount(key) {\n        if (!this.usersAccounts.has(key)) {\n            await this.addPubkey(new web3_js_1.PublicKey(key));\n        }\n        return this.usersAccounts.get(key).userAccount;\n    }\n    async unsubscribe() {\n        this.usersAccounts.clear();\n        await this.subscription.unsubscribe();\n    }\n}\nexports.OrderSubscriber = OrderSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 18708, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 18715, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/orderSubscriber/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./OrderSubscriber\"), exports);\n__exportStar(require(\"./types\"), exports);\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,8SAA2C;AAC3C,oSAAiC","ignoreList":[0]}},
    {"offset": {"line": 18743, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/auctionSubscriber/types.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK","ignoreList":[0]}},
    {"offset": {"line": 18750, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/auctionSubscriber/auctionSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuctionSubscriber = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst events_1 = require(\"events\");\nconst webSocketProgramAccountSubscriber_1 = require(\"../accounts/webSocketProgramAccountSubscriber\");\nclass AuctionSubscriber {\n    constructor({ driftClient, opts, resubTimeoutMs, logResubMessages, }) {\n        this.driftClient = driftClient;\n        this.opts = opts || this.driftClient.opts;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubOpts = { resubTimeoutMs, logResubMessages };\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            this.subscriber = new webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber('AuctionSubscriber', 'User', this.driftClient.program, this.driftClient.program.account.user.coder.accounts.decode.bind(this.driftClient.program.account.user.coder.accounts), {\n                filters: [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getUserWithAuctionFilter)()],\n                commitment: this.opts.commitment,\n            }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((accountId, data, context) => {\n            this.eventEmitter.emit('onAccountUpdate', data, accountId, context.slot);\n        });\n    }\n    async unsubscribe() {\n        if (!this.subscriber) {\n            return;\n        }\n        this.subscriber.unsubscribe();\n    }\n}\nexports.AuctionSubscriber = AuctionSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,iBAAiB,GAAG,KAAK;AACjC,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,cAAc,EAAE,gBAAgB,EAAG,CAAE;QAClE,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,IAAI,GAAG,QAAQ,IAAI,CAAC,WAAW,CAAC,IAAI;QACzC,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;QAC7C,IAAI,CAAC,SAAS,GAAG;YAAE;YAAgB;QAAiB;IACxD;IACA,MAAM,YAAY;QACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,IAAI,CAAC,UAAU,GAAG,IAAI,oCAAoC,iCAAiC,CAAC,qBAAqB,QAAQ,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBACvQ,SAAS;oBAAC,CAAC,GAAG,SAAS,aAAa;oBAAK,CAAC,GAAG,SAAS,wBAAwB;iBAAI;gBAClF,YAAY,IAAI,CAAC,IAAI,CAAC,UAAU;YACpC,GAAG,IAAI,CAAC,SAAS;QACrB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,MAAM;YAC9C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,MAAM,WAAW,QAAQ,IAAI;QAC3E;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB;QACJ;QACA,IAAI,CAAC,UAAU,CAAC,WAAW;IAC/B;AACJ;AACA,QAAQ,iBAAiB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18793, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/auctionSubscriber/auctionSubscriberGrpc.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuctionSubscriberGrpc = void 0;\nconst memcmp_1 = require(\"../memcmp\");\nconst events_1 = require(\"events\");\nconst grpcProgramAccountSubscriber_1 = require(\"../accounts/grpcProgramAccountSubscriber\");\nclass AuctionSubscriberGrpc {\n    constructor({ driftClient, opts, grpcConfigs, resubTimeoutMs, logResubMessages, }) {\n        this.driftClient = driftClient;\n        this.opts = opts || this.driftClient.opts;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubOpts = { resubTimeoutMs, logResubMessages };\n        this.grpcConfigs = grpcConfigs;\n    }\n    async subscribe() {\n        if (!this.subscriber) {\n            this.subscriber = await grpcProgramAccountSubscriber_1.grpcProgramAccountSubscriber.create(this.grpcConfigs, 'AuctionSubscriber', 'User', this.driftClient.program, this.driftClient.program.account.user.coder.accounts.decode.bind(this.driftClient.program.account.user.coder.accounts), {\n                filters: [(0, memcmp_1.getUserFilter)(), (0, memcmp_1.getUserWithAuctionFilter)()],\n            }, this.resubOpts);\n        }\n        await this.subscriber.subscribe((accountId, data, context) => {\n            this.eventEmitter.emit('onAccountUpdate', data, accountId, context.slot);\n        });\n    }\n    async unsubscribe() {\n        if (!this.subscriber) {\n            return;\n        }\n        this.subscriber.unsubscribe();\n    }\n}\nexports.AuctionSubscriberGrpc = AuctionSubscriberGrpc;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,KAAK;AACrC,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,WAAW,EAAE,cAAc,EAAE,gBAAgB,EAAG,CAAE;QAC/E,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,IAAI,GAAG,QAAQ,IAAI,CAAC,WAAW,CAAC,IAAI;QACzC,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;QAC7C,IAAI,CAAC,SAAS,GAAG;YAAE;YAAgB;QAAiB;QACpD,IAAI,CAAC,WAAW,GAAG;IACvB;IACA,MAAM,YAAY;QACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,IAAI,CAAC,UAAU,GAAG,MAAM,+BAA+B,4BAA4B,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,qBAAqB,QAAQ,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;gBACxR,SAAS;oBAAC,CAAC,GAAG,SAAS,aAAa;oBAAK,CAAC,GAAG,SAAS,wBAAwB;iBAAI;YACtF,GAAG,IAAI,CAAC,SAAS;QACrB;QACA,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,WAAW,MAAM;YAC9C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,MAAM,WAAW,QAAQ,IAAI;QAC3E;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB;QACJ;QACA,IAAI,CAAC,UAAU,CAAC,WAAW;IAC/B;AACJ;AACA,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 18836, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/auctionSubscriber/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./auctionSubscriber\"), exports);\n__exportStar(require(\"./auctionSubscriberGrpc\"), exports);\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,sSAAiC;AACjC,kTAA6C;AAC7C,sTAAiD","ignoreList":[0]}},
    {"offset": {"line": 18865, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/blockhashSubscriber/BlockhashSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BlockhashSubscriber = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nclass BlockhashSubscriber {\n    constructor(config) {\n        var _a, _b;\n        this.isSubscribed = false;\n        this.blockhashes = [];\n        if (!config.connection && !config.rpcUrl) {\n            throw new Error('BlockhashSubscriber requires one of connection or rpcUrl must be provided');\n        }\n        this.connection = config.connection || new web3_js_1.Connection(config.rpcUrl);\n        this.commitment = (_a = config.commitment) !== null && _a !== void 0 ? _a : 'confirmed';\n        this.updateIntervalMs = (_b = config.updateIntervalMs) !== null && _b !== void 0 ? _b : 1000;\n    }\n    getBlockhashCacheSize() {\n        return this.blockhashes.length;\n    }\n    getLatestBlockHeight() {\n        return this.latestBlockHeight;\n    }\n    getLatestBlockHeightContext() {\n        return this.latestBlockHeightContext;\n    }\n    /**\n     * Returns the latest cached blockhash, based on an offset from the latest obtained\n     * @param offset Offset to use, defaulting to 0\n     * @param offsetType If 'seconds', it will use calculate the actual element offset based on the update interval; otherwise it will return a fixed index\n     * @returns Cached blockhash at the given offset, or undefined\n     */\n    getLatestBlockhash(offset = 0, offsetType = 'index') {\n        if (this.blockhashes.length === 0) {\n            return undefined;\n        }\n        const elementOffset = offsetType == 'seconds'\n            ? Math.floor((offset * 1000) / this.updateIntervalMs)\n            : offset;\n        const clampedOffset = Math.max(0, Math.min(this.blockhashes.length - 1, elementOffset));\n        return this.blockhashes[this.blockhashes.length - 1 - clampedOffset];\n    }\n    pruneBlockhashes() {\n        if (this.latestBlockHeight) {\n            this.blockhashes = this.blockhashes.filter((blockhash) => blockhash.lastValidBlockHeight > this.latestBlockHeight);\n        }\n    }\n    async updateBlockhash() {\n        try {\n            const [resp, lastConfirmedBlockHeight] = await Promise.all([\n                this.connection.getLatestBlockhashAndContext({\n                    commitment: this.commitment,\n                }),\n                this.connection.getBlockHeight({ commitment: this.commitment }),\n            ]);\n            this.latestBlockHeight = lastConfirmedBlockHeight;\n            this.latestBlockHeightContext = resp.context;\n            // avoid caching duplicate blockhashes\n            if (this.blockhashes.length > 0) {\n                if (resp.value.blockhash ===\n                    this.blockhashes[this.blockhashes.length - 1].blockhash) {\n                    return;\n                }\n            }\n            this.blockhashes.push(resp.value);\n        }\n        catch (e) {\n            console.error('Error updating blockhash:\\n', e);\n        }\n        finally {\n            this.pruneBlockhashes();\n        }\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return;\n        }\n        this.isSubscribed = true;\n        await this.updateBlockhash();\n        this.updateBlockhashIntervalId = setInterval(this.updateBlockhash.bind(this), this.updateIntervalMs);\n    }\n    unsubscribe() {\n        if (this.updateBlockhashIntervalId) {\n            clearInterval(this.updateBlockhashIntervalId);\n            this.updateBlockhashIntervalId = undefined;\n        }\n        this.isSubscribed = false;\n    }\n}\nexports.BlockhashSubscriber = BlockhashSubscriber;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 18955, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/blockhashSubscriber/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./BlockhashSubscriber\"), exports);\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,sTAA+C","ignoreList":[0]}},
    {"offset": {"line": 18982, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/clock/clockSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClockSubscriber = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst events_1 = require(\"events\");\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nclass ClockSubscriber {\n    get latestSlot() {\n        return this._latestSlot;\n    }\n    get currentTs() {\n        return this._currentTs;\n    }\n    constructor(connection, config) {\n        this.connection = connection;\n        this.isUnsubscribing = false;\n        this.receivingData = false;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubTimeoutMs = config === null || config === void 0 ? void 0 : config.resubTimeoutMs;\n        this.commitment = (config === null || config === void 0 ? void 0 : config.commitment) || 'confirmed';\n        if (this.resubTimeoutMs < 1000) {\n            console.log('resubTimeoutMs should be at least 1000ms to avoid spamming resub');\n        }\n    }\n    async subscribe() {\n        if (this.subscriptionId != null) {\n            return;\n        }\n        this.subscriptionId = this.connection.onAccountChange(web3_js_1.SYSVAR_CLOCK_PUBKEY, (acctInfo, context) => {\n            if (!this.latestSlot || this.latestSlot < context.slot) {\n                if (this.resubTimeoutMs && !this.isUnsubscribing) {\n                    this.receivingData = true;\n                    clearTimeout(this.timeoutId);\n                    this.setTimeout();\n                }\n                this._latestSlot = context.slot;\n                this._currentTs = new anchor_1.BN(acctInfo.data.subarray(32, 39), undefined, 'le').toNumber();\n                this.eventEmitter.emit('clockUpdate', this.currentTs);\n            }\n        }, this.commitment);\n        if (this.resubTimeoutMs) {\n            this.receivingData = true;\n            this.setTimeout();\n        }\n    }\n    setTimeout() {\n        this.timeoutId = setTimeout(async () => {\n            if (this.isUnsubscribing) {\n                // If we are in the process of unsubscribing, do not attempt to resubscribe\n                return;\n            }\n            if (this.receivingData) {\n                console.log(`No new slot in ${this.resubTimeoutMs}ms, slot subscriber resubscribing`);\n                await this.unsubscribe(true);\n                this.receivingData = false;\n                await this.subscribe();\n            }\n        }, this.resubTimeoutMs);\n    }\n    getUnixTs() {\n        return this.currentTs;\n    }\n    async unsubscribe(onResub = false) {\n        if (!onResub) {\n            this.resubTimeoutMs = undefined;\n        }\n        this.isUnsubscribing = true;\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n        if (this.subscriptionId != null) {\n            await this.connection.removeAccountChangeListener(this.subscriptionId);\n            this.subscriptionId = undefined;\n            this.isUnsubscribing = false;\n        }\n        else {\n            this.isUnsubscribing = false;\n        }\n    }\n}\nexports.ClockSubscriber = ClockSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,eAAe,GAAG,KAAK;AAC/B,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,WAAW;IAC3B;IACA,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,UAAU;IAC1B;IACA,YAAY,UAAU,EAAE,MAAM,CAAE;QAC5B,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;QAC7C,IAAI,CAAC,cAAc,GAAG,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,cAAc;QAC3F,IAAI,CAAC,UAAU,GAAG,CAAC,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,UAAU,KAAK;QACzF,IAAI,IAAI,CAAC,cAAc,GAAG,MAAM;YAC5B,QAAQ,GAAG,CAAC;QAChB;IACJ;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B;QACJ;QACA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,UAAU,mBAAmB,EAAE,CAAC,UAAU;YAC5F,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAG,QAAQ,IAAI,EAAE;gBACpD,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;oBAC9C,IAAI,CAAC,aAAa,GAAG;oBACrB,aAAa,IAAI,CAAC,SAAS;oBAC3B,IAAI,CAAC,UAAU;gBACnB;gBACA,IAAI,CAAC,WAAW,GAAG,QAAQ,IAAI;gBAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,SAAS,EAAE,CAAC,SAAS,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,WAAW,MAAM,QAAQ;gBAC3F,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,SAAS;YACxD;QACJ,GAAG,IAAI,CAAC,UAAU;QAClB,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,UAAU;QACnB;IACJ;IACA,aAAa;QACT,IAAI,CAAC,SAAS,GAAG,WAAW;YACxB,IAAI,IAAI,CAAC,eAAe,EAAE;gBACtB,2EAA2E;gBAC3E;YACJ;YACA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,QAAQ,GAAG,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,iCAAiC,CAAC;gBACpF,MAAM,IAAI,CAAC,WAAW,CAAC;gBACvB,IAAI,CAAC,aAAa,GAAG;gBACrB,MAAM,IAAI,CAAC,SAAS;YACxB;QACJ,GAAG,IAAI,CAAC,cAAc;IAC1B;IACA,YAAY;QACR,OAAO,IAAI,CAAC,SAAS;IACzB;IACA,MAAM,YAAY,UAAU,KAAK,EAAE;QAC/B,IAAI,CAAC,SAAS;YACV,IAAI,CAAC,cAAc,GAAG;QAC1B;QACA,IAAI,CAAC,eAAe,GAAG;QACvB,aAAa,IAAI,CAAC,SAAS;QAC3B,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,IAAI,CAAC,cAAc,IAAI,MAAM;YAC7B,MAAM,IAAI,CAAC,UAAU,CAAC,2BAA2B,CAAC,IAAI,CAAC,cAAc;YACrE,IAAI,CAAC,cAAc,GAAG;YACtB,IAAI,CAAC,eAAe,GAAG;QAC3B,OACK;YACD,IAAI,CAAC,eAAe,GAAG;QAC3B;IACJ;AACJ;AACA,QAAQ,eAAe,GAAG","ignoreList":[0]}},
    {"offset": {"line": 19066, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/indicative-quotes/indicativeQuotesSender.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IndicativeQuotesSender = void 0;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst tweetnacl_util_1 = require(\"tweetnacl-util\");\nconst ws_1 = __importDefault(require(\"ws\"));\nconst SEND_INTERVAL = 500;\nconst MAX_BUFFERED_AMOUNT = 20 * 1024; // 20 KB as worst case scenario\nclass IndicativeQuotesSender {\n    constructor(endpoint, keypair) {\n        this.endpoint = endpoint;\n        this.keypair = keypair;\n        this.heartbeatTimeout = null;\n        this.sendQuotesInterval = null;\n        this.heartbeatIntervalMs = 60000;\n        this.reconnectDelay = 1000;\n        this.ws = null;\n        this.connected = false;\n        this.quotes = new Map();\n    }\n    generateChallengeResponse(nonce) {\n        const messageBytes = (0, tweetnacl_util_1.decodeUTF8)(nonce);\n        const signature = tweetnacl_1.default.sign.detached(messageBytes, this.keypair.secretKey);\n        const signatureBase64 = Buffer.from(signature).toString('base64');\n        return signatureBase64;\n    }\n    handleAuthMessage(message) {\n        var _a, _b;\n        if (message['channel'] === 'auth' && message['nonce'] != null) {\n            const signatureBase64 = this.generateChallengeResponse(message['nonce']);\n            (_a = this.ws) === null || _a === void 0 ? void 0 : _a.send(JSON.stringify({\n                pubkey: this.keypair.publicKey.toBase58(),\n                signature: signatureBase64,\n            }));\n        }\n        if (message['channel'] === 'auth' &&\n            ((_b = message['message']) === null || _b === void 0 ? void 0 : _b.toLowerCase()) === 'authenticated') {\n            this.connected = true;\n        }\n    }\n    async connect() {\n        const ws = new ws_1.default(this.endpoint + '?pubkey=' + this.keypair.publicKey.toBase58());\n        this.ws = ws;\n        ws.on('open', async () => {\n            console.log('Connected to the server');\n            this.reconnectDelay = 1000;\n            ws.on('message', async (data) => {\n                var _a;\n                let message;\n                try {\n                    message = JSON.parse(data.toString());\n                }\n                catch (e) {\n                    console.warn('Failed to parse json message: ', data.toString());\n                    return;\n                }\n                this.startHeartbeatTimer();\n                if (message['channel'] === 'auth') {\n                    this.handleAuthMessage(message);\n                }\n                if (message['channel'] === 'auth' &&\n                    ((_a = message['message']) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'authenticated') {\n                    this.sendQuotesInterval = setInterval(() => {\n                        var _a, _b;\n                        if (this.connected) {\n                            for (const [marketIndex, quotes] of this.quotes.entries()) {\n                                const message = {\n                                    market_index: marketIndex,\n                                    market_type: 'perp',\n                                    quotes: quotes.map((quote) => {\n                                        return {\n                                            bid_price: quote.bidPrice.toString(),\n                                            ask_price: quote.askPrice.toString(),\n                                            bid_size: quote.bidBaseAssetAmount.toString(),\n                                            ask_size: quote.askBaseAssetAmount.toString(),\n                                            is_oracle_offset: quote.isOracleOffset,\n                                        };\n                                    }),\n                                };\n                                try {\n                                    if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === ws_1.default.OPEN &&\n                                        ((_b = this.ws) === null || _b === void 0 ? void 0 : _b.bufferedAmount) < MAX_BUFFERED_AMOUNT) {\n                                        this.ws.send(JSON.stringify(message));\n                                    }\n                                }\n                                catch (err) {\n                                    console.error('Error sending quote:', err);\n                                }\n                            }\n                        }\n                    }, SEND_INTERVAL);\n                }\n            });\n            ws.on('close', () => {\n                console.log('Disconnected from the server');\n                this.reconnect();\n            });\n            ws.on('error', (error) => {\n                console.error('WebSocket error:', error);\n                this.reconnect();\n            });\n        });\n        ws.on('unexpected-response', async (request, response) => {\n            console.error('Unexpected response, reconnecting in 5s:', response === null || response === void 0 ? void 0 : response.statusCode);\n            setTimeout(() => {\n                if (this.heartbeatTimeout)\n                    clearTimeout(this.heartbeatTimeout);\n                if (this.sendQuotesInterval)\n                    clearInterval(this.sendQuotesInterval);\n                this.reconnect();\n            }, 5000);\n        });\n        ws.on('error', async (request, response) => {\n            console.error('WS closed from error, reconnecting in 1s:', response);\n            setTimeout(() => {\n                if (this.heartbeatTimeout)\n                    clearTimeout(this.heartbeatTimeout);\n                if (this.sendQuotesInterval)\n                    clearInterval(this.sendQuotesInterval);\n                this.reconnect();\n            }, 1000);\n        });\n    }\n    startHeartbeatTimer() {\n        if (this.heartbeatTimeout) {\n            clearTimeout(this.heartbeatTimeout);\n        }\n        this.heartbeatTimeout = setTimeout(() => {\n            console.warn('No heartbeat received within 30 seconds, reconnecting...');\n            this.reconnect();\n        }, this.heartbeatIntervalMs);\n    }\n    setQuote(newQuotes) {\n        var _a;\n        if (!this.connected) {\n            console.warn('Setting quote before connected to the server, ignoring');\n        }\n        const quotes = Array.isArray(newQuotes) ? newQuotes : [newQuotes];\n        const newQuoteMap = new Map();\n        for (const quote of quotes) {\n            if (quote.marketIndex == null ||\n                quote.bidPrice == null ||\n                quote.askPrice == null ||\n                quote.bidBaseAssetAmount == null ||\n                quote.askBaseAssetAmount == null) {\n                console.warn('Received incomplete quote, ignoring and deleting old quote', quote);\n                if (quote.marketIndex != null) {\n                    this.quotes.delete(quote.marketIndex);\n                }\n                return;\n            }\n            if (!newQuoteMap.has(quote.marketIndex)) {\n                newQuoteMap.set(quote.marketIndex, []);\n            }\n            (_a = newQuoteMap.get(quote.marketIndex)) === null || _a === void 0 ? void 0 : _a.push(quote);\n        }\n        for (const marketIndex of newQuoteMap.keys()) {\n            this.quotes.set(marketIndex, newQuoteMap.get(marketIndex));\n        }\n    }\n    reconnect() {\n        if (this.ws) {\n            this.ws.removeAllListeners();\n            this.ws.terminate();\n        }\n        if (this.heartbeatTimeout) {\n            clearTimeout(this.heartbeatTimeout);\n            this.heartbeatTimeout = null;\n        }\n        if (this.sendQuotesInterval) {\n            clearInterval(this.sendQuotesInterval);\n            this.sendQuotesInterval = null;\n        }\n        console.log(`Reconnecting to WebSocket in ${this.reconnectDelay / 1000} seconds...`);\n        setTimeout(() => {\n            this.connect();\n            this.reconnectDelay = Math.min(this.reconnectDelay * 2, 30000);\n        }, this.reconnectDelay);\n    }\n}\nexports.IndicativeQuotesSender = IndicativeQuotesSender;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19246, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constituentMap/pollingConstituentAccountSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PollingConstituentAccountSubscriber = void 0;\nconst types_1 = require(\"../accounts/types\");\nconst events_1 = require(\"events\");\nclass PollingConstituentAccountSubscriber {\n    constructor(constituentMap, program, frequency, commitment, additionalFilters) {\n        this.constituentMap = constituentMap;\n        this.isSubscribed = false;\n        this.program = program;\n        this.frequency = frequency;\n        this.commitment = commitment;\n        this.additionalFilters = additionalFilters;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.isSubscribed || this.frequency <= 0) {\n            return true;\n        }\n        const executeSync = async () => {\n            await this.sync();\n            this.intervalId = setTimeout(executeSync, this.frequency);\n        };\n        // Initial sync\n        await this.sync();\n        // Start polling\n        this.intervalId = setTimeout(executeSync, this.frequency);\n        this.isSubscribed = true;\n        return true;\n    }\n    async sync() {\n        try {\n            await this.constituentMap.sync();\n            this.eventEmitter.emit('update');\n        }\n        catch (error) {\n            console.log(`PollingConstituentAccountSubscriber.sync() error: ${error.message}`);\n            this.eventEmitter.emit('error', error);\n        }\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        if (this.intervalId) {\n            clearTimeout(this.intervalId);\n            this.intervalId = undefined;\n        }\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError('You must call `subscribe` before using this function');\n        }\n    }\n    didSubscriptionSucceed() {\n        return this.isSubscribed;\n    }\n}\nexports.PollingConstituentAccountSubscriber = PollingConstituentAccountSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,mCAAmC,GAAG,KAAK;AACnD,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,cAAc,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,iBAAiB,CAAE;QAC3E,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;IACjD;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,IAAI,GAAG;YAC1C,OAAO;QACX;QACA,MAAM,cAAc;YAChB,MAAM,IAAI,CAAC,IAAI;YACf,IAAI,CAAC,UAAU,GAAG,WAAW,aAAa,IAAI,CAAC,SAAS;QAC5D;QACA,eAAe;QACf,MAAM,IAAI,CAAC,IAAI;QACf,gBAAgB;QAChB,IAAI,CAAC,UAAU,GAAG,WAAW,aAAa,IAAI,CAAC,SAAS;QACxD,IAAI,CAAC,YAAY,GAAG;QACpB,OAAO;IACX;IACA,MAAM,OAAO;QACT,IAAI;YACA,MAAM,IAAI,CAAC,cAAc,CAAC,IAAI;YAC9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;QAC3B,EACA,OAAO,OAAO;YACV,QAAQ,GAAG,CAAC,CAAC,kDAAkD,EAAE,MAAM,OAAO,EAAE;YAChF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS;QACpC;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB;QACJ;QACA,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,aAAa,IAAI,CAAC,UAAU;YAC5B,IAAI,CAAC,UAAU,GAAG;QACtB;QACA,IAAI,CAAC,YAAY,GAAG;IACxB;IACA,qBAAqB;QACjB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB,MAAM,IAAI,QAAQ,kBAAkB,CAAC;QACzC;IACJ;IACA,yBAAyB;QACrB,OAAO,IAAI,CAAC,YAAY;IAC5B;AACJ;AACA,QAAQ,mCAAmC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 19310, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constituentMap/webSocketConstituentAccountSubscriber.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocketConstituentAccountSubscriber = void 0;\nconst types_1 = require(\"../accounts/types\");\nconst events_1 = require(\"events\");\nconst webSocketProgramAccountSubscriber_1 = require(\"../accounts/webSocketProgramAccountSubscriber\");\nconst memcmp_1 = require(\"../memcmp\");\nclass WebSocketConstituentAccountSubscriber {\n    constructor(constituentMap, program, resubTimeoutMs, commitment, additionalFilters) {\n        this.constituentMap = constituentMap;\n        this.isSubscribed = false;\n        this.program = program;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.resubTimeoutMs = resubTimeoutMs;\n        this.commitment = commitment;\n        this.additionalFilters = additionalFilters;\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return true;\n        }\n        this.constituentDataAccountSubscriber =\n            new webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber('LpPoolConstituent', 'Constituent', this.program, this.program.account.constituent.coder.accounts.decode.bind(this.program.account.constituent.coder.accounts), {\n                filters: [(0, memcmp_1.getConstituentFilter)(), ...(this.additionalFilters || [])],\n                commitment: this.commitment,\n            });\n        await this.constituentDataAccountSubscriber.subscribe((accountId, account, context) => {\n            this.constituentMap.updateConstituentAccount(accountId.toBase58(), account, context.slot);\n            this.eventEmitter.emit('onAccountUpdate', account, accountId, context.slot);\n        });\n        this.eventEmitter.emit('update');\n        this.isSubscribed = true;\n        return true;\n    }\n    async sync() {\n        try {\n            await this.constituentMap.sync();\n            this.eventEmitter.emit('update');\n        }\n        catch (error) {\n            console.log(`WebSocketConstituentAccountSubscriber.sync() error: ${error.message}`);\n            this.eventEmitter.emit('error', error);\n        }\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        await Promise.all([this.constituentDataAccountSubscriber.unsubscribe()]);\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError('You must call `subscribe` before using this function');\n        }\n    }\n}\nexports.WebSocketConstituentAccountSubscriber = WebSocketConstituentAccountSubscriber;\n"],"names":[],"mappings":"AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qCAAqC,GAAG,KAAK;AACrD,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;IACF,YAAY,cAAc,EAAE,OAAO,EAAE,cAAc,EAAE,UAAU,EAAE,iBAAiB,CAAE;QAChF,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,YAAY,GAAG,IAAI,SAAS,YAAY;QAC7C,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,iBAAiB,GAAG;IAC7B;IACA,MAAM,YAAY;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,OAAO;QACX;QACA,IAAI,CAAC,gCAAgC,GACjC,IAAI,oCAAoC,iCAAiC,CAAC,qBAAqB,eAAe,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG;YACtO,SAAS;gBAAC,CAAC,GAAG,SAAS,oBAAoB;mBAAS,IAAI,CAAC,iBAAiB,IAAI,EAAE;aAAE;YAClF,YAAY,IAAI,CAAC,UAAU;QAC/B;QACJ,MAAM,IAAI,CAAC,gCAAgC,CAAC,SAAS,CAAC,CAAC,WAAW,SAAS;YACvE,IAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,UAAU,QAAQ,IAAI,SAAS,QAAQ,IAAI;YACxF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,mBAAmB,SAAS,WAAW,QAAQ,IAAI;QAC9E;QACA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,YAAY,GAAG;QACpB,OAAO;IACX;IACA,MAAM,OAAO;QACT,IAAI;YACA,MAAM,IAAI,CAAC,cAAc,CAAC,IAAI;YAC9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;QAC3B,EACA,OAAO,OAAO;YACV,QAAQ,GAAG,CAAC,CAAC,oDAAoD,EAAE,MAAM,OAAO,EAAE;YAClF,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS;QACpC;IACJ;IACA,MAAM,cAAc;QAChB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB;QACJ;QACA,MAAM,QAAQ,GAAG,CAAC;YAAC,IAAI,CAAC,gCAAgC,CAAC,WAAW;SAAG;QACvE,IAAI,CAAC,YAAY,GAAG;IACxB;IACA,qBAAqB;QACjB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB,MAAM,IAAI,QAAQ,kBAAkB,CAAC;QACzC;IACJ;AACJ;AACA,QAAQ,qCAAqC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 19376, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/constituentMap/constituentMap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConstituentMap = void 0;\nconst pollingConstituentAccountSubscriber_1 = require(\"./pollingConstituentAccountSubscriber\");\nconst webSocketConstituentAccountSubscriber_1 = require(\"./webSocketConstituentAccountSubscriber\");\nconst memcmp_1 = require(\"../memcmp\");\nconst zstddec_1 = require(\"zstddec\");\nconst pda_1 = require(\"../addresses/pda\");\nconst MAX_CONSTITUENT_SIZE_BYTES = 480; // TODO: update this when account is finalized\nclass ConstituentMap {\n    constructor(config) {\n        var _a, _b;\n        this.constituentMap = new Map();\n        this.constituentIndexToKeyMap = new Map();\n        this.spotMarketIndexToKeyMap = new Map();\n        this.driftClient = config.driftClient;\n        this.additionalFilters = config.additionalFilters;\n        this.commitment = config.subscriptionConfig.commitment;\n        this.connection = config.connection || this.driftClient.connection;\n        this.lpPoolId = (_a = config.lpPoolId) !== null && _a !== void 0 ? _a : 0;\n        this.decoder = (_b = config.decoder) !== null && _b !== void 0 ? _b : 'base64+zstd';\n        if (config.subscriptionConfig.type === 'polling') {\n            this.constituentAccountSubscriber =\n                new pollingConstituentAccountSubscriber_1.PollingConstituentAccountSubscriber(this, this.driftClient.program, config.subscriptionConfig.frequency, config.subscriptionConfig.commitment, this.getFilters());\n        }\n        else if (config.subscriptionConfig.type === 'websocket') {\n            this.constituentAccountSubscriber =\n                new webSocketConstituentAccountSubscriber_1.WebSocketConstituentAccountSubscriber(this, this.driftClient.program, config.subscriptionConfig.resubTimeoutMs, config.subscriptionConfig.commitment, this.getFilters());\n        }\n        // Listen for account updates from the subscriber\n        this.constituentAccountSubscriber.eventEmitter.on('onAccountUpdate', (account, pubkey, slot) => {\n            this.updateConstituentAccount(pubkey.toString(), account, slot);\n        });\n    }\n    getFilters() {\n        const filters = [\n            (0, memcmp_1.getConstituentFilter)(),\n            (0, memcmp_1.getConstituentLpPoolFilter)((0, pda_1.getLpPoolPublicKey)(this.driftClient.program.programId, this.lpPoolId)),\n        ];\n        if (this.additionalFilters) {\n            filters.push(...this.additionalFilters);\n        }\n        return filters;\n    }\n    decode(name, buffer) {\n        return this.driftClient.program.account.constituent.coder.accounts.decodeUnchecked(name, buffer);\n    }\n    async sync() {\n        try {\n            const rpcRequestArgs = [\n                this.driftClient.program.programId.toBase58(),\n                {\n                    commitment: this.commitment,\n                    filters: this.getFilters(),\n                    encoding: this.decoder,\n                    withContext: true,\n                },\n            ];\n            // @ts-ignore\n            const rpcJSONResponse = await this.connection._rpcRequest('getProgramAccounts', rpcRequestArgs);\n            const rpcResponseAndContext = rpcJSONResponse.result;\n            const slot = rpcResponseAndContext.context.slot;\n            const promises = rpcResponseAndContext.value.map(async (programAccount) => {\n                let buffer;\n                if (this.decoder === 'base64+zstd') {\n                    const compressedUserData = Buffer.from(programAccount.account.data[0], 'base64');\n                    const decoder = new zstddec_1.ZSTDDecoder();\n                    await decoder.init();\n                    buffer = Buffer.from(decoder.decode(compressedUserData, MAX_CONSTITUENT_SIZE_BYTES));\n                }\n                else {\n                    buffer = Buffer.from(programAccount.account.data[0], 'base64');\n                }\n                const key = programAccount.pubkey.toString();\n                const currAccountWithSlot = this.getWithSlot(key);\n                if (currAccountWithSlot) {\n                    if (slot >= currAccountWithSlot.slot) {\n                        const constituentAcc = this.decode('Constituent', buffer);\n                        this.updateConstituentAccount(key, constituentAcc, slot);\n                    }\n                }\n                else {\n                    const constituentAcc = this.decode('Constituent', buffer);\n                    this.updateConstituentAccount(key, constituentAcc, slot);\n                }\n            });\n            await Promise.all(promises);\n        }\n        catch (error) {\n            console.log(`ConstituentMap.sync() error: ${error.message}`);\n        }\n    }\n    async subscribe() {\n        await this.constituentAccountSubscriber.subscribe();\n    }\n    async unsubscribe() {\n        await this.constituentAccountSubscriber.unsubscribe();\n        this.constituentMap.clear();\n    }\n    has(key) {\n        return this.constituentMap.has(key);\n    }\n    get(key) {\n        var _a;\n        return (_a = this.constituentMap.get(key)) === null || _a === void 0 ? void 0 : _a.data;\n    }\n    getFromConstituentIndex(constituentIndex) {\n        const key = this.constituentIndexToKeyMap.get(constituentIndex);\n        return key ? this.get(key) : undefined;\n    }\n    getFromSpotMarketIndex(spotMarketIndex) {\n        const key = this.spotMarketIndexToKeyMap.get(spotMarketIndex);\n        return key ? this.get(key) : undefined;\n    }\n    getWithSlot(key) {\n        return this.constituentMap.get(key);\n    }\n    async mustGet(key) {\n        if (!this.has(key)) {\n            await this.sync();\n        }\n        const result = this.constituentMap.get(key);\n        if (!result) {\n            throw new Error(`ConstituentAccount not found for key: ${key}`);\n        }\n        return result.data;\n    }\n    async mustGetWithSlot(key) {\n        if (!this.has(key)) {\n            await this.sync();\n        }\n        const result = this.constituentMap.get(key);\n        if (!result) {\n            throw new Error(`ConstituentAccount not found for key: ${key}`);\n        }\n        return result;\n    }\n    size() {\n        return this.constituentMap.size;\n    }\n    *values() {\n        for (const dataAndSlot of this.constituentMap.values()) {\n            yield dataAndSlot.data;\n        }\n    }\n    valuesWithSlot() {\n        return this.constituentMap.values();\n    }\n    *entries() {\n        for (const [key, dataAndSlot] of this.constituentMap.entries()) {\n            yield [key, dataAndSlot.data];\n        }\n    }\n    entriesWithSlot() {\n        return this.constituentMap.entries();\n    }\n    updateConstituentAccount(key, constituentAccount, slot) {\n        const existingData = this.getWithSlot(key);\n        if (existingData) {\n            if (slot >= existingData.slot) {\n                this.constituentMap.set(key, {\n                    data: constituentAccount,\n                    slot,\n                });\n            }\n        }\n        else {\n            this.constituentMap.set(key, {\n                data: constituentAccount,\n                slot,\n            });\n        }\n        this.constituentIndexToKeyMap.set(constituentAccount.constituentIndex, key);\n        this.spotMarketIndexToKeyMap.set(constituentAccount.spotMarketIndex, key);\n    }\n}\nexports.ConstituentMap = ConstituentMap;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19554, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pyth = exports.PublicKey = exports.BN = exports.CustomizedCadenceBulkAccountLoader = exports.WebSocketDriftClientAccountSubscriberV2 = exports.WebSocketProgramAccountsSubscriberV2 = exports.WebSocketProgramUserAccountSubscriber = exports.WebSocketProgramAccountSubscriber = exports.WebSocketAccountSubscriberV2 = void 0;\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nObject.defineProperty(exports, \"BN\", { enumerable: true, get: function () { return anchor_1.BN; } });\nconst web3_js_1 = require(\"@solana/web3.js\");\nObject.defineProperty(exports, \"PublicKey\", { enumerable: true, get: function () { return web3_js_1.PublicKey; } });\nconst client_1 = __importDefault(require(\"@pythnetwork/client\"));\nexports.pyth = client_1.default;\n__exportStar(require(\"./tokenFaucet\"), exports);\n__exportStar(require(\"./oracles/types\"), exports);\n__exportStar(require(\"./oracles/pythClient\"), exports);\n__exportStar(require(\"./oracles/strictOraclePrice\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./accounts/fetch\"), exports);\n__exportStar(require(\"./accounts/webSocketDriftClientAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/webSocketInsuranceFundStakeAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/webSocketHighLeverageModeConfigAccountSubscriber\"), exports);\nvar webSocketAccountSubscriberV2_1 = require(\"./accounts/webSocketAccountSubscriberV2\");\nObject.defineProperty(exports, \"WebSocketAccountSubscriberV2\", { enumerable: true, get: function () { return webSocketAccountSubscriberV2_1.WebSocketAccountSubscriberV2; } });\nvar webSocketProgramAccountSubscriber_1 = require(\"./accounts/webSocketProgramAccountSubscriber\");\nObject.defineProperty(exports, \"WebSocketProgramAccountSubscriber\", { enumerable: true, get: function () { return webSocketProgramAccountSubscriber_1.WebSocketProgramAccountSubscriber; } });\nvar websocketProgramUserAccountSubscriber_1 = require(\"./accounts/websocketProgramUserAccountSubscriber\");\nObject.defineProperty(exports, \"WebSocketProgramUserAccountSubscriber\", { enumerable: true, get: function () { return websocketProgramUserAccountSubscriber_1.WebSocketProgramUserAccountSubscriber; } });\nvar webSocketProgramAccountsSubscriberV2_1 = require(\"./accounts/webSocketProgramAccountsSubscriberV2\");\nObject.defineProperty(exports, \"WebSocketProgramAccountsSubscriberV2\", { enumerable: true, get: function () { return webSocketProgramAccountsSubscriberV2_1.WebSocketProgramAccountsSubscriberV2; } });\nvar webSocketDriftClientAccountSubscriberV2_1 = require(\"./accounts/webSocketDriftClientAccountSubscriberV2\");\nObject.defineProperty(exports, \"WebSocketDriftClientAccountSubscriberV2\", { enumerable: true, get: function () { return webSocketDriftClientAccountSubscriberV2_1.WebSocketDriftClientAccountSubscriberV2; } });\n__exportStar(require(\"./accounts/bulkAccountLoader\"), exports);\n__exportStar(require(\"./accounts/bulkUserSubscription\"), exports);\n__exportStar(require(\"./accounts/bulkUserStatsSubscription\"), exports);\nvar customizedCadenceBulkAccountLoader_1 = require(\"./accounts/customizedCadenceBulkAccountLoader\");\nObject.defineProperty(exports, \"CustomizedCadenceBulkAccountLoader\", { enumerable: true, get: function () { return customizedCadenceBulkAccountLoader_1.CustomizedCadenceBulkAccountLoader; } });\n__exportStar(require(\"./accounts/pollingDriftClientAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingOracleAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingTokenAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingUserAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingUserStatsAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingInsuranceFundStakeAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/pollingHighLeverageModeConfigAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/basicUserAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/oneShotUserAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/oneShotUserStatsAccountSubscriber\"), exports);\n__exportStar(require(\"./accounts/types\"), exports);\n__exportStar(require(\"./addresses/pda\"), exports);\n__exportStar(require(\"./adminClient\"), exports);\n__exportStar(require(\"./assert/assert\"), exports);\n__exportStar(require(\"./testClient\"), exports);\n__exportStar(require(\"./user\"), exports);\n__exportStar(require(\"./userConfig\"), exports);\n__exportStar(require(\"./userStats\"), exports);\n__exportStar(require(\"./userName\"), exports);\n__exportStar(require(\"./userStatsConfig\"), exports);\n__exportStar(require(\"./decode/user\"), exports);\n__exportStar(require(\"./decode/customCoder\"), exports);\n__exportStar(require(\"./driftClient\"), exports);\n__exportStar(require(\"./factory/oracleClient\"), exports);\n__exportStar(require(\"./factory/bigNum\"), exports);\n__exportStar(require(\"./events/types\"), exports);\n__exportStar(require(\"./events/eventSubscriber\"), exports);\n__exportStar(require(\"./events/fetchLogs\"), exports);\n__exportStar(require(\"./events/txEventCache\"), exports);\n__exportStar(require(\"./events/webSocketLogProvider\"), exports);\n__exportStar(require(\"./events/parse\"), exports);\n__exportStar(require(\"./events/pollingLogProvider\"), exports);\n__exportStar(require(\"./jupiter/jupiterClient\"), exports);\n// Primary swap client interface - use this for all swap operations\n__exportStar(require(\"./swap/UnifiedSwapClient\"), exports);\n__exportStar(require(\"./math/auction\"), exports);\n__exportStar(require(\"./math/builder\"), exports);\n__exportStar(require(\"./math/spotMarket\"), exports);\n__exportStar(require(\"./math/conversion\"), exports);\n__exportStar(require(\"./math/exchangeStatus\"), exports);\n__exportStar(require(\"./math/funding\"), exports);\n__exportStar(require(\"./math/market\"), exports);\n__exportStar(require(\"./math/position\"), exports);\n__exportStar(require(\"./math/oracles\"), exports);\n__exportStar(require(\"./math/amm\"), exports);\n__exportStar(require(\"./math/trade\"), exports);\n__exportStar(require(\"./math/orders\"), exports);\n__exportStar(require(\"./math/repeg\"), exports);\n__exportStar(require(\"./math/liquidation\"), exports);\n__exportStar(require(\"./math/margin\"), exports);\n__exportStar(require(\"./math/insurance\"), exports);\n__exportStar(require(\"./math/superStake\"), exports);\n__exportStar(require(\"./math/spotPosition\"), exports);\n__exportStar(require(\"./math/state\"), exports);\n__exportStar(require(\"./math/tiers\"), exports);\n__exportStar(require(\"./marinade\"), exports);\n__exportStar(require(\"./orderParams\"), exports);\n__exportStar(require(\"./slot/SlotSubscriber\"), exports);\n__exportStar(require(\"./slot/SlothashSubscriber\"), exports);\n__exportStar(require(\"./wallet\"), exports);\n__exportStar(require(\"./keypair\"), exports);\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./math/utils\"), exports);\n__exportStar(require(\"./math/fuel\"), exports);\n__exportStar(require(\"./config\"), exports);\n__exportStar(require(\"./serum/serumSubscriber\"), exports);\n__exportStar(require(\"./serum/serumFulfillmentConfigMap\"), exports);\n__exportStar(require(\"./phoenix/phoenixSubscriber\"), exports);\n__exportStar(require(\"./priorityFee\"), exports);\n__exportStar(require(\"./phoenix/phoenixFulfillmentConfigMap\"), exports);\n__exportStar(require(\"./openbook/openbookV2Subscriber\"), exports);\n__exportStar(require(\"./openbook/openbookV2FulfillmentConfigMap\"), exports);\n__exportStar(require(\"./oracles/pythClient\"), exports);\n__exportStar(require(\"./oracles/pythPullClient\"), exports);\n__exportStar(require(\"./oracles/pythLazerClient\"), exports);\n__exportStar(require(\"./oracles/switchboardOnDemandClient\"), exports);\n__exportStar(require(\"./oracles/oracleId\"), exports);\n__exportStar(require(\"./oracles/utils\"), exports);\n__exportStar(require(\"./swift/swiftOrderSubscriber\"), exports);\n__exportStar(require(\"./swift/signedMsgUserAccountSubscriber\"), exports);\n__exportStar(require(\"./swift/grpcSignedMsgUserAccountSubscriber\"), exports);\n__exportStar(require(\"./tx/fastSingleTxSender\"), exports);\n__exportStar(require(\"./tx/retryTxSender\"), exports);\n__exportStar(require(\"./tx/whileValidTxSender\"), exports);\n__exportStar(require(\"./tx/priorityFeeCalculator\"), exports);\n__exportStar(require(\"./tx/forwardOnlyTxSender\"), exports);\n__exportStar(require(\"./tx/types\"), exports);\n__exportStar(require(\"./tx/txHandler\"), exports);\n__exportStar(require(\"./tx/txParamProcessor\"), exports);\n__exportStar(require(\"./util/computeUnits\"), exports);\n__exportStar(require(\"./util/digest\"), exports);\n__exportStar(require(\"./util/tps\"), exports);\n__exportStar(require(\"./util/promiseTimeout\"), exports);\n__exportStar(require(\"./util/pythOracleUtils\"), exports);\n__exportStar(require(\"./math/spotBalance\"), exports);\n__exportStar(require(\"./driftClientConfig\"), exports);\n__exportStar(require(\"./dlob/DLOB\"), exports);\n__exportStar(require(\"./dlob/DLOBNode\"), exports);\n__exportStar(require(\"./dlob/NodeList\"), exports);\n__exportStar(require(\"./dlob/DLOBSubscriber\"), exports);\n__exportStar(require(\"./dlob/types\"), exports);\n__exportStar(require(\"./dlob/orderBookLevels\"), exports);\n__exportStar(require(\"./userMap/userMap\"), exports);\n__exportStar(require(\"./userMap/referrerMap\"), exports);\n__exportStar(require(\"./userMap/userStatsMap\"), exports);\n__exportStar(require(\"./userMap/revenueShareEscrowMap\"), exports);\n__exportStar(require(\"./userMap/userMapConfig\"), exports);\n__exportStar(require(\"./math/bankruptcy\"), exports);\n__exportStar(require(\"./orderSubscriber\"), exports);\n__exportStar(require(\"./orderSubscriber/types\"), exports);\n__exportStar(require(\"./auctionSubscriber\"), exports);\n__exportStar(require(\"./auctionSubscriber/types\"), exports);\n__exportStar(require(\"./memcmp\"), exports);\n__exportStar(require(\"./decode/user\"), exports);\n__exportStar(require(\"./blockhashSubscriber\"), exports);\n__exportStar(require(\"./util/chainClock\"), exports);\n__exportStar(require(\"./util/TransactionConfirmationManager\"), exports);\n__exportStar(require(\"./clock/clockSubscriber\"), exports);\n__exportStar(require(\"./math/userStatus\"), exports);\n__exportStar(require(\"./indicative-quotes/indicativeQuotesSender\"), exports);\n__exportStar(require(\"./constants\"), exports);\n__exportStar(require(\"./constituentMap/constituentMap\"), exports);\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}