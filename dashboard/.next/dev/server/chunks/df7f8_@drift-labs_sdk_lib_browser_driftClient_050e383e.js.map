{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40drift-labs%2Bsdk%402.149.0-beta.0_%40solana%2Bsysvars%402.3.0_fastestsmallesttextencoderdecoder%401.0.22_typescript%405.9.3_ws%408.18.3/node_modules/%40drift-labs/sdk/lib/browser/driftClient.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DriftClient = void 0;\nconst anchor = __importStar(require(\"@coral-xyz/anchor\"));\nconst anchor_1 = require(\"@coral-xyz/anchor\");\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst spl_token_1 = require(\"@solana/spl-token\");\nconst types_1 = require(\"./types\");\nconst drift_json_1 = __importDefault(require(\"./idl/drift.json\"));\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst events_1 = require(\"events\");\nconst pda_1 = require(\"./addresses/pda\");\nconst types_2 = require(\"./accounts/types\");\nconst numericConstants_1 = require(\"./constants/numericConstants\");\nconst position_1 = require(\"./math/position\");\nconst spotBalance_1 = require(\"./math/spotBalance\");\nconst userName_1 = require(\"./userName\");\nconst pollingDriftClientAccountSubscriber_1 = require(\"./accounts/pollingDriftClientAccountSubscriber\");\nconst webSocketDriftClientAccountSubscriber_1 = require(\"./accounts/webSocketDriftClientAccountSubscriber\");\nconst retryTxSender_1 = require(\"./tx/retryTxSender\");\nconst user_1 = require(\"./user\");\nconst config_1 = require(\"./config\");\nconst spotMarkets_1 = require(\"./constants/spotMarkets\");\nconst userStats_1 = require(\"./userStats\");\nconst spotPosition_1 = require(\"./math/spotPosition\");\nconst market_1 = require(\"./math/market\");\nconst fetch_1 = require(\"./accounts/fetch\");\nconst spotMarket_1 = require(\"./math/spotMarket\");\nconst jupiterClient_1 = require(\"./jupiter/jupiterClient\");\nconst memcmp_1 = require(\"./memcmp\");\nconst marinade_1 = require(\"./marinade\");\nconst orderParams_1 = require(\"./orderParams\");\nconst utils_1 = require(\"./math/utils\");\nconst txParamProcessor_1 = require(\"./tx/txParamProcessor\");\nconst oracles_1 = require(\"./math/oracles\");\nconst txHandler_1 = require(\"./tx/txHandler\");\nconst pyth_solana_receiver_1 = require(\"@pythnetwork/pyth-solana-receiver\");\nconst price_service_sdk_1 = require(\"@pythnetwork/price-service-sdk\");\nconst address_1 = require(\"@pythnetwork/pyth-solana-receiver/lib/address\");\nconst pythOracleUtils_1 = require(\"./util/pythOracleUtils\");\nconst ed25519Utils_1 = require(\"./util/ed25519Utils\");\nconst utils_2 = require(\"./tx/utils\");\nconst pyth_solana_receiver_json_1 = __importDefault(require(\"./idl/pyth_solana_receiver.json\"));\nconst on_demand_1 = require(\"@switchboard-xyz/on-demand\");\nconst grpcDriftClientAccountSubscriber_1 = require(\"./accounts/grpcDriftClientAccountSubscriber\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst oracleId_1 = require(\"./oracles/oracleId\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst utils_3 = require(\"./oracles/utils\");\nconst orders_1 = require(\"./math/orders\");\nconst builder_1 = require(\"./math/builder\");\nconst titanClient_1 = require(\"./titan/titanClient\");\nconst UnifiedSwapClient_1 = require(\"./swap/UnifiedSwapClient\");\n/**\n * # DriftClient\n * This class is the main way to interact with Drift Protocol. It allows you to subscribe to the various accounts where the Market's state is stored, as well as: opening positions, liquidating, settling funding, depositing & withdrawing, and more.\n */\nclass DriftClient {\n    get isSubscribed() {\n        return this._isSubscribed && this.accountSubscriber.isSubscribed;\n    }\n    set isSubscribed(val) {\n        this._isSubscribed = val;\n    }\n    constructor(config) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26;\n        this.users = new Map();\n        this._isSubscribed = false;\n        this.perpMarketLastSlotCache = new Map();\n        this.spotMarketLastSlotCache = new Map();\n        this.mustIncludePerpMarketIndexes = new Set();\n        this.mustIncludeSpotMarketIndexes = new Set();\n        this.connection = config.connection;\n        this.wallet = config.wallet;\n        this.env = (_a = config.env) !== null && _a !== void 0 ? _a : 'mainnet-beta';\n        this.opts = config.opts || {\n            ...config_1.DEFAULT_CONFIRMATION_OPTS,\n        };\n        this.useHotWalletAdmin = (_b = config.useHotWalletAdmin) !== null && _b !== void 0 ? _b : false;\n        if ((_c = config === null || config === void 0 ? void 0 : config.connection) === null || _c === void 0 ? void 0 : _c.commitment) {\n            // At the moment this ensures that our transaction simulations (which use Connection object) will use the same commitment level as our Transaction blockhashes (which use these opts)\n            this.opts.commitment = config.connection.commitment;\n            this.opts.preflightCommitment = config.connection.commitment;\n        }\n        this.provider = new anchor_1.AnchorProvider(config.connection, \n        // @ts-ignore\n        config.wallet, this.opts);\n        this.program = new anchor_1.Program(drift_json_1.default, (_d = config.programID) !== null && _d !== void 0 ? _d : new web3_js_1.PublicKey(config_1.DRIFT_PROGRAM_ID), this.provider, config.coder);\n        this.authority = (_e = config.authority) !== null && _e !== void 0 ? _e : this.wallet.publicKey;\n        this.activeSubAccountId = (_f = config.activeSubAccountId) !== null && _f !== void 0 ? _f : 0;\n        this.skipLoadUsers = (_g = config.skipLoadUsers) !== null && _g !== void 0 ? _g : false;\n        this.txVersion =\n            (_h = config.txVersion) !== null && _h !== void 0 ? _h : this.getTxVersionForNewWallet(config.wallet);\n        this.txParams = {\n            computeUnits: (_k = (_j = config.txParams) === null || _j === void 0 ? void 0 : _j.computeUnits) !== null && _k !== void 0 ? _k : 600000,\n            computeUnitsPrice: (_m = (_l = config.txParams) === null || _l === void 0 ? void 0 : _l.computeUnitsPrice) !== null && _m !== void 0 ? _m : 0,\n        };\n        this.txHandler =\n            (_o = config === null || config === void 0 ? void 0 : config.txHandler) !== null && _o !== void 0 ? _o : new txHandler_1.TxHandler({\n                connection: this.connection,\n                // @ts-ignore\n                wallet: this.provider.wallet,\n                confirmationOptions: this.opts,\n                opts: {\n                    returnBlockHeightsWithSignedTxCallbackData: config.enableMetricsEvents,\n                    onSignedCb: this.handleSignedTransaction.bind(this),\n                    preSignedCb: this.handlePreSignedTransaction.bind(this),\n                },\n                config: config.txHandlerConfig,\n            });\n        if (config.includeDelegates && config.subAccountIds) {\n            throw new Error('Can only pass one of includeDelegates or subAccountIds. If you want to specify subaccount ids for multiple authorities, pass authoritySubaccountMap instead');\n        }\n        if (config.authoritySubAccountMap && config.subAccountIds) {\n            throw new Error('Can only pass one of authoritySubaccountMap or subAccountIds');\n        }\n        if (config.authoritySubAccountMap && config.includeDelegates) {\n            throw new Error('Can only pass one of authoritySubaccountMap or includeDelegates');\n        }\n        this.authoritySubAccountMap = config.authoritySubAccountMap\n            ? config.authoritySubAccountMap\n            : config.subAccountIds\n                ? new Map([[this.authority.toString(), config.subAccountIds]])\n                : new Map();\n        this.includeDelegates = (_p = config.includeDelegates) !== null && _p !== void 0 ? _p : false;\n        if (((_q = config.accountSubscription) === null || _q === void 0 ? void 0 : _q.type) === 'polling') {\n            this.userAccountSubscriptionConfig = {\n                type: 'polling',\n                accountLoader: config.accountSubscription.accountLoader,\n            };\n            this.userStatsAccountSubscriptionConfig = {\n                type: 'polling',\n                accountLoader: config.accountSubscription.accountLoader,\n            };\n        }\n        else if (((_r = config.accountSubscription) === null || _r === void 0 ? void 0 : _r.type) === 'grpc') {\n            this.userAccountSubscriptionConfig = {\n                type: 'grpc',\n                resubTimeoutMs: (_s = config.accountSubscription) === null || _s === void 0 ? void 0 : _s.resubTimeoutMs,\n                logResubMessages: (_t = config.accountSubscription) === null || _t === void 0 ? void 0 : _t.logResubMessages,\n                grpcConfigs: (_u = config.accountSubscription) === null || _u === void 0 ? void 0 : _u.grpcConfigs,\n                grpcMultiUserAccountSubscriber: (_v = config.accountSubscription) === null || _v === void 0 ? void 0 : _v.grpcMultiUserAccountSubscriber,\n            };\n            this.userStatsAccountSubscriptionConfig = {\n                type: 'grpc',\n                grpcConfigs: (_w = config.accountSubscription) === null || _w === void 0 ? void 0 : _w.grpcConfigs,\n                resubTimeoutMs: (_x = config.accountSubscription) === null || _x === void 0 ? void 0 : _x.resubTimeoutMs,\n                logResubMessages: (_y = config.accountSubscription) === null || _y === void 0 ? void 0 : _y.logResubMessages,\n            };\n        }\n        else {\n            this.userAccountSubscriptionConfig = {\n                type: 'websocket',\n                resubTimeoutMs: (_z = config.accountSubscription) === null || _z === void 0 ? void 0 : _z.resubTimeoutMs,\n                logResubMessages: (_0 = config.accountSubscription) === null || _0 === void 0 ? void 0 : _0.logResubMessages,\n                commitment: (_1 = config.accountSubscription) === null || _1 === void 0 ? void 0 : _1.commitment,\n                programUserAccountSubscriber: (_2 = config.accountSubscription) === null || _2 === void 0 ? void 0 : _2.programUserAccountSubscriber,\n            };\n            this.userStatsAccountSubscriptionConfig = {\n                type: 'websocket',\n                resubTimeoutMs: (_3 = config.accountSubscription) === null || _3 === void 0 ? void 0 : _3.resubTimeoutMs,\n                logResubMessages: (_4 = config.accountSubscription) === null || _4 === void 0 ? void 0 : _4.logResubMessages,\n                commitment: (_5 = config.accountSubscription) === null || _5 === void 0 ? void 0 : _5.commitment,\n            };\n        }\n        if (config.userStats) {\n            this.userStats = new userStats_1.UserStats({\n                driftClient: this,\n                userStatsAccountPublicKey: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority),\n                accountSubscription: this.userAccountSubscriptionConfig,\n            });\n        }\n        this.marketLookupTable = config.marketLookupTable;\n        if (!this.marketLookupTable) {\n            this.marketLookupTable = new web3_js_1.PublicKey(config_1.configs[this.env].MARKET_LOOKUP_TABLE);\n        }\n        this.marketLookupTables = config.marketLookupTables;\n        if (!this.marketLookupTables) {\n            this.marketLookupTables = config_1.configs[this.env].MARKET_LOOKUP_TABLES.map((tableAddr) => new web3_js_1.PublicKey(tableAddr));\n        }\n        const delistedMarketSetting = config.delistedMarketSetting || types_2.DelistedMarketSetting.Unsubscribe;\n        const noMarketsAndOraclesSpecified = config.perpMarketIndexes === undefined &&\n            config.spotMarketIndexes === undefined &&\n            config.oracleInfos === undefined;\n        if (((_6 = config.accountSubscription) === null || _6 === void 0 ? void 0 : _6.type) === 'polling') {\n            this.accountSubscriber = new pollingDriftClientAccountSubscriber_1.PollingDriftClientAccountSubscriber(this.program, config.accountSubscription.accountLoader, (_7 = config.perpMarketIndexes) !== null && _7 !== void 0 ? _7 : [], (_8 = config.spotMarketIndexes) !== null && _8 !== void 0 ? _8 : [], (_9 = config.oracleInfos) !== null && _9 !== void 0 ? _9 : [], noMarketsAndOraclesSpecified, delistedMarketSetting);\n        }\n        else if (((_10 = config.accountSubscription) === null || _10 === void 0 ? void 0 : _10.type) === 'grpc') {\n            const accountSubscriberClass = (_12 = (_11 = config.accountSubscription) === null || _11 === void 0 ? void 0 : _11.driftClientAccountSubscriber) !== null && _12 !== void 0 ? _12 : grpcDriftClientAccountSubscriber_1.grpcDriftClientAccountSubscriber;\n            this.accountSubscriber = new accountSubscriberClass(config.accountSubscription.grpcConfigs, this.program, (_13 = config.perpMarketIndexes) !== null && _13 !== void 0 ? _13 : [], (_14 = config.spotMarketIndexes) !== null && _14 !== void 0 ? _14 : [], (_15 = config.oracleInfos) !== null && _15 !== void 0 ? _15 : [], noMarketsAndOraclesSpecified, delistedMarketSetting, {\n                resubTimeoutMs: (_16 = config.accountSubscription) === null || _16 === void 0 ? void 0 : _16.resubTimeoutMs,\n                logResubMessages: (_17 = config.accountSubscription) === null || _17 === void 0 ? void 0 : _17.logResubMessages,\n            });\n        }\n        else {\n            const accountSubscriberClass = (_19 = (_18 = config.accountSubscription) === null || _18 === void 0 ? void 0 : _18.driftClientAccountSubscriber) !== null && _19 !== void 0 ? _19 : webSocketDriftClientAccountSubscriber_1.WebSocketDriftClientAccountSubscriber;\n            this.accountSubscriber = new accountSubscriberClass(this.program, (_20 = config.perpMarketIndexes) !== null && _20 !== void 0 ? _20 : [], (_21 = config.spotMarketIndexes) !== null && _21 !== void 0 ? _21 : [], (_22 = config.oracleInfos) !== null && _22 !== void 0 ? _22 : [], noMarketsAndOraclesSpecified, delistedMarketSetting, {\n                resubTimeoutMs: (_23 = config.accountSubscription) === null || _23 === void 0 ? void 0 : _23.resubTimeoutMs,\n                logResubMessages: (_24 = config.accountSubscription) === null || _24 === void 0 ? void 0 : _24.logResubMessages,\n            }, (_25 = config.accountSubscription) === null || _25 === void 0 ? void 0 : _25.commitment);\n        }\n        this.eventEmitter = this.accountSubscriber.eventEmitter;\n        this.metricsEventEmitter = new events_1.EventEmitter();\n        if (config.enableMetricsEvents) {\n            this.enableMetricsEvents = true;\n        }\n        this.txSender =\n            (_26 = config.txSender) !== null && _26 !== void 0 ? _26 : new retryTxSender_1.RetryTxSender({\n                connection: this.connection,\n                wallet: this.wallet,\n                opts: this.opts,\n                txHandler: this.txHandler,\n            });\n        this.sbOnDemandProgramdId = config_1.configs[this.env].SB_ON_DEMAND_PID;\n    }\n    getUserMapKey(subAccountId, authority) {\n        return `${subAccountId}_${authority.toString()}`;\n    }\n    createUser(subAccountId, accountSubscriptionConfig, authority) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.authority, subAccountId);\n        return new user_1.User({\n            driftClient: this,\n            userAccountPublicKey,\n            accountSubscription: accountSubscriptionConfig,\n        });\n    }\n    async subscribe() {\n        let subscribePromises = [this.addAndSubscribeToUsers()].concat(this.accountSubscriber.subscribe());\n        if (this.userStats !== undefined) {\n            subscribePromises = subscribePromises.concat(this.userStats.subscribe());\n        }\n        this.isSubscribed = (await Promise.all(subscribePromises)).reduce((success, prevSuccess) => success && prevSuccess);\n        return this.isSubscribed;\n    }\n    subscribeUsers() {\n        return [...this.users.values()].map((user) => user.subscribe());\n    }\n    /**\n     *\tForces the accountSubscriber to fetch account updates from rpc\n     */\n    async fetchAccounts() {\n        let promises = [...this.users.values()]\n            .map((user) => user.fetchAccounts())\n            .concat(this.accountSubscriber.fetch());\n        if (this.userStats) {\n            promises = promises.concat(this.userStats.fetchAccounts());\n        }\n        await Promise.all(promises);\n    }\n    async unsubscribe() {\n        let unsubscribePromises = this.unsubscribeUsers().concat(this.accountSubscriber.unsubscribe());\n        if (this.userStats !== undefined) {\n            unsubscribePromises = unsubscribePromises.concat(this.userStats.unsubscribe());\n        }\n        await Promise.all(unsubscribePromises);\n        this.isSubscribed = false;\n    }\n    unsubscribeUsers() {\n        return [...this.users.values()].map((user) => user.unsubscribe());\n    }\n    async getStatePublicKey() {\n        if (this.statePublicKey) {\n            return this.statePublicKey;\n        }\n        this.statePublicKey = await (0, pda_1.getDriftStateAccountPublicKey)(this.program.programId);\n        return this.statePublicKey;\n    }\n    getSignerPublicKey() {\n        if (this.signerPublicKey) {\n            return this.signerPublicKey;\n        }\n        this.signerPublicKey = (0, pda_1.getDriftSignerPublicKey)(this.program.programId);\n        return this.signerPublicKey;\n    }\n    getStateAccount() {\n        return this.accountSubscriber.getStateAccountAndSlot().data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     */\n    async forceGetStateAccount() {\n        await this.accountSubscriber.fetch();\n        return this.accountSubscriber.getStateAccountAndSlot().data;\n    }\n    getPerpMarketAccount(marketIndex) {\n        var _a;\n        return (_a = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _a === void 0 ? void 0 : _a.data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param marketIndex\n     */\n    async forceGetPerpMarketAccount(marketIndex) {\n        var _a, _b;\n        await this.accountSubscriber.fetch();\n        let data = (_a = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _a === void 0 ? void 0 : _a.data;\n        let i = 0;\n        while (data === undefined && i < 10) {\n            await this.accountSubscriber.fetch();\n            data = (_b = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _b === void 0 ? void 0 : _b.data;\n            i++;\n        }\n        return data;\n    }\n    getPerpMarketAccounts() {\n        return this.accountSubscriber\n            .getMarketAccountsAndSlots()\n            .filter((value) => value !== undefined)\n            .map((value) => value.data);\n    }\n    getSpotMarketAccount(marketIndex) {\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(marketIndex).data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param marketIndex\n     */\n    async forceGetSpotMarketAccount(marketIndex) {\n        await this.accountSubscriber.fetch();\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(marketIndex).data;\n    }\n    getSpotMarketAccounts() {\n        return this.accountSubscriber\n            .getSpotMarketAccountsAndSlots()\n            .filter((value) => value !== undefined)\n            .map((value) => value.data);\n    }\n    getQuoteSpotMarketAccount() {\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(numericConstants_1.QUOTE_SPOT_MARKET_INDEX).data;\n    }\n    getOraclePriceDataAndSlot(oraclePublicKey, oracleSource) {\n        return this.accountSubscriber.getOraclePriceDataAndSlot((0, oracleId_1.getOracleId)(oraclePublicKey, oracleSource));\n    }\n    async getSerumV3FulfillmentConfig(serumMarket) {\n        const address = await (0, pda_1.getSerumFulfillmentConfigPublicKey)(this.program.programId, serumMarket);\n        return (await this.program.account.serumV3FulfillmentConfig.fetch(address));\n    }\n    async getSerumV3FulfillmentConfigs() {\n        const accounts = await this.program.account.serumV3FulfillmentConfig.all();\n        return accounts.map((account) => account.account);\n    }\n    async getPhoenixV1FulfillmentConfig(phoenixMarket) {\n        const address = await (0, pda_1.getPhoenixFulfillmentConfigPublicKey)(this.program.programId, phoenixMarket);\n        return (await this.program.account.phoenixV1FulfillmentConfig.fetch(address));\n    }\n    async getPhoenixV1FulfillmentConfigs() {\n        const accounts = await this.program.account.phoenixV1FulfillmentConfig.all();\n        return accounts.map((account) => account.account);\n    }\n    async getOpenbookV2FulfillmentConfig(openbookMarket) {\n        const address = (0, pda_1.getOpenbookV2FulfillmentConfigPublicKey)(this.program.programId, openbookMarket);\n        return (await this.program.account.openbookV2FulfillmentConfig.fetch(address));\n    }\n    async getOpenbookV2FulfillmentConfigs() {\n        const accounts = await this.program.account.openbookV2FulfillmentConfig.all();\n        return accounts.map((account) => account.account);\n    }\n    /** @deprecated use fetchAllLookupTableAccounts() */\n    async fetchMarketLookupTableAccount() {\n        if (this.lookupTableAccount)\n            return this.lookupTableAccount;\n        if (!this.marketLookupTable) {\n            console.log('Market lookup table address not set');\n            return;\n        }\n        const lookupTableAccount = (await this.connection.getAddressLookupTable(this.marketLookupTable)).value;\n        this.lookupTableAccount = lookupTableAccount;\n        return lookupTableAccount;\n    }\n    async fetchAllLookupTableAccounts() {\n        if (this.lookupTableAccounts)\n            return this.lookupTableAccounts;\n        if (!this.marketLookupTables) {\n            console.log('Market lookup table address not set');\n            return;\n        }\n        const lookupTableAccountResults = await Promise.all(this.marketLookupTables.map((lookupTable) => this.connection.getAddressLookupTable(lookupTable)));\n        const lookupTableAccounts = lookupTableAccountResults.map((result) => result.value);\n        this.lookupTableAccounts = lookupTableAccounts;\n        return lookupTableAccounts;\n    }\n    getTxVersionForNewWallet(newWallet) {\n        var _a, _b, _c;\n        if (!(newWallet === null || newWallet === void 0 ? void 0 : newWallet.supportedTransactionVersions))\n            return 0; // Assume versioned txs supported if wallet doesn't have a supportedTransactionVersions property\n        const walletSupportsVersionedTxns = ((_a = newWallet.supportedTransactionVersions) === null || _a === void 0 ? void 0 : _a.has(0)) ||\n            ((_c = (_b = newWallet.supportedTransactionVersions) === null || _b === void 0 ? void 0 : _b.size) !== null && _c !== void 0 ? _c : 0) > 1;\n        return walletSupportsVersionedTxns ? 0 : 'legacy';\n    }\n    /**\n     * Update the wallet to use for drift transactions and linked user account\n     * @param newWallet\n     * @param subAccountIds\n     * @param activeSubAccountId\n     * @param includeDelegates\n     */\n    async updateWallet(newWallet, subAccountIds, activeSubAccountId, includeDelegates, authoritySubaccountMap) {\n        var _a;\n        const newProvider = new anchor_1.AnchorProvider(this.connection, \n        // @ts-ignore\n        newWallet, this.opts);\n        const newProgram = new anchor_1.Program(drift_json_1.default, this.program.programId, newProvider);\n        this.skipLoadUsers = false;\n        // Update provider for txSender with new wallet details\n        this.txSender.wallet = newWallet;\n        this.wallet = newWallet;\n        this.txHandler.updateWallet(newWallet);\n        this.provider = newProvider;\n        this.program = newProgram;\n        this.authority = newWallet.publicKey;\n        this.activeSubAccountId = activeSubAccountId;\n        this.userStatsAccountPublicKey = undefined;\n        this.includeDelegates = includeDelegates !== null && includeDelegates !== void 0 ? includeDelegates : false;\n        this.txVersion = this.getTxVersionForNewWallet(this.wallet);\n        if (includeDelegates && subAccountIds) {\n            throw new Error('Can only pass one of includeDelegates or subAccountIds. If you want to specify subaccount ids for multiple authorities, pass authoritySubaccountMap instead');\n        }\n        if (authoritySubaccountMap && subAccountIds) {\n            throw new Error('Can only pass one of authoritySubaccountMap or subAccountIds');\n        }\n        if (authoritySubaccountMap && includeDelegates) {\n            throw new Error('Can only pass one of authoritySubaccountMap or includeDelegates');\n        }\n        this.authoritySubAccountMap = authoritySubaccountMap\n            ? authoritySubaccountMap\n            : subAccountIds\n                ? new Map([[this.authority.toString(), subAccountIds]])\n                : new Map();\n        /* Reset user stats account */\n        if ((_a = this.userStats) === null || _a === void 0 ? void 0 : _a.isSubscribed) {\n            await this.userStats.unsubscribe();\n        }\n        this.userStats = undefined;\n        this.userStats = new userStats_1.UserStats({\n            driftClient: this,\n            userStatsAccountPublicKey: this.getUserStatsAccountPublicKey(),\n            accountSubscription: this.userStatsAccountSubscriptionConfig,\n        });\n        const subscriptionPromises = [this.userStats.subscribe()];\n        let success = true;\n        if (this.isSubscribed) {\n            const reSubscribeUsersPromise = async () => {\n                await Promise.all(this.unsubscribeUsers());\n                this.users.clear();\n                success = await this.addAndSubscribeToUsers();\n            };\n            subscriptionPromises.push(reSubscribeUsersPromise());\n        }\n        await Promise.all(subscriptionPromises);\n        return success;\n    }\n    /**\n     * Update the subscribed accounts to a given authority, while leaving the\n     * connected wallet intact. This allows a user to emulate another user's\n     * account on the UI and sign permissionless transactions with their own wallet.\n     * @param emulateAuthority\n     */\n    async emulateAccount(emulateAuthority) {\n        var _a;\n        this.skipLoadUsers = false;\n        // Update provider for txSender with new wallet details\n        this.authority = emulateAuthority;\n        this.userStatsAccountPublicKey = undefined;\n        this.includeDelegates = true;\n        this.txVersion = this.getTxVersionForNewWallet(this.wallet);\n        this.authoritySubAccountMap = new Map();\n        /* Reset user stats account */\n        if ((_a = this.userStats) === null || _a === void 0 ? void 0 : _a.isSubscribed) {\n            await this.userStats.unsubscribe();\n        }\n        this.userStats = undefined;\n        this.userStats = new userStats_1.UserStats({\n            driftClient: this,\n            userStatsAccountPublicKey: this.getUserStatsAccountPublicKey(),\n            accountSubscription: this.userStatsAccountSubscriptionConfig,\n        });\n        await this.userStats.subscribe();\n        let success = true;\n        if (this.isSubscribed) {\n            await Promise.all(this.unsubscribeUsers());\n            this.users.clear();\n            success = await this.addAndSubscribeToUsers(emulateAuthority);\n        }\n        return success;\n    }\n    async switchActiveUser(subAccountId, authority) {\n        var _a;\n        const authorityChanged = authority && !((_a = this.authority) === null || _a === void 0 ? void 0 : _a.equals(authority));\n        this.activeSubAccountId = subAccountId;\n        this.authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        this.userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority);\n        /* If changing the user authority ie switching from delegate to non-delegate account, need to re-subscribe to the user stats account */\n        if (authorityChanged && this.userStats) {\n            if (this.userStats.isSubscribed) {\n                await this.userStats.unsubscribe();\n            }\n            this.userStats = new userStats_1.UserStats({\n                driftClient: this,\n                userStatsAccountPublicKey: this.userStatsAccountPublicKey,\n                accountSubscription: this.userStatsAccountSubscriptionConfig,\n            });\n            this.userStats.subscribe();\n        }\n    }\n    async addUser(subAccountId, authority, userAccount) {\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userKey = this.getUserMapKey(subAccountId, authority);\n        if (this.users.has(userKey) && this.users.get(userKey).isSubscribed) {\n            return true;\n        }\n        const user = this.createUser(subAccountId, this.userAccountSubscriptionConfig, authority);\n        const result = await user.subscribe(userAccount);\n        if (result) {\n            this.users.set(userKey, user);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Adds and subscribes to users based on params set by the constructor or by updateWallet.\n     */\n    async addAndSubscribeToUsers(authority) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        // save the rpc calls if driftclient is initialized without a real wallet\n        if (this.skipLoadUsers)\n            return true;\n        let result = true;\n        if (this.authoritySubAccountMap && this.authoritySubAccountMap.size > 0) {\n            this.authoritySubAccountMap.forEach(async (value, key) => {\n                for (const subAccountId of value) {\n                    result =\n                        result && (await this.addUser(subAccountId, new web3_js_1.PublicKey(key)));\n                }\n            });\n            if (this.activeSubAccountId == undefined) {\n                this.switchActiveUser((_a = [...this.authoritySubAccountMap.values()][0][0]) !== null && _a !== void 0 ? _a : 0, new web3_js_1.PublicKey((_b = [...this.authoritySubAccountMap.keys()][0]) !== null && _b !== void 0 ? _b : this.authority.toString()));\n            }\n        }\n        else {\n            let userAccounts = [];\n            let delegatedAccounts = [];\n            const userAccountsPromise = this.getUserAccountsForAuthority(authority !== null && authority !== void 0 ? authority : this.wallet.publicKey);\n            if (this.includeDelegates) {\n                const delegatedAccountsPromise = this.getUserAccountsForDelegate(authority !== null && authority !== void 0 ? authority : this.wallet.publicKey);\n                [userAccounts, delegatedAccounts] = await Promise.all([\n                    userAccountsPromise,\n                    delegatedAccountsPromise,\n                ]);\n                !userAccounts && (userAccounts = []);\n                !delegatedAccounts && (delegatedAccounts = []);\n            }\n            else {\n                userAccounts = (_c = (await userAccountsPromise)) !== null && _c !== void 0 ? _c : [];\n            }\n            const allAccounts = userAccounts.concat(delegatedAccounts);\n            const addAllAccountsPromise = allAccounts.map((acc) => this.addUser(acc.subAccountId, acc.authority, acc));\n            const addAllAccountsResults = await Promise.all(addAllAccountsPromise);\n            result = addAllAccountsResults.every((res) => !!res);\n            if (this.activeSubAccountId == undefined) {\n                this.switchActiveUser((_e = (_d = userAccounts.concat(delegatedAccounts)[0]) === null || _d === void 0 ? void 0 : _d.subAccountId) !== null && _e !== void 0 ? _e : 0, (_g = (_f = userAccounts.concat(delegatedAccounts)[0]) === null || _f === void 0 ? void 0 : _f.authority) !== null && _g !== void 0 ? _g : this.authority);\n            }\n        }\n        return result;\n    }\n    /**\n     * Returns the instructions to initialize a user account and the public key of the user account.\n     * @param subAccountId\n     * @param name\n     * @param referrerInfo\n     * @returns [instructions, userAccountPublicKey]\n     */\n    async getInitializeUserAccountIxs(subAccountId = 0, name, referrerInfo, poolId) {\n        const initializeIxs = [];\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        if (subAccountId === 0) {\n            if (!(await this.checkIfAccountExists(this.getUserStatsAccountPublicKey()))) {\n                initializeIxs.push(await this.getInitializeUserStatsIx());\n            }\n        }\n        initializeIxs.push(initializeUserAccountIx);\n        if (poolId) {\n            initializeIxs.push(await this.getUpdateUserPoolIdIx(poolId, subAccountId));\n        }\n        return [initializeIxs, userAccountPublicKey];\n    }\n    /**\n     * Initializes a user account and returns the transaction signature and the public key of the user account.\n     * @param subAccountId\n     * @param name\n     * @param referrerInfo\n     * @param txParams\n     * @returns [transactionSignature, userAccountPublicKey]\n     */\n    async initializeUserAccount(subAccountId = 0, name, referrerInfo, txParams) {\n        const [initializeIxs, userAccountPublicKey] = await this.getInitializeUserAccountIxs(subAccountId, name, referrerInfo);\n        const tx = await this.buildTransaction(initializeIxs, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        await this.addUser(subAccountId);\n        return [txSig, userAccountPublicKey];\n    }\n    async getInitializeUserStatsIx() {\n        return await this.program.instruction.initializeUserStats({\n            accounts: {\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to initialize own user stats account\n                ),\n                authority: this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                state: await this.getStatePublicKey(),\n            },\n        });\n    }\n    async initializeSignedMsgUserOrders(authority, numOrders, txParams) {\n        const initializeIxs = [];\n        const [signedMsgUserAccountPublicKey, initializeUserAccountIx] = await this.getInitializeSignedMsgUserOrdersAccountIx(authority, numOrders);\n        initializeIxs.push(initializeUserAccountIx);\n        const tx = await this.buildTransaction(initializeIxs, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return [txSig, signedMsgUserAccountPublicKey];\n    }\n    async getInitializeSignedMsgUserOrdersAccountIx(authority, numOrders) {\n        const signedMsgUserAccountPublicKey = (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, authority);\n        const initializeUserAccountIx = await this.program.instruction.initializeSignedMsgUserOrders(numOrders, {\n            accounts: {\n                signedMsgUserOrders: signedMsgUserAccountPublicKey,\n                authority,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n        return [signedMsgUserAccountPublicKey, initializeUserAccountIx];\n    }\n    async resizeSignedMsgUserOrders(authority, numOrders, userSubaccountId, txParams) {\n        const resizeUserAccountIx = await this.getResizeSignedMsgUserOrdersInstruction(authority, numOrders, userSubaccountId);\n        const tx = await this.buildTransaction([resizeUserAccountIx], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getResizeSignedMsgUserOrdersInstruction(authority, numOrders, userSubaccountId) {\n        const signedMsgUserAccountPublicKey = (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, authority);\n        const resizeUserAccountIx = await this.program.instruction.resizeSignedMsgUserOrders(numOrders, {\n            accounts: {\n                signedMsgUserOrders: signedMsgUserAccountPublicKey,\n                authority,\n                payer: this.wallet.publicKey,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                user: await (0, pda_1.getUserAccountPublicKey)(this.program.programId, authority, userSubaccountId),\n            },\n        });\n        return resizeUserAccountIx;\n    }\n    async initializeSignedMsgWsDelegatesAccount(authority, delegates = [], txParams) {\n        const ix = await this.getInitializeSignedMsgWsDelegatesAccountIx(authority, delegates);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getInitializeSignedMsgWsDelegatesAccountIx(authority, delegates = []) {\n        const signedMsgWsDelegates = (0, pda_1.getSignedMsgWsDelegatesAccountPublicKey)(this.program.programId, authority);\n        const ix = await this.program.instruction.initializeSignedMsgWsDelegates(delegates, {\n            accounts: {\n                signedMsgWsDelegates,\n                authority: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n        return ix;\n    }\n    async initializeRevenueShare(authority, txParams) {\n        const ix = await this.getInitializeRevenueShareIx(authority);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getInitializeRevenueShareIx(authority, overrides) {\n        var _a;\n        const revenueShare = (0, pda_1.getRevenueShareAccountPublicKey)(this.program.programId, authority);\n        return this.program.instruction.initializeRevenueShare({\n            accounts: {\n                revenueShare,\n                authority,\n                payer: (_a = overrides === null || overrides === void 0 ? void 0 : overrides.payer) !== null && _a !== void 0 ? _a : this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n    }\n    async initializeRevenueShareEscrow(authority, numOrders, txParams) {\n        const ix = await this.getInitializeRevenueShareEscrowIx(authority, numOrders);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getInitializeRevenueShareEscrowIx(authority, numOrders, overrides) {\n        var _a;\n        const escrow = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, authority);\n        return this.program.instruction.initializeRevenueShareEscrow(numOrders, {\n            accounts: {\n                escrow,\n                authority,\n                payer: (_a = overrides === null || overrides === void 0 ? void 0 : overrides.payer) !== null && _a !== void 0 ? _a : this.wallet.publicKey,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority),\n                state: await this.getStatePublicKey(),\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n    }\n    async migrateReferrer(authority, txParams) {\n        const ix = await this.getMigrateReferrerIx(authority);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getMigrateReferrerIx(authority) {\n        const escrow = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, authority);\n        return this.program.instruction.migrateReferrer({\n            accounts: {\n                escrow,\n                authority,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority),\n                state: await this.getStatePublicKey(),\n                payer: this.wallet.publicKey,\n            },\n        });\n    }\n    async resizeRevenueShareEscrowOrders(authority, numOrders, txParams) {\n        const ix = await this.getResizeRevenueShareEscrowOrdersIx(authority, numOrders);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getResizeRevenueShareEscrowOrdersIx(authority, numOrders) {\n        const escrow = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, authority);\n        return this.program.instruction.resizeRevenueShareEscrowOrders(numOrders, {\n            accounts: {\n                escrow,\n                authority,\n                payer: this.wallet.publicKey,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n    }\n    /**\n     * Creates the transaction to add or update an approved builder.\n     * This allows the builder to receive revenue share from referrals.\n     *\n     * @param builder - The public key of the builder to add or update.\n     * @param maxFeeTenthBps - The maximum fee tenth bps to set for the builder.\n     * @param add - Whether to add or update the builder. If the builder already exists, `add = true` will update the `maxFeeTenthBps`, otherwise it will add the builder. If `add = false`, the builder's `maxFeeTenthBps` will be set to 0.\n     * @param txParams - The transaction parameters to use for the transaction.\n     * @returns The transaction to add or update an approved builder.\n     */\n    async changeApprovedBuilder(builder, maxFeeTenthBps, add, txParams) {\n        const ix = await this.getChangeApprovedBuilderIx(builder, maxFeeTenthBps, add);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    /**\n     * Creates the transaction instruction to add or update an approved builder.\n     * This allows the builder to receive revenue share from referrals.\n     *\n     * @param builder - The public key of the builder to add or update.\n     * @param maxFeeTenthBps - The maximum fee tenth bps to set for the builder.\n     * @param add - Whether to add or update the builder. If the builder already exists, `add = true` will update the `maxFeeTenthBps`, otherwise it will add the builder. If `add = false`, the builder's `maxFeeTenthBps` will be set to 0.\n     * @returns The transaction instruction to add or update an approved builder.\n     */\n    async getChangeApprovedBuilderIx(builder, maxFeeTenthBps, add, overrides) {\n        var _a, _b;\n        const authority = (_a = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _a !== void 0 ? _a : this.wallet.publicKey;\n        const payer = (_b = overrides === null || overrides === void 0 ? void 0 : overrides.payer) !== null && _b !== void 0 ? _b : this.wallet.publicKey;\n        const escrow = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, authority);\n        return this.program.instruction.changeApprovedBuilder(builder, maxFeeTenthBps, add, {\n            accounts: {\n                escrow,\n                authority,\n                payer,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n    }\n    async addSignedMsgWsDelegate(authority, delegate, txParams) {\n        const ix = await this.getAddSignedMsgWsDelegateIx(authority, delegate);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getAddSignedMsgWsDelegateIx(authority, delegate) {\n        const signedMsgWsDelegates = (0, pda_1.getSignedMsgWsDelegatesAccountPublicKey)(this.program.programId, authority);\n        const ix = await this.program.instruction.changeSignedMsgWsDelegateStatus(delegate, true, {\n            accounts: {\n                signedMsgWsDelegates,\n                authority: this.wallet.publicKey,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n        return ix;\n    }\n    async removeSignedMsgWsDelegate(authority, delegate, txParams) {\n        const ix = await this.getRemoveSignedMsgWsDelegateIx(authority, delegate);\n        const tx = await this.buildTransaction([ix], txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getRemoveSignedMsgWsDelegateIx(authority, delegate) {\n        const signedMsgWsDelegates = (0, pda_1.getSignedMsgWsDelegatesAccountPublicKey)(this.program.programId, authority);\n        const ix = await this.program.instruction.changeSignedMsgWsDelegateStatus(delegate, false, {\n            accounts: {\n                signedMsgWsDelegates,\n                authority: this.wallet.publicKey,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n        return ix;\n    }\n    async initializeFuelOverflow(authority) {\n        const ix = await this.getInitializeFuelOverflowIx(authority);\n        const tx = await this.buildTransaction([ix], this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getInitializeFuelOverflowIx(authority) {\n        return await this.program.instruction.initializeFuelOverflow({\n            accounts: {\n                fuelOverflow: (0, pda_1.getFuelOverflowAccountPublicKey)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.wallet.publicKey),\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.wallet.publicKey),\n                authority: authority !== null && authority !== void 0 ? authority : this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n    }\n    async sweepFuel(authority) {\n        const ix = await this.getSweepFuelIx(authority);\n        const tx = await this.buildTransaction([ix], this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getSweepFuelIx(authority) {\n        return await this.program.instruction.sweepFuel({\n            accounts: {\n                fuelOverflow: (0, pda_1.getFuelOverflowAccountPublicKey)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.wallet.publicKey),\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.wallet.publicKey),\n                authority: authority !== null && authority !== void 0 ? authority : this.wallet.publicKey,\n                signer: this.wallet.publicKey,\n            },\n        });\n    }\n    async getInitializeUserInstructions(subAccountId = 0, name, referrerInfo) {\n        const userAccountPublicKey = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const remainingAccounts = new Array();\n        if (referrerInfo !== undefined) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const state = this.getStateAccount();\n        if (!state.whitelistMint.equals(web3_js_1.PublicKey.default)) {\n            const associatedTokenPublicKey = await (0, spl_token_1.getAssociatedTokenAddress)(state.whitelistMint, this.wallet.publicKey);\n            remainingAccounts.push({\n                pubkey: associatedTokenPublicKey,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        if (name === undefined) {\n            if (subAccountId === 0) {\n                name = userName_1.DEFAULT_USER_NAME;\n            }\n            else {\n                name = `Subaccount ${subAccountId + 1}`;\n            }\n        }\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const initializeUserAccountIx = await this.program.instruction.initializeUser(subAccountId, nameBuffer, {\n            accounts: {\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                state: await this.getStatePublicKey(),\n            },\n            remainingAccounts,\n        });\n        return [userAccountPublicKey, initializeUserAccountIx];\n    }\n    async getNextSubAccountId() {\n        const userStats = this.getUserStats();\n        let userStatsAccount;\n        if (!userStats) {\n            userStatsAccount = await (0, fetch_1.fetchUserStatsAccount)(this.connection, this.program, this.wallet.publicKey);\n        }\n        else {\n            userStatsAccount = userStats.getAccount();\n        }\n        return userStatsAccount.numberOfSubAccountsCreated;\n    }\n    async initializeReferrerName(name) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, 0);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const referrerNameAccountPublicKey = (0, pda_1.getReferrerNamePublicKeySync)(this.program.programId, nameBuffer);\n        const tx = await this.program.transaction.initializeReferrerName(nameBuffer, {\n            accounts: {\n                referrerName: referrerNameAccountPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n            },\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserName(name, subAccountId = 0) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const tx = await this.program.transaction.updateUserName(subAccountId, nameBuffer, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserCustomMarginRatio(updates, txParams) {\n        const ixs = await Promise.all(updates.map(async ({ marginRatio, subAccountId }) => {\n            const ix = await this.getUpdateUserCustomMarginRatioIx(marginRatio, subAccountId);\n            return ix;\n        }));\n        const tx = await this.buildTransaction(ixs, txParams !== null && txParams !== void 0 ? txParams : this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserCustomMarginRatioIx(marginRatio, subAccountId = 0) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        await this.addUser(subAccountId, this.wallet.publicKey);\n        const ix = this.program.instruction.updateUserCustomMarginRatio(subAccountId, marginRatio, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n        });\n        return ix;\n    }\n    async getUpdateUserPerpPositionCustomMarginRatioIx(perpMarketIndex, marginRatio, subAccountId = 0, overrides) {\n        var _a, _b;\n        let userAccountPublicKey = overrides === null || overrides === void 0 ? void 0 : overrides.userAccountPublicKey;\n        if (!userAccountPublicKey) {\n            userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, (_a = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _a !== void 0 ? _a : this.authority, subAccountId);\n        }\n        const signingAuthority = (_b = overrides === null || overrides === void 0 ? void 0 : overrides.signingAuthority) !== null && _b !== void 0 ? _b : this.wallet.publicKey;\n        const ix = this.program.instruction.updateUserPerpPositionCustomMarginRatio(subAccountId, perpMarketIndex, marginRatio, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority: signingAuthority,\n            },\n        });\n        return ix;\n    }\n    async updateUserPerpPositionCustomMarginRatio(perpMarketIndex, marginRatio, subAccountId = 0, txParams, enterHighLeverageMode) {\n        const ixs = [];\n        if (enterHighLeverageMode) {\n            const enableIx = await this.getEnableHighLeverageModeIx(subAccountId);\n            ixs.push(enableIx);\n        }\n        const updateIx = await this.getUpdateUserPerpPositionCustomMarginRatioIx(perpMarketIndex, marginRatio, subAccountId);\n        ixs.push(updateIx);\n        const tx = await this.buildTransaction(ixs, txParams !== null && txParams !== void 0 ? txParams : this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserMarginTradingEnabledIx(marginTradingEnabled, subAccountId = 0, userAccountPublicKey) {\n        const userAccountPublicKeyToUse = userAccountPublicKey ||\n            (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        await this.addUser(subAccountId, this.wallet.publicKey);\n        let remainingAccounts;\n        try {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [this.getUserAccount(subAccountId)],\n            });\n        }\n        catch (err) {\n            remainingAccounts = [];\n        }\n        return await this.program.instruction.updateUserMarginTradingEnabled(subAccountId, marginTradingEnabled, {\n            accounts: {\n                user: userAccountPublicKeyToUse,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateUserMarginTradingEnabled(updates) {\n        const ixs = await Promise.all(updates.map(async ({ marginTradingEnabled, subAccountId }) => {\n            return await this.getUpdateUserMarginTradingEnabledIx(marginTradingEnabled, subAccountId);\n        }));\n        const tx = await this.buildTransaction(ixs, this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserDelegateIx(delegate, overrides) {\n        var _a, _b, _c;\n        const subAccountId = (_a = overrides.subAccountId) !== null && _a !== void 0 ? _a : this.activeSubAccountId;\n        const userAccountPublicKey = (_b = overrides.userAccountPublicKey) !== null && _b !== void 0 ? _b : (await this.getUserAccountPublicKey());\n        const authority = (_c = overrides.authority) !== null && _c !== void 0 ? _c : this.wallet.publicKey;\n        return await this.program.instruction.updateUserDelegate(subAccountId, delegate, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority,\n            },\n        });\n    }\n    async updateUserDelegate(delegate, subAccountId = 0) {\n        const tx = await this.program.transaction.updateUserDelegate(subAccountId, delegate, {\n            accounts: {\n                user: await this.getUserAccountPublicKey(),\n                authority: this.wallet.publicKey,\n            },\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserAdvancedLp(updates) {\n        const ixs = await Promise.all(updates.map(async ({ advancedLp, subAccountId }) => {\n            return await this.getUpdateAdvancedDlpIx(advancedLp, subAccountId);\n        }));\n        const tx = await this.buildTransaction(ixs, this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateAdvancedDlpIx(advancedLp, subAccountId) {\n        const ix = await this.program.instruction.updateUserAdvancedLp(subAccountId, advancedLp, {\n            accounts: {\n                user: (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId),\n                authority: this.wallet.publicKey,\n            },\n        });\n        return ix;\n    }\n    async updateUserReduceOnly(updates) {\n        const ixs = await Promise.all(updates.map(async ({ reduceOnly, subAccountId }) => {\n            return await this.getUpdateUserReduceOnlyIx(reduceOnly, subAccountId);\n        }));\n        const tx = await this.buildTransaction(ixs, this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserReduceOnlyIx(reduceOnly, subAccountId) {\n        const ix = await this.program.instruction.updateUserReduceOnly(subAccountId, reduceOnly, {\n            accounts: {\n                user: (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId),\n                authority: this.wallet.publicKey,\n            },\n        });\n        return ix;\n    }\n    async updateUserPoolId(updates) {\n        const ixs = await Promise.all(updates.map(async ({ poolId, subAccountId }) => {\n            return await this.getUpdateUserPoolIdIx(poolId, subAccountId);\n        }));\n        const tx = await this.buildTransaction(ixs, this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserPoolIdIx(poolId, subAccountId) {\n        const ix = await this.program.instruction.updateUserPoolId(subAccountId, poolId, {\n            accounts: {\n                user: (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId),\n                authority: this.wallet.publicKey,\n            },\n        });\n        return ix;\n    }\n    async fetchAllUserAccounts(includeIdle = true) {\n        let filters = undefined;\n        if (!includeIdle) {\n            filters = [(0, memcmp_1.getNonIdleUserFilter)()];\n        }\n        return (await this.program.account.user.all(filters));\n    }\n    async getUserAccountsForDelegate(delegate) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 40,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */\n                    bytes: bs58_1.default.encode(delegate.toBuffer()),\n                },\n            },\n        ]);\n        return programAccounts\n            .map((programAccount) => programAccount.account)\n            .sort((a, b) => a.subAccountId - b.subAccountId);\n    }\n    async getUserAccountsAndAddressesForAuthority(authority) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */\n                    bytes: bs58_1.default.encode(authority.toBuffer()),\n                },\n            },\n        ]);\n        return programAccounts.map((programAccount) => programAccount);\n    }\n    async getUserAccountsForAuthority(authority) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */\n                    bytes: bs58_1.default.encode(authority.toBuffer()),\n                },\n            },\n        ]);\n        return programAccounts\n            .map((programAccount) => programAccount.account)\n            .sort((a, b) => a.subAccountId - b.subAccountId);\n    }\n    async getReferredUserStatsAccountsByReferrer(referrer) {\n        const programAccounts = await this.program.account.userStats.all([\n            {\n                memcmp: {\n                    offset: 40,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */\n                    bytes: bs58_1.default.encode(referrer.toBuffer()),\n                },\n            },\n        ]);\n        return programAccounts.map((programAccount) => programAccount.account);\n    }\n    async getReferrerNameAccountsForAuthority(authority) {\n        const programAccounts = await this.program.account.referrerName.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */\n                    bytes: bs58_1.default.encode(authority.toBuffer()),\n                },\n            },\n        ]);\n        return programAccounts.map((programAccount) => programAccount.account);\n    }\n    async deleteUser(subAccountId = 0, txParams) {\n        var _a;\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const ix = await this.getUserDeletionIx(userAccountPublicKey);\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ix, txParams), [], this.opts);\n        const userMapKey = this.getUserMapKey(subAccountId, this.wallet.publicKey);\n        await ((_a = this.users.get(userMapKey)) === null || _a === void 0 ? void 0 : _a.unsubscribe());\n        this.users.delete(userMapKey);\n        return txSig;\n    }\n    async getUserDeletionIx(userAccountPublicKey) {\n        const ix = await this.program.instruction.deleteUser({\n            accounts: {\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n            },\n        });\n        return ix;\n    }\n    async forceDeleteUser(userAccountPublicKey, userAccount, txParams) {\n        const tx = await this.buildTransaction(await this.getForceDeleteUserIx(userAccountPublicKey, userAccount), txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getForceDeleteUserIx(userAccountPublicKey, userAccount) {\n        const writableSpotMarketIndexes = [];\n        for (const spotPosition of userAccount.spotPositions) {\n            if ((0, spotPosition_1.isSpotPositionAvailable)(spotPosition)) {\n                continue;\n            }\n            writableSpotMarketIndexes.push(spotPosition.marketIndex);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            writableSpotMarketIndexes,\n        });\n        for (const order of userAccount.orders) {\n            if ((0, orders_1.hasBuilder)(order)) {\n                remainingAccounts.push({\n                    pubkey: (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, userAccount.authority),\n                    isWritable: true,\n                    isSigner: false,\n                });\n                break;\n            }\n        }\n        const tokenPrograms = new Set();\n        for (const spotPosition of userAccount.spotPositions) {\n            if ((0, spotPosition_1.isSpotPositionAvailable)(spotPosition)) {\n                continue;\n            }\n            const spotMarket = this.getSpotMarketAccount(spotPosition.marketIndex);\n            remainingAccounts.push({\n                isSigner: false,\n                isWritable: true,\n                pubkey: spotMarket.vault,\n            });\n            const tokenProgram = this.getTokenProgramForSpotMarket(spotMarket);\n            const keeperVault = await this.getAssociatedTokenAccount(spotPosition.marketIndex, false, tokenProgram);\n            remainingAccounts.push({\n                isSigner: false,\n                isWritable: true,\n                pubkey: keeperVault,\n            });\n            tokenPrograms.add(tokenProgram.toBase58());\n            this.addTokenMintToRemainingAccounts(spotMarket, remainingAccounts);\n        }\n        for (const tokenProgram of tokenPrograms) {\n            remainingAccounts.push({\n                isSigner: false,\n                isWritable: false,\n                pubkey: new web3_js_1.PublicKey(tokenProgram),\n            });\n        }\n        const authority = userAccount.authority;\n        const userStats = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority);\n        const ix = await this.program.instruction.forceDeleteUser({\n            accounts: {\n                user: userAccountPublicKey,\n                userStats,\n                authority,\n                state: await this.getStatePublicKey(),\n                driftSigner: this.getSignerPublicKey(),\n                keeper: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n        return ix;\n    }\n    async deleteSignedMsgUserOrders(txParams) {\n        const ix = await this.getSignedMsgUserOrdersDeletionIx(this.wallet.publicKey);\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ix, txParams), [], this.opts);\n        return txSig;\n    }\n    async getSignedMsgUserOrdersDeletionIx(authority) {\n        const ix = await this.program.instruction.deleteSignedMsgUserOrders({\n            accounts: {\n                user: authority,\n                signedMsgUserOrders: (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, authority),\n                authority: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n            },\n        });\n        return ix;\n    }\n    /**\n     * Checks if a SignedMsg User Orders account exists for the given authority.\n     * The account pubkey is derived using the program ID and authority as seeds.\n     * Makes an RPC call to check if the account exists on-chain.\n     *\n     * @param authority The authority public key to check for\n     * @returns Promise that resolves to true if the account exists, false otherwise\n     */\n    async isSignedMsgUserOrdersAccountInitialized(authority) {\n        const signedMsgUserOrdersAccountPublicKey = (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, authority);\n        return this.checkIfAccountExists(signedMsgUserOrdersAccountPublicKey);\n    }\n    async reclaimRent(subAccountId = 0, txParams) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const ix = await this.getReclaimRentIx(userAccountPublicKey);\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ix, txParams), [], this.opts);\n        return txSig;\n    }\n    async getReclaimRentIx(userAccountPublicKey) {\n        return await this.program.instruction.reclaimRent({\n            accounts: {\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n            },\n        });\n    }\n    getUser(subAccountId, authority) {\n        subAccountId = subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId;\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userMapKey = this.getUserMapKey(subAccountId, authority);\n        if (!this.users.has(userMapKey)) {\n            throw new Error(`DriftClient has no user for user id ${userMapKey}`);\n        }\n        return this.users.get(userMapKey);\n    }\n    hasUser(subAccountId, authority) {\n        subAccountId = subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId;\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userMapKey = this.getUserMapKey(subAccountId, authority);\n        return this.users.has(userMapKey);\n    }\n    getUsers() {\n        // delegate users get added to the end\n        return [...this.users.values()]\n            .filter((acct) => acct.getUserAccount().authority.equals(this.wallet.publicKey))\n            .concat([...this.users.values()].filter((acct) => !acct.getUserAccount().authority.equals(this.wallet.publicKey)));\n    }\n    getUserStats() {\n        return this.userStats;\n    }\n    async fetchReferrerNameAccount(name) {\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const referrerNameAccountPublicKey = (0, pda_1.getReferrerNamePublicKeySync)(this.program.programId, nameBuffer);\n        return (await this.program.account.referrerName.fetch(referrerNameAccountPublicKey));\n    }\n    getUserStatsAccountPublicKey() {\n        if (this.userStatsAccountPublicKey) {\n            return this.userStatsAccountPublicKey;\n        }\n        this.userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority);\n        return this.userStatsAccountPublicKey;\n    }\n    async getUserAccountPublicKey(subAccountId, authority) {\n        return this.getUser(subAccountId, authority).userAccountPublicKey;\n    }\n    getUserAccount(subAccountId, authority) {\n        return this.getUser(subAccountId, authority).getUserAccount();\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param subAccountId\n     */\n    async forceGetUserAccount(subAccountId, authority) {\n        await this.getUser(subAccountId, authority).fetchAccounts();\n        return this.getUser(subAccountId, authority).getUserAccount();\n    }\n    getUserAccountAndSlot(subAccountId, authority) {\n        return this.getUser(subAccountId, authority).getUserAccountAndSlot();\n    }\n    getSpotPosition(marketIndex, subAccountId) {\n        return this.getUserAccount(subAccountId).spotPositions.find((spotPosition) => spotPosition.marketIndex === marketIndex);\n    }\n    getQuoteAssetTokenAmount() {\n        return this.getTokenAmount(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n    }\n    /**\n     * Returns the token amount for a given market. The spot market precision is based on the token mint decimals.\n     * Positive if it is a deposit, negative if it is a borrow.\n     * @param marketIndex\n     */\n    getTokenAmount(marketIndex) {\n        const spotPosition = this.getSpotPosition(marketIndex);\n        if (spotPosition === undefined) {\n            return numericConstants_1.ZERO;\n        }\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarket, spotPosition.balanceType), spotPosition.balanceType);\n    }\n    /**\n     * Converts an amount to the spot precision for a given market. The spot market precision is based on the token mint decimals.\n     * @param marketIndex\n     * @param amount\n     */\n    convertToSpotPrecision(marketIndex, amount) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return (0, spotMarket_1.castNumberToSpotPrecision)(amount, spotMarket);\n    }\n    /**\n     * Converts an amount to the perp precision. The perp market precision is {@link BASE_PRECISION} (1e9).\n     * @param amount\n     */\n    convertToPerpPrecision(amount) {\n        if (typeof amount === 'number') {\n            return (0, utils_1.numberToSafeBN)(amount, numericConstants_1.BASE_PRECISION);\n        }\n        else {\n            return amount.mul(numericConstants_1.BASE_PRECISION);\n        }\n    }\n    /**\n     * Converts an amount to the price precision. The perp market precision is {@link PRICE_PRECISION} (1e6).\n     * @param amount\n     */\n    convertToPricePrecision(amount) {\n        if (typeof amount === 'number') {\n            return (0, utils_1.numberToSafeBN)(amount, numericConstants_1.PRICE_PRECISION);\n        }\n        else {\n            return amount.mul(numericConstants_1.BASE_PRECISION);\n        }\n    }\n    /**\n     * Each drift instruction must include perp and sport market accounts in the ix remaining accounts.\n     * Use this function to force a subset of markets to be included in the remaining accounts for every ix\n     *\n     * @param perpMarketIndexes\n     * @param spotMarketIndexes\n     */\n    mustIncludeMarketsInIx({ perpMarketIndexes, spotMarketIndexes, }) {\n        perpMarketIndexes.forEach((perpMarketIndex) => {\n            this.mustIncludePerpMarketIndexes.add(perpMarketIndex);\n        });\n        spotMarketIndexes.forEach((spotMarketIndex) => {\n            this.mustIncludeSpotMarketIndexes.add(spotMarketIndex);\n        });\n    }\n    getRemainingAccounts(params) {\n        var _a;\n        const { oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap } = this.getRemainingAccountMapsForUsers(params.userAccounts);\n        if (params.useMarketLastSlotCache) {\n            const lastUserSlot = (_a = this.getUserAccountAndSlot(params.userAccounts.length > 0\n                ? params.userAccounts[0].subAccountId\n                : this.activeSubAccountId, params.userAccounts.length > 0\n                ? params.userAccounts[0].authority\n                : this.authority)) === null || _a === void 0 ? void 0 : _a.slot;\n            for (const [marketIndex, slot,] of this.perpMarketLastSlotCache.entries()) {\n                // if cache has more recent slot than user positions account slot, add market to remaining accounts\n                // otherwise remove from slot\n                if (slot > lastUserSlot) {\n                    this.addPerpMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n                }\n                else {\n                    this.perpMarketLastSlotCache.delete(marketIndex);\n                }\n            }\n            for (const [marketIndex, slot,] of this.spotMarketLastSlotCache.entries()) {\n                // if cache has more recent slot than user positions account slot, add market to remaining accounts\n                // otherwise remove from slot\n                if (slot > lastUserSlot) {\n                    this.addSpotMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap);\n                }\n                else {\n                    this.spotMarketLastSlotCache.delete(marketIndex);\n                }\n            }\n        }\n        if (params.readablePerpMarketIndex !== undefined) {\n            const readablePerpMarketIndexes = Array.isArray(params.readablePerpMarketIndex)\n                ? params.readablePerpMarketIndex\n                : [params.readablePerpMarketIndex];\n            for (const marketIndex of readablePerpMarketIndexes) {\n                this.addPerpMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n            }\n        }\n        for (const perpMarketIndex of this.mustIncludePerpMarketIndexes.values()) {\n            this.addPerpMarketToRemainingAccountMaps(perpMarketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n        }\n        if (params.readableSpotMarketIndexes !== undefined) {\n            for (const readableSpotMarketIndex of params.readableSpotMarketIndexes) {\n                this.addSpotMarketToRemainingAccountMaps(readableSpotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n            }\n        }\n        for (const spotMarketIndex of this.mustIncludeSpotMarketIndexes.values()) {\n            this.addSpotMarketToRemainingAccountMaps(spotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n        }\n        if (params.writablePerpMarketIndexes !== undefined) {\n            for (const writablePerpMarketIndex of params.writablePerpMarketIndexes) {\n                this.addPerpMarketToRemainingAccountMaps(writablePerpMarketIndex, true, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n            }\n        }\n        if (params.writableSpotMarketIndexes !== undefined) {\n            for (const writableSpotMarketIndex of params.writableSpotMarketIndexes) {\n                this.addSpotMarketToRemainingAccountMaps(writableSpotMarketIndex, true, oracleAccountMap, spotMarketAccountMap);\n            }\n        }\n        return [\n            ...oracleAccountMap.values(),\n            ...spotMarketAccountMap.values(),\n            ...perpMarketAccountMap.values(),\n        ];\n    }\n    addPerpMarketToRemainingAccountMaps(marketIndex, writable, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap) {\n        const perpMarketAccount = this.getPerpMarketAccount(marketIndex);\n        perpMarketAccountMap.set(marketIndex, {\n            pubkey: perpMarketAccount.pubkey,\n            isSigner: false,\n            isWritable: writable,\n        });\n        const oracleWritable = writable && (0, types_1.isVariant)(perpMarketAccount.amm.oracleSource, 'prelaunch');\n        oracleAccountMap.set(perpMarketAccount.amm.oracle.toString(), {\n            pubkey: perpMarketAccount.amm.oracle,\n            isSigner: false,\n            isWritable: oracleWritable,\n        });\n        this.addSpotMarketToRemainingAccountMaps(perpMarketAccount.quoteSpotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n    }\n    addSpotMarketToRemainingAccountMaps(marketIndex, writable, oracleAccountMap, spotMarketAccountMap) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        spotMarketAccountMap.set(spotMarketAccount.marketIndex, {\n            pubkey: spotMarketAccount.pubkey,\n            isSigner: false,\n            isWritable: writable,\n        });\n        if (!spotMarketAccount.oracle.equals(web3_js_1.PublicKey.default)) {\n            oracleAccountMap.set(spotMarketAccount.oracle.toString(), {\n                pubkey: spotMarketAccount.oracle,\n                isSigner: false,\n                isWritable: false,\n            });\n        }\n    }\n    addBuilderToRemainingAccounts(builders, remainingAccounts) {\n        for (const builder of builders) {\n            // Add User account for the builder\n            const builderUserAccount = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, builder, 0 // subAccountId 0 for builder user account\n            );\n            remainingAccounts.push({\n                pubkey: builderUserAccount,\n                isSigner: false,\n                isWritable: true,\n            });\n            const builderAccount = (0, pda_1.getRevenueShareAccountPublicKey)(this.program.programId, builder);\n            remainingAccounts.push({\n                pubkey: builderAccount,\n                isSigner: false,\n                isWritable: true,\n            });\n        }\n    }\n    getRemainingAccountMapsForUsers(userAccounts) {\n        const oracleAccountMap = new Map();\n        const spotMarketAccountMap = new Map();\n        const perpMarketAccountMap = new Map();\n        for (const userAccount of userAccounts) {\n            for (const spotPosition of userAccount.spotPositions) {\n                if (!(0, spotPosition_1.isSpotPositionAvailable)(spotPosition)) {\n                    this.addSpotMarketToRemainingAccountMaps(spotPosition.marketIndex, false, oracleAccountMap, spotMarketAccountMap);\n                    if (!spotPosition.openAsks.eq(numericConstants_1.ZERO) ||\n                        !spotPosition.openBids.eq(numericConstants_1.ZERO)) {\n                        this.addSpotMarketToRemainingAccountMaps(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, false, oracleAccountMap, spotMarketAccountMap);\n                    }\n                }\n            }\n            for (const position of userAccount.perpPositions) {\n                if (!(0, position_1.positionIsAvailable)(position)) {\n                    this.addPerpMarketToRemainingAccountMaps(position.marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n                }\n            }\n        }\n        return {\n            oracleAccountMap,\n            spotMarketAccountMap,\n            perpMarketAccountMap,\n        };\n    }\n    getOrder(orderId, subAccountId) {\n        var _a;\n        return (_a = this.getUserAccount(subAccountId)) === null || _a === void 0 ? void 0 : _a.orders.find((order) => order.orderId === orderId);\n    }\n    getOrderByUserId(userOrderId, subAccountId) {\n        var _a;\n        return (_a = this.getUserAccount(subAccountId)) === null || _a === void 0 ? void 0 : _a.orders.find((order) => order.userOrderId === userOrderId);\n    }\n    /**\n     * Get the associated token address for the given spot market\n     * @param marketIndex\n     * @param useNative\n     * @param tokenProgram\n     */\n    async getAssociatedTokenAccount(marketIndex, useNative = true, tokenProgram = spl_token_1.TOKEN_PROGRAM_ID, authority = this.wallet.publicKey, allowOwnerOffCurve = false) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        if (useNative && spotMarket.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT)) {\n            return authority;\n        }\n        const mint = spotMarket.mint;\n        return await (0, spl_token_1.getAssociatedTokenAddress)(mint, authority, allowOwnerOffCurve, tokenProgram);\n    }\n    createAssociatedTokenAccountIdempotentInstruction(account, payer, owner, mint, tokenProgram = spl_token_1.TOKEN_PROGRAM_ID) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                { pubkey: payer, isSigner: true, isWritable: true },\n                { pubkey: account, isSigner: false, isWritable: true },\n                { pubkey: owner, isSigner: false, isWritable: false },\n                { pubkey: mint, isSigner: false, isWritable: false },\n                {\n                    pubkey: anchor.web3.SystemProgram.programId,\n                    isSigner: false,\n                    isWritable: false,\n                },\n                { pubkey: tokenProgram, isSigner: false, isWritable: false },\n            ],\n            programId: spl_token_1.ASSOCIATED_TOKEN_PROGRAM_ID,\n            data: Buffer.from([0x1]),\n        });\n    }\n    async getDepositTxnIx(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly = false) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const signerAuthority = this.wallet.publicKey;\n        const createWSOLTokenAccount = isSolMarket && associatedTokenAccount.equals(signerAuthority);\n        const instructions = [];\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, true);\n            associatedTokenAccount = pubkey;\n            instructions.push(...ixs);\n        }\n        const depositCollateralIx = await this.getDepositInstruction(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly, true);\n        instructions.push(depositCollateralIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            instructions.push((0, spl_token_1.createCloseAccountInstruction)(associatedTokenAccount, signerAuthority, signerAuthority, []));\n        }\n        return instructions;\n    }\n    async buildSwiftDepositTx(signedOrderParams, takerInfo, depositAmount, depositSpotMarketIndex, tradePerpMarketIndex, subAccountId, takerAssociatedTokenAccount, initSwiftAccount = false) {\n        const instructions = await this.getDepositTxnIx(depositAmount, depositSpotMarketIndex, takerAssociatedTokenAccount, subAccountId, false);\n        if (initSwiftAccount) {\n            const isSignedMsgUserOrdersAccountInitialized = await this.isSignedMsgUserOrdersAccountInitialized(this.wallet.publicKey);\n            if (!isSignedMsgUserOrdersAccountInitialized) {\n                const [, initializeSignedMsgUserOrdersAccountIx] = await this.getInitializeSignedMsgUserOrdersAccountIx(this.wallet.publicKey, 8);\n                instructions.push(initializeSignedMsgUserOrdersAccountIx);\n            }\n        }\n        const ixsWithPlace = await this.getPlaceSignedMsgTakerPerpOrderIxs(signedOrderParams, tradePerpMarketIndex, takerInfo, instructions);\n        await this.buildTransaction(ixsWithPlace, {\n            computeUnitsPrice: 1000,\n            computeUnits: 100000,\n        });\n    }\n    async createDepositTxn(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly = false, txParams, initSwiftAccount = false) {\n        const instructions = await this.getDepositTxnIx(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly);\n        if (initSwiftAccount) {\n            const isSignedMsgUserOrdersAccountInitialized = await this.isSignedMsgUserOrdersAccountInitialized(this.wallet.publicKey);\n            if (!isSignedMsgUserOrdersAccountInitialized) {\n                const [, initializeSignedMsgUserOrdersAccountIx] = await this.getInitializeSignedMsgUserOrdersAccountIx(this.wallet.publicKey, 8);\n                instructions.push(initializeSignedMsgUserOrdersAccountIx);\n            }\n        }\n        txParams = { ...(txParams !== null && txParams !== void 0 ? txParams : this.txParams), computeUnits: 800000 };\n        const tx = await this.buildTransaction(instructions, txParams);\n        return tx;\n    }\n    /**\n     * Deposit funds into the given spot market\n     *\n     * @param amount to deposit\n     * @param marketIndex spot market index to deposit into\n     * @param associatedTokenAccount can be the wallet public key if using native sol\n     * @param subAccountId subaccountId to deposit\n     * @param reduceOnly if true, deposit must not increase account risk\n     */\n    async deposit(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly = false, txParams, initSwiftAccount = false) {\n        const tx = await this.createDepositTxn(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly, txParams, initSwiftAccount);\n        const { txSig, slot } = await this.sendTransaction(tx, [], this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getDepositInstruction(amount, marketIndex, userTokenAccount, subAccountId, reduceOnly = false, userInitialized = true) {\n        const userAccountPublicKey = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.authority, subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId);\n        let remainingAccounts = [];\n        if (userInitialized) {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [await this.forceGetUserAccount(subAccountId)],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [marketIndex],\n            });\n        }\n        else {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [],\n                writableSpotMarketIndexes: [marketIndex],\n            });\n        }\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        this.addTokenMintToRemainingAccounts(spotMarketAccount, remainingAccounts);\n        if (this.isTransferHook(spotMarketAccount)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarketAccount.mint, remainingAccounts);\n        }\n        const tokenProgram = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        return await this.program.instruction.deposit(marketIndex, amount, reduceOnly, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                userTokenAccount: userTokenAccount,\n                authority: this.wallet.publicKey,\n                tokenProgram,\n            },\n            remainingAccounts,\n        });\n    }\n    async checkIfAccountExists(account) {\n        try {\n            const accountInfo = await this.connection.getAccountInfo(account);\n            return accountInfo != null;\n        }\n        catch (e) {\n            // Doesn't already exist\n            return false;\n        }\n    }\n    async getWrappedSolAccountCreationIxs(amount, includeRent) {\n        const authority = this.wallet.publicKey;\n        // Generate a random seed for wrappedSolAccount.\n        const seed = web3_js_1.Keypair.generate().publicKey.toBase58().slice(0, 32);\n        // Calculate a publicKey that will be controlled by the authority.\n        const wrappedSolAccount = await web3_js_1.PublicKey.createWithSeed(authority, seed, spl_token_1.TOKEN_PROGRAM_ID);\n        const result = {\n            ixs: [],\n            signers: [],\n            pubkey: wrappedSolAccount,\n        };\n        const rentSpaceLamports = new anchor_1.BN(web3_js_1.LAMPORTS_PER_SOL / 100);\n        const lamports = includeRent\n            ? amount.add(rentSpaceLamports)\n            : rentSpaceLamports;\n        result.ixs.push(web3_js_1.SystemProgram.createAccountWithSeed({\n            fromPubkey: authority,\n            basePubkey: authority,\n            seed,\n            newAccountPubkey: wrappedSolAccount,\n            lamports: lamports.toNumber(),\n            space: 165,\n            programId: spl_token_1.TOKEN_PROGRAM_ID,\n        }));\n        result.ixs.push((0, spl_token_1.createInitializeAccountInstruction)(wrappedSolAccount, spotMarkets_1.WRAPPED_SOL_MINT, authority));\n        return result;\n    }\n    getTokenProgramForSpotMarket(spotMarketAccount) {\n        if (this.isToken2022(spotMarketAccount)) {\n            return spl_token_1.TOKEN_2022_PROGRAM_ID;\n        }\n        return spl_token_1.TOKEN_PROGRAM_ID;\n    }\n    isToken2022(spotMarketAccount) {\n        return ((spotMarketAccount.tokenProgramFlag & types_1.TokenProgramFlag.Token2022) > 0);\n    }\n    isTransferHook(spotMarketAccount) {\n        return ((spotMarketAccount.tokenProgramFlag & types_1.TokenProgramFlag.TransferHook) > 0);\n    }\n    addTokenMintToRemainingAccounts(spotMarketAccount, remainingAccounts) {\n        if (this.isToken2022(spotMarketAccount)) {\n            remainingAccounts.push({\n                pubkey: spotMarketAccount.mint,\n                isSigner: false,\n                isWritable: false,\n            });\n        }\n    }\n    async addExtraAccountMetasToRemainingAccounts(mint, remainingAccounts) {\n        const mintAccount = await (0, spl_token_1.getMint)(this.connection, mint, 'confirmed', spl_token_1.TOKEN_2022_PROGRAM_ID);\n        const hookAccount = (0, spl_token_1.getTransferHook)(mintAccount);\n        if (hookAccount.programId.equals(web3_js_1.PublicKey.default)) {\n            return;\n        }\n        const extraAccountMetasAddress = (0, spl_token_1.getExtraAccountMetaAddress)(mint, hookAccount.programId);\n        const extraAccountMetas = (0, spl_token_1.getExtraAccountMetas)(await this.connection.getAccountInfo(extraAccountMetasAddress));\n        for (const acc of extraAccountMetas) {\n            // assuming it's an extra account meta that does not rely on ix data\n            const resolvedAcc = await (0, spl_token_1.resolveExtraAccountMeta)(this.connection, acc, remainingAccounts, Buffer.from([]), hookAccount.programId);\n            remainingAccounts.push(resolvedAcc);\n        }\n        remainingAccounts.push({\n            pubkey: hookAccount.programId,\n            isSigner: false,\n            isWritable: false,\n        });\n        remainingAccounts.push({\n            pubkey: extraAccountMetasAddress,\n            isSigner: false,\n            isWritable: false,\n        });\n    }\n    getAssociatedTokenAccountCreationIx(tokenMintAddress, associatedTokenAddress, tokenProgram) {\n        return (0, spl_token_1.createAssociatedTokenAccountInstruction)(this.wallet.publicKey, associatedTokenAddress, this.wallet.publicKey, tokenMintAddress, tokenProgram);\n    }\n    async createInitializeUserAccountAndDepositCollateralIxs(amount, userTokenAccount, marketIndex = 0, subAccountId = 0, name, fromSubAccountId, referrerInfo, donateAmount, customMaxMarginRatio, poolId) {\n        const ixs = [];\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        const isSignedMsgUserOrdersAccountInitialized = await this.isSignedMsgUserOrdersAccountInitialized(this.wallet.publicKey);\n        if (!isSignedMsgUserOrdersAccountInitialized) {\n            const [, initializeSignedMsgUserOrdersAccountIx] = await this.getInitializeSignedMsgUserOrdersAccountIx(this.wallet.publicKey, 8);\n            ixs.push(initializeSignedMsgUserOrdersAccountIx);\n        }\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarket.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const authority = this.wallet.publicKey;\n        const isFromSubaccount = fromSubAccountId !== null &&\n            fromSubAccountId !== undefined &&\n            !isNaN(fromSubAccountId);\n        donateAmount = donateAmount ? donateAmount : numericConstants_1.ZERO;\n        const createWSOLTokenAccount = (isSolMarket &&\n            userTokenAccount.equals(authority) &&\n            !isFromSubaccount) ||\n            !donateAmount.eq(numericConstants_1.ZERO);\n        const wSolAmount = isSolMarket ? amount.add(donateAmount) : donateAmount;\n        let wsolTokenAccount;\n        if (createWSOLTokenAccount) {\n            const { ixs: startIxs, pubkey } = await this.getWrappedSolAccountCreationIxs(wSolAmount, true);\n            wsolTokenAccount = pubkey;\n            if (isSolMarket) {\n                userTokenAccount = pubkey;\n            }\n            ixs.push(...startIxs);\n        }\n        const depositCollateralIx = isFromSubaccount\n            ? await this.getTransferDepositIx(amount, marketIndex, fromSubAccountId, subAccountId)\n            : await this.getDepositInstruction(amount, marketIndex, userTokenAccount, subAccountId, false, false);\n        if (subAccountId === 0) {\n            if (!(await this.checkIfAccountExists(this.getUserStatsAccountPublicKey()))) {\n                ixs.push(await this.getInitializeUserStatsIx());\n            }\n        }\n        ixs.push(initializeUserAccountIx);\n        if (poolId) {\n            ixs.push(await this.getUpdateUserPoolIdIx(poolId, subAccountId));\n        }\n        ixs.push(depositCollateralIx);\n        if (!donateAmount.eq(numericConstants_1.ZERO)) {\n            const donateIx = await this.getDepositIntoSpotMarketRevenuePoolIx(1, donateAmount, wsolTokenAccount);\n            ixs.push(donateIx);\n        }\n        // Set the max margin ratio to initialize account with if passed\n        if (customMaxMarginRatio) {\n            const customMarginRatioIx = await this.getUpdateUserCustomMarginRatioIx(customMaxMarginRatio, subAccountId);\n            ixs.push(customMarginRatioIx);\n        }\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            ixs.push((0, spl_token_1.createCloseAccountInstruction)(wsolTokenAccount, authority, authority, []));\n        }\n        return {\n            ixs,\n            userAccountPublicKey,\n        };\n    }\n    async createInitializeUserAccountAndDepositCollateral(amount, userTokenAccount, marketIndex = 0, subAccountId = 0, name, fromSubAccountId, referrerInfo, donateAmount, txParams, customMaxMarginRatio, poolId) {\n        const { ixs, userAccountPublicKey } = await this.createInitializeUserAccountAndDepositCollateralIxs(amount, userTokenAccount, marketIndex, subAccountId, name, fromSubAccountId, referrerInfo, donateAmount, customMaxMarginRatio, poolId);\n        const tx = await this.buildTransaction(ixs, txParams);\n        return [tx, userAccountPublicKey];\n    }\n    /**\n     * Creates the User account for a user, and deposits some initial collateral\n     * @param amount\n     * @param userTokenAccount\n     * @param marketIndex\n     * @param subAccountId\n     * @param name\n     * @param fromSubAccountId\n     * @param referrerInfo\n     * @param donateAmount\n     * @param txParams\n     * @returns\n     */\n    async initializeUserAccountAndDepositCollateral(amount, userTokenAccount, marketIndex = 0, subAccountId = 0, name, fromSubAccountId, referrerInfo, donateAmount, txParams, customMaxMarginRatio, poolId) {\n        const [tx, userAccountPublicKey] = await this.createInitializeUserAccountAndDepositCollateral(amount, userTokenAccount, marketIndex, subAccountId, name, fromSubAccountId, referrerInfo, donateAmount, txParams, customMaxMarginRatio, poolId);\n        const additionalSigners = [];\n        const { txSig, slot } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        await this.addUser(subAccountId);\n        return [txSig, userAccountPublicKey];\n    }\n    async initializeUserAccountForDevnet(subAccountId = 0, name = userName_1.DEFAULT_USER_NAME, marketIndex, tokenFaucet, amount, referrerInfo, txParams) {\n        const ixs = [];\n        const [associateTokenPublicKey, createAssociatedAccountIx, mintToIx] = await tokenFaucet.createAssociatedTokenAccountAndMintToInstructions(this.wallet.publicKey, amount);\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        const depositCollateralIx = await this.getDepositInstruction(amount, marketIndex, associateTokenPublicKey, subAccountId, false, false);\n        ixs.push(createAssociatedAccountIx, mintToIx);\n        if (subAccountId === 0) {\n            if (!(await this.checkIfAccountExists(this.getUserStatsAccountPublicKey()))) {\n                ixs.push(await this.getInitializeUserStatsIx());\n            }\n        }\n        ixs.push(initializeUserAccountIx, depositCollateralIx);\n        const tx = await this.buildTransaction(ixs, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        await this.addUser(subAccountId);\n        return [txSig, userAccountPublicKey];\n    }\n    async getWithdrawalIxs(amount, marketIndex, associatedTokenAddress, reduceOnly = false, subAccountId, updateFuel = false) {\n        const withdrawIxs = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const authority = this.wallet.publicKey;\n        if (updateFuel) {\n            const updateFuelIx = await this.getUpdateUserFuelBonusIx(await this.getUserAccountPublicKey(subAccountId), this.getUserAccount(subAccountId), this.authority);\n            withdrawIxs.push(updateFuelIx);\n        }\n        const createWSOLTokenAccount = isSolMarket && associatedTokenAddress.equals(authority);\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, false);\n            associatedTokenAddress = pubkey;\n            withdrawIxs.push(...ixs);\n        }\n        else {\n            const accountExists = await this.checkIfAccountExists(associatedTokenAddress);\n            if (!accountExists) {\n                const createAssociatedTokenAccountIx = this.getAssociatedTokenAccountCreationIx(spotMarketAccount.mint, associatedTokenAddress, this.getTokenProgramForSpotMarket(spotMarketAccount));\n                withdrawIxs.push(createAssociatedTokenAccountIx);\n            }\n        }\n        const withdrawCollateralIx = await this.getWithdrawIx(amount, spotMarketAccount.marketIndex, associatedTokenAddress, reduceOnly, subAccountId);\n        withdrawIxs.push(withdrawCollateralIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            withdrawIxs.push((0, spl_token_1.createCloseAccountInstruction)(associatedTokenAddress, authority, authority, []));\n        }\n        return withdrawIxs;\n    }\n    /**\n     * Withdraws from a user account. If deposit doesn't already exist, creates a borrow\n     * @param amount\n     * @param marketIndex\n     * @param associatedTokenAddress - the token account to withdraw to. can be the wallet public key if using native sol\n     * @param reduceOnly\n     */\n    async withdraw(amount, marketIndex, associatedTokenAddress, reduceOnly = false, subAccountId, txParams, updateFuel = false) {\n        const additionalSigners = [];\n        const withdrawIxs = await this.getWithdrawalIxs(amount, marketIndex, associatedTokenAddress, reduceOnly, subAccountId, updateFuel);\n        const tx = await this.buildTransaction(withdrawIxs, txParams !== null && txParams !== void 0 ? txParams : this.txParams);\n        const { txSig, slot } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async withdrawAllDustPositions(subAccountId, txParams, opts) {\n        var _a, _b;\n        const user = this.getUser(subAccountId);\n        const dustPositionSpotMarketAccounts = user.getSpotMarketAccountsWithDustPosition();\n        if (!dustPositionSpotMarketAccounts ||\n            dustPositionSpotMarketAccounts.length === 0) {\n            (_a = opts === null || opts === void 0 ? void 0 : opts.dustPositionCountCallback) === null || _a === void 0 ? void 0 : _a.call(opts, 0);\n            return undefined;\n        }\n        (_b = opts === null || opts === void 0 ? void 0 : opts.dustPositionCountCallback) === null || _b === void 0 ? void 0 : _b.call(opts, dustPositionSpotMarketAccounts.length);\n        let allWithdrawIxs = [];\n        for (const position of dustPositionSpotMarketAccounts) {\n            const tokenAccount = await (0, spl_token_1.getAssociatedTokenAddress)(position.mint, this.wallet.publicKey);\n            const tokenAmount = await user.getTokenAmount(position.marketIndex);\n            const withdrawIxs = await this.getWithdrawalIxs(tokenAmount.muln(2), //  2x to ensure all dust is withdrawn\n            position.marketIndex, tokenAccount, true, // reduce-only true to ensure all dust is withdrawn\n            subAccountId);\n            allWithdrawIxs = allWithdrawIxs.concat(withdrawIxs);\n        }\n        const tx = await this.buildTransaction(allWithdrawIxs, txParams !== null && txParams !== void 0 ? txParams : this.txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getWithdrawIx(amount, marketIndex, userTokenAccount, reduceOnly = false, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [marketIndex],\n            readableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        this.addTokenMintToRemainingAccounts(spotMarketAccount, remainingAccounts);\n        if (this.isTransferHook(spotMarketAccount)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarketAccount.mint, remainingAccounts);\n        }\n        const tokenProgram = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        return await this.program.instruction.withdraw(marketIndex, amount, reduceOnly, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                driftSigner: this.getSignerPublicKey(),\n                user,\n                userStats: this.getUserStatsAccountPublicKey(),\n                userTokenAccount: userTokenAccount,\n                authority: this.wallet.publicKey,\n                tokenProgram,\n            },\n            remainingAccounts,\n        });\n    }\n    /**\n     * Withdraws from the fromSubAccount and deposits into the toSubAccount\n     * @param amount\n     * @param marketIndex\n     * @param fromSubAccountId\n     * @param toSubAccountId\n     * @param txParams\n     */\n    async transferDeposit(amount, marketIndex, fromSubAccountId, toSubAccountId, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getTransferDepositIx(amount, marketIndex, fromSubAccountId, toSubAccountId), txParams), [], this.opts);\n        if (fromSubAccountId === this.activeSubAccountId ||\n            toSubAccountId === this.activeSubAccountId) {\n            this.spotMarketLastSlotCache.set(marketIndex, slot);\n        }\n        return txSig;\n    }\n    async getTransferDepositIx(amount, marketIndex, fromSubAccountId, toSubAccountId) {\n        const fromUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, fromSubAccountId);\n        const toUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, toSubAccountId);\n        let remainingAccounts;\n        const userMapKey = this.getUserMapKey(fromSubAccountId, this.wallet.publicKey);\n        if (this.users.has(userMapKey)) {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [this.users.get(userMapKey).getUserAccount()],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [marketIndex],\n            });\n        }\n        else {\n            const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.authority, fromSubAccountId);\n            const fromUserAccount = (await this.program.account.user.fetch(userAccountPublicKey));\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [fromUserAccount],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [marketIndex],\n            });\n        }\n        return await this.program.instruction.transferDeposit(marketIndex, amount, {\n            accounts: {\n                authority: this.wallet.publicKey,\n                fromUser,\n                toUser,\n                userStats: this.getUserStatsAccountPublicKey(),\n                state: await this.getStatePublicKey(),\n                spotMarketVault: this.getSpotMarketAccount(marketIndex).vault,\n            },\n            remainingAccounts,\n        });\n    }\n    async transferPools(depositFromMarketIndex, depositToMarketIndex, borrowFromMarketIndex, borrowToMarketIndex, depositAmount, borrowAmount, fromSubAccountId, toSubAccountId, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getTransferPoolsIx(depositFromMarketIndex, depositToMarketIndex, borrowFromMarketIndex, borrowToMarketIndex, depositAmount, borrowAmount, fromSubAccountId, toSubAccountId), txParams), [], this.opts);\n        if (fromSubAccountId === this.activeSubAccountId ||\n            toSubAccountId === this.activeSubAccountId) {\n            this.spotMarketLastSlotCache.set(depositFromMarketIndex, slot);\n            this.spotMarketLastSlotCache.set(depositToMarketIndex, slot);\n            this.spotMarketLastSlotCache.set(borrowFromMarketIndex, slot);\n            this.spotMarketLastSlotCache.set(borrowToMarketIndex, slot);\n        }\n        return txSig;\n    }\n    async getTransferPoolsIx(depositFromMarketIndex, depositToMarketIndex, borrowFromMarketIndex, borrowToMarketIndex, depositAmount, borrowAmount, fromSubAccountId, toSubAccountId, isToNewSubAccount) {\n        const fromUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, fromSubAccountId);\n        const toUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, toSubAccountId);\n        const userAccounts = [this.getUserAccount(fromSubAccountId)];\n        if (!isToNewSubAccount) {\n            userAccounts.push(this.getUserAccount(toSubAccountId));\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                depositFromMarketIndex,\n                depositToMarketIndex,\n                borrowFromMarketIndex,\n                borrowToMarketIndex,\n            ],\n        });\n        const tokenPrograms = new Set();\n        const depositFromSpotMarket = this.getSpotMarketAccount(depositFromMarketIndex);\n        const borrowFromSpotMarket = this.getSpotMarketAccount(borrowFromMarketIndex);\n        tokenPrograms.add(this.getTokenProgramForSpotMarket(depositFromSpotMarket).toBase58());\n        tokenPrograms.add(this.getTokenProgramForSpotMarket(borrowFromSpotMarket).toBase58());\n        for (const tokenProgram of tokenPrograms) {\n            remainingAccounts.push({\n                isSigner: false,\n                isWritable: false,\n                pubkey: new web3_js_1.PublicKey(tokenProgram),\n            });\n        }\n        return await this.program.instruction.transferPools(depositFromMarketIndex, depositToMarketIndex, borrowFromMarketIndex, borrowToMarketIndex, depositAmount !== null && depositAmount !== void 0 ? depositAmount : null, borrowAmount !== null && borrowAmount !== void 0 ? borrowAmount : null, {\n            accounts: {\n                authority: this.wallet.publicKey,\n                fromUser,\n                toUser,\n                userStats: this.getUserStatsAccountPublicKey(),\n                state: await this.getStatePublicKey(),\n                depositFromSpotMarketVault: this.getSpotMarketAccount(depositFromMarketIndex).vault,\n                depositToSpotMarketVault: this.getSpotMarketAccount(depositToMarketIndex).vault,\n                borrowFromSpotMarketVault: this.getSpotMarketAccount(borrowFromMarketIndex).vault,\n                borrowToSpotMarketVault: this.getSpotMarketAccount(borrowToMarketIndex).vault,\n                driftSigner: this.getSignerPublicKey(),\n            },\n            remainingAccounts,\n        });\n    }\n    async transferPerpPosition(fromSubAccountId, toSubAccountId, marketIndex, amount, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getTransferPerpPositionIx(fromSubAccountId, toSubAccountId, marketIndex, amount), txParams), [], this.opts);\n        return txSig;\n    }\n    async getTransferPerpPositionIx(fromSubAccountId, toSubAccountId, marketIndex, amount) {\n        const fromUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.authority, fromSubAccountId);\n        const toUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.authority, toSubAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(fromSubAccountId),\n                this.getUserAccount(toSubAccountId),\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        return await this.program.instruction.transferPerpPosition(marketIndex, amount !== null && amount !== void 0 ? amount : null, {\n            accounts: {\n                authority: this.wallet.publicKey,\n                fromUser,\n                toUser,\n                userStats: this.getUserStatsAccountPublicKey(),\n                state: await this.getStatePublicKey(),\n            },\n            remainingAccounts,\n        });\n    }\n    async updateSpotMarketCumulativeInterest(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.updateSpotMarketCumulativeInterestIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketCumulativeInterestIx(marketIndex) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return await this.program.instruction.updateSpotMarketCumulativeInterest({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                spotMarketVault: spotMarket.vault,\n                oracle: spotMarket.oracle,\n            },\n        });\n    }\n    async settleLP(settleeUserAccountPublicKey, marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.settleLPIx(settleeUserAccountPublicKey, marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async settleLPIx(settleeUserAccountPublicKey, marketIndex) {\n        const settleeUserAccount = (await this.program.account.user.fetch(settleeUserAccountPublicKey));\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [settleeUserAccount],\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        return this.program.instruction.settleLp(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: settleeUserAccountPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async removePerpLpShares(marketIndex, sharesToBurn, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getRemovePerpLpSharesIx(marketIndex, sharesToBurn, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async removePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getRemovePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn), txParams), [], this.opts);\n        return txSig;\n    }\n    async getRemovePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn) {\n        const userAccount = (await this.program.account.user.fetch(userAccountPublicKey));\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        if (sharesToBurn == undefined) {\n            const perpPosition = userAccount.perpPositions.filter((position) => position.marketIndex === marketIndex)[0];\n            sharesToBurn = perpPosition.lpShares;\n            console.log('burning lp shares:', sharesToBurn.toString());\n        }\n        return this.program.instruction.removePerpLpSharesInExpiringMarket(sharesToBurn, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async getRemovePerpLpSharesIx(marketIndex, sharesToBurn, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        if (sharesToBurn == undefined) {\n            const userAccount = this.getUserAccount(subAccountId);\n            const perpPosition = userAccount.perpPositions.filter((position) => position.marketIndex === marketIndex)[0];\n            sharesToBurn = perpPosition.lpShares;\n            console.log('burning lp shares:', sharesToBurn.toString());\n        }\n        return this.program.instruction.removePerpLpShares(sharesToBurn, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async addPerpLpShares(amount, marketIndex, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getAddPerpLpSharesIx(amount, marketIndex, subAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getAddPerpLpSharesIx(amount, marketIndex, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        return this.program.instruction.addPerpLpShares(amount, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    getQuoteValuePerLpShare(marketIndex) {\n        const perpMarketAccount = this.getPerpMarketAccount(marketIndex);\n        const openBids = anchor_1.BN.max(perpMarketAccount.amm.baseAssetReserve.sub(perpMarketAccount.amm.minBaseAssetReserve), numericConstants_1.ZERO);\n        const openAsks = anchor_1.BN.max(perpMarketAccount.amm.maxBaseAssetReserve.sub(perpMarketAccount.amm.baseAssetReserve), numericConstants_1.ZERO);\n        const oraclePriceData = this.getOracleDataForPerpMarket(marketIndex);\n        const maxOpenBidsAsks = anchor_1.BN.max(openBids, openAsks);\n        const quoteValuePerLpShare = maxOpenBidsAsks\n            .mul(oraclePriceData.price)\n            .mul(numericConstants_1.QUOTE_PRECISION)\n            .div(numericConstants_1.PRICE_PRECISION)\n            .div(perpMarketAccount.amm.sqrtK);\n        return quoteValuePerLpShare;\n    }\n    /**\n     * @deprecated use {@link placePerpOrder} or {@link placeAndTakePerpOrder} instead\n     */\n    async openPosition(direction, amount, marketIndex, limitPrice, subAccountId) {\n        return await this.placeAndTakePerpOrder({\n            orderType: types_1.OrderType.MARKET,\n            marketIndex,\n            direction,\n            baseAssetAmount: amount,\n            price: limitPrice,\n        }, undefined, undefined, undefined, undefined, undefined, subAccountId);\n    }\n    async sendSignedTx(tx, opts) {\n        const { txSig } = await this.sendTransaction(tx, undefined, opts !== null && opts !== void 0 ? opts : this.opts, true);\n        return txSig;\n    }\n    async prepareMarketOrderTxs(orderParams, userAccountPublicKey, userAccount, makerInfo, txParams, bracketOrdersParams = new Array(), referrerInfo, cancelExistingOrders, settlePnl, positionMaxLev) {\n        const marketIndex = orderParams.marketIndex;\n        const orderId = userAccount.nextOrderId;\n        const ixPromisesForTxs = {\n            cancelExistingOrdersTx: undefined,\n            settlePnlTx: undefined,\n            fillTx: undefined,\n            marketOrderTx: undefined,\n        };\n        const txKeys = Object.keys(ixPromisesForTxs);\n        const marketOrderTxIxs = positionMaxLev\n            ? this.getPlaceOrdersAndSetPositionMaxLevIx([orderParams, ...bracketOrdersParams], positionMaxLev, userAccount.subAccountId)\n            : this.getPlaceOrdersIx([orderParams, ...bracketOrdersParams], userAccount.subAccountId);\n        ixPromisesForTxs.marketOrderTx = marketOrderTxIxs;\n        /* Cancel open orders in market if requested */\n        if (cancelExistingOrders && (0, types_1.isVariant)(orderParams.marketType, 'perp')) {\n            ixPromisesForTxs.cancelExistingOrdersTx = this.getCancelOrdersIx(orderParams.marketType, orderParams.marketIndex, null, userAccount.subAccountId);\n        }\n        /* Settle PnL after fill if requested */\n        if (settlePnl && (0, types_1.isVariant)(orderParams.marketType, 'perp')) {\n            ixPromisesForTxs.settlePnlTx = this.settlePNLIx(userAccountPublicKey, userAccount, marketIndex);\n        }\n        // use versioned transactions if there is a lookup table account and wallet is compatible\n        if (this.txVersion === 0) {\n            ixPromisesForTxs.fillTx = this.getFillPerpOrderIx(userAccountPublicKey, userAccount, {\n                orderId,\n                marketIndex,\n            }, makerInfo, referrerInfo, userAccount.subAccountId);\n        }\n        const ixs = await Promise.all(Object.values(ixPromisesForTxs));\n        const ixsMap = ixs.reduce((acc, ix, i) => {\n            acc[txKeys[i]] = ix;\n            return acc;\n        }, {});\n        const txsMap = (await this.buildTransactionsMap(ixsMap, txParams));\n        return txsMap;\n    }\n    /**\n     * Sends a market order and returns a signed tx which can fill the order against the vamm, which the caller can use to fill their own order if required.\n     * @param orderParams\n     * @param userAccountPublicKey\n     * @param userAccount\n     * @param makerInfo\n     * @param txParams\n     * @param bracketOrdersParams\n     * @param cancelExistingOrders - Builds and returns an extra transaciton to cancel the existing orders in the same perp market. Intended use is to auto-cancel TP/SL orders when closing a position. Ignored if orderParams.marketType is not MarketType.PERP\n     * @returns\n     */\n    async sendMarketOrderAndGetSignedFillTx(orderParams, userAccountPublicKey, userAccount, makerInfo, txParams, bracketOrdersParams = new Array(), referrerInfo, cancelExistingOrders, settlePnl) {\n        const preppedTxs = await this.prepareMarketOrderTxs(orderParams, userAccountPublicKey, userAccount, makerInfo, txParams, bracketOrdersParams, referrerInfo, cancelExistingOrders, settlePnl);\n        const signedTxs = (await this.txHandler.getSignedTransactionMap(preppedTxs, this.wallet)).signedTxMap;\n        const { txSig, slot } = await this.sendTransaction(signedTxs.marketOrderTx, [], this.opts, true);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return {\n            txSig,\n            signedFillTx: signedTxs.fillTx,\n            signedCancelExistingOrdersTx: signedTxs.cancelExistingOrdersTx,\n            signedSettlePnlTx: signedTxs.settlePnlTx,\n        };\n    }\n    async placePerpOrder(orderParams, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlacePerpOrderIx(orderParams, subAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlacePerpOrderIx(orderParams, subAccountId, depositToTradeArgs) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.PERP });\n        const isDepositToTradeTx = depositToTradeArgs !== undefined;\n        const user = isDepositToTradeTx\n            ? (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.authority, subAccountId)\n            : await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: (depositToTradeArgs === null || depositToTradeArgs === void 0 ? void 0 : depositToTradeArgs.isMakingNewAccount)\n                ? []\n                : [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: false,\n            readablePerpMarketIndex: orderParams.marketIndex,\n            readableSpotMarketIndexes: isDepositToTradeTx\n                ? [depositToTradeArgs === null || depositToTradeArgs === void 0 ? void 0 : depositToTradeArgs.depositMarketIndex]\n                : undefined,\n        });\n        if ((0, orderParams_1.isUpdateHighLeverageMode)(orderParams.bitFlags)) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        return await this.program.instruction.placePerpOrder(orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateAMMs(marketIndexes, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateAMMsIx(marketIndexes), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateAMMsIx(marketIndexes) {\n        const marketAccountInfos = [];\n        const oracleAccountInfos = [];\n        for (const marketIndex of marketIndexes) {\n            const market = this.getPerpMarketAccount(marketIndex);\n            marketAccountInfos.push({\n                pubkey: market.pubkey,\n                isWritable: true,\n                isSigner: false,\n            });\n            oracleAccountInfos.push({\n                pubkey: market.amm.oracle,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        const remainingAccounts = oracleAccountInfos.concat(marketAccountInfos);\n        return await this.program.instruction.updateAmms(marketIndexes, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async settleExpiredMarket(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettleExpiredMarketIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getSettleExpiredMarketIx(marketIndex) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            writablePerpMarketIndexes: [marketIndex],\n            writableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, marketIndex);\n        return await this.program.instruction.settleExpiredMarket(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.isSubscribed\n                    ? this.getStateAccount().admin\n                    : this.wallet.publicKey,\n                perpMarket: perpMarketPublicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async settleExpiredMarketPoolsToRevenuePool(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettleExpiredMarketPoolsToRevenuePoolIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getSettleExpiredMarketPoolsToRevenuePoolIx(perpMarketIndex) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        const spotMarketPublicKey = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        return await this.program.instruction.settleExpiredMarketPoolsToRevenuePool({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.isSubscribed\n                    ? this.getStateAccount().admin\n                    : this.wallet.publicKey,\n                spotMarket: spotMarketPublicKey,\n                perpMarket: perpMarketPublicKey,\n            },\n        });\n    }\n    async cancelOrder(orderId, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrderIx(orderId, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrderIx(orderId, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n        });\n        return await this.program.instruction.cancelOrder(orderId !== null && orderId !== void 0 ? orderId : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async cancelOrderByUserId(userOrderId, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrderByUserIdIx(userOrderId, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrderByUserIdIx(userOrderId, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const order = this.getOrderByUserId(userOrderId);\n        const oracle = this.getPerpMarketAccount(order.marketIndex).amm.oracle;\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n        });\n        return await this.program.instruction.cancelOrderByUserId(userOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n                oracle,\n            },\n            remainingAccounts,\n        });\n    }\n    /**\n     * Sends a transaction to cancel the provided order ids.\n     *\n     * @param orderIds - The order ids to cancel.\n     * @param txParams - The transaction parameters.\n     * @param subAccountId - The sub account id to cancel the orders for.\n     * @param user - The user to cancel the orders for. If provided, it will be prioritized over the subAccountId.\n     * @returns The transaction signature.\n     */\n    async cancelOrdersByIds(orderIds, txParams, subAccountId, user, overrides) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrdersByIdsIx(orderIds, subAccountId, user, overrides), txParams), [], this.opts);\n        return txSig;\n    }\n    /**\n     * Returns the transaction instruction to cancel the provided order ids.\n     *\n     * @param orderIds - The order ids to cancel.\n     * @param subAccountId - The sub account id to cancel the orders for.\n     * @param user - The user to cancel the orders for. If provided, it will be prioritized over the subAccountId.\n     * @returns The transaction instruction to cancel the orders.\n     */\n    async getCancelOrdersByIdsIx(orderIds, subAccountId, user, overrides) {\n        var _a, _b, _c;\n        const userAccountPubKey = (_a = user === null || user === void 0 ? void 0 : user.userAccountPublicKey) !== null && _a !== void 0 ? _a : (await this.getUserAccountPublicKey(subAccountId));\n        const userAccount = (_b = user === null || user === void 0 ? void 0 : user.getUserAccount()) !== null && _b !== void 0 ? _b : this.getUserAccount(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            useMarketLastSlotCache: true,\n        });\n        const authority = (_c = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _c !== void 0 ? _c : this.wallet.publicKey;\n        return await this.program.instruction.cancelOrdersByIds(orderIds, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPubKey,\n                authority,\n            },\n            remainingAccounts,\n        });\n    }\n    async cancelOrders(marketType, marketIndex, direction, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrdersIx(marketType, marketIndex, direction, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrdersIx(marketType, marketIndex, direction, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        let readablePerpMarketIndex = undefined;\n        let readableSpotMarketIndexes = undefined;\n        if (typeof marketIndex === 'number') {\n            if (marketType && (0, types_1.isVariant)(marketType, 'perp')) {\n                readablePerpMarketIndex = marketIndex;\n            }\n            else if (marketType && (0, types_1.isVariant)(marketType, 'spot')) {\n                readableSpotMarketIndexes = [marketIndex];\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            readablePerpMarketIndex,\n            readableSpotMarketIndexes,\n            useMarketLastSlotCache: true,\n        });\n        return await this.program.instruction.cancelOrders(marketType !== null && marketType !== void 0 ? marketType : null, marketIndex !== null && marketIndex !== void 0 ? marketIndex : null, direction !== null && direction !== void 0 ? direction : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async cancelAndPlaceOrders(cancelOrderParams, placeOrderParams, txParams, subAccountId) {\n        const ixs = [\n            await this.getCancelOrdersIx(cancelOrderParams.marketType, cancelOrderParams.marketIndex, cancelOrderParams.direction, subAccountId),\n            await this.getPlaceOrdersIx(placeOrderParams, subAccountId),\n        ];\n        const tx = await this.buildTransaction(ixs, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async placeOrders(params, txParams, subAccountId, optionalIxs) {\n        const { txSig } = await this.sendTransaction((await this.preparePlaceOrdersTx(params, txParams, subAccountId, optionalIxs)).placeOrdersTx, [], this.opts, false);\n        return txSig;\n    }\n    async preparePlaceOrdersTx(params, txParams, subAccountId, optionalIxs) {\n        const lookupTableAccounts = await this.fetchAllLookupTableAccounts();\n        const tx = await this.buildTransaction(await this.getPlaceOrdersIx(params, subAccountId), txParams, undefined, lookupTableAccounts, undefined, undefined, optionalIxs);\n        return {\n            placeOrdersTx: tx,\n        };\n    }\n    async getPlaceOrdersIx(params, subAccountId, overrides) {\n        var _a;\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const readablePerpMarketIndex = [];\n        const readableSpotMarketIndexes = [];\n        for (const param of params) {\n            if (!param.marketType) {\n                throw new Error('must set param.marketType');\n            }\n            if ((0, types_1.isVariant)(param.marketType, 'perp')) {\n                readablePerpMarketIndex.push(param.marketIndex);\n            }\n            else {\n                readableSpotMarketIndexes.push(param.marketIndex);\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            readablePerpMarketIndex,\n            readableSpotMarketIndexes,\n            useMarketLastSlotCache: true,\n        });\n        for (const param of params) {\n            if ((0, orderParams_1.isUpdateHighLeverageMode)(param.bitFlags)) {\n                remainingAccounts.push({\n                    pubkey: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n                    isWritable: true,\n                    isSigner: false,\n                });\n            }\n        }\n        const formattedParams = params.map((item) => (0, orderParams_1.getOrderParams)(item));\n        const authority = (_a = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _a !== void 0 ? _a : this.wallet.publicKey;\n        return await this.program.instruction.placeOrders(formattedParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority,\n            },\n            remainingAccounts,\n        });\n    }\n    async getPlaceOrdersAndSetPositionMaxLevIx(params, positionMaxLev, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const readablePerpMarketIndex = [];\n        const readableSpotMarketIndexes = [];\n        for (const param of params) {\n            if (!param.marketType) {\n                throw new Error('must set param.marketType');\n            }\n            if ((0, types_1.isVariant)(param.marketType, 'perp')) {\n                readablePerpMarketIndex.push(param.marketIndex);\n            }\n            else {\n                readableSpotMarketIndexes.push(param.marketIndex);\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            readablePerpMarketIndex,\n            readableSpotMarketIndexes,\n            useMarketLastSlotCache: true,\n        });\n        for (const param of params) {\n            if ((0, orderParams_1.isUpdateHighLeverageMode)(param.bitFlags)) {\n                remainingAccounts.push({\n                    pubkey: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n                    isWritable: true,\n                    isSigner: false,\n                });\n            }\n        }\n        const formattedParams = params.map((item) => (0, orderParams_1.getOrderParams)(item));\n        const placeOrdersIxs = await this.program.instruction.placeOrders(formattedParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n        const marginRatio = Math.floor((1 / positionMaxLev) * numericConstants_1.MARGIN_PRECISION.toNumber());\n        // TODO: Handle multiple markets?\n        const setPositionMaxLevIxs = await this.getUpdateUserPerpPositionCustomMarginRatioIx(readablePerpMarketIndex[0], marginRatio, subAccountId);\n        return [placeOrdersIxs, setPositionMaxLevIxs];\n    }\n    async fillPerpOrder(userAccountPublicKey, user, order, makerInfo, referrerInfo, txParams, fillerSubAccountId, fillerAuthority, hasBuilderFee) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getFillPerpOrderIx(userAccountPublicKey, user, order, makerInfo, referrerInfo, fillerSubAccountId, undefined, fillerAuthority, hasBuilderFee), txParams), [], this.opts);\n        return txSig;\n    }\n    async getFillPerpOrderIx(userAccountPublicKey, userAccount, order, makerInfo, referrerInfo, fillerSubAccountId, isSignedMsg, fillerAuthority, hasBuilderFee) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        let filler;\n        if (fillerAuthority) {\n            filler = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, fillerAuthority, fillerSubAccountId);\n        }\n        else {\n            filler = await this.getUserAccountPublicKey(fillerSubAccountId);\n        }\n        let fillerStatsPublicKey;\n        if (fillerAuthority) {\n            fillerStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, fillerAuthority);\n        }\n        else {\n            fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        }\n        const marketIndex = order\n            ? order.marketIndex\n            : userAccount.orders.find((order) => order.orderId === userAccount.nextOrderId - 1).marketIndex;\n        makerInfo = Array.isArray(makerInfo)\n            ? makerInfo\n            : makerInfo\n                ? [makerInfo]\n                : [];\n        const userAccounts = [userAccount];\n        for (const maker of makerInfo) {\n            userAccounts.push(maker.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        for (const maker of makerInfo) {\n            remainingAccounts.push({\n                pubkey: maker.maker,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: maker.makerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        if (referrerInfo) {\n            const referrerIsMaker = makerInfo.find((maker) => maker.maker.equals(referrerInfo.referrer)) !==\n                undefined;\n            if (!referrerIsMaker) {\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrer,\n                    isWritable: true,\n                    isSigner: false,\n                });\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrerStats,\n                    isWritable: true,\n                    isSigner: false,\n                });\n            }\n        }\n        let withBuilder = false;\n        if (hasBuilderFee) {\n            withBuilder = true;\n        }\n        else {\n            // figure out if we need builder account or not\n            if (order && !isSignedMsg) {\n                const userOrder = userAccount.orders.find((o) => o.orderId === order.orderId);\n                if (userOrder) {\n                    withBuilder = (0, orders_1.hasBuilder)(userOrder);\n                }\n            }\n            else if (isSignedMsg) {\n                // Order hasn't been placed yet, we cant tell if it has a builder or not.\n                // Include it optimistically\n                withBuilder = true;\n            }\n        }\n        if (withBuilder) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, userAccount.authority),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const orderId = isSignedMsg ? null : order.orderId;\n        return await this.program.instruction.fillPerpOrder(orderId, null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                fillerStats: fillerStatsPublicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async getRevertFillIx(fillerPublicKey) {\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        const fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        return this.program.instruction.revertFill({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                fillerStats: fillerStatsPublicKey,\n                authority: this.wallet.publicKey,\n            },\n        });\n    }\n    async placeSpotOrder(orderParams, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction((await this.preparePlaceSpotOrderTx(orderParams, txParams, subAccountId))\n            .placeSpotOrderTx, [], this.opts, false);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async preparePlaceSpotOrderTx(orderParams, txParams, subAccountId) {\n        const tx = await this.buildTransaction(await this.getPlaceSpotOrderIx(orderParams, subAccountId), txParams);\n        return {\n            placeSpotOrderTx: tx,\n        };\n    }\n    async getPlaceSpotOrderIx(orderParams, subAccountId) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.SPOT });\n        const userAccountPublicKey = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n            readableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX,\n            ],\n        });\n        return await this.program.instruction.placeSpotOrder(orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async fillSpotOrder(userAccountPublicKey, user, order, fulfillmentConfig, makerInfo, referrerInfo, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getFillSpotOrderIx(userAccountPublicKey, user, order, fulfillmentConfig, makerInfo, referrerInfo), txParams), [], this.opts);\n        return txSig;\n    }\n    async getFillSpotOrderIx(userAccountPublicKey, userAccount, order, fulfillmentConfig, makerInfo, referrerInfo, fillerPublicKey) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        const fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const marketIndex = order\n            ? order.marketIndex\n            : userAccount.orders.find((order) => order.orderId === userAccount.nextOrderId - 1).marketIndex;\n        makerInfo = Array.isArray(makerInfo)\n            ? makerInfo\n            : makerInfo\n                ? [makerInfo]\n                : [];\n        const userAccounts = [userAccount];\n        for (const maker of makerInfo) {\n            userAccounts.push(maker.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writableSpotMarketIndexes: [marketIndex, numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        for (const maker of makerInfo) {\n            remainingAccounts.push({\n                pubkey: maker.maker,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: maker.makerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const orderId = order.orderId;\n        this.addSpotFulfillmentAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n        return await this.program.instruction.fillSpotOrder(orderId, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                fillerStats: fillerStatsPublicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    addSpotFulfillmentAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        if (fulfillmentConfig) {\n            if ('serumProgramId' in fulfillmentConfig) {\n                this.addSerumRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n            }\n            else if ('phoenixProgramId' in fulfillmentConfig) {\n                this.addPhoenixRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n            }\n            else if ('openbookV2ProgramId' in fulfillmentConfig) {\n                this.addOpenbookRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n            }\n            else {\n                throw Error('Invalid fulfillment config type');\n            }\n        }\n        else {\n            remainingAccounts.push({\n                pubkey: this.getSpotMarketAccount(marketIndex).vault,\n                isWritable: false,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: this.getQuoteSpotMarketAccount().vault,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n    }\n    addSerumRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.pubkey,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumProgramId,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumMarket,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumRequestQueue,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumEventQueue,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumBids,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumAsks,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumBaseVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumQuoteVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumOpenOrders,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: (0, pda_1.getSerumSignerPublicKey)(fulfillmentConfig.serumProgramId, fulfillmentConfig.serumMarket, fulfillmentConfig.serumSignerNonce),\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSignerPublicKey(),\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getStateAccount().srmVault,\n            isWritable: false,\n            isSigner: false,\n        });\n    }\n    addPhoenixRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.pubkey,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixProgramId,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixLogAuthority,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixMarket,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSignerPublicKey(),\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixBaseVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixQuoteVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n            isWritable: false,\n            isSigner: false,\n        });\n    }\n    addOpenbookRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.pubkey,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSignerPublicKey(),\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2ProgramId,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2Market,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2MarketAuthority,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2EventHeap,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2Bids,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2Asks,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2BaseVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.openbookV2QuoteVault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().vault,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: web3_js_1.SystemProgram.programId,\n            isWritable: false,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).pubkey,\n            isWritable: true,\n            isSigner: false,\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().pubkey,\n            isWritable: true,\n            isSigner: false,\n        });\n        if (fulfillmentConfig.remainingAccounts) {\n            for (const remainingAccount of fulfillmentConfig.remainingAccounts) {\n                remainingAccounts.push({\n                    pubkey: remainingAccount,\n                    isWritable: true,\n                    isSigner: false,\n                });\n            }\n        }\n    }\n    /**\n     * Swap tokens in drift account using titan or jupiter\n     * @param swapClient swap client to find routes and instructions (Titan or Jupiter)\n     * @param jupiterClient @deprecated Use swapClient instead. Legacy parameter for backward compatibility\n     * @param outMarketIndex the market index of the token you're buying\n     * @param inMarketIndex the market index of the token you're selling\n     * @param outAssociatedTokenAccount the token account to receive the token being sold on the swap provider\n     * @param inAssociatedTokenAccount the token account to\n     * @param amount the amount of TokenIn, regardless of swapMode\n     * @param slippageBps the max slippage passed to the swap provider api\n     * @param swapMode swap provider swapMode (ExactIn or ExactOut), default is ExactIn\n     * @param route the swap provider route to use for the swap\n     * @param reduceOnly specify if In or Out token on the drift account must reduceOnly, checked at end of swap\n     * @param v6 pass in the quote response from swap provider quote's API (deprecated, use quote instead)\n     * @param quote pass in the quote response from swap provider quote's API\n     * @param txParams\n     */\n    async swap({ swapClient, jupiterClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, reduceOnly, txParams, v6, quote, onlyDirectRoutes = false, }) {\n        // Handle backward compatibility: use jupiterClient if swapClient is not provided\n        const clientToUse = swapClient || jupiterClient;\n        if (!clientToUse) {\n            throw new Error('Either swapClient or jupiterClient must be provided');\n        }\n        let res;\n        // Use unified SwapClient if available\n        if (clientToUse instanceof UnifiedSwapClient_1.UnifiedSwapClient) {\n            res = await this.getSwapIxV2({\n                swapClient: clientToUse,\n                outMarketIndex,\n                inMarketIndex,\n                outAssociatedTokenAccount,\n                inAssociatedTokenAccount,\n                amount,\n                slippageBps,\n                swapMode,\n                onlyDirectRoutes,\n                reduceOnly,\n                quote,\n                v6,\n            });\n        }\n        else if (clientToUse instanceof titanClient_1.TitanClient) {\n            res = await this.getTitanSwapIx({\n                titanClient: clientToUse,\n                outMarketIndex,\n                inMarketIndex,\n                outAssociatedTokenAccount,\n                inAssociatedTokenAccount,\n                amount,\n                slippageBps,\n                swapMode,\n                onlyDirectRoutes,\n                reduceOnly,\n            });\n        }\n        else if (clientToUse instanceof jupiterClient_1.JupiterClient) {\n            const quoteToUse = quote !== null && quote !== void 0 ? quote : v6 === null || v6 === void 0 ? void 0 : v6.quote;\n            res = await this.getJupiterSwapIxV6({\n                jupiterClient: clientToUse,\n                outMarketIndex,\n                inMarketIndex,\n                outAssociatedTokenAccount,\n                inAssociatedTokenAccount,\n                amount,\n                slippageBps,\n                swapMode,\n                quote: quoteToUse,\n                reduceOnly,\n                onlyDirectRoutes,\n            });\n        }\n        else {\n            throw new Error('Invalid swap client type. Must be SwapClient, TitanClient, or JupiterClient.');\n        }\n        const ixs = res.ixs;\n        const lookupTables = res.lookupTables;\n        const tx = (await this.buildTransaction(ixs, txParams, 0, lookupTables));\n        const { txSig, slot } = await this.sendTransaction(tx);\n        this.spotMarketLastSlotCache.set(outMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(inMarketIndex, slot);\n        return txSig;\n    }\n    async getTitanSwapIx({ titanClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, onlyDirectRoutes, reduceOnly, userAccountPublicKey, }) {\n        const outMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inMarket = this.getSpotMarketAccount(inMarketIndex);\n        const isExactOut = swapMode === 'ExactOut';\n        const exactOutBufferedAmountIn = amount.muln(1001).divn(1000); // Add 10bp buffer\n        const preInstructions = [];\n        if (!outAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(outMarket);\n            outAssociatedTokenAccount = await this.getAssociatedTokenAccount(outMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(outAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(outAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, outMarket.mint, tokenProgram));\n            }\n        }\n        if (!inAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(inMarket);\n            inAssociatedTokenAccount = await this.getAssociatedTokenAccount(inMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(inAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(inAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, inMarket.mint, tokenProgram));\n            }\n        }\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            outMarketIndex,\n            inMarketIndex,\n            amountIn: isExactOut ? exactOutBufferedAmountIn : amount,\n            inTokenAccount: inAssociatedTokenAccount,\n            outTokenAccount: outAssociatedTokenAccount,\n            reduceOnly,\n            userAccountPublicKey,\n        });\n        const { transactionMessage, lookupTables } = await titanClient.getSwap({\n            inputMint: inMarket.mint,\n            outputMint: outMarket.mint,\n            amount,\n            userPublicKey: this.provider.wallet.publicKey,\n            slippageBps,\n            swapMode: isExactOut ? titanClient_1.SwapMode.ExactOut : titanClient_1.SwapMode.ExactIn,\n            onlyDirectRoutes,\n            sizeConstraint: utils_2.MAX_TX_BYTE_SIZE - 375, // buffer for drift instructions\n        });\n        const titanInstructions = titanClient.getTitanInstructions({\n            transactionMessage,\n            inputMint: inMarket.mint,\n            outputMint: outMarket.mint,\n        });\n        const ixs = [\n            ...preInstructions,\n            beginSwapIx,\n            ...titanInstructions,\n            endSwapIx,\n        ];\n        return { ixs, lookupTables };\n    }\n    async getJupiterSwapIxV6({ jupiterClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, onlyDirectRoutes, quote, reduceOnly, userAccountPublicKey, }) {\n        const outMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inMarket = this.getSpotMarketAccount(inMarketIndex);\n        if (!quote) {\n            const fetchedQuote = await jupiterClient.getQuote({\n                inputMint: inMarket.mint,\n                outputMint: outMarket.mint,\n                amount,\n                slippageBps,\n                swapMode,\n                onlyDirectRoutes,\n            });\n            quote = fetchedQuote;\n        }\n        if (!quote) {\n            throw new Error('Could not fetch swap quote. Please try again.');\n        }\n        const isExactOut = swapMode === 'ExactOut' || quote.swapMode === 'ExactOut';\n        const amountIn = new anchor_1.BN(quote.inAmount);\n        const exactOutBufferedAmountIn = amountIn.muln(1001).divn(1000); // Add 10bp buffer\n        const transaction = await jupiterClient.getSwap({\n            quote,\n            userPublicKey: this.provider.wallet.publicKey,\n            slippageBps,\n        });\n        const { transactionMessage, lookupTables } = await jupiterClient.getTransactionMessageAndLookupTables({\n            transaction,\n        });\n        const jupiterInstructions = jupiterClient.getJupiterInstructions({\n            transactionMessage,\n            inputMint: inMarket.mint,\n            outputMint: outMarket.mint,\n        });\n        const preInstructions = [];\n        if (!outAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(outMarket);\n            outAssociatedTokenAccount = await this.getAssociatedTokenAccount(outMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(outAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(outAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, outMarket.mint, tokenProgram));\n            }\n        }\n        if (!inAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(inMarket);\n            inAssociatedTokenAccount = await this.getAssociatedTokenAccount(inMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(inAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(inAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, inMarket.mint, tokenProgram));\n            }\n        }\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            outMarketIndex,\n            inMarketIndex,\n            amountIn: isExactOut ? exactOutBufferedAmountIn : amountIn,\n            inTokenAccount: inAssociatedTokenAccount,\n            outTokenAccount: outAssociatedTokenAccount,\n            reduceOnly,\n            userAccountPublicKey,\n        });\n        const ixs = [\n            ...preInstructions,\n            beginSwapIx,\n            ...jupiterInstructions,\n            endSwapIx,\n        ];\n        return { ixs, lookupTables };\n    }\n    /**\n     * Get the drift begin_swap and end_swap instructions\n     *\n     * @param outMarketIndex the market index of the token you're buying\n     * @param inMarketIndex the market index of the token you're selling\n     * @param amountIn the amount of the token to sell\n     * @param inTokenAccount the token account to move the tokens being sold\n     * @param outTokenAccount the token account to receive the tokens being bought\n     * @param limitPrice the limit price of the swap\n     * @param reduceOnly\n     * @param userAccountPublicKey optional, specify a custom userAccountPublicKey to use instead of getting the current user account; can be helpful if the account is being created within the current tx\n     */\n    async getSwapIx({ outMarketIndex, inMarketIndex, amountIn, inTokenAccount, outTokenAccount, limitPrice, reduceOnly, userAccountPublicKey, }) {\n        const userAccountPublicKeyToUse = userAccountPublicKey || (await this.getUserAccountPublicKey());\n        const userAccounts = [];\n        try {\n            if (this.hasUser() && this.getUser().getUserAccountAndSlot()) {\n                userAccounts.push(this.getUser().getUserAccountAndSlot().data);\n            }\n        }\n        catch (err) {\n            // ignore\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writableSpotMarketIndexes: [outMarketIndex, inMarketIndex],\n            readableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        const outSpotMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inSpotMarket = this.getSpotMarketAccount(inMarketIndex);\n        const outTokenProgram = this.getTokenProgramForSpotMarket(outSpotMarket);\n        const inTokenProgram = this.getTokenProgramForSpotMarket(inSpotMarket);\n        if (!outTokenProgram.equals(inTokenProgram)) {\n            remainingAccounts.push({\n                pubkey: outTokenProgram,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        if (this.isToken2022(outSpotMarket) || this.isToken2022(inSpotMarket)) {\n            remainingAccounts.push({\n                pubkey: inSpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: outSpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            if (this.isTransferHook(outSpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(outSpotMarket.mint, remainingAccounts);\n            }\n            if (this.isTransferHook(inSpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(inSpotMarket.mint, remainingAccounts);\n            }\n        }\n        const beginSwapIx = await this.program.instruction.beginSwap(inMarketIndex, outMarketIndex, amountIn, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKeyToUse,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                outSpotMarketVault: outSpotMarket.vault,\n                inSpotMarketVault: inSpotMarket.vault,\n                inTokenAccount,\n                outTokenAccount,\n                tokenProgram: inTokenProgram,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        const endSwapIx = await this.program.instruction.endSwap(inMarketIndex, outMarketIndex, limitPrice !== null && limitPrice !== void 0 ? limitPrice : null, reduceOnly !== null && reduceOnly !== void 0 ? reduceOnly : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKeyToUse,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                outSpotMarketVault: outSpotMarket.vault,\n                inSpotMarketVault: inSpotMarket.vault,\n                inTokenAccount,\n                outTokenAccount,\n                tokenProgram: inTokenProgram,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        return { beginSwapIx, endSwapIx };\n    }\n    async getSwapIxV2({ swapClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, onlyDirectRoutes, reduceOnly, quote, v6, }) {\n        // Get market accounts to determine mints\n        const outMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inMarket = this.getSpotMarketAccount(inMarketIndex);\n        const isExactOut = swapMode === 'ExactOut';\n        const exactOutBufferedAmountIn = amount.muln(1001).divn(1000); // Add 10bp buffer\n        const preInstructions = [];\n        // Handle token accounts if not provided\n        let finalOutAssociatedTokenAccount = outAssociatedTokenAccount;\n        let finalInAssociatedTokenAccount = inAssociatedTokenAccount;\n        if (!finalOutAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(outMarket);\n            finalOutAssociatedTokenAccount = await this.getAssociatedTokenAccount(outMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(finalOutAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(finalOutAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, outMarket.mint, tokenProgram));\n            }\n        }\n        if (!finalInAssociatedTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(inMarket);\n            finalInAssociatedTokenAccount = await this.getAssociatedTokenAccount(inMarket.marketIndex, false, tokenProgram);\n            const accountInfo = await this.connection.getAccountInfo(finalInAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(finalInAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, inMarket.mint, tokenProgram));\n            }\n        }\n        // Get drift swap instructions for begin and end\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            outMarketIndex,\n            inMarketIndex,\n            amountIn: isExactOut ? exactOutBufferedAmountIn : amount,\n            inTokenAccount: finalInAssociatedTokenAccount,\n            outTokenAccount: finalOutAssociatedTokenAccount,\n            reduceOnly,\n        });\n        // Get core swap instructions from SwapClient\n        const swapResult = await swapClient.getSwapInstructions({\n            inputMint: inMarket.mint,\n            outputMint: outMarket.mint,\n            amount,\n            userPublicKey: this.provider.wallet.publicKey,\n            slippageBps,\n            swapMode,\n            onlyDirectRoutes,\n            quote: quote !== null && quote !== void 0 ? quote : v6 === null || v6 === void 0 ? void 0 : v6.quote,\n        });\n        const allInstructions = [\n            ...preInstructions,\n            beginSwapIx,\n            ...swapResult.instructions,\n            endSwapIx,\n        ];\n        return {\n            ixs: allInstructions,\n            lookupTables: swapResult.lookupTables,\n        };\n    }\n    async stakeForMSOL({ amount }) {\n        const ixs = await this.getStakeForMSOLIx({ amount });\n        const tx = await this.buildTransaction(ixs);\n        return this.sendTransaction(tx);\n    }\n    async getStakeForMSOLIx({ amount, userAccountPublicKey, }) {\n        const wSOLMint = this.getSpotMarketAccount(1).mint;\n        const mSOLAccount = await this.getAssociatedTokenAccount(2);\n        const wSOLAccount = await this.getAssociatedTokenAccount(1, false);\n        const wSOLAccountExists = await this.checkIfAccountExists(wSOLAccount);\n        const closeWSOLIx = (0, spl_token_1.createCloseAccountInstruction)(wSOLAccount, this.wallet.publicKey, this.wallet.publicKey);\n        const createWSOLIx = await this.createAssociatedTokenAccountIdempotentInstruction(wSOLAccount, this.wallet.publicKey, this.wallet.publicKey, wSOLMint);\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            inMarketIndex: 1,\n            outMarketIndex: 2,\n            amountIn: amount,\n            inTokenAccount: wSOLAccount,\n            outTokenAccount: mSOLAccount,\n            userAccountPublicKey,\n        });\n        const program = (0, marinade_1.getMarinadeFinanceProgram)(this.provider);\n        const depositIx = await (0, marinade_1.getMarinadeDepositIx)({\n            program,\n            mSOLAccount: mSOLAccount,\n            transferFrom: this.wallet.publicKey,\n            amount,\n        });\n        const ixs = [];\n        if (!wSOLAccountExists) {\n            ixs.push(createWSOLIx);\n        }\n        ixs.push(beginSwapIx, closeWSOLIx, depositIx, createWSOLIx, endSwapIx);\n        return ixs;\n    }\n    async triggerOrder(userAccountPublicKey, user, order, txParams, fillerPublicKey) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getTriggerOrderIx(userAccountPublicKey, user, order, fillerPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getTriggerOrderIx(userAccountPublicKey, userAccount, order, fillerPublicKey) {\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        let remainingAccountsParams;\n        if ((0, types_1.isVariant)(order.marketType, 'perp')) {\n            remainingAccountsParams = {\n                userAccounts: [userAccount],\n                writablePerpMarketIndexes: [order.marketIndex],\n            };\n        }\n        else {\n            remainingAccountsParams = {\n                userAccounts: [userAccount],\n                writableSpotMarketIndexes: [order.marketIndex, numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n            };\n        }\n        const remainingAccounts = this.getRemainingAccounts(remainingAccountsParams);\n        const orderId = order.orderId;\n        return await this.program.instruction.triggerOrder(orderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async forceCancelOrders(userAccountPublicKey, user, txParams, fillerPublicKey) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getForceCancelOrdersIx(userAccountPublicKey, user, fillerPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getForceCancelOrdersIx(userAccountPublicKey, userAccount, fillerPublicKey) {\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            writableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        return await this.program.instruction.forceCancelOrders({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateUserIdle(userAccountPublicKey, user, txParams, fillerPublicKey) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserIdleIx(userAccountPublicKey, user, fillerPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserIdleIx(userAccountPublicKey, userAccount, fillerPublicKey) {\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n        });\n        return await this.program.instruction.updateUserIdle({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async logUserBalances(userAccountPublicKey, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getLogUserBalancesIx(userAccountPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getLogUserBalancesIx(userAccountPublicKey) {\n        const userAccount = (await this.program.account.user.fetch(userAccountPublicKey));\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n        });\n        return await this.program.instruction.logUserBalances({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateUserFuelBonus(userAccountPublicKey, user, userAuthority, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserFuelBonusIx(userAccountPublicKey, user, userAuthority), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserFuelBonusIx(userAccountPublicKey, userAccount, userAuthority) {\n        const userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAuthority);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n        });\n        return await this.program.instruction.updateUserFuelBonus({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateUserStatsReferrerStatus(userAuthority, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserStatsReferrerStatusIx(userAuthority), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserStatsReferrerStatusIx(userAuthority) {\n        const userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAuthority);\n        return await this.program.instruction.updateUserStatsReferrerStatus({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                userStats: userStatsAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n        });\n    }\n    async updateUserOpenOrdersCount(userAccountPublicKey, user, txParams, fillerPublicKey) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserOpenOrdersCountIx(userAccountPublicKey, user, fillerPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserOpenOrdersCountIx(userAccountPublicKey, userAccount, fillerPublicKey) {\n        const filler = fillerPublicKey !== null && fillerPublicKey !== void 0 ? fillerPublicKey : (await this.getUserAccountPublicKey());\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n        });\n        return await this.program.instruction.updateUserOpenOrdersCount({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async placeAndTakePerpOrder(orderParams, makerInfo, referrerInfo, successCondition, auctionDurationPercentage, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndTakePerpOrderIx(orderParams, makerInfo, referrerInfo, successCondition, auctionDurationPercentage, subAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async preparePlaceAndTakePerpOrderWithAdditionalOrders(orderParams, makerInfo, referrerInfo, bracketOrdersParams = new Array(), txParams, subAccountId, cancelExistingOrders, settlePnl, exitEarlyIfSimFails, auctionDurationPercentage, optionalIxs) {\n        const placeAndTakeIxs = [];\n        const txsToSign = {\n            placeAndTakeTx: undefined,\n            cancelExistingOrdersTx: undefined,\n            settlePnlTx: undefined,\n        };\n        // Get recent block hash so that we can re-use it for all transactions. Makes this logic run faster with fewer RPC requests\n        const recentBlockHash = await this.txHandler.getLatestBlockhashForTransaction();\n        const lookupTableAccounts = await this.fetchAllLookupTableAccounts();\n        let earlyExitFailedPlaceAndTakeSim = false;\n        const prepPlaceAndTakeTx = async () => {\n            var _a;\n            const placeAndTakeIx = await this.getPlaceAndTakePerpOrderIx(orderParams, makerInfo, referrerInfo, undefined, auctionDurationPercentage, subAccountId);\n            placeAndTakeIxs.push(placeAndTakeIx);\n            if (bracketOrdersParams.length > 0) {\n                const bracketOrdersIx = await this.getPlaceOrdersIx(bracketOrdersParams, subAccountId);\n                placeAndTakeIxs.push(bracketOrdersIx);\n            }\n            const shouldUseSimulationComputeUnits = txParams === null || txParams === void 0 ? void 0 : txParams.useSimulatedComputeUnits;\n            const shouldExitIfSimulationFails = exitEarlyIfSimFails;\n            const txParamsWithoutImplicitSimulation = {\n                ...txParams,\n                useSimulatedComputeUnits: false,\n            };\n            if (shouldUseSimulationComputeUnits || shouldExitIfSimulationFails) {\n                const placeAndTakeTxToSim = (await this.buildTransaction(placeAndTakeIxs, txParams, undefined, lookupTableAccounts, true, recentBlockHash, optionalIxs));\n                const simulationResult = await txParamProcessor_1.TransactionParamProcessor.getTxSimComputeUnits(placeAndTakeTxToSim, this.connection, (_a = txParams.computeUnitsBufferMultiplier) !== null && _a !== void 0 ? _a : 1.2, txParams.lowerBoundCu);\n                if (shouldExitIfSimulationFails && !simulationResult.success) {\n                    earlyExitFailedPlaceAndTakeSim = true;\n                    return;\n                }\n                txsToSign.placeAndTakeTx = await this.buildTransaction(placeAndTakeIxs, {\n                    ...txParamsWithoutImplicitSimulation,\n                    computeUnits: simulationResult.computeUnits,\n                }, undefined, lookupTableAccounts, undefined, recentBlockHash, optionalIxs);\n            }\n            else {\n                txsToSign.placeAndTakeTx = await this.buildTransaction(placeAndTakeIxs, txParams, undefined, lookupTableAccounts, undefined, recentBlockHash, optionalIxs);\n            }\n            return;\n        };\n        const prepCancelOrderTx = async () => {\n            if (cancelExistingOrders && (0, types_1.isVariant)(orderParams.marketType, 'perp')) {\n                const cancelOrdersIx = await this.getCancelOrdersIx(orderParams.marketType, orderParams.marketIndex, null, subAccountId);\n                txsToSign.cancelExistingOrdersTx = await this.buildTransaction([cancelOrdersIx], txParams, this.txVersion, lookupTableAccounts, undefined, recentBlockHash, optionalIxs);\n            }\n            return;\n        };\n        const prepSettlePnlTx = async () => {\n            if (settlePnl && (0, types_1.isVariant)(orderParams.marketType, 'perp')) {\n                const userAccountPublicKey = await this.getUserAccountPublicKey(subAccountId);\n                const settlePnlIx = await this.settlePNLIx(userAccountPublicKey, this.getUserAccount(subAccountId), orderParams.marketIndex);\n                txsToSign.settlePnlTx = await this.buildTransaction([settlePnlIx], txParams, this.txVersion, lookupTableAccounts, undefined, recentBlockHash, optionalIxs);\n            }\n            return;\n        };\n        await Promise.all([\n            prepPlaceAndTakeTx(),\n            prepCancelOrderTx(),\n            prepSettlePnlTx(),\n        ]);\n        if (earlyExitFailedPlaceAndTakeSim) {\n            return null;\n        }\n        return txsToSign;\n    }\n    async placeAndTakePerpWithAdditionalOrders(orderParams, makerInfo, referrerInfo, bracketOrdersParams = new Array(), txParams, subAccountId, cancelExistingOrders, settlePnl, exitEarlyIfSimFails) {\n        const txsToSign = await this.preparePlaceAndTakePerpOrderWithAdditionalOrders(orderParams, makerInfo, referrerInfo, bracketOrdersParams, txParams, subAccountId, cancelExistingOrders, settlePnl, exitEarlyIfSimFails);\n        if (!txsToSign) {\n            return null;\n        }\n        const signedTxs = (await this.txHandler.getSignedTransactionMap(txsToSign, \n        // @ts-ignore\n        this.provider.wallet)).signedTxMap;\n        const { txSig, slot } = await this.sendTransaction(signedTxs.placeAndTakeTx, [], this.opts, true);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return {\n            txSig,\n            signedCancelExistingOrdersTx: signedTxs.cancelExistingOrdersTx,\n            signedSettlePnlTx: signedTxs.settlePnlTx,\n        };\n    }\n    async getPlaceAndTakePerpOrderIx(orderParams, makerInfo, referrerInfo, successCondition, auctionDurationPercentage, subAccountId, overrides) {\n        var _a;\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.PERP });\n        const userStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        makerInfo = Array.isArray(makerInfo)\n            ? makerInfo\n            : makerInfo\n                ? [makerInfo]\n                : [];\n        const userAccounts = [this.getUserAccount(subAccountId)];\n        for (const maker of makerInfo) {\n            userAccounts.push(maker.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [orderParams.marketIndex],\n        });\n        for (const maker of makerInfo) {\n            remainingAccounts.push({\n                pubkey: maker.maker,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: maker.makerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        if (referrerInfo) {\n            const referrerIsMaker = makerInfo.find((maker) => maker.maker.equals(referrerInfo.referrer)) !==\n                undefined;\n            if (!referrerIsMaker) {\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrer,\n                    isWritable: true,\n                    isSigner: false,\n                });\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrerStats,\n                    isWritable: true,\n                    isSigner: false,\n                });\n            }\n        }\n        if ((0, orderParams_1.isUpdateHighLeverageMode)(orderParams.bitFlags)) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        let optionalParams = null;\n        if (auctionDurationPercentage || successCondition) {\n            optionalParams =\n                ((auctionDurationPercentage !== null && auctionDurationPercentage !== void 0 ? auctionDurationPercentage : 100) << 8) | (successCondition !== null && successCondition !== void 0 ? successCondition : 0);\n        }\n        const authority = (_a = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _a !== void 0 ? _a : this.wallet.publicKey;\n        return await this.program.instruction.placeAndTakePerpOrder(orderParams, optionalParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: userStatsPublicKey,\n                authority,\n            },\n            remainingAccounts,\n        });\n    }\n    async placeAndMakePerpOrder(orderParams, takerInfo, referrerInfo, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndMakePerpOrderIx(orderParams, takerInfo, referrerInfo, subAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlaceAndMakePerpOrderIx(orderParams, takerInfo, referrerInfo, subAccountId) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.PERP });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(subAccountId),\n                takerInfo.takerUserAccount,\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [orderParams.marketIndex],\n        });\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const takerOrderId = takerInfo.order.orderId;\n        if ((0, orders_1.hasBuilder)(takerInfo.order)) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, takerInfo.takerUserAccount.authority),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        return await this.program.instruction.placeAndMakePerpOrder(orderParams, takerOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: userStatsPublicKey,\n                taker: takerInfo.taker,\n                takerStats: takerInfo.takerStats,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    signSignedMsgOrderParamsMessage(orderParamsMessage, delegateSigner) {\n        const borshBuf = this.encodeSignedMsgOrderParamsMessage(orderParamsMessage, delegateSigner);\n        const orderParams = Buffer.from(borshBuf.toString('hex'));\n        return {\n            orderParams,\n            signature: this.signMessage(Buffer.from(borshBuf.toString('hex'))),\n        };\n    }\n    /**\n     * Builds a deposit and place request for Swift service\n     *\n     * @param depositTx - The signed tx containing a drift deposit (e.g. see `buildSwiftDepositTx`)\n     * @param orderParamsMessage - The order parameters message to sign\n     * @param delegateSigner - Whether this is a delegate signer\n     *\n     * @returns request object for Swift service\n     */\n    buildDepositAndPlaceSignedMsgOrderRequest(depositTx, orderParamsMessage, delegateSigner) {\n        // Serialize the deposit transaction\n        const serializedDepositTx = Buffer.from(depositTx.serialize());\n        // Get the signed swift order using the existing method\n        const swiftOrder = this.signSignedMsgOrderParamsMessage(orderParamsMessage, delegateSigner);\n        return {\n            deposit_tx: serializedDepositTx,\n            swift_order: swiftOrder,\n        };\n    }\n    /*\n     * Borsh encode signedMsg taker order params\n     */\n    encodeSignedMsgOrderParamsMessage(orderParamsMessage, delegateSigner) {\n        if (orderParamsMessage.maxMarginRatio === undefined) {\n            orderParamsMessage.maxMarginRatio = null;\n        }\n        if (orderParamsMessage.isolatedPositionDeposit === undefined) {\n            orderParamsMessage.isolatedPositionDeposit = null;\n        }\n        const anchorIxName = delegateSigner\n            ? 'global' + ':' + 'SignedMsgOrderParamsDelegateMessage'\n            : 'global' + ':' + 'SignedMsgOrderParamsMessage';\n        const prefix = Buffer.from((0, sha256_1.sha256)(anchorIxName).slice(0, 8));\n        // Backwards-compat: normalize optional builder fields to null for encoding\n        const withBuilderDefaults = {\n            ...orderParamsMessage,\n            builderIdx: orderParamsMessage.builderIdx !== undefined\n                ? orderParamsMessage.builderIdx\n                : null,\n            builderFeeTenthBps: orderParamsMessage.builderFeeTenthBps !== undefined\n                ? orderParamsMessage.builderFeeTenthBps\n                : null,\n        };\n        const buf = Buffer.concat([\n            prefix,\n            delegateSigner\n                ? this.program.coder.types.encode('SignedMsgOrderParamsDelegateMessage', withBuilderDefaults)\n                : this.program.coder.types.encode('SignedMsgOrderParamsMessage', withBuilderDefaults),\n        ]);\n        return buf;\n    }\n    /*\n     * Decode signedMsg taker order params from borsh buffer. Zero pads the message in case the\n     * received message was encoded by an outdated IDL (size will be too small and decode will throw).\n     * Note: the 128 will be problematic if the type we are expecting to deserializze into is 128 bytes\n     * larger than the message we are receiving (unlikely, especially if all new fields are Options).\n     */\n    decodeSignedMsgOrderParamsMessage(encodedMessage, delegateSigner) {\n        const decodeStr = delegateSigner\n            ? 'SignedMsgOrderParamsDelegateMessage'\n            : 'SignedMsgOrderParamsMessage';\n        return this.program.coder.types.decode(decodeStr, Buffer.concat([\n            encodedMessage.slice(8), // strip out discriminator\n            Buffer.alloc(128), // pad on 128 bytes, this is most efficient way to messages that are too small\n        ]));\n    }\n    signMessage(message, keypair = this.wallet.payer) {\n        return Buffer.from(tweetnacl_1.default.sign.detached(message, keypair.secretKey));\n    }\n    async placeSignedMsgTakerOrder(signedSignedMsgOrderParams, marketIndex, takerInfo, precedingIxs = [], overrideCustomIxIndex, txParams) {\n        const ixs = await this.getPlaceSignedMsgTakerPerpOrderIxs(signedSignedMsgOrderParams, marketIndex, takerInfo, precedingIxs, overrideCustomIxIndex);\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ixs, txParams), [], this.opts);\n        return txSig;\n    }\n    async getPlaceSignedMsgTakerPerpOrderIxs(signedSignedMsgOrderParams, marketIndex, takerInfo, precedingIxs = [], overrideCustomIxIndex) {\n        var _a;\n        const isDelegateSigner = takerInfo.signingAuthority.equals(takerInfo.takerUserAccount.delegate);\n        const borshBuf = Buffer.from(signedSignedMsgOrderParams.orderParams.toString(), 'hex');\n        const signedMessage = this.decodeSignedMsgOrderParamsMessage(borshBuf, isDelegateSigner);\n        const writableSpotMarketIndexes = ((_a = signedMessage.isolatedPositionDeposit) === null || _a === void 0 ? void 0 : _a.gt(numericConstants_1.ZERO))\n            ? [numericConstants_1.QUOTE_SPOT_MARKET_INDEX]\n            : undefined;\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [takerInfo.takerUserAccount],\n            useMarketLastSlotCache: false,\n            readablePerpMarketIndex: marketIndex,\n            writableSpotMarketIndexes,\n        });\n        if ((0, orderParams_1.isUpdateHighLeverageMode)(signedMessage.signedMsgOrderParams.bitFlags)) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        if (signedMessage.builderFeeTenthBps !== null &&\n            signedMessage.builderIdx !== null) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, takerInfo.takerUserAccount.authority),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const messageLengthBuffer = Buffer.alloc(2);\n        messageLengthBuffer.writeUInt16LE(signedSignedMsgOrderParams.orderParams.length);\n        const signedMsgIxData = Buffer.concat([\n            signedSignedMsgOrderParams.signature,\n            takerInfo.signingAuthority.toBytes(),\n            messageLengthBuffer,\n            signedSignedMsgOrderParams.orderParams,\n        ]);\n        const signedMsgOrderParamsSignatureIx = (0, ed25519Utils_1.createMinimalEd25519VerifyIx)(overrideCustomIxIndex || precedingIxs.length + 1, 12, signedMsgIxData, 0);\n        const placeTakerSignedMsgPerpOrderIx = this.program.instruction.placeSignedMsgTakerOrder(signedMsgIxData, isDelegateSigner, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: takerInfo.taker,\n                userStats: takerInfo.takerStats,\n                signedMsgUserOrders: (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, takerInfo.takerUserAccount.authority),\n                authority: this.wallet.publicKey,\n                ixSysvar: web3_js_1.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        return [signedMsgOrderParamsSignatureIx, placeTakerSignedMsgPerpOrderIx];\n    }\n    async placeAndMakeSignedMsgPerpOrder(signedSignedMsgOrderParams, signedMsgOrderUuid, takerInfo, orderParams, referrerInfo, txParams, subAccountId, precedingIxs = [], overrideCustomIxIndex) {\n        const ixs = await this.getPlaceAndMakeSignedMsgPerpOrderIxs(signedSignedMsgOrderParams, signedMsgOrderUuid, takerInfo, orderParams, referrerInfo, subAccountId, precedingIxs, overrideCustomIxIndex);\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(ixs, txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlaceAndMakeSignedMsgPerpOrderIxs(signedSignedMsgOrderParams, signedMsgOrderUuid, takerInfo, orderParams, referrerInfo, subAccountId, precedingIxs = [], overrideCustomIxIndex) {\n        const [signedMsgOrderSignatureIx, placeTakerSignedMsgPerpOrderIx] = await this.getPlaceSignedMsgTakerPerpOrderIxs(signedSignedMsgOrderParams, orderParams.marketIndex, takerInfo, precedingIxs, overrideCustomIxIndex);\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.PERP });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(subAccountId),\n                takerInfo.takerUserAccount,\n            ],\n            useMarketLastSlotCache: false,\n            writablePerpMarketIndexes: [orderParams.marketIndex],\n        });\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const isDelegateSigner = takerInfo.signingAuthority.equals(takerInfo.takerUserAccount.delegate);\n        const borshBuf = Buffer.from(signedSignedMsgOrderParams.orderParams.toString(), 'hex');\n        const signedMessage = this.decodeSignedMsgOrderParamsMessage(borshBuf, isDelegateSigner);\n        if (signedMessage.builderFeeTenthBps !== null &&\n            signedMessage.builderIdx !== null) {\n            remainingAccounts.push({\n                pubkey: (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, takerInfo.takerUserAccount.authority),\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        const placeAndMakeIx = await this.program.instruction.placeAndMakeSignedMsgPerpOrder(orderParams, signedMsgOrderUuid, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: userStatsPublicKey,\n                taker: takerInfo.taker,\n                takerStats: takerInfo.takerStats,\n                authority: this.wallet.publicKey,\n                takerSignedMsgUserOrders: (0, pda_1.getSignedMsgUserAccountPublicKey)(this.program.programId, takerInfo.takerUserAccount.authority),\n            },\n            remainingAccounts,\n        });\n        return [\n            signedMsgOrderSignatureIx,\n            placeTakerSignedMsgPerpOrderIx,\n            placeAndMakeIx,\n        ];\n    }\n    async preparePlaceAndTakeSpotOrder(orderParams, fulfillmentConfig, makerInfo, referrerInfo, txParams, subAccountId) {\n        const tx = await this.buildTransaction(await this.getPlaceAndTakeSpotOrderIx(orderParams, fulfillmentConfig, makerInfo, referrerInfo, subAccountId), txParams);\n        return {\n            placeAndTakeSpotOrderTx: tx,\n        };\n    }\n    async placeAndTakeSpotOrder(orderParams, fulfillmentConfig, makerInfo, referrerInfo, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction((await this.preparePlaceAndTakeSpotOrder(orderParams, fulfillmentConfig, makerInfo, referrerInfo, txParams, subAccountId)).placeAndTakeSpotOrderTx, [], this.opts, false);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async getPlaceAndTakeSpotOrderIx(orderParams, fulfillmentConfig, makerInfo, referrerInfo, subAccountId) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.SPOT });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const userAccounts = [this.getUserAccount(subAccountId)];\n        if (makerInfo !== undefined) {\n            userAccounts.push(makerInfo.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX,\n            ],\n        });\n        let makerOrderId = null;\n        if (makerInfo) {\n            makerOrderId = makerInfo.order.orderId;\n            remainingAccounts.push({\n                pubkey: makerInfo.maker,\n                isSigner: false,\n                isWritable: true,\n            });\n            remainingAccounts.push({\n                pubkey: makerInfo.makerStats,\n                isSigner: false,\n                isWritable: true,\n            });\n        }\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        this.addSpotFulfillmentAccounts(orderParams.marketIndex, remainingAccounts, fulfillmentConfig);\n        return await this.program.instruction.placeAndTakeSpotOrder(orderParams, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, makerOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async placeAndMakeSpotOrder(orderParams, takerInfo, fulfillmentConfig, referrerInfo, txParams, subAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndMakeSpotOrderIx(orderParams, takerInfo, fulfillmentConfig, referrerInfo, subAccountId), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async getPlaceAndMakeSpotOrderIx(orderParams, takerInfo, fulfillmentConfig, referrerInfo, subAccountId) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, { marketType: types_1.MarketType.SPOT });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(subAccountId),\n                takerInfo.takerUserAccount,\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX,\n            ],\n        });\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false,\n            });\n        }\n        this.addSpotFulfillmentAccounts(orderParams.marketIndex, remainingAccounts, fulfillmentConfig);\n        const takerOrderId = takerInfo.order.orderId;\n        return await this.program.instruction.placeAndMakeSpotOrder(orderParams, takerOrderId, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: userStatsPublicKey,\n                taker: takerInfo.taker,\n                takerStats: takerInfo.takerStats,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    /**\n     * @deprecated use {@link placePerpOrder} or {@link placeAndTakePerpOrder} instead\n     */\n    async closePosition(marketIndex, limitPrice, subAccountId) {\n        const userPosition = this.getUser(subAccountId).getPerpPosition(marketIndex);\n        if (!userPosition) {\n            throw Error(`No position in market ${marketIndex.toString()}`);\n        }\n        return await this.placeAndTakePerpOrder({\n            orderType: types_1.OrderType.MARKET,\n            marketIndex,\n            direction: (0, position_1.findDirectionToClose)(userPosition),\n            baseAssetAmount: userPosition.baseAssetAmount.abs(),\n            reduceOnly: true,\n            price: limitPrice,\n        }, undefined, undefined, undefined, undefined, undefined, subAccountId);\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @deprecated use modifyOrder instead\n     * @param orderId: The open order to modify\n     * @param newBaseAmount: The new base amount for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newLimitPice: The new limit price for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newOraclePriceOffset: The new oracle price offset for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @returns\n     */\n    async modifyPerpOrder(orderId, newBaseAmount, newLimitPrice, newOraclePriceOffset) {\n        return this.modifyOrder({\n            orderId,\n            newBaseAmount,\n            newLimitPrice,\n            newOraclePriceOffset,\n        });\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @deprecated use modifyOrderByUserOrderId instead\n     * @param userOrderId: The open order to modify\n     * @param newBaseAmount: The new base amount for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newLimitPice: The new limit price for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newOraclePriceOffset: The new oracle price offset for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @returns\n     */\n    async modifyPerpOrderByUserOrderId(userOrderId, newBaseAmount, newLimitPrice, newOraclePriceOffset) {\n        return this.modifyOrderByUserOrderId({\n            userOrderId,\n            newBaseAmount,\n            newLimitPrice,\n            newOraclePriceOffset,\n        });\n    }\n    /**\n     * Modifies an open order (spot or perp) by closing it and replacing it with a new order.\n     * @param orderParams.orderId: The open order to modify\n     * @param orderParams.newDirection: The new direction for the order\n     * @param orderParams.newBaseAmount: The new base amount for the order\n     * @param orderParams.newLimitPice: The new limit price for the order\n     * @param orderParams.newOraclePriceOffset: The new oracle price offset for the order\n     * @param orderParams.newTriggerPrice: Optional - Thew new trigger price for the order.\n     * @param orderParams.auctionDuration:\n     * @param orderParams.auctionStartPrice:\n     * @param orderParams.auctionEndPrice:\n     * @param orderParams.reduceOnly:\n     * @param orderParams.postOnly:\n     * @param orderParams.bitFlags:\n     * @param orderParams.policy:\n     * @param orderParams.maxTs:\n     * @returns\n     */\n    async modifyOrder(orderParams, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getModifyOrderIx(orderParams, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    /**\n     * @param orderParams: The parameters for the order to modify.\n     * @param subAccountId: Optional - The subaccount ID of the user to modify the order for.\n     * @param userPublicKey: Optional - The public key of the user to modify the order for. This takes precedence over subAccountId.\n     * @returns\n     */\n    async getModifyOrderIx({ orderId, newDirection, newBaseAmount, newLimitPrice, newOraclePriceOffset, newTriggerPrice, newTriggerCondition, auctionDuration, auctionStartPrice, auctionEndPrice, reduceOnly, postOnly, bitFlags, maxTs, policy, }, subAccountId, overrides) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const userPubKey = (_b = (_a = overrides === null || overrides === void 0 ? void 0 : overrides.user) === null || _a === void 0 ? void 0 : _a.getUserAccountPublicKey()) !== null && _b !== void 0 ? _b : (await this.getUserAccountPublicKey(subAccountId));\n        const userAccount = (_d = (_c = overrides === null || overrides === void 0 ? void 0 : overrides.user) === null || _c === void 0 ? void 0 : _c.getUserAccount()) !== null && _d !== void 0 ? _d : this.getUserAccount(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            useMarketLastSlotCache: true,\n        });\n        const orderParams = {\n            baseAssetAmount: newBaseAmount || null,\n            direction: newDirection || null,\n            price: newLimitPrice || null,\n            oraclePriceOffset: newOraclePriceOffset || null,\n            triggerPrice: newTriggerPrice || null,\n            triggerCondition: newTriggerCondition || null,\n            auctionDuration: auctionDuration || null,\n            auctionStartPrice: auctionStartPrice || null,\n            auctionEndPrice: auctionEndPrice || null,\n            reduceOnly: reduceOnly != undefined ? reduceOnly : null,\n            postOnly: postOnly != undefined ? postOnly : null,\n            bitFlags: bitFlags != undefined ? bitFlags : null,\n            policy: policy || null,\n            maxTs: maxTs || null,\n        };\n        const authority = (_g = (_e = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _e !== void 0 ? _e : (_f = overrides === null || overrides === void 0 ? void 0 : overrides.user) === null || _f === void 0 ? void 0 : _f.getUserAccount().authority) !== null && _g !== void 0 ? _g : this.wallet.publicKey;\n        return await this.program.instruction.modifyOrder(orderId, orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userPubKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority,\n            },\n            remainingAccounts,\n        });\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @param orderParams.userOrderId: The open order to modify\n     * @param orderParams.newDirection: The new direction for the order\n     * @param orderParams.newBaseAmount: The new base amount for the order\n     * @param orderParams.newLimitPice: The new limit price for the order\n     * @param orderParams.newOraclePriceOffset: The new oracle price offset for the order\n     * @param orderParams.newTriggerPrice: Optional - Thew new trigger price for the order.\n     * @param orderParams.auctionDuration: Only required if order type changed to market from something else\n     * @param orderParams.auctionStartPrice: Only required if order type changed to market from something else\n     * @param orderParams.auctionEndPrice: Only required if order type changed to market from something else\n     * @param orderParams.reduceOnly:\n     * @param orderParams.postOnly:\n     * @param orderParams.bitFlags:\n     * @param orderParams.policy:\n     * @param orderParams.maxTs:\n     * @returns\n     */\n    async modifyOrderByUserOrderId(orderParams, txParams, subAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getModifyOrderByUserIdIx(orderParams, subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getModifyOrderByUserIdIx({ userOrderId, newDirection, newBaseAmount, newLimitPrice, newOraclePriceOffset, newTriggerPrice, newTriggerCondition, auctionDuration, auctionStartPrice, auctionEndPrice, reduceOnly, postOnly, bitFlags, maxTs, policy, }, subAccountId) {\n        const user = await this.getUserAccountPublicKey(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(subAccountId)],\n            useMarketLastSlotCache: true,\n        });\n        const orderParams = {\n            baseAssetAmount: newBaseAmount || null,\n            direction: newDirection || null,\n            price: newLimitPrice || null,\n            oraclePriceOffset: newOraclePriceOffset || null,\n            triggerPrice: newTriggerPrice || null,\n            triggerCondition: newTriggerCondition || null,\n            auctionDuration: auctionDuration || null,\n            auctionStartPrice: auctionStartPrice || null,\n            auctionEndPrice: auctionEndPrice || null,\n            reduceOnly: reduceOnly || false,\n            postOnly: postOnly || null,\n            bitFlags: bitFlags || null,\n            policy: policy || null,\n            maxTs: maxTs || null,\n        };\n        return await this.program.instruction.modifyOrderByUserId(userOrderId, orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async settlePNLs(users, marketIndexes, opts, txParams) {\n        const filterInvalidMarkets = opts === null || opts === void 0 ? void 0 : opts.filterInvalidMarkets;\n        // # Filter market indexes by markets with valid oracle\n        const marketIndexToSettle = filterInvalidMarkets\n            ? []\n            : marketIndexes;\n        if (filterInvalidMarkets) {\n            for (const marketIndex of marketIndexes) {\n                const perpMarketAccount = this.getPerpMarketAccount(marketIndex);\n                const oraclePriceData = this.getOracleDataForPerpMarket(marketIndex);\n                const stateAccountAndSlot = this.accountSubscriber.getStateAccountAndSlot();\n                const oracleGuardRails = stateAccountAndSlot.data.oracleGuardRails;\n                const isValid = (0, oracles_1.isOracleValid)(perpMarketAccount, oraclePriceData, oracleGuardRails, stateAccountAndSlot.slot);\n                if (isValid) {\n                    marketIndexToSettle.push(marketIndex);\n                }\n            }\n        }\n        // # Settle filtered market indexes\n        const ixs = await this.getSettlePNLsIxs(users, marketIndexToSettle);\n        const tx = await this.buildTransaction(ixs, txParams !== null && txParams !== void 0 ? txParams : {\n            computeUnits: 1400000,\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getSettlePNLsIxs(users, marketIndexes, revenueShareEscrowMap) {\n        const ixs = [];\n        for (const { settleeUserAccountPublicKey, settleeUserAccount } of users) {\n            for (const marketIndex of marketIndexes) {\n                ixs.push(await this.settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex, revenueShareEscrowMap));\n            }\n        }\n        return ixs;\n    }\n    async settlePNL(settleeUserAccountPublicKey, settleeUserAccount, marketIndex, txParams, optionalIxs, revenueShareEscrowMap) {\n        const lookupTableAccounts = await this.fetchAllLookupTableAccounts();\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex, revenueShareEscrowMap), txParams, undefined, lookupTableAccounts, undefined, undefined, optionalIxs), [], this.opts);\n        return txSig;\n    }\n    async settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex, revenueShareEscrowMap) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [settleeUserAccount],\n            writablePerpMarketIndexes: [marketIndex],\n            writableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        if (revenueShareEscrowMap) {\n            const escrow = revenueShareEscrowMap.get(settleeUserAccount.authority.toBase58());\n            if (escrow) {\n                const escrowPk = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, settleeUserAccount.authority);\n                const builders = new Map();\n                for (const order of escrow.orders) {\n                    const eligibleBuilder = (0, builder_1.isBuilderOrderCompleted)(order) &&\n                        !(0, builder_1.isBuilderOrderReferral)(order) &&\n                        order.feesAccrued.gt(numericConstants_1.ZERO) &&\n                        order.marketIndex === marketIndex;\n                    if (eligibleBuilder && !builders.has(order.builderIdx)) {\n                        builders.set(order.builderIdx, escrow.approvedBuilders[order.builderIdx].authority);\n                    }\n                }\n                if (builders.size > 0) {\n                    if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                        remainingAccounts.push({\n                            pubkey: escrowPk,\n                            isSigner: false,\n                            isWritable: true,\n                        });\n                    }\n                    this.addBuilderToRemainingAccounts(Array.from(builders.values()), remainingAccounts);\n                }\n                // Include escrow and referrer accounts if referral rewards exist for this market\n                const hasReferralForMarket = escrow.orders.some((o) => (0, builder_1.isBuilderOrderReferral)(o) &&\n                    o.feesAccrued.gt(numericConstants_1.ZERO) &&\n                    o.marketIndex === marketIndex);\n                if (hasReferralForMarket) {\n                    if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                        remainingAccounts.push({\n                            pubkey: escrowPk,\n                            isSigner: false,\n                            isWritable: true,\n                        });\n                    }\n                    if (!escrow.referrer.equals(web3_js_1.PublicKey.default)) {\n                        this.addBuilderToRemainingAccounts([escrow.referrer], remainingAccounts);\n                    }\n                }\n            }\n            else {\n                // Stale-cache fallback: if the user has any builder orders, include escrow PDA. This allows\n                // the program to lazily clean up any completed builder orders.\n                for (const order of settleeUserAccount.orders) {\n                    if ((0, orders_1.hasBuilder)(order)) {\n                        const escrowPk = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, settleeUserAccount.authority);\n                        if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                            remainingAccounts.push({\n                                pubkey: escrowPk,\n                                isSigner: false,\n                                isWritable: true,\n                            });\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        return await this.program.instruction.settlePnl(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: settleeUserAccountPublicKey,\n                spotMarketVault: this.getQuoteSpotMarketAccount().vault,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async settleMultiplePNLs(settleeUserAccountPublicKey, settleeUserAccount, marketIndexes, mode, revenueShareEscrowMap, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.settleMultiplePNLsIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndexes, mode, undefined, revenueShareEscrowMap), txParams), [], this.opts);\n        return txSig;\n    }\n    async settleMultiplePNLsMultipleTxs(settleeUserAccountPublicKey, settleeUserAccount, marketIndexes, mode, txParams, optionalIxs, revenueShareEscrowMap) {\n        // need multiple TXs because settling more than 4 markets won't fit in a single TX\n        const txsToSign = [];\n        const marketIndexesInFourGroups = [];\n        for (let i = 0; i < marketIndexes.length; i += 4) {\n            marketIndexesInFourGroups.push(marketIndexes.slice(i, i + 4));\n        }\n        for (const marketIndexes of marketIndexesInFourGroups) {\n            const ix = await this.settleMultiplePNLsIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndexes, mode, undefined, revenueShareEscrowMap);\n            const computeUnits = Math.min(300000 * marketIndexes.length, 1400000);\n            const tx = await this.buildTransaction(ix, {\n                ...txParams,\n                computeUnits,\n            }, undefined, undefined, undefined, undefined, optionalIxs);\n            txsToSign.push(tx);\n        }\n        const txsMap = {};\n        let i = 1;\n        for (const tx of txsToSign) {\n            txsMap[`tx-${i}`] = tx;\n            i++;\n        }\n        const signedTxs = (await this.txHandler.getSignedTransactionMap(txsMap, this.provider.wallet)).signedTxMap;\n        const txSigs = [];\n        for (const key in signedTxs) {\n            const tx = signedTxs[key];\n            const { txSig } = await this.sendTransaction(tx, [], this.opts, true);\n            txSigs.push(txSig);\n        }\n        return txSigs;\n    }\n    async settleMultiplePNLsIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndexes, mode, overrides, revenueShareEscrowMap) {\n        var _a;\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [settleeUserAccount],\n            writablePerpMarketIndexes: marketIndexes,\n            writableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        if (revenueShareEscrowMap) {\n            const escrow = revenueShareEscrowMap.get(settleeUserAccount.authority.toBase58());\n            const builders = new Map();\n            if (escrow) {\n                for (const order of escrow.orders) {\n                    const eligibleBuilder = (0, builder_1.isBuilderOrderCompleted)(order) &&\n                        !(0, builder_1.isBuilderOrderReferral)(order) &&\n                        order.feesAccrued.gt(numericConstants_1.ZERO) &&\n                        marketIndexes.includes(order.marketIndex);\n                    if (eligibleBuilder && !builders.has(order.builderIdx)) {\n                        builders.set(order.builderIdx, escrow.approvedBuilders[order.builderIdx].authority);\n                    }\n                }\n                if (builders.size > 0) {\n                    const escrowPk = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, settleeUserAccount.authority);\n                    if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                        remainingAccounts.push({\n                            pubkey: escrowPk,\n                            isSigner: false,\n                            isWritable: true,\n                        });\n                    }\n                    this.addBuilderToRemainingAccounts(Array.from(builders.values()), remainingAccounts);\n                }\n                // Include escrow and referrer accounts when there are referral rewards\n                // for any of the markets we are settling, so on-chain sweep can find them.\n                const hasReferralForRequestedMarkets = escrow.orders.some((o) => (0, builder_1.isBuilderOrderReferral)(o) &&\n                    o.feesAccrued.gt(numericConstants_1.ZERO) &&\n                    marketIndexes.includes(o.marketIndex));\n                if (hasReferralForRequestedMarkets) {\n                    const escrowPk = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, settleeUserAccount.authority);\n                    if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                        remainingAccounts.push({\n                            pubkey: escrowPk,\n                            isSigner: false,\n                            isWritable: true,\n                        });\n                    }\n                    // Add referrer's User and RevenueShare accounts\n                    if (!escrow.referrer.equals(web3_js_1.PublicKey.default)) {\n                        this.addBuilderToRemainingAccounts([escrow.referrer], remainingAccounts);\n                    }\n                }\n            }\n            else {\n                // Stale-cache fallback: if the user has any builder orders, include escrow PDA. This allows\n                // the program to lazily clean up any completed builder orders.\n                for (const order of settleeUserAccount.orders) {\n                    if ((0, orders_1.hasBuilder)(order)) {\n                        const escrowPk = (0, pda_1.getRevenueShareEscrowAccountPublicKey)(this.program.programId, settleeUserAccount.authority);\n                        if (!remainingAccounts.find((a) => a.pubkey.equals(escrowPk))) {\n                            remainingAccounts.push({\n                                pubkey: escrowPk,\n                                isSigner: false,\n                                isWritable: true,\n                            });\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        return await this.program.instruction.settleMultiplePnls(marketIndexes, mode, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: (_a = overrides === null || overrides === void 0 ? void 0 : overrides.authority) !== null && _a !== void 0 ? _a : this.wallet.publicKey,\n                user: settleeUserAccountPublicKey,\n                spotMarketVault: this.getQuoteSpotMarketAccount().vault,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async getSetUserStatusToBeingLiquidatedIx(userAccountPublicKey, userAccount) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n        });\n        return await this.program.instruction.setUserStatusToBeingLiquidated({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    async setUserStatusToBeingLiquidated(userAccountPublicKey, userAccount) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSetUserStatusToBeingLiquidatedIx(userAccountPublicKey, userAccount)), [], this.opts);\n        return txSig;\n    }\n    async liquidatePerp(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice, txParams, liquidatorSubAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidatePerpIx(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice, liquidatorSubAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getLiquidatePerpIx(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        return await this.program.instruction.liquidatePerp(marketIndex, maxBaseAssetAmount, limitPrice !== null && limitPrice !== void 0 ? limitPrice : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async liquidatePerpWithFill(userAccountPublicKey, userAccount, marketIndex, makerInfos, txParams, liquidatorSubAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidatePerpWithFillIx(userAccountPublicKey, userAccount, marketIndex, makerInfos, liquidatorSubAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getLiquidatePerpWithFillIx(userAccountPublicKey, userAccount, marketIndex, makerInfos, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount,\n                ...makerInfos.map((makerInfo) => makerInfo.makerUserAccount),\n            ],\n            writablePerpMarketIndexes: [marketIndex],\n        });\n        for (const makerInfo of makerInfos) {\n            remainingAccounts.push({\n                pubkey: makerInfo.maker,\n                isSigner: false,\n                isWritable: true,\n            });\n            remainingAccounts.push({\n                pubkey: makerInfo.makerStats,\n                isSigner: false,\n                isWritable: true,\n            });\n        }\n        return await this.program.instruction.liquidatePerpWithFill(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async liquidateSpot(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, txParams, liquidatorSubAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidateSpotIx(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, liquidatorSubAccountId), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(assetMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(liabilityMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidateSpotIx(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [liabilityMarketIndex, assetMarketIndex],\n        });\n        return await this.program.instruction.liquidateSpot(assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async getJupiterLiquidateSpotWithSwapIxV6({ jupiterClient, liabilityMarketIndex, assetMarketIndex, swapAmount, assetTokenAccount, liabilityTokenAccount, slippageBps, swapMode, onlyDirectRoutes, quote, userAccount, userAccountPublicKey, userStatsAccountPublicKey, liquidatorSubAccountId, maxAccounts, }) {\n        const liabilityMarket = this.getSpotMarketAccount(liabilityMarketIndex);\n        const assetMarket = this.getSpotMarketAccount(assetMarketIndex);\n        if (!quote) {\n            const fetchedQuote = await jupiterClient.getQuote({\n                inputMint: assetMarket.mint,\n                outputMint: liabilityMarket.mint,\n                amount: swapAmount,\n                slippageBps,\n                swapMode,\n                onlyDirectRoutes,\n                maxAccounts,\n            });\n            quote = fetchedQuote;\n        }\n        if (!quote) {\n            throw new Error('Could not fetch swap quote. Please try again.');\n        }\n        const amountIn = new anchor_1.BN(quote.inAmount);\n        const transaction = await jupiterClient.getSwap({\n            quote,\n            userPublicKey: this.provider.wallet.publicKey,\n            slippageBps,\n        });\n        const { transactionMessage, lookupTables } = await jupiterClient.getTransactionMessageAndLookupTables({\n            transaction,\n        });\n        const jupiterInstructions = jupiterClient.getJupiterInstructions({\n            transactionMessage,\n            inputMint: assetMarket.mint,\n            outputMint: liabilityMarket.mint,\n        });\n        const preInstructions = [];\n        if (!liabilityTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(liabilityMarket);\n            liabilityTokenAccount = await this.getAssociatedTokenAccount(liabilityMarket.marketIndex, false, tokenProgram);\n            preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(liabilityTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, liabilityMarket.mint, tokenProgram));\n        }\n        if (!assetTokenAccount) {\n            const tokenProgram = this.getTokenProgramForSpotMarket(assetMarket);\n            assetTokenAccount = await this.getAssociatedTokenAccount(assetMarket.marketIndex, false, tokenProgram);\n            preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(assetTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, assetMarket.mint, tokenProgram));\n        }\n        const { beginSwapIx, endSwapIx } = await this.getLiquidateSpotWithSwapIx({\n            liabilityMarketIndex,\n            assetMarketIndex,\n            swapAmount: amountIn,\n            assetTokenAccount,\n            liabilityTokenAccount,\n            userAccount,\n            userAccountPublicKey,\n            userStatsAccountPublicKey,\n            liquidatorSubAccountId,\n        });\n        const ixs = [\n            ...preInstructions,\n            beginSwapIx,\n            ...jupiterInstructions,\n            endSwapIx,\n        ];\n        return { ixs, lookupTables };\n    }\n    /**\n     * Get the drift liquidate_spot_with_swap instructions\n     *\n     * @param liabilityMarketIndex the market index of the token you're buying\n     * @param assetMarketIndex the market index of the token you're selling\n     * @param amountIn the amount of the token to sell\n     * @param assetTokenAccount the token account to move the tokens being sold\n     * @param liabilityTokenAccount the token account to receive the tokens being bought\n     * @param userAccount\n     * @param userAccountPublicKey\n     * @param userStatsAccountPublicKey\n     */\n    async getLiquidateSpotWithSwapIx({ liabilityMarketIndex, assetMarketIndex, swapAmount: swapAmount, assetTokenAccount, liabilityTokenAccount, userAccount, userAccountPublicKey, userStatsAccountPublicKey, liquidatorSubAccountId, }) {\n        const liquidatorAccountPublicKey = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const userAccounts = [userAccount];\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writableSpotMarketIndexes: [liabilityMarketIndex, assetMarketIndex],\n            readableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        const liabilitySpotMarket = this.getSpotMarketAccount(liabilityMarketIndex);\n        const assetSpotMarket = this.getSpotMarketAccount(assetMarketIndex);\n        const liabilityTokenProgram = this.getTokenProgramForSpotMarket(liabilitySpotMarket);\n        const assetTokenProgram = this.getTokenProgramForSpotMarket(assetSpotMarket);\n        if (!liabilityTokenProgram.equals(assetTokenProgram)) {\n            remainingAccounts.push({\n                pubkey: liabilityTokenProgram,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        if (this.isToken2022(liabilitySpotMarket) ||\n            this.isToken2022(assetSpotMarket)) {\n            remainingAccounts.push({\n                pubkey: assetSpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: liabilitySpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            if (this.isTransferHook(assetSpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(assetSpotMarket.mint, remainingAccounts);\n            }\n            if (this.isTransferHook(liabilitySpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(liabilitySpotMarket.mint, remainingAccounts);\n            }\n        }\n        const beginSwapIx = await this.program.instruction.liquidateSpotWithSwapBegin(assetMarketIndex, liabilityMarketIndex, swapAmount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsAccountPublicKey,\n                liquidator: liquidatorAccountPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey,\n                authority: this.wallet.publicKey,\n                liabilitySpotMarketVault: liabilitySpotMarket.vault,\n                assetSpotMarketVault: assetSpotMarket.vault,\n                assetTokenAccount: assetTokenAccount,\n                liabilityTokenAccount: liabilityTokenAccount,\n                tokenProgram: assetTokenProgram,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        const endSwapIx = await this.program.instruction.liquidateSpotWithSwapEnd(assetMarketIndex, liabilityMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsAccountPublicKey,\n                liquidator: liquidatorAccountPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey,\n                authority: this.wallet.publicKey,\n                liabilitySpotMarketVault: liabilitySpotMarket.vault,\n                assetSpotMarketVault: assetSpotMarket.vault,\n                assetTokenAccount: assetTokenAccount,\n                liabilityTokenAccount: liabilityTokenAccount,\n                tokenProgram: assetTokenProgram,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        return { beginSwapIx, endSwapIx };\n    }\n    async getInsuranceFundSwapIx({ inMarketIndex, outMarketIndex, amountIn, inTokenAccount, outTokenAccount, }) {\n        const remainingAccounts = await this.getRemainingAccounts({\n            userAccounts: [],\n            writableSpotMarketIndexes: [inMarketIndex, outMarketIndex],\n        });\n        const inSpotMarket = this.getSpotMarketAccount(inMarketIndex);\n        const outSpotMarket = this.getSpotMarketAccount(outMarketIndex);\n        if (this.isToken2022(inSpotMarket) || this.isToken2022(outSpotMarket)) {\n            remainingAccounts.push({\n                pubkey: inSpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: outSpotMarket.mint,\n                isWritable: false,\n                isSigner: false,\n            });\n            if (this.isTransferHook(inSpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(inSpotMarket.mint, remainingAccounts);\n            }\n            if (this.isTransferHook(outSpotMarket)) {\n                this.addExtraAccountMetasToRemainingAccounts(outSpotMarket.mint, remainingAccounts);\n            }\n        }\n        const ifRebalanceConfig = (0, pda_1.getIfRebalanceConfigPublicKey)(this.program.programId, inMarketIndex, outMarketIndex);\n        const beginSwapIx = await this.program.instruction.beginInsuranceFundSwap(inMarketIndex, outMarketIndex, amountIn, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                outInsuranceFundVault: outSpotMarket.insuranceFund.vault,\n                inInsuranceFundVault: inSpotMarket.insuranceFund.vault,\n                outTokenAccount,\n                inTokenAccount,\n                ifRebalanceConfig: ifRebalanceConfig,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        const endSwapIx = await this.program.instruction.endInsuranceFundSwap(inMarketIndex, outMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                outInsuranceFundVault: outSpotMarket.insuranceFund.vault,\n                inInsuranceFundVault: inSpotMarket.insuranceFund.vault,\n                outTokenAccount,\n                inTokenAccount,\n                ifRebalanceConfig: ifRebalanceConfig,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts,\n        });\n        return { beginSwapIx, endSwapIx };\n    }\n    async liquidateBorrowForPerpPnl(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, txParams, liquidatorSubAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidateBorrowForPerpPnlIx(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, liquidatorSubAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(perpMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(liabilityMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidateBorrowForPerpPnlIx(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            writablePerpMarketIndexes: [perpMarketIndex],\n            writableSpotMarketIndexes: [liabilityMarketIndex],\n        });\n        return await this.program.instruction.liquidateBorrowForPerpPnl(perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async liquidatePerpPnlForDeposit(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice, txParams, liquidatorSubAccountId) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidatePerpPnlForDepositIx(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice, liquidatorSubAccountId), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(perpMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(assetMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidatePerpPnlForDepositIx(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            writablePerpMarketIndexes: [perpMarketIndex],\n            writableSpotMarketIndexes: [assetMarketIndex],\n        });\n        return await this.program.instruction.liquidatePerpPnlForDeposit(perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async resolvePerpBankruptcy(userAccountPublicKey, userAccount, marketIndex, txParams, liquidatorSubAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolvePerpBankruptcyIx(userAccountPublicKey, userAccount, marketIndex, liquidatorSubAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolvePerpBankruptcyIx(userAccountPublicKey, userAccount, marketIndex, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            writablePerpMarketIndexes: [marketIndex],\n            writableSpotMarketIndexes: [numericConstants_1.QUOTE_SPOT_MARKET_INDEX],\n        });\n        const spotMarket = this.getQuoteSpotMarketAccount();\n        return await this.program.instruction.resolvePerpBankruptcy(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator,\n                liquidatorStats: liquidatorStatsPublicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async resolveSpotBankruptcy(userAccountPublicKey, userAccount, marketIndex, txParams, liquidatorSubAccountId) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolveSpotBankruptcyIx(userAccountPublicKey, userAccount, marketIndex, liquidatorSubAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolveSpotBankruptcyIx(userAccountPublicKey, userAccount, marketIndex, liquidatorSubAccountId) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidator = await this.getUserAccountPublicKey(liquidatorSubAccountId);\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount(liquidatorSubAccountId), userAccount],\n            writableSpotMarketIndexes: [marketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const tokenProgramId = this.getTokenProgramForSpotMarket(spotMarket);\n        this.addTokenMintToRemainingAccounts(spotMarket, remainingAccounts);\n        if (this.isTransferHook(spotMarket)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarket.mint, remainingAccounts);\n        }\n        return await this.program.instruction.resolveSpotBankruptcy(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey,\n                liquidator,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: tokenProgramId,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async updateFundingRate(perpMarketIndex, oracle, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateFundingRateIx(perpMarketIndex, oracle), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateFundingRateIx(perpMarketIndex, oracle) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.instruction.updateFundingRate(perpMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarketPublicKey,\n                oracle: oracle,\n            },\n        });\n    }\n    async updatePrelaunchOracle(perpMarketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdatePrelaunchOracleIx(perpMarketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdatePrelaunchOracleIx(perpMarketIndex) {\n        const perpMarket = this.getPerpMarketAccount(perpMarketIndex);\n        if (!(0, types_1.isVariant)(perpMarket.amm.oracleSource, 'prelaunch')) {\n            throw new Error(`Wrong oracle source ${perpMarket.amm.oracleSource}`);\n        }\n        return await this.program.instruction.updatePrelaunchOracle({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarket.pubkey,\n                oracle: perpMarket.amm.oracle,\n            },\n        });\n    }\n    async updatePerpBidAskTwap(perpMarketIndex, makers, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdatePerpBidAskTwapIx(perpMarketIndex, makers), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdatePerpBidAskTwapIx(perpMarketIndex, makers) {\n        const perpMarket = this.getPerpMarketAccount(perpMarketIndex);\n        const remainingAccounts = [];\n        for (const [maker, makerStats] of makers) {\n            remainingAccounts.push({\n                pubkey: maker,\n                isWritable: false,\n                isSigner: false,\n            });\n            remainingAccounts.push({\n                pubkey: makerStats,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        return await this.program.instruction.updatePerpBidAskTwap({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarket.pubkey,\n                oracle: perpMarket.amm.oracle,\n                authority: this.wallet.publicKey,\n                keeperStats: this.getUserStatsAccountPublicKey(),\n            },\n            remainingAccounts,\n        });\n    }\n    async settleFundingPayment(userAccountPublicKey, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettleFundingPaymentIx(userAccountPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getSettleFundingPaymentIx(userAccountPublicKey) {\n        const userAccount = (await this.program.account.user.fetch(userAccountPublicKey));\n        const writablePerpMarketIndexes = [];\n        for (const position of userAccount.perpPositions) {\n            if (!(0, position_1.positionIsAvailable)(position)) {\n                writablePerpMarketIndexes.push(position.marketIndex);\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [userAccount],\n            writablePerpMarketIndexes,\n        });\n        return await this.program.instruction.settleFundingPayment({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n            },\n            remainingAccounts,\n        });\n    }\n    triggerEvent(eventName, data) {\n        this.eventEmitter.emit(eventName, data);\n    }\n    getOracleDataForPerpMarket(marketIndex) {\n        return this.accountSubscriber.getOraclePriceDataAndSlotForPerpMarket(marketIndex).data;\n    }\n    getMMOracleDataForPerpMarket(marketIndex) {\n        const perpMarket = this.getPerpMarketAccount(marketIndex);\n        const oracleData = this.getOracleDataForPerpMarket(marketIndex);\n        const stateAccountAndSlot = this.accountSubscriber.getStateAccountAndSlot();\n        const isMMOracleActive = !perpMarket.amm.mmOracleSlot.eq(numericConstants_1.ZERO);\n        const pctDiff = perpMarket.amm.mmOraclePrice\n            .sub(oracleData.price)\n            .abs()\n            .mul(numericConstants_1.PERCENTAGE_PRECISION)\n            .div(anchor_1.BN.max(oracleData.price, numericConstants_1.ONE));\n        const mmOracleSequenceId = perpMarket.amm.mmOracleSequenceId;\n        // Do slot check for recency if sequence ids are zero or they're too divergent\n        const doSlotCheckForRecency = oracleData.sequenceId == null ||\n            oracleData.sequenceId.eq(numericConstants_1.ZERO) ||\n            mmOracleSequenceId.eq(numericConstants_1.ZERO) ||\n            oracleData.sequenceId\n                .sub(perpMarket.amm.mmOracleSequenceId)\n                .abs()\n                .gt(oracleData.sequenceId.div(new anchor_1.BN(10000)));\n        let isExchangeOracleMoreRecent = true;\n        if (doSlotCheckForRecency &&\n            oracleData.slot <= perpMarket.amm.mmOracleSlot) {\n            isExchangeOracleMoreRecent = false;\n        }\n        else if (!doSlotCheckForRecency &&\n            oracleData.sequenceId < mmOracleSequenceId) {\n            isExchangeOracleMoreRecent = false;\n        }\n        const conf = (0, utils_3.getOracleConfidenceFromMMOracleData)(perpMarket.amm.mmOraclePrice, oracleData);\n        if ((0, oracles_1.isOracleTooDivergent)(perpMarket.amm, {\n            price: perpMarket.amm.mmOraclePrice,\n            slot: perpMarket.amm.mmOracleSlot,\n            confidence: conf,\n            hasSufficientNumberOfDataPoints: true,\n        }, stateAccountAndSlot.data.oracleGuardRails) ||\n            perpMarket.amm.mmOraclePrice.eq(numericConstants_1.ZERO) ||\n            isExchangeOracleMoreRecent ||\n            pctDiff.gt(numericConstants_1.PERCENTAGE_PRECISION.divn(100)) // 1% threshold\n        ) {\n            return { ...oracleData, isMMOracleActive };\n        }\n        else {\n            return {\n                price: perpMarket.amm.mmOraclePrice,\n                slot: perpMarket.amm.mmOracleSlot,\n                confidence: conf,\n                hasSufficientNumberOfDataPoints: true,\n                isMMOracleActive,\n            };\n        }\n    }\n    getOracleDataForSpotMarket(marketIndex) {\n        return this.accountSubscriber.getOraclePriceDataAndSlotForSpotMarket(marketIndex).data;\n    }\n    async initializeInsuranceFundStake(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getInitializeInsuranceFundStakeIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getInitializeInsuranceFundStakeIx(marketIndex) {\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const accounts = {\n            insuranceFundStake: ifStakeAccountPublicKey,\n            spotMarket: this.getSpotMarketAccount(marketIndex).pubkey,\n            userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to initialize own insurance fund stake account\n            ),\n            authority: this.wallet.publicKey,\n            payer: this.wallet.publicKey,\n            rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n            systemProgram: anchor.web3.SystemProgram.programId,\n            state: await this.getStatePublicKey(),\n        };\n        return await this.program.instruction.initializeInsuranceFundStake(marketIndex, {\n            accounts,\n        });\n    }\n    async getAddInsuranceFundStakeIx(marketIndex, amount, collateralAccountPublicKey) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const remainingAccounts = [];\n        this.addTokenMintToRemainingAccounts(spotMarket, remainingAccounts);\n        if (this.isTransferHook(spotMarket)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarket.mint, remainingAccounts);\n        }\n        const tokenProgram = this.getTokenProgramForSpotMarket(spotMarket);\n        const ix = this.program.instruction.addInsuranceFundStake(marketIndex, amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to add to own insurance fund stake account\n                ),\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                userTokenAccount: collateralAccountPublicKey,\n                tokenProgram,\n            },\n            remainingAccounts,\n        });\n        return ix;\n    }\n    /**\n     * Add to an insurance fund stake and optionally initialize the account\n     */\n    async addInsuranceFundStake({ marketIndex, amount, collateralAccountPublicKey, initializeStakeAccount, fromSubaccount, txParams, }) {\n        const addIfStakeIxs = await this.getAddInsuranceFundStakeIxs({\n            marketIndex,\n            amount,\n            collateralAccountPublicKey,\n            initializeStakeAccount,\n            fromSubaccount,\n        });\n        const additionalSigners = [];\n        const tx = await this.buildTransaction(addIfStakeIxs, txParams);\n        const { txSig } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        return txSig;\n    }\n    /**\n     * Get instructions to add to an insurance fund stake and optionally initialize the account\n     */\n    async getAddInsuranceFundStakeIxs({ marketIndex, amount, collateralAccountPublicKey, initializeStakeAccount, fromSubaccount, }) {\n        const addIfStakeIxs = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const createWSOLTokenAccount = isSolMarket && collateralAccountPublicKey.equals(this.wallet.publicKey);\n        const tokenProgramId = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        // create associated token account because it may not exist\n        const associatedTokenAccountPublicKey = (0, spl_token_1.getAssociatedTokenAddressSync)(spotMarketAccount.mint, this.wallet.publicKey, true, tokenProgramId);\n        addIfStakeIxs.push(await (0, spl_token_1.createAssociatedTokenAccountIdempotentInstruction)(this.wallet.publicKey, associatedTokenAccountPublicKey, this.wallet.publicKey, spotMarketAccount.mint, tokenProgramId));\n        let tokenAccount;\n        if (!(await this.checkIfAccountExists((0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to initialize own user stats account\n        )))) {\n            addIfStakeIxs.push(await this.getInitializeUserStatsIx());\n        }\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, true);\n            tokenAccount = pubkey;\n            ixs.forEach((ix) => {\n                addIfStakeIxs.push(ix);\n            });\n        }\n        else {\n            tokenAccount = collateralAccountPublicKey;\n        }\n        if (fromSubaccount) {\n            const withdrawIx = await this.getWithdrawIx(amount, marketIndex, tokenAccount);\n            addIfStakeIxs.push(withdrawIx);\n        }\n        if (initializeStakeAccount) {\n            const initializeIx = await this.getInitializeInsuranceFundStakeIx(marketIndex);\n            addIfStakeIxs.push(initializeIx);\n        }\n        const addFundsIx = await this.getAddInsuranceFundStakeIx(marketIndex, amount, tokenAccount);\n        addIfStakeIxs.push(addFundsIx);\n        if (createWSOLTokenAccount) {\n            addIfStakeIxs.push((0, spl_token_1.createCloseAccountInstruction)(tokenAccount, this.wallet.publicKey, this.wallet.publicKey, []));\n        }\n        return addIfStakeIxs;\n    }\n    async requestRemoveInsuranceFundStake(marketIndex, amount, txParams) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const ix = await this.program.instruction.requestRemoveInsuranceFundStake(marketIndex, amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to request remove own insurance fund stake account\n                ),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n            },\n        });\n        const tx = await this.buildTransaction(ix, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async cancelRequestRemoveInsuranceFundStake(marketIndex, txParams) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const ix = await this.program.instruction.cancelRequestRemoveInsuranceFundStake(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to request remove own insurance fund stake account\n                ),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n            },\n        });\n        const tx = await this.buildTransaction(ix, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async removeInsuranceFundStake(marketIndex, collateralAccountPublicKey, txParams) {\n        const removeIfStakeIxs = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const additionalSigners = [];\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const createWSOLTokenAccount = isSolMarket && collateralAccountPublicKey.equals(this.wallet.publicKey);\n        const tokenProgramId = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        let tokenAccount;\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(numericConstants_1.ZERO, true);\n            tokenAccount = pubkey;\n            ixs.forEach((ix) => {\n                removeIfStakeIxs.push(ix);\n            });\n        }\n        else {\n            tokenAccount = collateralAccountPublicKey;\n            const tokenAccountExists = await this.checkIfAccountExists(tokenAccount);\n            if (!tokenAccountExists) {\n                const createTokenAccountIx = await this.createAssociatedTokenAccountIdempotentInstruction(tokenAccount, this.wallet.publicKey, this.wallet.publicKey, spotMarketAccount.mint, tokenProgramId);\n                removeIfStakeIxs.push(createTokenAccountIx);\n            }\n        }\n        const remainingAccounts = [];\n        this.addTokenMintToRemainingAccounts(spotMarketAccount, remainingAccounts);\n        if (this.isTransferHook(spotMarketAccount)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarketAccount.mint, remainingAccounts);\n        }\n        const tokenProgram = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        const removeStakeIx = await this.program.instruction.removeInsuranceFundStake(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.wallet.publicKey // only allow payer to request remove own insurance fund stake account\n                ),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                userTokenAccount: tokenAccount,\n                tokenProgram,\n            },\n            remainingAccounts,\n        });\n        removeIfStakeIxs.push(removeStakeIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            removeIfStakeIxs.push((0, spl_token_1.createCloseAccountInstruction)(tokenAccount, this.wallet.publicKey, this.wallet.publicKey, []));\n        }\n        const tx = await this.buildTransaction(removeIfStakeIxs, txParams);\n        const { txSig } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        return txSig;\n    }\n    async updateUserQuoteAssetInsuranceStake(authority, txParams) {\n        const tx = await this.buildTransaction(await this.getUpdateUserQuoteAssetInsuranceStakeIx(authority), txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserQuoteAssetInsuranceStakeIx(authority) {\n        const marketIndex = numericConstants_1.QUOTE_SPOT_MARKET_INDEX;\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, authority, marketIndex);\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority);\n        const ix = this.program.instruction.updateUserQuoteAssetInsuranceStake({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: userStatsPublicKey,\n                signer: this.wallet.publicKey,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n            },\n        });\n        return ix;\n    }\n    async updateUserGovTokenInsuranceStake(authority, txParams) {\n        const ix = await this.getUpdateUserGovTokenInsuranceStakeIx(authority);\n        const tx = await this.buildTransaction(ix, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserGovTokenInsuranceStakeIx(authority) {\n        const marketIndex = numericConstants_1.GOV_SPOT_MARKET_INDEX;\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, authority, marketIndex);\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, authority);\n        const ix = this.program.instruction.updateUserGovTokenInsuranceStake({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: userStatsPublicKey,\n                signer: this.wallet.publicKey,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n            },\n        });\n        return ix;\n    }\n    async settleRevenueToInsuranceFund(spotMarketIndex, txParams) {\n        const tx = await this.buildTransaction(await this.getSettleRevenueToInsuranceFundIx(spotMarketIndex), txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getSettleRevenueToInsuranceFundIx(spotMarketIndex) {\n        const spotMarketAccount = this.getSpotMarketAccount(spotMarketIndex);\n        const tokenProgramId = this.getTokenProgramForSpotMarket(spotMarketAccount);\n        const remainingAccounts = [];\n        this.addTokenMintToRemainingAccounts(spotMarketAccount, remainingAccounts);\n        if (this.isTransferHook(spotMarketAccount)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarketAccount.mint, remainingAccounts);\n        }\n        const ix = await this.program.instruction.settleRevenueToInsuranceFund(spotMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                driftSigner: this.getSignerPublicKey(),\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n                tokenProgram: tokenProgramId,\n            },\n            remainingAccounts,\n        });\n        return ix;\n    }\n    async resolvePerpPnlDeficit(spotMarketIndex, perpMarketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolvePerpPnlDeficitIx(spotMarketIndex, perpMarketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolvePerpPnlDeficitIx(spotMarketIndex, perpMarketIndex) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [this.getUserAccount()],\n            writablePerpMarketIndexes: [perpMarketIndex],\n            writableSpotMarketIndexes: [spotMarketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(spotMarketIndex);\n        const tokenProgramId = this.getTokenProgramForSpotMarket(spotMarket);\n        return await this.program.instruction.resolvePerpPnlDeficit(spotMarketIndex, perpMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: tokenProgramId,\n            },\n            remainingAccounts: remainingAccounts,\n        });\n    }\n    async getDepositIntoSpotMarketRevenuePoolIx(marketIndex, amount, userTokenAccountPublicKey) {\n        const spotMarket = await this.getSpotMarketAccount(marketIndex);\n        const remainingAccounts = [];\n        this.addTokenMintToRemainingAccounts(spotMarket, remainingAccounts);\n        if (this.isTransferHook(spotMarket)) {\n            await this.addExtraAccountMetasToRemainingAccounts(spotMarket.mint, remainingAccounts);\n        }\n        const tokenProgram = this.getTokenProgramForSpotMarket(spotMarket);\n        const ix = await this.program.instruction.depositIntoSpotMarketRevenuePool(amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                userTokenAccount: userTokenAccountPublicKey,\n                tokenProgram,\n            },\n        });\n        return ix;\n    }\n    /**\n     * This ix will donate your funds to drift revenue pool. It does not deposit into your user account\n     * @param marketIndex\n     * @param amount\n     * @param userTokenAccountPublicKey\n     * @returns\n     */\n    async depositIntoSpotMarketRevenuePool(marketIndex, amount, userTokenAccountPublicKey) {\n        const ix = await this.getDepositIntoSpotMarketRevenuePoolIx(marketIndex, amount, userTokenAccountPublicKey);\n        const tx = await this.buildTransaction([ix]);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    getPerpMarketExtendedInfo(marketIndex) {\n        var _a, _b;\n        const marketAccount = this.getPerpMarketAccount(marketIndex);\n        const quoteAccount = this.getSpotMarketAccount(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const extendedInfo = {\n            marketIndex,\n            minOrderSize: (_a = marketAccount.amm) === null || _a === void 0 ? void 0 : _a.minOrderSize,\n            marginMaintenance: marketAccount.marginRatioMaintenance,\n            pnlPoolValue: (0, spotBalance_1.getTokenAmount)((_b = marketAccount.pnlPool) === null || _b === void 0 ? void 0 : _b.scaledBalance, quoteAccount, types_1.SpotBalanceType.DEPOSIT),\n            contractTier: marketAccount.contractTier,\n            availableInsurance: (0, market_1.calculateMarketMaxAvailableInsurance)(marketAccount, quoteAccount),\n        };\n        return extendedInfo;\n    }\n    /**\n     * Calculates taker / maker fee (as a percentage, e.g. .001 = 10 basis points) for particular marketType\n     * @param marketType\n     * @param positionMarketIndex\n     * @returns : {takerFee: number, makerFee: number} Precision None\n     */\n    getMarketFees(marketType, marketIndex, user, enteringHighLeverageMode) {\n        var _a;\n        let feeTier;\n        const userHLM = ((_a = user === null || user === void 0 ? void 0 : user.isHighLeverageMode('Initial')) !== null && _a !== void 0 ? _a : false) ||\n            enteringHighLeverageMode;\n        if (user && !userHLM) {\n            feeTier = user.getUserFeeTier(marketType);\n        }\n        else {\n            const state = this.getStateAccount();\n            feeTier = (0, types_1.isVariant)(marketType, 'perp')\n                ? state.perpFeeStructure.feeTiers[0]\n                : state.spotFeeStructure.feeTiers[0];\n        }\n        let takerFee = feeTier.feeNumerator / feeTier.feeDenominator;\n        let makerFee = feeTier.makerRebateNumerator / feeTier.makerRebateDenominator;\n        if (marketIndex !== undefined) {\n            let marketAccount = null;\n            if ((0, types_1.isVariant)(marketType, 'perp')) {\n                marketAccount = this.getPerpMarketAccount(marketIndex);\n            }\n            else {\n                marketAccount = this.getSpotMarketAccount(marketIndex);\n            }\n            takerFee += (takerFee * marketAccount.feeAdjustment) / 100;\n            if (userHLM) {\n                takerFee *= 2;\n            }\n            makerFee += (makerFee * marketAccount.feeAdjustment) / 100;\n        }\n        return {\n            takerFee,\n            makerFee,\n        };\n    }\n    /**\n     * Returns the market index and type for a given market name\n     * E.g. \"SOL-PERP\" -> { marketIndex: 0, marketType: MarketType.PERP }\n     *\n     * @param name\n     */\n    getMarketIndexAndType(name) {\n        name = name.toUpperCase();\n        for (const perpMarketAccount of this.getPerpMarketAccounts()) {\n            if ((0, userName_1.decodeName)(perpMarketAccount.name).toUpperCase() === name) {\n                return {\n                    marketIndex: perpMarketAccount.marketIndex,\n                    marketType: types_1.MarketType.PERP,\n                };\n            }\n        }\n        for (const spotMarketAccount of this.getSpotMarketAccounts()) {\n            if ((0, userName_1.decodeName)(spotMarketAccount.name).toUpperCase() === name) {\n                return {\n                    marketIndex: spotMarketAccount.marketIndex,\n                    marketType: types_1.MarketType.SPOT,\n                };\n            }\n        }\n        return undefined;\n    }\n    getReceiverProgram() {\n        if (this.receiverProgram === undefined) {\n            this.receiverProgram = new anchor_1.Program(pyth_solana_receiver_json_1.default, pyth_solana_receiver_1.DEFAULT_RECEIVER_PROGRAM_ID, this.provider);\n        }\n        return this.receiverProgram;\n    }\n    async getSwitchboardOnDemandProgram() {\n        if (this.sbOnDemandProgram === undefined) {\n            this.sbOnDemandProgram = await on_demand_1.AnchorUtils.loadProgramFromConnection(this.connection);\n        }\n        return this.sbOnDemandProgram;\n    }\n    async postPythPullOracleUpdateAtomic(vaaString, feedId) {\n        const postIxs = await this.getPostPythPullOracleUpdateAtomicIxs(vaaString, feedId);\n        const tx = await this.buildTransaction(postIxs);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async postMultiPythPullOracleUpdatesAtomic(vaaString, feedIds) {\n        const postIxs = await this.getPostPythPullOracleUpdateAtomicIxs(vaaString, feedIds);\n        const tx = await this.buildTransaction(postIxs);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getPostPythPullOracleUpdateAtomicIxs(vaaString, feedIds, numSignatures = 2) {\n        const accumulatorUpdateData = (0, price_service_sdk_1.parseAccumulatorUpdateData)(Buffer.from(vaaString, 'base64'));\n        const guardianSetIndex = accumulatorUpdateData.vaa.readUInt32BE(1);\n        const guardianSet = (0, address_1.getGuardianSetPda)(guardianSetIndex, address_1.DEFAULT_WORMHOLE_PROGRAM_ID);\n        const trimmedVaa = (0, oracles_1.trimVaaSignatures)(accumulatorUpdateData.vaa, numSignatures);\n        const postIxs = [];\n        if (accumulatorUpdateData.updates.length > 1) {\n            const encodedParams = this.getReceiverProgram().coder.types.encode('PostMultiUpdatesAtomicParams', {\n                vaa: trimmedVaa,\n                merklePriceUpdates: accumulatorUpdateData.updates,\n            });\n            const feedIdsToUse = typeof feedIds === 'string' ? [feedIds] : feedIds;\n            const pubkeys = feedIdsToUse.map((feedId) => {\n                return (0, pda_1.getPythPullOraclePublicKey)(this.program.programId, (0, pythOracleUtils_1.getFeedIdUint8Array)(feedId));\n            });\n            const remainingAccounts = pubkeys.map((pubkey) => {\n                return {\n                    pubkey,\n                    isSigner: false,\n                    isWritable: true,\n                };\n            });\n            postIxs.push(this.program.instruction.postMultiPythPullOracleUpdatesAtomic(encodedParams, {\n                accounts: {\n                    keeper: this.wallet.publicKey,\n                    pythSolanaReceiver: config_1.DRIFT_ORACLE_RECEIVER_ID,\n                    guardianSet,\n                },\n                remainingAccounts,\n            }));\n        }\n        else {\n            let feedIdToUse = typeof feedIds === 'string' ? feedIds : feedIds[0];\n            feedIdToUse = (0, pythOracleUtils_1.trimFeedId)(feedIdToUse);\n            postIxs.push(await this.getSinglePostPythPullOracleAtomicIx({\n                vaa: trimmedVaa,\n                merklePriceUpdate: accumulatorUpdateData.updates[0],\n            }, feedIdToUse, guardianSet));\n        }\n        return postIxs;\n    }\n    async getSinglePostPythPullOracleAtomicIx(params, feedId, guardianSet) {\n        const feedIdBuffer = (0, pythOracleUtils_1.getFeedIdUint8Array)(feedId);\n        const receiverProgram = this.getReceiverProgram();\n        const encodedParams = receiverProgram.coder.types.encode('PostUpdateAtomicParams', params);\n        return this.program.instruction.postPythPullOracleUpdateAtomic(feedIdBuffer, encodedParams, {\n            accounts: {\n                keeper: this.wallet.publicKey,\n                pythSolanaReceiver: config_1.DRIFT_ORACLE_RECEIVER_ID,\n                guardianSet,\n                priceFeed: (0, pda_1.getPythPullOraclePublicKey)(this.program.programId, feedIdBuffer),\n            },\n        });\n    }\n    async updatePythPullOracle(vaaString, feedId) {\n        feedId = (0, pythOracleUtils_1.trimFeedId)(feedId);\n        const accumulatorUpdateData = (0, price_service_sdk_1.parseAccumulatorUpdateData)(Buffer.from(vaaString, 'base64'));\n        const guardianSetIndex = accumulatorUpdateData.vaa.readUInt32BE(1);\n        const guardianSet = (0, address_1.getGuardianSetPda)(guardianSetIndex, address_1.DEFAULT_WORMHOLE_PROGRAM_ID);\n        const [postIxs, encodedVaaAddress] = await this.getBuildEncodedVaaIxs(accumulatorUpdateData.vaa, guardianSet);\n        for (const update of accumulatorUpdateData.updates) {\n            postIxs.push(await this.getUpdatePythPullOracleIxs({\n                merklePriceUpdate: update,\n            }, feedId, encodedVaaAddress.publicKey));\n        }\n        const tx = await this.buildTransaction(postIxs);\n        const { txSig } = await this.sendTransaction(tx, [encodedVaaAddress], this.opts);\n        return txSig;\n    }\n    async getUpdatePythPullOracleIxs(params, feedId, encodedVaaAddress) {\n        const feedIdBuffer = (0, pythOracleUtils_1.getFeedIdUint8Array)(feedId);\n        const receiverProgram = this.getReceiverProgram();\n        const encodedParams = receiverProgram.coder.types.encode('PostUpdateParams', params);\n        return this.program.instruction.updatePythPullOracle(feedIdBuffer, encodedParams, {\n            accounts: {\n                keeper: this.wallet.publicKey,\n                pythSolanaReceiver: config_1.DRIFT_ORACLE_RECEIVER_ID,\n                encodedVaa: encodedVaaAddress,\n                priceFeed: (0, pda_1.getPythPullOraclePublicKey)(this.program.programId, feedIdBuffer),\n            },\n        });\n    }\n    async postPythLazerOracleUpdate(feedIds, pythMessageHex) {\n        const postIxs = await this.getPostPythLazerOracleUpdateIxs(feedIds, pythMessageHex, undefined, 2);\n        const tx = await this.buildTransaction(postIxs);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getPostPythLazerOracleUpdateIxs(feedIds, pythMessageHex, precedingIxs = [], overrideCustomIxIndex) {\n        const pythMessageBytes = Buffer.from(pythMessageHex, 'hex');\n        const verifyIx = (0, ed25519Utils_1.createMinimalEd25519VerifyIx)(overrideCustomIxIndex || precedingIxs.length + 1, 12, pythMessageBytes);\n        const remainingAccountsMeta = feedIds.map((feedId) => {\n            return {\n                pubkey: (0, pda_1.getPythLazerOraclePublicKey)(this.program.programId, feedId),\n                isSigner: false,\n                isWritable: true,\n            };\n        });\n        const ix = this.program.instruction.postPythLazerOracleUpdate(pythMessageBytes, {\n            accounts: {\n                keeper: this.wallet.publicKey,\n                pythLazerStorage: config_1.PYTH_LAZER_STORAGE_ACCOUNT_KEY,\n                ixSysvar: web3_js_1.SYSVAR_INSTRUCTIONS_PUBKEY,\n            },\n            remainingAccounts: remainingAccountsMeta,\n        });\n        return [verifyIx, ix];\n    }\n    async getPostManySwitchboardOnDemandUpdatesAtomicIxs(feeds, recentSlothash, numSignatures = 3) {\n        const program = await this.getSwitchboardOnDemandProgram();\n        const [pullIxs, _luts, _rawResponse] = await on_demand_1.PullFeed.fetchUpdateManyLightIx(program, {\n            feeds,\n            numSignatures,\n            recentSlothashes: recentSlothash\n                ? [[new anchor_1.BN(recentSlothash.slot), recentSlothash.hash]]\n                : undefined,\n            chain: 'solana',\n            network: this.env,\n        });\n        if (!pullIxs) {\n            return undefined;\n        }\n        return pullIxs;\n    }\n    // @deprecated use getPostManySwitchboardOnDemandUpdatesAtomicIxs instead. This function no longer returns the required ixs due to upstream sdk changes.\n    async getPostSwitchboardOnDemandUpdateAtomicIx(feed, recentSlothash, numSignatures = 3) {\n        const program = await this.getSwitchboardOnDemandProgram();\n        const feedAccount = new on_demand_1.PullFeed(program, feed);\n        if (!this.sbProgramFeedConfigs) {\n            this.sbProgramFeedConfigs = new Map();\n        }\n        if (!this.sbProgramFeedConfigs.has(feedAccount.pubkey.toString())) {\n            const feedConfig = await feedAccount.loadConfigs();\n            this.sbProgramFeedConfigs.set(feed.toString(), feedConfig);\n        }\n        const [pullIx, _responses, success] = await on_demand_1.PullFeed.fetchUpdateManyIx(program, {\n            feeds: [feed],\n            numSignatures,\n            recentSlothashes: recentSlothash\n                ? [[new anchor_1.BN(recentSlothash.slot), recentSlothash.hash]]\n                : undefined,\n        });\n        if (!success) {\n            return undefined;\n        }\n        return pullIx[0];\n    }\n    async postSwitchboardOnDemandUpdate(feed, recentSlothash, numSignatures = 3) {\n        const pullIx = await this.getPostSwitchboardOnDemandUpdateAtomicIx(feed, recentSlothash, numSignatures);\n        if (!pullIx) {\n            return undefined;\n        }\n        const tx = await (0, on_demand_1.asV0Tx)({\n            connection: this.connection,\n            ixs: [pullIx],\n            payer: this.wallet.publicKey,\n            computeUnitLimitMultiple: 1.3,\n            lookupTables: await this.fetchAllLookupTableAccounts(),\n        });\n        const { txSig } = await this.sendTransaction(tx, [], {\n            commitment: 'processed',\n            skipPreflight: true,\n            maxRetries: 0,\n        });\n        return txSig;\n    }\n    async getBuildEncodedVaaIxs(vaa, guardianSet) {\n        const postIxs = [];\n        if (this.wormholeProgram === undefined) {\n            this.wormholeProgram = new anchor_1.Program(pyth_solana_receiver_1.wormholeCoreBridgeIdl, address_1.DEFAULT_WORMHOLE_PROGRAM_ID, this.provider);\n        }\n        const encodedVaaKeypair = new web3_js_1.Keypair();\n        postIxs.push(await this.wormholeProgram.account.encodedVaa.createInstruction(encodedVaaKeypair, vaa.length + 46));\n        // Why do we need this too?\n        postIxs.push(await this.wormholeProgram.methods\n            .initEncodedVaa()\n            .accounts({\n            encodedVaa: encodedVaaKeypair.publicKey,\n        })\n            .instruction());\n        // Split the write into two ixs\n        postIxs.push(await this.wormholeProgram.methods\n            .writeEncodedVaa({\n            index: 0,\n            data: vaa.subarray(0, 755),\n        })\n            .accounts({\n            draftVaa: encodedVaaKeypair.publicKey,\n        })\n            .instruction());\n        postIxs.push(await this.wormholeProgram.methods\n            .writeEncodedVaa({\n            index: 755,\n            data: vaa.subarray(755),\n        })\n            .accounts({\n            draftVaa: encodedVaaKeypair.publicKey,\n        })\n            .instruction());\n        // Verify\n        postIxs.push(await this.wormholeProgram.methods\n            .verifyEncodedVaaV1()\n            .accounts({\n            guardianSet,\n            draftVaa: encodedVaaKeypair.publicKey,\n        })\n            .instruction());\n        return [postIxs, encodedVaaKeypair];\n    }\n    async enableUserHighLeverageMode(subAccountId, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getEnableHighLeverageModeIx(subAccountId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getEnableHighLeverageModeIx(subAccountId, depositToTradeArgs, overrides) {\n        var _a, _b, _c, _d;\n        const isDepositToTradeTx = depositToTradeArgs !== undefined;\n        const userAccountPublicKey = (_b = (_a = overrides === null || overrides === void 0 ? void 0 : overrides.user) === null || _a === void 0 ? void 0 : _a.getUserAccountPublicKey()) !== null && _b !== void 0 ? _b : (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const signingAuthority = (_c = overrides === null || overrides === void 0 ? void 0 : overrides.signingAuthority) !== null && _c !== void 0 ? _c : this.wallet.publicKey;\n        const userAccount = (_d = overrides === null || overrides === void 0 ? void 0 : overrides.user.getUserAccount()) !== null && _d !== void 0 ? _d : this.getUserAccount(subAccountId);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: (depositToTradeArgs === null || depositToTradeArgs === void 0 ? void 0 : depositToTradeArgs.isMakingNewAccount) ? [] : [userAccount],\n            useMarketLastSlotCache: false,\n            readablePerpMarketIndex: depositToTradeArgs === null || depositToTradeArgs === void 0 ? void 0 : depositToTradeArgs.orderMarketIndex,\n            readableSpotMarketIndexes: isDepositToTradeTx\n                ? [depositToTradeArgs === null || depositToTradeArgs === void 0 ? void 0 : depositToTradeArgs.depositMarketIndex]\n                : undefined,\n        });\n        const ix = await this.program.instruction.enableUserHighLeverageMode(subAccountId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: signingAuthority,\n                highLeverageModeConfig: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n            },\n            remainingAccounts,\n        });\n        return ix;\n    }\n    async disableUserHighLeverageMode(user, userAccount, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getDisableHighLeverageModeIx(user, userAccount), txParams), [], this.opts);\n        return txSig;\n    }\n    async getDisableHighLeverageModeIx(user, userAccount, maintenance = false) {\n        const remainingAccounts = userAccount\n            ? this.getRemainingAccounts({\n                userAccounts: [userAccount],\n            })\n            : undefined;\n        const ix = await this.program.instruction.disableUserHighLeverageMode(maintenance, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user,\n                authority: this.wallet.publicKey,\n                highLeverageModeConfig: (0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId),\n            },\n            remainingAccounts,\n        });\n        return ix;\n    }\n    async fetchHighLeverageModeConfig() {\n        const config = await this.program.account.highLeverageModeConfig.fetch((0, pda_1.getHighLeverageModeConfigPublicKey)(this.program.programId));\n        return config;\n    }\n    async fetchProtectedMakerModeConfig() {\n        const config = await this.program.account.protectedMakerModeConfig.fetch((0, pda_1.getProtectedMakerModeConfigPublicKey)(this.program.programId));\n        return config;\n    }\n    async updateUserProtectedMakerOrders(subAccountId, protectedOrders, authority, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserProtectedMakerOrdersIx(subAccountId, protectedOrders, authority), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserProtectedMakerOrdersIx(subAccountId, protectedOrders, authority) {\n        const ix = await this.program.instruction.updateUserProtectedMakerOrders(subAccountId, protectedOrders, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.authority, subAccountId),\n                authority: this.wallet.publicKey,\n                protectedMakerModeConfig: (0, pda_1.getProtectedMakerModeConfigPublicKey)(this.program.programId),\n            },\n        });\n        return ix;\n    }\n    async getPauseSpotMarketDepositWithdrawIx(spotMarketIndex) {\n        const spotMarket = await this.getSpotMarketAccount(spotMarketIndex);\n        return this.program.instruction.pauseSpotMarketDepositWithdraw({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                keeper: this.wallet.publicKey,\n                spotMarket: spotMarket.pubkey,\n                spotMarketVault: spotMarket.vault,\n            },\n        });\n    }\n    async pauseSpotMarketDepositWithdraw(spotMarketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getPauseSpotMarketDepositWithdrawIx(spotMarketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async updateMmOracleNative(marketIndex, oraclePrice, oracleSequenceId) {\n        const updateMmOracleIx = await this.getUpdateMmOracleNativeIx(marketIndex, oraclePrice, oracleSequenceId);\n        const tx = await this.buildTransaction(updateMmOracleIx, {\n            computeUnits: 5000,\n            computeUnitsPrice: 0,\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateMmOracleNativeIx(marketIndex, oraclePrice, oracleSequenceId) {\n        const discriminatorBuffer = (0, utils_2.createNativeInstructionDiscriminatorBuffer)(0);\n        const data = Buffer.alloc(discriminatorBuffer.length + 16);\n        data.set(discriminatorBuffer, 0);\n        data.set(oraclePrice.toArrayLike(Buffer, 'le', 8), 5); // next 8 bytes\n        data.set(oracleSequenceId.toArrayLike(Buffer, 'le', 8), 13); // next 8 bytes\n        // Build the instruction manually\n        return new web3_js_1.TransactionInstruction({\n            programId: this.program.programId,\n            keys: [\n                {\n                    pubkey: this.getPerpMarketAccount(marketIndex).pubkey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                {\n                    pubkey: this.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n                {\n                    pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                {\n                    pubkey: await this.getStatePublicKey(),\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ],\n            data,\n        });\n    }\n    async updateAmmSpreadAdjustmentNative(marketIndex, ammSpreadAdjustment) {\n        const updateMmOracleIx = await this.getUpdateAmmSpreadAdjustmentNativeIx(marketIndex, ammSpreadAdjustment);\n        const tx = await this.buildTransaction(updateMmOracleIx, {\n            computeUnits: 1000,\n            computeUnitsPrice: 0,\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    getUpdateAmmSpreadAdjustmentNativeIx(marketIndex, ammSpreadAdjustment // i8\n    ) {\n        const discriminatorBuffer = (0, utils_2.createNativeInstructionDiscriminatorBuffer)(1);\n        const data = Buffer.alloc(discriminatorBuffer.length + 4);\n        data.set(discriminatorBuffer, 0);\n        data.writeInt8(ammSpreadAdjustment, 5); // next byte\n        // Build the instruction manually\n        return new web3_js_1.TransactionInstruction({\n            programId: this.program.programId,\n            keys: [\n                {\n                    pubkey: this.getPerpMarketAccount(marketIndex).pubkey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                {\n                    pubkey: this.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n            ],\n            data,\n        });\n    }\n    async getLpPoolAccount(lpPoolId) {\n        return (await this.program.account.lpPool.fetch((0, pda_1.getLpPoolPublicKey)(this.program.programId, lpPoolId)));\n    }\n    async getConstituentTargetBaseAccount(lpPoolId) {\n        return (await this.program.account.constituentTargetBase.fetch((0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, (0, pda_1.getLpPoolPublicKey)(this.program.programId, lpPoolId))));\n    }\n    async getAmmCache() {\n        return (await this.program.account.ammCache.fetch((0, pda_1.getAmmCachePublicKey)(this.program.programId)));\n    }\n    async updateLpConstituentTargetBase(lpPoolId, constituents, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateLpConstituentTargetBaseIx(lpPoolId, constituents), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateLpConstituentTargetBaseIx(lpPoolId, constituents) {\n        const lpPool = (0, pda_1.getLpPoolPublicKey)(this.program.programId, lpPoolId);\n        const ammConstituentMappingPublicKey = (0, pda_1.getAmmConstituentMappingPublicKey)(this.program.programId, lpPool);\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool);\n        const ammCache = (0, pda_1.getAmmCachePublicKey)(this.program.programId);\n        const remainingAccounts = constituents.map((constituent) => {\n            return {\n                isWritable: false,\n                isSigner: false,\n                pubkey: constituent,\n            };\n        });\n        return this.program.instruction.updateLpConstituentTargetBase({\n            accounts: {\n                keeper: this.wallet.publicKey,\n                lpPool,\n                ammConstituentMapping: ammConstituentMappingPublicKey,\n                constituentTargetBase,\n                state: await this.getStatePublicKey(),\n                ammCache,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateLpPoolAum(lpPool, spotMarketIndexOfConstituents, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateLpPoolAumIxs(lpPool, spotMarketIndexOfConstituents), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateLpPoolAumIxs(lpPool, spotMarketIndexOfConstituents) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            readableSpotMarketIndexes: spotMarketIndexOfConstituents,\n        });\n        remainingAccounts.push(...spotMarketIndexOfConstituents.map((index) => {\n            return {\n                pubkey: (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool.pubkey, index),\n                isSigner: false,\n                isWritable: true,\n            };\n        }));\n        return this.program.instruction.updateLpPoolAum({\n            accounts: {\n                keeper: this.wallet.publicKey,\n                lpPool: lpPool.pubkey,\n                state: await this.getStatePublicKey(),\n                constituentTargetBase: (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool.pubkey),\n                ammCache: (0, pda_1.getAmmCachePublicKey)(this.program.programId),\n            },\n            remainingAccounts,\n        });\n    }\n    async updateAmmCache(perpMarketIndexes, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateAmmCacheIx(perpMarketIndexes), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateAmmCacheIx(perpMarketIndexes) {\n        if (perpMarketIndexes.length > 50) {\n            throw new Error('Cant update more than 50 markets at once');\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            readablePerpMarketIndex: perpMarketIndexes,\n        });\n        return this.program.instruction.updateAmmCache({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                keeper: this.wallet.publicKey,\n                ammCache: (0, pda_1.getAmmCachePublicKey)(this.program.programId),\n                quoteMarket: this.getSpotMarketAccount(0).pubkey,\n            },\n            remainingAccounts,\n        });\n    }\n    async updateConstituentOracleInfo(constituent) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateConstituentOracleInfoIx(constituent), undefined), [], this.opts);\n        return txSig;\n    }\n    async getUpdateConstituentOracleInfoIx(constituent) {\n        const spotMarket = this.getSpotMarketAccount(constituent.spotMarketIndex);\n        return this.program.instruction.updateConstituentOracleInfo({\n            accounts: {\n                keeper: this.wallet.publicKey,\n                constituent: constituent.pubkey,\n                state: await this.getStatePublicKey(),\n                oracle: spotMarket.oracle,\n                spotMarket: spotMarket.pubkey,\n            },\n        });\n    }\n    async lpPoolSwap(inMarketIndex, outMarketIndex, inAmount, minOutAmount, lpPool, userAuthority, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getLpPoolSwapIx(inMarketIndex, outMarketIndex, inAmount, minOutAmount, lpPool, userAuthority), txParams), [], this.opts);\n        return txSig;\n    }\n    async getLpPoolSwapIx(inMarketIndex, outMarketIndex, inAmount, minOutAmount, lpPool, userAuthority) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            readableSpotMarketIndexes: [inMarketIndex, outMarketIndex],\n        });\n        const constituentInTokenAccount = (0, pda_1.getConstituentVaultPublicKey)(this.program.programId, lpPool, inMarketIndex);\n        const constituentOutTokenAccount = (0, pda_1.getConstituentVaultPublicKey)(this.program.programId, lpPool, outMarketIndex);\n        const userInTokenAccount = await (0, spl_token_1.getAssociatedTokenAddress)(this.getSpotMarketAccount(inMarketIndex).mint, userAuthority);\n        const userOutTokenAccount = await (0, spl_token_1.getAssociatedTokenAddress)(this.getSpotMarketAccount(outMarketIndex).mint, userAuthority);\n        const inConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool, inMarketIndex);\n        const outConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool, outMarketIndex);\n        const inMarketMint = this.getSpotMarketAccount(inMarketIndex).mint;\n        const outMarketMint = this.getSpotMarketAccount(outMarketIndex).mint;\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool);\n        return this.program.instruction.lpPoolSwap(inMarketIndex, outMarketIndex, inAmount, minOutAmount, {\n            remainingAccounts,\n            accounts: {\n                state: await this.getStatePublicKey(),\n                lpPool,\n                constituentTargetBase,\n                constituentInTokenAccount,\n                constituentOutTokenAccount,\n                constituentCorrelations: (0, pda_1.getConstituentCorrelationsPublicKey)(this.program.programId, lpPool),\n                userInTokenAccount,\n                userOutTokenAccount,\n                inConstituent,\n                outConstituent,\n                inMarketMint,\n                outMarketMint,\n                authority: this.wallet.publicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n        });\n    }\n    async viewLpPoolSwapFees(inMarketIndex, outMarketIndex, inAmount, inTargetWeight, outTargetWeight, lpPool, constituentTargetBase, constituentInTokenAccount, constituentOutTokenAccount, inConstituent, outConstituent, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getViewLpPoolSwapFeesIx(inMarketIndex, outMarketIndex, inAmount, inTargetWeight, outTargetWeight, lpPool, constituentTargetBase, constituentInTokenAccount, constituentOutTokenAccount, inConstituent, outConstituent), txParams), [], this.opts);\n        return txSig;\n    }\n    async getViewLpPoolSwapFeesIx(inMarketIndex, outMarketIndex, inAmount, inTargetWeight, outTargetWeight, lpPool, constituentTargetBase, constituentInTokenAccount, constituentOutTokenAccount, inConstituent, outConstituent) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            readableSpotMarketIndexes: [inMarketIndex, outMarketIndex],\n        });\n        return this.program.instruction.viewLpPoolSwapFees(inMarketIndex, outMarketIndex, inAmount, inTargetWeight, outTargetWeight, {\n            remainingAccounts,\n            accounts: {\n                driftSigner: this.getSignerPublicKey(),\n                state: await this.getStatePublicKey(),\n                lpPool,\n                constituentTargetBase,\n                constituentInTokenAccount,\n                constituentOutTokenAccount,\n                constituentCorrelations: (0, pda_1.getConstituentCorrelationsPublicKey)(this.program.programId, lpPool),\n                inConstituent,\n                outConstituent,\n                authority: this.wallet.publicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n        });\n    }\n    async getCreateLpPoolTokenAccountIx(lpPool) {\n        const lpMint = lpPool.mint;\n        const userLpTokenAccount = await (0, pda_1.getLpPoolTokenTokenAccountPublicKey)(lpMint, this.wallet.publicKey);\n        return this.createAssociatedTokenAccountIdempotentInstruction(userLpTokenAccount, this.wallet.publicKey, this.wallet.publicKey, lpMint);\n    }\n    async createLpPoolTokenAccount(lpPool, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCreateLpPoolTokenAccountIx(lpPool), txParams), [], this.opts);\n        return txSig;\n    }\n    async lpPoolAddLiquidity({ inMarketIndex, inAmount, minMintAmount, lpPool, txParams, }) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getLpPoolAddLiquidityIx({\n            inMarketIndex,\n            inAmount,\n            minMintAmount,\n            lpPool,\n        }), txParams), [], this.opts);\n        return txSig;\n    }\n    async getLpPoolAddLiquidityIx({ inMarketIndex, inAmount, minMintAmount, lpPool, }) {\n        const ixs = [];\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            writableSpotMarketIndexes: [inMarketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(inMarketIndex);\n        const inMarketMint = spotMarket.mint;\n        const isSolMarket = inMarketMint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        let wSolTokenAccount;\n        if (isSolMarket) {\n            const { ixs: wSolIxs, pubkey } = await this.getWrappedSolAccountCreationIxs(inAmount, true);\n            wSolTokenAccount = pubkey;\n            ixs.push(...wSolIxs);\n        }\n        const inConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool.pubkey, inMarketIndex);\n        const userInTokenAccount = wSolTokenAccount !== null && wSolTokenAccount !== void 0 ? wSolTokenAccount : (await this.getAssociatedTokenAccount(inMarketIndex, false));\n        const constituentInTokenAccount = (0, pda_1.getConstituentVaultPublicKey)(this.program.programId, lpPool.pubkey, inMarketIndex);\n        const lpMint = lpPool.mint;\n        const userLpTokenAccount = await (0, pda_1.getLpPoolTokenTokenAccountPublicKey)(lpMint, this.wallet.publicKey);\n        if (!(await this.checkIfAccountExists(userLpTokenAccount))) {\n            ixs.push(this.createAssociatedTokenAccountIdempotentInstruction(userLpTokenAccount, this.wallet.publicKey, this.wallet.publicKey, lpMint));\n        }\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool.pubkey);\n        if (!lpPool.whitelistMint.equals(web3_js_1.PublicKey.default)) {\n            const associatedTokenPublicKey = await (0, spl_token_1.getAssociatedTokenAddress)(lpPool.whitelistMint, this.wallet.publicKey);\n            remainingAccounts.push({\n                pubkey: associatedTokenPublicKey,\n                isWritable: false,\n                isSigner: false,\n            });\n        }\n        const lpPoolAddLiquidityIx = this.program.instruction.lpPoolAddLiquidity(inMarketIndex, inAmount, minMintAmount, {\n            remainingAccounts,\n            accounts: {\n                state: await this.getStatePublicKey(),\n                lpPool: lpPool.pubkey,\n                authority: this.wallet.publicKey,\n                inMarketMint,\n                inConstituent,\n                userInTokenAccount,\n                constituentInTokenAccount,\n                userLpTokenAccount,\n                lpMint,\n                lpPoolTokenVault: (0, pda_1.getLpPoolTokenVaultPublicKey)(this.program.programId, lpPool.pubkey),\n                constituentTargetBase,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n            },\n        });\n        ixs.push(lpPoolAddLiquidityIx);\n        if (isSolMarket && wSolTokenAccount) {\n            ixs.push((0, spl_token_1.createCloseAccountInstruction)(wSolTokenAccount, this.wallet.publicKey, this.wallet.publicKey));\n        }\n        return [...ixs];\n    }\n    async viewLpPoolAddLiquidityFees({ inMarketIndex, inAmount, lpPool, txParams, }) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getViewLpPoolAddLiquidityFeesIx({\n            inMarketIndex,\n            inAmount,\n            lpPool,\n        }), txParams), [], this.opts);\n        return txSig;\n    }\n    async getViewLpPoolAddLiquidityFeesIx({ inMarketIndex, inAmount, lpPool, }) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            readableSpotMarketIndexes: [inMarketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(inMarketIndex);\n        const inMarketMint = spotMarket.mint;\n        const inConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool.pubkey, inMarketIndex);\n        const lpMint = lpPool.mint;\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool.pubkey);\n        return this.program.instruction.viewLpPoolAddLiquidityFees(inMarketIndex, inAmount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                lpPool: lpPool.pubkey,\n                authority: this.wallet.publicKey,\n                inMarketMint,\n                inConstituent,\n                lpMint,\n                constituentTargetBase,\n            },\n            remainingAccounts,\n        });\n    }\n    async lpPoolRemoveLiquidity({ outMarketIndex, lpToBurn, minAmountOut, lpPool, txParams, }) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getLpPoolRemoveLiquidityIx({\n            outMarketIndex,\n            lpToBurn,\n            minAmountOut,\n            lpPool,\n        }), txParams), [], this.opts);\n        return txSig;\n    }\n    async getLpPoolRemoveLiquidityIx({ outMarketIndex, lpToBurn, minAmountOut, lpPool, }) {\n        const ixs = [];\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            writableSpotMarketIndexes: [outMarketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(outMarketIndex);\n        const outMarketMint = spotMarket.mint;\n        const outConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool.pubkey, outMarketIndex);\n        if (outMarketMint.equals(spotMarkets_1.WRAPPED_SOL_MINT)) {\n            ixs.push((0, spl_token_1.createAssociatedTokenAccountIdempotentInstruction)(this.wallet.publicKey, await this.getAssociatedTokenAccount(outMarketIndex, false), this.wallet.publicKey, spotMarkets_1.WRAPPED_SOL_MINT));\n        }\n        const userOutTokenAccount = await this.getAssociatedTokenAccount(outMarketIndex, false);\n        const constituentOutTokenAccount = (0, pda_1.getConstituentVaultPublicKey)(this.program.programId, lpPool.pubkey, outMarketIndex);\n        const lpMint = lpPool.mint;\n        const userLpTokenAccount = await (0, spl_token_1.getAssociatedTokenAddress)(lpMint, this.wallet.publicKey, true);\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool.pubkey);\n        ixs.push(this.program.instruction.lpPoolRemoveLiquidity(outMarketIndex, lpToBurn, minAmountOut, {\n            remainingAccounts,\n            accounts: {\n                driftSigner: this.getSignerPublicKey(),\n                state: await this.getStatePublicKey(),\n                lpPool: lpPool.pubkey,\n                authority: this.wallet.publicKey,\n                outMarketMint,\n                outConstituent,\n                userOutTokenAccount,\n                constituentOutTokenAccount,\n                userLpTokenAccount,\n                spotMarketTokenAccount: spotMarket.vault,\n                lpMint,\n                lpPoolTokenVault: (0, pda_1.getLpPoolTokenVaultPublicKey)(this.program.programId, lpPool.pubkey),\n                constituentTargetBase,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                ammCache: (0, pda_1.getAmmCachePublicKey)(this.program.programId),\n            },\n        }));\n        return ixs;\n    }\n    async viewLpPoolRemoveLiquidityFees({ outMarketIndex, lpToBurn, lpPool, txParams, }) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getViewLpPoolRemoveLiquidityFeesIx({\n            outMarketIndex,\n            lpToBurn,\n            lpPool,\n        }), txParams), [], this.opts);\n        return txSig;\n    }\n    async getViewLpPoolRemoveLiquidityFeesIx({ outMarketIndex, lpToBurn, lpPool, }) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [],\n            writableSpotMarketIndexes: [outMarketIndex],\n        });\n        const spotMarket = this.getSpotMarketAccount(outMarketIndex);\n        const outMarketMint = spotMarket.mint;\n        const outConstituent = (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool.pubkey, outMarketIndex);\n        const lpMint = lpPool.mint;\n        const constituentTargetBase = (0, pda_1.getConstituentTargetBasePublicKey)(this.program.programId, lpPool.pubkey);\n        return this.program.instruction.viewLpPoolRemoveLiquidityFees(outMarketIndex, lpToBurn, {\n            remainingAccounts,\n            accounts: {\n                state: await this.getStatePublicKey(),\n                lpPool: lpPool.pubkey,\n                authority: this.wallet.publicKey,\n                outMarketMint,\n                outConstituent,\n                lpMint,\n                constituentTargetBase,\n            },\n        });\n    }\n    async getAllLpPoolAddLiquidityIxs({ inMarketIndex, inAmount, minMintAmount, lpPool, }, constituentMap, includeUpdateConstituentOracleInfo = true, view = false) {\n        const ixs = [];\n        ixs.push(...(await this.getAllUpdateLpPoolAumIxs(lpPool, constituentMap, includeUpdateConstituentOracleInfo)));\n        if (view) {\n            ixs.push(await this.getViewLpPoolAddLiquidityFeesIx({\n                inMarketIndex,\n                inAmount,\n                lpPool,\n            }));\n        }\n        else {\n            ixs.push(...(await this.getLpPoolAddLiquidityIx({\n                inMarketIndex,\n                inAmount,\n                minMintAmount,\n                lpPool,\n            })));\n        }\n        return ixs;\n    }\n    async getAllLpPoolRemoveLiquidityIxs({ outMarketIndex, lpToBurn, minAmountOut, lpPool, }, constituentMap, includeUpdateConstituentOracleInfo = true, view = false) {\n        const ixs = [];\n        ixs.push(...(await this.getAllSettlePerpToLpPoolIxs(lpPool.lpPoolId, this.getPerpMarketAccounts()\n            .filter((marketAccount) => marketAccount.lpStatus > 0)\n            .map((marketAccount) => marketAccount.marketIndex))));\n        ixs.push(...(await this.getAllUpdateLpPoolAumIxs(lpPool, constituentMap, includeUpdateConstituentOracleInfo)));\n        if (view) {\n            ixs.push(await this.getViewLpPoolRemoveLiquidityFeesIx({\n                outMarketIndex,\n                lpToBurn,\n                lpPool,\n            }));\n        }\n        else {\n            ixs.push(...(await this.getLpPoolRemoveLiquidityIx({\n                outMarketIndex,\n                lpToBurn,\n                minAmountOut,\n                lpPool,\n            })));\n        }\n        return ixs;\n    }\n    async getAllUpdateLpPoolAumIxs(lpPool, constituentMap, includeUpdateConstituentOracleInfo = true) {\n        const ixs = [];\n        const constituents = Array.from(constituentMap.values());\n        if (includeUpdateConstituentOracleInfo) {\n            for (const constituent of constituents) {\n                ixs.push(await this.getUpdateConstituentOracleInfoIx(constituent));\n            }\n        }\n        const spotMarketIndexes = constituents.map((constituent) => constituent.spotMarketIndex);\n        ixs.push(await this.getUpdateLpPoolAumIxs(lpPool, spotMarketIndexes));\n        return ixs;\n    }\n    async getAllUpdateConstituentTargetBaseIxs(perpMarketIndexes, lpPool, constituentMap, includeUpdateConstituentOracleInfo = true) {\n        const ixs = [];\n        ixs.push(await this.getUpdateAmmCacheIx(perpMarketIndexes));\n        const constituents = Array.from(constituentMap.values());\n        if (includeUpdateConstituentOracleInfo) {\n            for (const constituent of constituents) {\n                ixs.push(await this.getUpdateConstituentOracleInfoIx(constituent));\n            }\n        }\n        ixs.push(await this.getUpdateLpConstituentTargetBaseIx(lpPool.lpPoolId, Array.from(constituentMap.values()).map((constituent) => constituent.pubkey)));\n        ixs.push(...(await this.getAllUpdateLpPoolAumIxs(lpPool, constituentMap, false)));\n        return ixs;\n    }\n    async getAllLpPoolSwapIxs(lpPool, constituentMap, inMarketIndex, outMarketIndex, inAmount, minOutAmount, userAuthority) {\n        const ixs = [];\n        ixs.push(...(await this.getAllUpdateLpPoolAumIxs(lpPool, constituentMap)));\n        ixs.push(await this.getLpPoolSwapIx(inMarketIndex, outMarketIndex, inAmount, minOutAmount, lpPool.pubkey, userAuthority));\n        return ixs;\n    }\n    async settlePerpToLpPool(lpPoolId, perpMarketIndexes) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettlePerpToLpPoolIx(lpPoolId, perpMarketIndexes), undefined), [], this.opts);\n        return txSig;\n    }\n    async getSettlePerpToLpPoolIx(lpPoolId, perpMarketIndexes) {\n        const remainingAccounts = [];\n        remainingAccounts.push(...perpMarketIndexes.map((index) => {\n            return {\n                pubkey: this.getPerpMarketAccount(index).pubkey,\n                isSigner: false,\n                isWritable: true,\n            };\n        }));\n        const quoteSpotMarketAccount = this.getQuoteSpotMarketAccount();\n        const lpPool = (0, pda_1.getLpPoolPublicKey)(this.program.programId, lpPoolId);\n        return this.program.instruction.settlePerpToLpPool({\n            accounts: {\n                driftSigner: this.getSignerPublicKey(),\n                state: await this.getStatePublicKey(),\n                keeper: this.wallet.publicKey,\n                ammCache: (0, pda_1.getAmmCachePublicKey)(this.program.programId),\n                quoteMarket: quoteSpotMarketAccount.pubkey,\n                constituent: (0, pda_1.getConstituentPublicKey)(this.program.programId, lpPool, 0),\n                constituentQuoteTokenAccount: (0, pda_1.getConstituentVaultPublicKey)(this.program.programId, lpPool, 0),\n                lpPool,\n                quoteTokenVault: quoteSpotMarketAccount.vault,\n                tokenProgram: this.getTokenProgramForSpotMarket(quoteSpotMarketAccount),\n            },\n            remainingAccounts,\n        });\n    }\n    async getAllSettlePerpToLpPoolIxs(lpPoolId, marketIndexes) {\n        const ixs = [];\n        ixs.push(await this.getUpdateAmmCacheIx(marketIndexes));\n        ixs.push(await this.getSettlePerpToLpPoolIx(lpPoolId, marketIndexes));\n        return ixs;\n    }\n    /**\n     * Below here are the transaction sending functions\n     */\n    handleSignedTransaction(signedTxs) {\n        if (this.enableMetricsEvents && this.metricsEventEmitter) {\n            this.metricsEventEmitter.emit('txSigned', signedTxs);\n        }\n    }\n    handlePreSignedTransaction() {\n        if (this.enableMetricsEvents && this.metricsEventEmitter) {\n            this.metricsEventEmitter.emit('preTxSigned');\n        }\n    }\n    isVersionedTransaction(tx) {\n        return (0, utils_2.isVersionedTransaction)(tx);\n    }\n    /**\n     * Send a transaction.\n     *\n     * @param tx\n     * @param additionalSigners\n     * @param opts :: Will fallback to DriftClient's opts if not provided\n     * @param preSigned\n     * @returns\n     */\n    sendTransaction(tx, additionalSigners, opts, preSigned) {\n        const isVersionedTx = this.isVersionedTransaction(tx);\n        if (isVersionedTx) {\n            return this.txSender.sendVersionedTransaction(tx, additionalSigners, opts !== null && opts !== void 0 ? opts : this.opts, preSigned);\n        }\n        else {\n            return this.txSender.send(tx, additionalSigners, opts !== null && opts !== void 0 ? opts : this.opts, preSigned);\n        }\n    }\n    async buildTransaction(instructions, txParams, txVersion, lookupTables, forceVersionedTransaction, recentBlockhash, optionalIxs) {\n        return this.txHandler.buildTransaction({\n            instructions,\n            txVersion: txVersion !== null && txVersion !== void 0 ? txVersion : this.txVersion,\n            txParams: txParams !== null && txParams !== void 0 ? txParams : this.txParams,\n            connection: this.connection,\n            preFlightCommitment: this.opts.preflightCommitment,\n            fetchAllMarketLookupTableAccounts: this.fetchAllLookupTableAccounts.bind(this),\n            lookupTables,\n            forceVersionedTransaction,\n            recentBlockhash,\n            optionalIxs,\n        });\n    }\n    async buildBulkTransactions(instructions, txParams, txVersion, lookupTables, forceVersionedTransaction) {\n        return this.txHandler.buildBulkTransactions({\n            instructions,\n            txVersion: txVersion !== null && txVersion !== void 0 ? txVersion : this.txVersion,\n            txParams: txParams !== null && txParams !== void 0 ? txParams : this.txParams,\n            connection: this.connection,\n            preFlightCommitment: this.opts.preflightCommitment,\n            fetchAllMarketLookupTableAccounts: this.fetchAllLookupTableAccounts.bind(this),\n            lookupTables,\n            forceVersionedTransaction,\n        });\n    }\n    async buildTransactionsMap(instructionsMap, txParams, txVersion, lookupTables, forceVersionedTransaction) {\n        return this.txHandler.buildTransactionsMap({\n            instructionsMap,\n            txVersion: txVersion !== null && txVersion !== void 0 ? txVersion : this.txVersion,\n            txParams: txParams !== null && txParams !== void 0 ? txParams : this.txParams,\n            connection: this.connection,\n            preFlightCommitment: this.opts.preflightCommitment,\n            fetchAllMarketLookupTableAccounts: this.fetchAllLookupTableAccounts.bind(this),\n            lookupTables,\n            forceVersionedTransaction,\n        });\n    }\n    async buildAndSignTransactionsMap(instructionsMap, txParams, txVersion, lookupTables, forceVersionedTransaction) {\n        return this.txHandler.buildAndSignTransactionMap({\n            instructionsMap,\n            txVersion: txVersion !== null && txVersion !== void 0 ? txVersion : this.txVersion,\n            txParams: txParams !== null && txParams !== void 0 ? txParams : this.txParams,\n            connection: this.connection,\n            preFlightCommitment: this.opts.preflightCommitment,\n            fetchAllMarketLookupTableAccounts: this.fetchAllLookupTableAccounts.bind(this),\n            lookupTables,\n            forceVersionedTransaction,\n        });\n    }\n}\nexports.DriftClient = DriftClient;\n"],"names":[],"mappings":"AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,qBAAqB,4DAAS,yDAAK,kBAAkB,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC;IACzF,OAAO,cAAc,CAAC,GAAG,WAAW;QAAE,YAAY;QAAM,OAAO;IAAE;AACrE,IAAK,SAAS,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,UAAU,GAAG;AACnB,CAAC;AACD,IAAI,eAAe,4DAAS,yDAAK,YAAY,IAAK,SAAU,GAAG;IAC3D,IAAI,OAAO,IAAI,UAAU,EAAE,OAAO;IAClC,IAAI,SAAS,CAAC;IACd,IAAI,OAAO,MAAM;QAAA,IAAK,IAAI,KAAK,IAAK,IAAI,MAAM,aAAa,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,IAAI,gBAAgB,QAAQ,KAAK;IAAE;IACxI,mBAAmB,QAAQ;IAC3B,OAAO;AACX;AACA,IAAI,kBAAkB,4DAAS,yDAAK,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,WAAW,GAAG,KAAK;AAC3B,MAAM,SAAS;AACf,MAAM;AACN,MAAM,SAAS;AACf,MAAM;AACN,MAAM;AACN,MAAM,eAAe;AACrB,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM,8BAA8B;AACpC,MAAM;AACN,MAAM;AACN,MAAM,cAAc;AACpB,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN;;;CAGC,GACD,MAAM;IACF,IAAI,eAAe;QACf,OAAO,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,iBAAiB,CAAC,YAAY;IACpE;IACA,IAAI,aAAa,GAAG,EAAE;QAClB,IAAI,CAAC,aAAa,GAAG;IACzB;IACA,YAAY,MAAM,CAAE;QAChB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;QAC5N,IAAI,CAAC,KAAK,GAAG,IAAI;QACjB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,uBAAuB,GAAG,IAAI;QACnC,IAAI,CAAC,uBAAuB,GAAG,IAAI;QACnC,IAAI,CAAC,4BAA4B,GAAG,IAAI;QACxC,IAAI,CAAC,4BAA4B,GAAG,IAAI;QACxC,IAAI,CAAC,UAAU,GAAG,OAAO,UAAU;QACnC,IAAI,CAAC,MAAM,GAAG,OAAO,MAAM;QAC3B,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,OAAO,GAAG,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC9D,IAAI,CAAC,IAAI,GAAG,OAAO,IAAI,IAAI;YACvB,GAAG,SAAS,yBAAyB;QACzC;QACA,IAAI,CAAC,iBAAiB,GAAG,CAAC,KAAK,OAAO,iBAAiB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC1F,IAAI,CAAC,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,UAAU,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,UAAU,EAAE;YAC7H,qLAAqL;YACrL,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,OAAO,UAAU,CAAC,UAAU;YACnD,IAAI,CAAC,IAAI,CAAC,mBAAmB,GAAG,OAAO,UAAU,CAAC,UAAU;QAChE;QACA,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,cAAc,CAAC,OAAO,UAAU,EAC7D,aAAa;QACb,OAAO,MAAM,EAAE,IAAI,CAAC,IAAI;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,SAAS,OAAO,CAAC,aAAa,OAAO,EAAE,CAAC,KAAK,OAAO,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,CAAC,SAAS,gBAAgB,GAAG,IAAI,CAAC,QAAQ,EAAE,OAAO,KAAK;QAClM,IAAI,CAAC,SAAS,GAAG,CAAC,KAAK,OAAO,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QAC/F,IAAI,CAAC,kBAAkB,GAAG,CAAC,KAAK,OAAO,kBAAkB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC5F,IAAI,CAAC,aAAa,GAAG,CAAC,KAAK,OAAO,aAAa,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAClF,IAAI,CAAC,SAAS,GACV,CAAC,KAAK,OAAO,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,wBAAwB,CAAC,OAAO,MAAM;QACxG,IAAI,CAAC,QAAQ,GAAG;YACZ,cAAc,CAAC,KAAK,CAAC,KAAK,OAAO,QAAQ,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;YAClI,mBAAmB,CAAC,KAAK,CAAC,KAAK,OAAO,QAAQ,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,iBAAiB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAChJ;QACA,IAAI,CAAC,SAAS,GACV,CAAC,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,YAAY,SAAS,CAAC;YAC/H,YAAY,IAAI,CAAC,UAAU;YAC3B,aAAa;YACb,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM;YAC5B,qBAAqB,IAAI,CAAC,IAAI;YAC9B,MAAM;gBACF,4CAA4C,OAAO,mBAAmB;gBACtE,YAAY,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI;gBAClD,aAAa,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI;YAC1D;YACA,QAAQ,OAAO,eAAe;QAClC;QACJ,IAAI,OAAO,gBAAgB,IAAI,OAAO,aAAa,EAAE;YACjD,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,OAAO,sBAAsB,IAAI,OAAO,aAAa,EAAE;YACvD,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,OAAO,sBAAsB,IAAI,OAAO,gBAAgB,EAAE;YAC1D,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,CAAC,sBAAsB,GAAG,OAAO,sBAAsB,GACrD,OAAO,sBAAsB,GAC7B,OAAO,aAAa,GAChB,IAAI,IAAI;YAAC;gBAAC,IAAI,CAAC,SAAS,CAAC,QAAQ;gBAAI,OAAO,aAAa;aAAC;SAAC,IAC3D,IAAI;QACd,IAAI,CAAC,gBAAgB,GAAG,CAAC,KAAK,OAAO,gBAAgB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QACxF,IAAI,CAAC,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,WAAW;YAChG,IAAI,CAAC,6BAA6B,GAAG;gBACjC,MAAM;gBACN,eAAe,OAAO,mBAAmB,CAAC,aAAa;YAC3D;YACA,IAAI,CAAC,kCAAkC,GAAG;gBACtC,MAAM;gBACN,eAAe,OAAO,mBAAmB,CAAC,aAAa;YAC3D;QACJ,OACK,IAAI,CAAC,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,QAAQ;YAClG,IAAI,CAAC,6BAA6B,GAAG;gBACjC,MAAM;gBACN,gBAAgB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc;gBACxG,kBAAkB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,gBAAgB;gBAC5G,aAAa,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW;gBAClG,gCAAgC,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,8BAA8B;YAC5I;YACA,IAAI,CAAC,kCAAkC,GAAG;gBACtC,MAAM;gBACN,aAAa,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW;gBAClG,gBAAgB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc;gBACxG,kBAAkB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,gBAAgB;YAChH;QACJ,OACK;YACD,IAAI,CAAC,6BAA6B,GAAG;gBACjC,MAAM;gBACN,gBAAgB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc;gBACxG,kBAAkB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,gBAAgB;gBAC5G,YAAY,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,UAAU;gBAChG,8BAA8B,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,4BAA4B;YACxI;YACA,IAAI,CAAC,kCAAkC,GAAG;gBACtC,MAAM;gBACN,gBAAgB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc;gBACxG,kBAAkB,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,gBAAgB;gBAC5G,YAAY,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,UAAU;YACpG;QACJ;QACA,IAAI,OAAO,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,SAAS,CAAC;gBACvC,aAAa,IAAI;gBACjB,2BAA2B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS;gBACzG,qBAAqB,IAAI,CAAC,6BAA6B;YAC3D;QACJ;QACA,IAAI,CAAC,iBAAiB,GAAG,OAAO,iBAAiB;QACjD,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACzB,IAAI,CAAC,iBAAiB,GAAG,IAAI,UAAU,SAAS,CAAC,SAAS,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,mBAAmB;QACnG;QACA,IAAI,CAAC,kBAAkB,GAAG,OAAO,kBAAkB;QACnD,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC1B,IAAI,CAAC,kBAAkB,GAAG,SAAS,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC,YAAc,IAAI,UAAU,SAAS,CAAC;QACzH;QACA,MAAM,wBAAwB,OAAO,qBAAqB,IAAI,QAAQ,qBAAqB,CAAC,WAAW;QACvG,MAAM,+BAA+B,OAAO,iBAAiB,KAAK,aAC9D,OAAO,iBAAiB,KAAK,aAC7B,OAAO,WAAW,KAAK;QAC3B,IAAI,CAAC,CAAC,KAAK,OAAO,mBAAmB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,WAAW;YAChG,IAAI,CAAC,iBAAiB,GAAG,IAAI,sCAAsC,mCAAmC,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,mBAAmB,CAAC,aAAa,EAAE,CAAC,KAAK,OAAO,iBAAiB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,EAAE,EAAE,CAAC,KAAK,OAAO,iBAAiB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,EAAE,EAAE,CAAC,KAAK,OAAO,WAAW,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,EAAE,EAAE,8BAA8B;QAC1Y,OACK,IAAI,CAAC,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,MAAM,QAAQ;YACrG,MAAM,yBAAyB,CAAC,MAAM,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,4BAA4B,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,mCAAmC,gCAAgC;YACvP,IAAI,CAAC,iBAAiB,GAAG,IAAI,uBAAuB,OAAO,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,OAAO,iBAAiB,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC,MAAM,OAAO,iBAAiB,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC,MAAM,OAAO,WAAW,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,8BAA8B,uBAAuB;gBAC7W,gBAAgB,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,cAAc;gBAC3G,kBAAkB,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,gBAAgB;YACnH;QACJ,OACK;YACD,MAAM,yBAAyB,CAAC,MAAM,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,4BAA4B,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,wCAAwC,qCAAqC;YACjQ,IAAI,CAAC,iBAAiB,GAAG,IAAI,uBAAuB,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,OAAO,iBAAiB,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC,MAAM,OAAO,iBAAiB,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,CAAC,MAAM,OAAO,WAAW,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,EAAE,EAAE,8BAA8B,uBAAuB;gBACrU,gBAAgB,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,cAAc;gBAC3G,kBAAkB,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,gBAAgB;YACnH,GAAG,CAAC,MAAM,OAAO,mBAAmB,MAAM,QAAQ,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,UAAU;QAC9F;QACA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY;QACvD,IAAI,CAAC,mBAAmB,GAAG,IAAI,SAAS,YAAY;QACpD,IAAI,OAAO,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,GAAG;QAC/B;QACA,IAAI,CAAC,QAAQ,GACT,CAAC,MAAM,OAAO,QAAQ,MAAM,QAAQ,QAAQ,KAAK,IAAI,MAAM,IAAI,gBAAgB,aAAa,CAAC;YACzF,YAAY,IAAI,CAAC,UAAU;YAC3B,QAAQ,IAAI,CAAC,MAAM;YACnB,MAAM,IAAI,CAAC,IAAI;YACf,WAAW,IAAI,CAAC,SAAS;QAC7B;QACJ,IAAI,CAAC,oBAAoB,GAAG,SAAS,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,gBAAgB;IAC3E;IACA,cAAc,YAAY,EAAE,SAAS,EAAE;QACnC,OAAO,GAAG,aAAa,CAAC,EAAE,UAAU,QAAQ,IAAI;IACpD;IACA,WAAW,YAAY,EAAE,yBAAyB,EAAE,SAAS,EAAE;QAC3D,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS,EAAE;QACrK,OAAO,IAAI,OAAO,IAAI,CAAC;YACnB,aAAa,IAAI;YACjB;YACA,qBAAqB;QACzB;IACJ;IACA,MAAM,YAAY;QACd,IAAI,oBAAoB;YAAC,IAAI,CAAC,sBAAsB;SAAG,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS;QAC/F,IAAI,IAAI,CAAC,SAAS,KAAK,WAAW;YAC9B,oBAAoB,kBAAkB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS;QACzE;QACA,IAAI,CAAC,YAAY,GAAG,CAAC,MAAM,QAAQ,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC,SAAS,cAAgB,WAAW;QACvG,OAAO,IAAI,CAAC,YAAY;IAC5B;IACA,iBAAiB;QACb,OAAO;eAAI,IAAI,CAAC,KAAK,CAAC,MAAM;SAAG,CAAC,GAAG,CAAC,CAAC,OAAS,KAAK,SAAS;IAChE;IACA;;KAEC,GACD,MAAM,gBAAgB;QAClB,IAAI,WAAW;eAAI,IAAI,CAAC,KAAK,CAAC,MAAM;SAAG,CAClC,GAAG,CAAC,CAAC,OAAS,KAAK,aAAa,IAChC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK;QACxC,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,WAAW,SAAS,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa;QAC3D;QACA,MAAM,QAAQ,GAAG,CAAC;IACtB;IACA,MAAM,cAAc;QAChB,IAAI,sBAAsB,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,WAAW;QAC3F,IAAI,IAAI,CAAC,SAAS,KAAK,WAAW;YAC9B,sBAAsB,oBAAoB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW;QAC/E;QACA,MAAM,QAAQ,GAAG,CAAC;QAClB,IAAI,CAAC,YAAY,GAAG;IACxB;IACA,mBAAmB;QACf,OAAO;eAAI,IAAI,CAAC,KAAK,CAAC,MAAM;SAAG,CAAC,GAAG,CAAC,CAAC,OAAS,KAAK,WAAW;IAClE;IACA,MAAM,oBAAoB;QACtB,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,OAAO,IAAI,CAAC,cAAc;QAC9B;QACA,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,GAAG,MAAM,6BAA6B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;QAC3F,OAAO,IAAI,CAAC,cAAc;IAC9B;IACA,qBAAqB;QACjB,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,OAAO,IAAI,CAAC,eAAe;QAC/B;QACA,IAAI,CAAC,eAAe,GAAG,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;QAChF,OAAO,IAAI,CAAC,eAAe;IAC/B;IACA,kBAAkB;QACd,OAAO,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,GAAG,IAAI;IAC/D;IACA;;KAEC,GACD,MAAM,uBAAuB;QACzB,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK;QAClC,OAAO,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,GAAG,IAAI;IAC/D;IACA,qBAAqB,WAAW,EAAE;QAC9B,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI;IAC1H;IACA;;;KAGC,GACD,MAAM,0BAA0B,WAAW,EAAE;QACzC,IAAI,IAAI;QACR,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK;QAClC,IAAI,OAAO,CAAC,KAAK,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI;QAC1H,IAAI,IAAI;QACR,MAAO,SAAS,aAAa,IAAI,GAAI;YACjC,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK;YAClC,OAAO,CAAC,KAAK,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI;YACtH;QACJ;QACA,OAAO;IACX;IACA,wBAAwB;QACpB,OAAO,IAAI,CAAC,iBAAiB,CACxB,yBAAyB,GACzB,MAAM,CAAC,CAAC,QAAU,UAAU,WAC5B,GAAG,CAAC,CAAC,QAAU,MAAM,IAAI;IAClC;IACA,qBAAqB,WAAW,EAAE;QAC9B,OAAO,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,CAAC,aAAa,IAAI;IAC/E;IACA;;;KAGC,GACD,MAAM,0BAA0B,WAAW,EAAE;QACzC,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK;QAClC,OAAO,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,CAAC,aAAa,IAAI;IAC/E;IACA,wBAAwB;QACpB,OAAO,IAAI,CAAC,iBAAiB,CACxB,6BAA6B,GAC7B,MAAM,CAAC,CAAC,QAAU,UAAU,WAC5B,GAAG,CAAC,CAAC,QAAU,MAAM,IAAI;IAClC;IACA,4BAA4B;QACxB,OAAO,IAAI,CAAC,iBAAiB,CAAC,2BAA2B,CAAC,mBAAmB,uBAAuB,EAAE,IAAI;IAC9G;IACA,0BAA0B,eAAe,EAAE,YAAY,EAAE;QACrD,OAAO,IAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,CAAC,GAAG,WAAW,WAAW,EAAE,iBAAiB;IACzG;IACA,MAAM,4BAA4B,WAAW,EAAE;QAC3C,MAAM,UAAU,MAAM,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5F,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAwB,CAAC,KAAK,CAAC;IACtE;IACA,MAAM,+BAA+B;QACjC,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAwB,CAAC,GAAG;QACxE,OAAO,SAAS,GAAG,CAAC,CAAC,UAAY,QAAQ,OAAO;IACpD;IACA,MAAM,8BAA8B,aAAa,EAAE;QAC/C,MAAM,UAAU,MAAM,CAAC,GAAG,MAAM,oCAAoC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC9F,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,0BAA0B,CAAC,KAAK,CAAC;IACxE;IACA,MAAM,iCAAiC;QACnC,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,0BAA0B,CAAC,GAAG;QAC1E,OAAO,SAAS,GAAG,CAAC,CAAC,UAAY,QAAQ,OAAO;IACpD;IACA,MAAM,+BAA+B,cAAc,EAAE;QACjD,MAAM,UAAU,CAAC,GAAG,MAAM,uCAAuC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC3F,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,2BAA2B,CAAC,KAAK,CAAC;IACzE;IACA,MAAM,kCAAkC;QACpC,MAAM,WAAW,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,2BAA2B,CAAC,GAAG;QAC3E,OAAO,SAAS,GAAG,CAAC,CAAC,UAAY,QAAQ,OAAO;IACpD;IACA,kDAAkD,GAClD,MAAM,gCAAgC;QAClC,IAAI,IAAI,CAAC,kBAAkB,EACvB,OAAO,IAAI,CAAC,kBAAkB;QAClC,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACzB,QAAQ,GAAG,CAAC;YACZ;QACJ;QACA,MAAM,qBAAqB,CAAC,MAAM,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,KAAK;QACtG,IAAI,CAAC,kBAAkB,GAAG;QAC1B,OAAO;IACX;IACA,MAAM,8BAA8B;QAChC,IAAI,IAAI,CAAC,mBAAmB,EACxB,OAAO,IAAI,CAAC,mBAAmB;QACnC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YAC1B,QAAQ,GAAG,CAAC;YACZ;QACJ;QACA,MAAM,4BAA4B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,cAAgB,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC;QACvI,MAAM,sBAAsB,0BAA0B,GAAG,CAAC,CAAC,SAAW,OAAO,KAAK;QAClF,IAAI,CAAC,mBAAmB,GAAG;QAC3B,OAAO;IACX;IACA,yBAAyB,SAAS,EAAE;QAChC,IAAI,IAAI,IAAI;QACZ,IAAI,CAAC,CAAC,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,4BAA4B,GAC9F,OAAO,GAAG,gGAAgG;QAC9G,MAAM,8BAA8B,CAAC,CAAC,KAAK,UAAU,4BAA4B,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,KAC7H,CAAC,CAAC,KAAK,CAAC,KAAK,UAAU,4BAA4B,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,CAAC,IAAI;QAC7I,OAAO,8BAA8B,IAAI;IAC7C;IACA;;;;;;KAMC,GACD,MAAM,aAAa,SAAS,EAAE,aAAa,EAAE,kBAAkB,EAAE,gBAAgB,EAAE,sBAAsB,EAAE;QACvG,IAAI;QACJ,MAAM,cAAc,IAAI,SAAS,cAAc,CAAC,IAAI,CAAC,UAAU,EAC/D,aAAa;QACb,WAAW,IAAI,CAAC,IAAI;QACpB,MAAM,aAAa,IAAI,SAAS,OAAO,CAAC,aAAa,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACtF,IAAI,CAAC,aAAa,GAAG;QACrB,uDAAuD;QACvD,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG;QACvB,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,SAAS,GAAG,UAAU,SAAS;QACpC,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,yBAAyB,GAAG;QACjC,IAAI,CAAC,gBAAgB,GAAG,qBAAqB,QAAQ,qBAAqB,KAAK,IAAI,mBAAmB;QACtG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM;QAC1D,IAAI,oBAAoB,eAAe;YACnC,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,0BAA0B,eAAe;YACzC,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,0BAA0B,kBAAkB;YAC5C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,CAAC,sBAAsB,GAAG,yBACxB,yBACA,gBACI,IAAI,IAAI;YAAC;gBAAC,IAAI,CAAC,SAAS,CAAC,QAAQ;gBAAI;aAAc;SAAC,IACpD,IAAI;QACd,4BAA4B,GAC5B,IAAI,CAAC,KAAK,IAAI,CAAC,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,YAAY,EAAE;YAC5E,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW;QACpC;QACA,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,SAAS,CAAC;YACvC,aAAa,IAAI;YACjB,2BAA2B,IAAI,CAAC,4BAA4B;YAC5D,qBAAqB,IAAI,CAAC,kCAAkC;QAChE;QACA,MAAM,uBAAuB;YAAC,IAAI,CAAC,SAAS,CAAC,SAAS;SAAG;QACzD,IAAI,UAAU;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,MAAM,0BAA0B;gBAC5B,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,gBAAgB;gBACvC,IAAI,CAAC,KAAK,CAAC,KAAK;gBAChB,UAAU,MAAM,IAAI,CAAC,sBAAsB;YAC/C;YACA,qBAAqB,IAAI,CAAC;QAC9B;QACA,MAAM,QAAQ,GAAG,CAAC;QAClB,OAAO;IACX;IACA;;;;;KAKC,GACD,MAAM,eAAe,gBAAgB,EAAE;QACnC,IAAI;QACJ,IAAI,CAAC,aAAa,GAAG;QACrB,uDAAuD;QACvD,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,yBAAyB,GAAG;QACjC,IAAI,CAAC,gBAAgB,GAAG;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM;QAC1D,IAAI,CAAC,sBAAsB,GAAG,IAAI;QAClC,4BAA4B,GAC5B,IAAI,CAAC,KAAK,IAAI,CAAC,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,YAAY,EAAE;YAC5E,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW;QACpC;QACA,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,SAAS,CAAC;YACvC,aAAa,IAAI;YACjB,2BAA2B,IAAI,CAAC,4BAA4B;YAC5D,qBAAqB,IAAI,CAAC,kCAAkC;QAChE;QACA,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS;QAC9B,IAAI,UAAU;QACd,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,MAAM,QAAQ,GAAG,CAAC,IAAI,CAAC,gBAAgB;YACvC,IAAI,CAAC,KAAK,CAAC,KAAK;YAChB,UAAU,MAAM,IAAI,CAAC,sBAAsB,CAAC;QAChD;QACA,OAAO;IACX;IACA,MAAM,iBAAiB,YAAY,EAAE,SAAS,EAAE;QAC5C,IAAI;QACJ,MAAM,mBAAmB,aAAa,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,MAAM,CAAC,UAAU;QACvH,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,SAAS,GAAG,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;QACxF,IAAI,CAAC,yBAAyB,GAAG,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS;QAC/G,qIAAqI,GACrI,IAAI,oBAAoB,IAAI,CAAC,SAAS,EAAE;YACpC,IAAI,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE;gBAC7B,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW;YACpC;YACA,IAAI,CAAC,SAAS,GAAG,IAAI,YAAY,SAAS,CAAC;gBACvC,aAAa,IAAI;gBACjB,2BAA2B,IAAI,CAAC,yBAAyB;gBACzD,qBAAqB,IAAI,CAAC,kCAAkC;YAChE;YACA,IAAI,CAAC,SAAS,CAAC,SAAS;QAC5B;IACJ;IACA,MAAM,QAAQ,YAAY,EAAE,SAAS,EAAE,WAAW,EAAE;QAChD,YAAY,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;QACnF,MAAM,UAAU,IAAI,CAAC,aAAa,CAAC,cAAc;QACjD,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,YAAY,EAAE;YACjE,OAAO;QACX;QACA,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,IAAI,CAAC,6BAA6B,EAAE;QAC/E,MAAM,SAAS,MAAM,KAAK,SAAS,CAAC;QACpC,IAAI,QAAQ;YACR,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS;YACxB,OAAO;QACX,OACK;YACD,OAAO;QACX;IACJ;IACA;;KAEC,GACD,MAAM,uBAAuB,SAAS,EAAE;QACpC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;QAC5B,yEAAyE;QACzE,IAAI,IAAI,CAAC,aAAa,EAClB,OAAO;QACX,IAAI,SAAS;QACb,IAAI,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,sBAAsB,CAAC,IAAI,GAAG,GAAG;YACrE,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,OAAO,OAAO;gBAC9C,KAAK,MAAM,gBAAgB,MAAO;oBAC9B,SACI,UAAW,MAAM,IAAI,CAAC,OAAO,CAAC,cAAc,IAAI,UAAU,SAAS,CAAC;gBAC5E;YACJ;YACA,IAAI,IAAI,CAAC,kBAAkB,IAAI,WAAW;gBACtC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK;uBAAI,IAAI,CAAC,sBAAsB,CAAC,MAAM;iBAAG,CAAC,EAAE,CAAC,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,GAAG,IAAI,UAAU,SAAS,CAAC,CAAC,KAAK;uBAAI,IAAI,CAAC,sBAAsB,CAAC,IAAI;iBAAG,CAAC,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ;YACvP;QACJ,OACK;YACD,IAAI,eAAe,EAAE;YACrB,IAAI,oBAAoB,EAAE;YAC1B,MAAM,sBAAsB,IAAI,CAAC,2BAA2B,CAAC,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;YAC3I,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACvB,MAAM,2BAA2B,IAAI,CAAC,0BAA0B,CAAC,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC/I,CAAC,cAAc,kBAAkB,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAClD;oBACA;iBACH;gBACD,CAAC,gBAAgB,CAAC,eAAe,EAAE;gBACnC,CAAC,qBAAqB,CAAC,oBAAoB,EAAE;YACjD,OACK;gBACD,eAAe,CAAC,KAAM,MAAM,mBAAoB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,EAAE;YACzF;YACA,MAAM,cAAc,aAAa,MAAM,CAAC;YACxC,MAAM,wBAAwB,YAAY,GAAG,CAAC,CAAC,MAAQ,IAAI,CAAC,OAAO,CAAC,IAAI,YAAY,EAAE,IAAI,SAAS,EAAE;YACrG,MAAM,wBAAwB,MAAM,QAAQ,GAAG,CAAC;YAChD,SAAS,sBAAsB,KAAK,CAAC,CAAC,MAAQ,CAAC,CAAC;YAChD,IAAI,IAAI,CAAC,kBAAkB,IAAI,WAAW;gBACtC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,KAAK,aAAa,MAAM,CAAC,kBAAkB,CAAC,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,GAAG,CAAC,KAAK,CAAC,KAAK,aAAa,MAAM,CAAC,kBAAkB,CAAC,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,SAAS;YACpU;QACJ;QACA,OAAO;IACX;IACA;;;;;;KAMC,GACD,MAAM,4BAA4B,eAAe,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,MAAM,EAAE;QAC5E,MAAM,gBAAgB,EAAE;QACxB,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,MAAM,IAAI,CAAC,6BAA6B,CAAC,cAAc,MAAM;QACrH,IAAI,iBAAiB,GAAG;YACpB,IAAI,CAAE,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,4BAA4B,KAAM;gBACzE,cAAc,IAAI,CAAC,MAAM,IAAI,CAAC,wBAAwB;YAC1D;QACJ;QACA,cAAc,IAAI,CAAC;QACnB,IAAI,QAAQ;YACR,cAAc,IAAI,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ;QAChE;QACA,OAAO;YAAC;YAAe;SAAqB;IAChD;IACA;;;;;;;KAOC,GACD,MAAM,sBAAsB,eAAe,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE;QACxE,MAAM,CAAC,eAAe,qBAAqB,GAAG,MAAM,IAAI,CAAC,2BAA2B,CAAC,cAAc,MAAM;QACzG,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe;QACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,MAAM,IAAI,CAAC,OAAO,CAAC;QACnB,OAAO;YAAC;YAAO;SAAqB;IACxC;IACA,MAAM,2BAA2B;QAC7B,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,mBAAmB,CAAC;YACtD,UAAU;gBACN,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,wDAAwD;;gBAEzJ,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;gBAClD,OAAO,MAAM,IAAI,CAAC,iBAAiB;YACvC;QACJ;IACJ;IACA,MAAM,8BAA8B,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE;QAChE,MAAM,gBAAgB,EAAE;QACxB,MAAM,CAAC,+BAA+B,wBAAwB,GAAG,MAAM,IAAI,CAAC,yCAAyC,CAAC,WAAW;QACjI,cAAc,IAAI,CAAC;QACnB,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe;QACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;YAAC;YAAO;SAA8B;IACjD;IACA,MAAM,0CAA0C,SAAS,EAAE,SAAS,EAAE;QAClE,MAAM,gCAAgC,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC1G,MAAM,0BAA0B,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,6BAA6B,CAAC,WAAW;YACpG,UAAU;gBACN,qBAAqB;gBACrB;gBACA,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;QACA,OAAO;YAAC;YAA+B;SAAwB;IACnE;IACA,MAAM,0BAA0B,SAAS,EAAE,SAAS,EAAE,gBAAgB,EAAE,QAAQ,EAAE;QAC9E,MAAM,sBAAsB,MAAM,IAAI,CAAC,uCAAuC,CAAC,WAAW,WAAW;QACrG,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAoB,EAAE;QAC9D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,wCAAwC,SAAS,EAAE,SAAS,EAAE,gBAAgB,EAAE;QAClF,MAAM,gCAAgC,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC1G,MAAM,sBAAsB,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,yBAAyB,CAAC,WAAW;YAC5F,UAAU;gBACN,qBAAqB;gBACrB;gBACA,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;gBAClD,MAAM,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW;YACtF;QACJ;QACA,OAAO;IACX;IACA,MAAM,sCAAsC,SAAS,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE;QAC7E,MAAM,KAAK,MAAM,IAAI,CAAC,0CAA0C,CAAC,WAAW;QAC5E,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,2CAA2C,SAAS,EAAE,YAAY,EAAE,EAAE;QACxE,MAAM,uBAAuB,CAAC,GAAG,MAAM,uCAAuC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxG,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,WAAW;YAChF,UAAU;gBACN;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;QACA,OAAO;IACX;IACA,MAAM,uBAAuB,SAAS,EAAE,QAAQ,EAAE;QAC9C,MAAM,KAAK,MAAM,IAAI,CAAC,2BAA2B,CAAC;QAClD,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,4BAA4B,SAAS,EAAE,SAAS,EAAE;QACpD,IAAI;QACJ,MAAM,eAAe,CAAC,GAAG,MAAM,+BAA+B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,sBAAsB,CAAC;YACnD,UAAU;gBACN;gBACA;gBACA,OAAO,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,KAAK,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC1I,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;IACJ;IACA,MAAM,6BAA6B,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE;QAC/D,MAAM,KAAK,MAAM,IAAI,CAAC,iCAAiC,CAAC,WAAW;QACnE,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,kCAAkC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE;QACrE,IAAI;QACJ,MAAM,SAAS,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,4BAA4B,CAAC,WAAW;YACpE,UAAU;gBACN;gBACA;gBACA,OAAO,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,KAAK,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC1I,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBAC3E,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;IACJ;IACA,MAAM,gBAAgB,SAAS,EAAE,QAAQ,EAAE;QACvC,MAAM,KAAK,MAAM,IAAI,CAAC,oBAAoB,CAAC;QAC3C,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,qBAAqB,SAAS,EAAE;QAClC,MAAM,SAAS,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC;YAC5C,UAAU;gBACN;gBACA;gBACA,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBAC3E,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;YAChC;QACJ;IACJ;IACA,MAAM,+BAA+B,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE;QACjE,MAAM,KAAK,MAAM,IAAI,CAAC,mCAAmC,CAAC,WAAW;QACrE,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,oCAAoC,SAAS,EAAE,SAAS,EAAE;QAC5D,MAAM,SAAS,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,WAAW;YACtE,UAAU;gBACN;gBACA;gBACA,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;IACJ;IACA;;;;;;;;;KASC,GACD,MAAM,sBAAsB,OAAO,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,EAAE;QAChE,MAAM,KAAK,MAAM,IAAI,CAAC,0BAA0B,CAAC,SAAS,gBAAgB;QAC1E,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA;;;;;;;;KAQC,GACD,MAAM,2BAA2B,OAAO,EAAE,cAAc,EAAE,GAAG,EAAE,SAAS,EAAE;QACtE,IAAI,IAAI;QACR,MAAM,YAAY,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACzJ,MAAM,QAAQ,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,KAAK,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACjJ,MAAM,SAAS,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,SAAS,gBAAgB,KAAK;YAChF,UAAU;gBACN;gBACA;gBACA;gBACA,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;IACJ;IACA,MAAM,uBAAuB,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE;QACxD,MAAM,KAAK,MAAM,IAAI,CAAC,2BAA2B,CAAC,WAAW;QAC7D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,4BAA4B,SAAS,EAAE,QAAQ,EAAE;QACnD,MAAM,uBAAuB,CAAC,GAAG,MAAM,uCAAuC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxG,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,+BAA+B,CAAC,UAAU,MAAM;YACtF,UAAU;gBACN;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;QACA,OAAO;IACX;IACA,MAAM,0BAA0B,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE;QAC3D,MAAM,KAAK,MAAM,IAAI,CAAC,8BAA8B,CAAC,WAAW;QAChE,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,+BAA+B,SAAS,EAAE,QAAQ,EAAE;QACtD,MAAM,uBAAuB,CAAC,GAAG,MAAM,uCAAuC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACxG,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,+BAA+B,CAAC,UAAU,OAAO;YACvF,UAAU;gBACN;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;QACA,OAAO;IACX;IACA,MAAM,uBAAuB,SAAS,EAAE;QACpC,MAAM,KAAK,MAAM,IAAI,CAAC,2BAA2B,CAAC;QAClD,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE,IAAI,CAAC,QAAQ;QAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,4BAA4B,SAAS,EAAE;QACzC,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,sBAAsB,CAAC;YACzD,UAAU;gBACN,cAAc,CAAC,GAAG,MAAM,+BAA+B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC/J,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBACzJ,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBACzF,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;IACJ;IACA,MAAM,UAAU,SAAS,EAAE;QACvB,MAAM,KAAK,MAAM,IAAI,CAAC,cAAc,CAAC;QACrC,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG,EAAE,IAAI,CAAC,QAAQ;QAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,eAAe,SAAS,EAAE;QAC5B,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC;YAC5C,UAAU;gBACN,cAAc,CAAC,GAAG,MAAM,+BAA+B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC/J,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBACzJ,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;gBACzF,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;YACjC;QACJ;IACJ;IACA,MAAM,8BAA8B,eAAe,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE;QACtE,MAAM,uBAAuB,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACrH,MAAM,oBAAoB,IAAI;QAC9B,IAAI,iBAAiB,WAAW;YAC5B,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,QAAQ;gBAC7B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,aAAa;gBAClC,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,QAAQ,IAAI,CAAC,eAAe;QAClC,IAAI,CAAC,MAAM,aAAa,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;YAC1D,MAAM,2BAA2B,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,MAAM,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;YAC5H,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,SAAS,WAAW;YACpB,IAAI,iBAAiB,GAAG;gBACpB,OAAO,WAAW,iBAAiB;YACvC,OACK;gBACD,OAAO,CAAC,WAAW,EAAE,eAAe,GAAG;YAC3C;QACJ;QACA,MAAM,aAAa,CAAC,GAAG,WAAW,UAAU,EAAE;QAC9C,MAAM,0BAA0B,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,cAAc,YAAY;YACpG,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;gBAClD,OAAO,MAAM,IAAI,CAAC,iBAAiB;YACvC;YACA;QACJ;QACA,OAAO;YAAC;YAAsB;SAAwB;IAC1D;IACA,MAAM,sBAAsB;QACxB,MAAM,YAAY,IAAI,CAAC,YAAY;QACnC,IAAI;QACJ,IAAI,CAAC,WAAW;YACZ,mBAAmB,MAAM,CAAC,GAAG,QAAQ,qBAAqB,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;QACpH,OACK;YACD,mBAAmB,UAAU,UAAU;QAC3C;QACA,OAAO,iBAAiB,0BAA0B;IACtD;IACA,MAAM,uBAAuB,IAAI,EAAE;QAC/B,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACnH,MAAM,aAAa,CAAC,GAAG,WAAW,UAAU,EAAE;QAC9C,MAAM,+BAA+B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACrG,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,sBAAsB,CAAC,YAAY;YACzE,UAAU;gBACN,cAAc;gBACd,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;gBACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YACtD;QACJ;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,eAAe,IAAI,EAAE,eAAe,CAAC,EAAE;QACzC,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACnH,MAAM,aAAa,CAAC,GAAG,WAAW,UAAU,EAAE;QAC9C,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,cAAc,YAAY;YAC/E,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,4BAA4B,OAAO,EAAE,QAAQ,EAAE;QACjD,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE;YAC1E,MAAM,KAAK,MAAM,IAAI,CAAC,gCAAgC,CAAC,aAAa;YACpE,OAAO;QACX;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;QAC/G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,iCAAiC,WAAW,EAAE,eAAe,CAAC,EAAE;QAClE,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACnH,MAAM,IAAI,CAAC,OAAO,CAAC,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS;QACtD,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,2BAA2B,CAAC,cAAc,aAAa;YACvF,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,OAAO;IACX;IACA,MAAM,6CAA6C,eAAe,EAAE,WAAW,EAAE,eAAe,CAAC,EAAE,SAAS,EAAE;QAC1G,IAAI,IAAI;QACR,IAAI,uBAAuB,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,oBAAoB;QAC/G,IAAI,CAAC,sBAAsB;YACvB,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE;QAC5N;QACA,MAAM,mBAAmB,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,gBAAgB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACvK,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,uCAAuC,CAAC,cAAc,iBAAiB,aAAa;YACpH,UAAU;gBACN,MAAM;gBACN,WAAW;YACf;QACJ;QACA,OAAO;IACX;IACA,MAAM,wCAAwC,eAAe,EAAE,WAAW,EAAE,eAAe,CAAC,EAAE,QAAQ,EAAE,qBAAqB,EAAE;QAC3H,MAAM,MAAM,EAAE;QACd,IAAI,uBAAuB;YACvB,MAAM,WAAW,MAAM,IAAI,CAAC,2BAA2B,CAAC;YACxD,IAAI,IAAI,CAAC;QACb;QACA,MAAM,WAAW,MAAM,IAAI,CAAC,4CAA4C,CAAC,iBAAiB,aAAa;QACvG,IAAI,IAAI,CAAC;QACT,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;QAC/G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,oCAAoC,oBAAoB,EAAE,eAAe,CAAC,EAAE,oBAAoB,EAAE;QACpG,MAAM,4BAA4B,wBAC9B,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAC1F,MAAM,IAAI,CAAC,OAAO,CAAC,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS;QACtD,IAAI;QACJ,IAAI;YACA,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBAC1C,cAAc;oBAAC,IAAI,CAAC,cAAc,CAAC;iBAAc;YACrD;QACJ,EACA,OAAO,KAAK;YACR,oBAAoB,EAAE;QAC1B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,cAAc,sBAAsB;YACrG,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,+BAA+B,OAAO,EAAE;QAC1C,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE,oBAAoB,EAAE,YAAY,EAAE;YACnF,OAAO,MAAM,IAAI,CAAC,mCAAmC,CAAC,sBAAsB;QAChF;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,IAAI,CAAC,QAAQ;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,wBAAwB,QAAQ,EAAE,SAAS,EAAE;QAC/C,IAAI,IAAI,IAAI;QACZ,MAAM,eAAe,CAAC,KAAK,UAAU,YAAY,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,kBAAkB;QAC3G,MAAM,uBAAuB,CAAC,KAAK,UAAU,oBAAoB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAM,MAAM,IAAI,CAAC,uBAAuB;QACvI,MAAM,YAAY,CAAC,KAAK,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACnG,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,cAAc,UAAU;YAC7E,UAAU;gBACN,MAAM;gBACN;YACJ;QACJ;IACJ;IACA,MAAM,mBAAmB,QAAQ,EAAE,eAAe,CAAC,EAAE;QACjD,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,cAAc,UAAU;YACjF,UAAU;gBACN,MAAM,MAAM,IAAI,CAAC,uBAAuB;gBACxC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,qBAAqB,OAAO,EAAE;QAChC,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,EAAE;YACzE,OAAO,MAAM,IAAI,CAAC,sBAAsB,CAAC,YAAY;QACzD;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,IAAI,CAAC,QAAQ;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,uBAAuB,UAAU,EAAE,YAAY,EAAE;QACnD,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,cAAc,YAAY;YACrF,UAAU;gBACN,MAAM,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC5F,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,OAAO;IACX;IACA,MAAM,qBAAqB,OAAO,EAAE;QAChC,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,EAAE;YACzE,OAAO,MAAM,IAAI,CAAC,yBAAyB,CAAC,YAAY;QAC5D;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,IAAI,CAAC,QAAQ;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,0BAA0B,UAAU,EAAE,YAAY,EAAE;QACtD,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,cAAc,YAAY;YACrF,UAAU;gBACN,MAAM,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC5F,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,OAAO;IACX;IACA,MAAM,iBAAiB,OAAO,EAAE;QAC5B,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE;YACrE,OAAO,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ;QACpD;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,IAAI,CAAC,QAAQ;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,sBAAsB,MAAM,EAAE,YAAY,EAAE;QAC9C,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,gBAAgB,CAAC,cAAc,QAAQ;YAC7E,UAAU;gBACN,MAAM,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC5F,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;QACA,OAAO;IACX;IACA,MAAM,qBAAqB,cAAc,IAAI,EAAE;QAC3C,IAAI,UAAU;QACd,IAAI,CAAC,aAAa;YACd,UAAU;gBAAC,CAAC,GAAG,SAAS,oBAAoB;aAAI;QACpD;QACA,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;IAChD;IACA,MAAM,2BAA2B,QAAQ,EAAE;QACvC,MAAM,kBAAkB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;YACxD;gBACI,QAAQ;oBACJ,QAAQ;oBACR,gFAAgF,GAChF,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,SAAS,QAAQ;gBAClD;YACJ;SACH;QACD,OAAO,gBACF,GAAG,CAAC,CAAC,iBAAmB,eAAe,OAAO,EAC9C,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY;IACvD;IACA,MAAM,wCAAwC,SAAS,EAAE;QACrD,MAAM,kBAAkB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;YACxD;gBACI,QAAQ;oBACJ,QAAQ;oBACR,gFAAgF,GAChF,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,UAAU,QAAQ;gBACnD;YACJ;SACH;QACD,OAAO,gBAAgB,GAAG,CAAC,CAAC,iBAAmB;IACnD;IACA,MAAM,4BAA4B,SAAS,EAAE;QACzC,MAAM,kBAAkB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;YACxD;gBACI,QAAQ;oBACJ,QAAQ;oBACR,gFAAgF,GAChF,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,UAAU,QAAQ;gBACnD;YACJ;SACH;QACD,OAAO,gBACF,GAAG,CAAC,CAAC,iBAAmB,eAAe,OAAO,EAC9C,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,YAAY,GAAG,EAAE,YAAY;IACvD;IACA,MAAM,uCAAuC,QAAQ,EAAE;QACnD,MAAM,kBAAkB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;YAC7D;gBACI,QAAQ;oBACJ,QAAQ;oBACR,gFAAgF,GAChF,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,SAAS,QAAQ;gBAClD;YACJ;SACH;QACD,OAAO,gBAAgB,GAAG,CAAC,CAAC,iBAAmB,eAAe,OAAO;IACzE;IACA,MAAM,oCAAoC,SAAS,EAAE;QACjD,MAAM,kBAAkB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;YAChE;gBACI,QAAQ;oBACJ,QAAQ;oBACR,gFAAgF,GAChF,OAAO,OAAO,OAAO,CAAC,MAAM,CAAC,UAAU,QAAQ;gBACnD;YACJ;SACH;QACD,OAAO,gBAAgB,GAAG,CAAC,CAAC,iBAAmB,eAAe,OAAO;IACzE;IACA,MAAM,WAAW,eAAe,CAAC,EAAE,QAAQ,EAAE;QACzC,IAAI;QACJ,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACnH,MAAM,KAAK,MAAM,IAAI,CAAC,iBAAiB,CAAC;QACxC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrG,MAAM,aAAa,IAAI,CAAC,aAAa,CAAC,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS;QACzE,MAAM,CAAC,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW,EAAE;QAC9F,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAClB,OAAO;IACX;IACA,MAAM,kBAAkB,oBAAoB,EAAE;QAC1C,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC;YACjD,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,OAAO,MAAM,IAAI,CAAC,iBAAiB;YACvC;QACJ;QACA,OAAO;IACX;IACA,MAAM,gBAAgB,oBAAoB,EAAE,WAAW,EAAE,QAAQ,EAAE;QAC/D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,sBAAsB,cAAc;QAC3G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,qBAAqB,oBAAoB,EAAE,WAAW,EAAE;QAC1D,MAAM,4BAA4B,EAAE;QACpC,KAAK,MAAM,gBAAgB,YAAY,aAAa,CAAE;YAClD,IAAI,CAAC,GAAG,eAAe,uBAAuB,EAAE,eAAe;gBAC3D;YACJ;YACA,0BAA0B,IAAI,CAAC,aAAa,WAAW;QAC3D;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B;QACJ;QACA,KAAK,MAAM,SAAS,YAAY,MAAM,CAAE;YACpC,IAAI,CAAC,GAAG,SAAS,UAAU,EAAE,QAAQ;gBACjC,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;oBACtG,YAAY;oBACZ,UAAU;gBACd;gBACA;YACJ;QACJ;QACA,MAAM,gBAAgB,IAAI;QAC1B,KAAK,MAAM,gBAAgB,YAAY,aAAa,CAAE;YAClD,IAAI,CAAC,GAAG,eAAe,uBAAuB,EAAE,eAAe;gBAC3D;YACJ;YACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC,aAAa,WAAW;YACrE,kBAAkB,IAAI,CAAC;gBACnB,UAAU;gBACV,YAAY;gBACZ,QAAQ,WAAW,KAAK;YAC5B;YACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,MAAM,cAAc,MAAM,IAAI,CAAC,yBAAyB,CAAC,aAAa,WAAW,EAAE,OAAO;YAC1F,kBAAkB,IAAI,CAAC;gBACnB,UAAU;gBACV,YAAY;gBACZ,QAAQ;YACZ;YACA,cAAc,GAAG,CAAC,aAAa,QAAQ;YACvC,IAAI,CAAC,+BAA+B,CAAC,YAAY;QACrD;QACA,KAAK,MAAM,gBAAgB,cAAe;YACtC,kBAAkB,IAAI,CAAC;gBACnB,UAAU;gBACV,YAAY;gBACZ,QAAQ,IAAI,UAAU,SAAS,CAAC;YACpC;QACJ;QACA,MAAM,YAAY,YAAY,SAAS;QACvC,MAAM,YAAY,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAClF,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC;YACtD,UAAU;gBACN,MAAM;gBACN;gBACA;gBACA,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,aAAa,IAAI,CAAC,kBAAkB;gBACpC,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;YACjC;YACA;QACJ;QACA,OAAO;IACX;IACA,MAAM,0BAA0B,QAAQ,EAAE;QACtC,MAAM,KAAK,MAAM,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;QAC5E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrG,OAAO;IACX;IACA,MAAM,iCAAiC,SAAS,EAAE;QAC9C,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,yBAAyB,CAAC;YAChE,UAAU;gBACN,MAAM;gBACN,qBAAqB,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBACzF,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,OAAO,MAAM,IAAI,CAAC,iBAAiB;YACvC;QACJ;QACA,OAAO;IACX;IACA;;;;;;;KAOC,GACD,MAAM,wCAAwC,SAAS,EAAE;QACrD,MAAM,sCAAsC,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAChH,OAAO,IAAI,CAAC,oBAAoB,CAAC;IACrC;IACA,MAAM,YAAY,eAAe,CAAC,EAAE,QAAQ,EAAE;QAC1C,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACnH,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrG,OAAO;IACX;IACA,MAAM,iBAAiB,oBAAoB,EAAE;QACzC,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC;YAC9C,UAAU;gBACN,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM,OAAO,IAAI,CAAC,kBAAkB;YACxC;QACJ;IACJ;IACA,QAAQ,YAAY,EAAE,SAAS,EAAE;QAC7B,eAAe,iBAAiB,QAAQ,iBAAiB,KAAK,IAAI,eAAe,IAAI,CAAC,kBAAkB;QACxG,YAAY,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;QACnF,MAAM,aAAa,IAAI,CAAC,aAAa,CAAC,cAAc;QACpD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa;YAC7B,MAAM,IAAI,MAAM,CAAC,oCAAoC,EAAE,YAAY;QACvE;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IAC1B;IACA,QAAQ,YAAY,EAAE,SAAS,EAAE;QAC7B,eAAe,iBAAiB,QAAQ,iBAAiB,KAAK,IAAI,eAAe,IAAI,CAAC,kBAAkB;QACxG,YAAY,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;QACnF,MAAM,aAAa,IAAI,CAAC,aAAa,CAAC,cAAc;QACpD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IAC1B;IACA,WAAW;QACP,sCAAsC;QACtC,OAAO;eAAI,IAAI,CAAC,KAAK,CAAC,MAAM;SAAG,CAC1B,MAAM,CAAC,CAAC,OAAS,KAAK,cAAc,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,GAC7E,MAAM,CAAC;eAAI,IAAI,CAAC,KAAK,CAAC,MAAM;SAAG,CAAC,MAAM,CAAC,CAAC,OAAS,CAAC,KAAK,cAAc,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;IACvH;IACA,eAAe;QACX,OAAO,IAAI,CAAC,SAAS;IACzB;IACA,MAAM,yBAAyB,IAAI,EAAE;QACjC,MAAM,aAAa,CAAC,GAAG,WAAW,UAAU,EAAE;QAC9C,MAAM,+BAA+B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACrG,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC;IAC1D;IACA,+BAA+B;QAC3B,IAAI,IAAI,CAAC,yBAAyB,EAAE;YAChC,OAAO,IAAI,CAAC,yBAAyB;QACzC;QACA,IAAI,CAAC,yBAAyB,GAAG,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS;QAC/G,OAAO,IAAI,CAAC,yBAAyB;IACzC;IACA,MAAM,wBAAwB,YAAY,EAAE,SAAS,EAAE;QACnD,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,WAAW,oBAAoB;IACrE;IACA,eAAe,YAAY,EAAE,SAAS,EAAE;QACpC,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,WAAW,cAAc;IAC/D;IACA;;;KAGC,GACD,MAAM,oBAAoB,YAAY,EAAE,SAAS,EAAE;QAC/C,MAAM,IAAI,CAAC,OAAO,CAAC,cAAc,WAAW,aAAa;QACzD,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,WAAW,cAAc;IAC/D;IACA,sBAAsB,YAAY,EAAE,SAAS,EAAE;QAC3C,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,WAAW,qBAAqB;IACtE;IACA,gBAAgB,WAAW,EAAE,YAAY,EAAE;QACvC,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,aAAa,CAAC,IAAI,CAAC,CAAC,eAAiB,aAAa,WAAW,KAAK;IAC/G;IACA,2BAA2B;QACvB,OAAO,IAAI,CAAC,cAAc,CAAC,mBAAmB,uBAAuB;IACzE;IACA;;;;KAIC,GACD,eAAe,WAAW,EAAE;QACxB,MAAM,eAAe,IAAI,CAAC,eAAe,CAAC;QAC1C,IAAI,iBAAiB,WAAW;YAC5B,OAAO,mBAAmB,IAAI;QAClC;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,OAAO,CAAC,GAAG,cAAc,oBAAoB,EAAE,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa,aAAa,EAAE,YAAY,aAAa,WAAW,GAAG,aAAa,WAAW;IAChL;IACA;;;;KAIC,GACD,uBAAuB,WAAW,EAAE,MAAM,EAAE;QACxC,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,OAAO,CAAC,GAAG,aAAa,yBAAyB,EAAE,QAAQ;IAC/D;IACA;;;KAGC,GACD,uBAAuB,MAAM,EAAE;QAC3B,IAAI,OAAO,WAAW,UAAU;YAC5B,OAAO,CAAC,GAAG,QAAQ,cAAc,EAAE,QAAQ,mBAAmB,cAAc;QAChF,OACK;YACD,OAAO,OAAO,GAAG,CAAC,mBAAmB,cAAc;QACvD;IACJ;IACA;;;KAGC,GACD,wBAAwB,MAAM,EAAE;QAC5B,IAAI,OAAO,WAAW,UAAU;YAC5B,OAAO,CAAC,GAAG,QAAQ,cAAc,EAAE,QAAQ,mBAAmB,eAAe;QACjF,OACK;YACD,OAAO,OAAO,GAAG,CAAC,mBAAmB,cAAc;QACvD;IACJ;IACA;;;;;;KAMC,GACD,uBAAuB,EAAE,iBAAiB,EAAE,iBAAiB,EAAG,EAAE;QAC9D,kBAAkB,OAAO,CAAC,CAAC;YACvB,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC;QAC1C;QACA,kBAAkB,OAAO,CAAC,CAAC;YACvB,IAAI,CAAC,4BAA4B,CAAC,GAAG,CAAC;QAC1C;IACJ;IACA,qBAAqB,MAAM,EAAE;QACzB,IAAI;QACJ,MAAM,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,GAAG,IAAI,CAAC,+BAA+B,CAAC,OAAO,YAAY;QACjI,IAAI,OAAO,sBAAsB,EAAE;YAC/B,MAAM,eAAe,CAAC,KAAK,IAAI,CAAC,qBAAqB,CAAC,OAAO,YAAY,CAAC,MAAM,GAAG,IAC7E,OAAO,YAAY,CAAC,EAAE,CAAC,YAAY,GACnC,IAAI,CAAC,kBAAkB,EAAE,OAAO,YAAY,CAAC,MAAM,GAAG,IACtD,OAAO,YAAY,CAAC,EAAE,CAAC,SAAS,GAChC,IAAI,CAAC,SAAS,CAAC,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI;YACnE,KAAK,MAAM,CAAC,aAAa,KAAM,IAAI,IAAI,CAAC,uBAAuB,CAAC,OAAO,GAAI;gBACvE,mGAAmG;gBACnG,6BAA6B;gBAC7B,IAAI,OAAO,cAAc;oBACrB,IAAI,CAAC,mCAAmC,CAAC,aAAa,OAAO,kBAAkB,sBAAsB;gBACzG,OACK;oBACD,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC;gBACxC;YACJ;YACA,KAAK,MAAM,CAAC,aAAa,KAAM,IAAI,IAAI,CAAC,uBAAuB,CAAC,OAAO,GAAI;gBACvE,mGAAmG;gBACnG,6BAA6B;gBAC7B,IAAI,OAAO,cAAc;oBACrB,IAAI,CAAC,mCAAmC,CAAC,aAAa,OAAO,kBAAkB;gBACnF,OACK;oBACD,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC;gBACxC;YACJ;QACJ;QACA,IAAI,OAAO,uBAAuB,KAAK,WAAW;YAC9C,MAAM,4BAA4B,MAAM,OAAO,CAAC,OAAO,uBAAuB,IACxE,OAAO,uBAAuB,GAC9B;gBAAC,OAAO,uBAAuB;aAAC;YACtC,KAAK,MAAM,eAAe,0BAA2B;gBACjD,IAAI,CAAC,mCAAmC,CAAC,aAAa,OAAO,kBAAkB,sBAAsB;YACzG;QACJ;QACA,KAAK,MAAM,mBAAmB,IAAI,CAAC,4BAA4B,CAAC,MAAM,GAAI;YACtE,IAAI,CAAC,mCAAmC,CAAC,iBAAiB,OAAO,kBAAkB,sBAAsB;QAC7G;QACA,IAAI,OAAO,yBAAyB,KAAK,WAAW;YAChD,KAAK,MAAM,2BAA2B,OAAO,yBAAyB,CAAE;gBACpE,IAAI,CAAC,mCAAmC,CAAC,yBAAyB,OAAO,kBAAkB;YAC/F;QACJ;QACA,KAAK,MAAM,mBAAmB,IAAI,CAAC,4BAA4B,CAAC,MAAM,GAAI;YACtE,IAAI,CAAC,mCAAmC,CAAC,iBAAiB,OAAO,kBAAkB;QACvF;QACA,IAAI,OAAO,yBAAyB,KAAK,WAAW;YAChD,KAAK,MAAM,2BAA2B,OAAO,yBAAyB,CAAE;gBACpE,IAAI,CAAC,mCAAmC,CAAC,yBAAyB,MAAM,kBAAkB,sBAAsB;YACpH;QACJ;QACA,IAAI,OAAO,yBAAyB,KAAK,WAAW;YAChD,KAAK,MAAM,2BAA2B,OAAO,yBAAyB,CAAE;gBACpE,IAAI,CAAC,mCAAmC,CAAC,yBAAyB,MAAM,kBAAkB;YAC9F;QACJ;QACA,OAAO;eACA,iBAAiB,MAAM;eACvB,qBAAqB,MAAM;eAC3B,qBAAqB,MAAM;SACjC;IACL;IACA,oCAAoC,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE;QACrH,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,qBAAqB,GAAG,CAAC,aAAa;YAClC,QAAQ,kBAAkB,MAAM;YAChC,UAAU;YACV,YAAY;QAChB;QACA,MAAM,iBAAiB,YAAY,CAAC,GAAG,QAAQ,SAAS,EAAE,kBAAkB,GAAG,CAAC,YAAY,EAAE;QAC9F,iBAAiB,GAAG,CAAC,kBAAkB,GAAG,CAAC,MAAM,CAAC,QAAQ,IAAI;YAC1D,QAAQ,kBAAkB,GAAG,CAAC,MAAM;YACpC,UAAU;YACV,YAAY;QAChB;QACA,IAAI,CAAC,mCAAmC,CAAC,kBAAkB,oBAAoB,EAAE,OAAO,kBAAkB;IAC9G;IACA,oCAAoC,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,oBAAoB,EAAE;QAC/F,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,qBAAqB,GAAG,CAAC,kBAAkB,WAAW,EAAE;YACpD,QAAQ,kBAAkB,MAAM;YAChC,UAAU;YACV,YAAY;QAChB;QACA,IAAI,CAAC,kBAAkB,MAAM,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;YAC/D,iBAAiB,GAAG,CAAC,kBAAkB,MAAM,CAAC,QAAQ,IAAI;gBACtD,QAAQ,kBAAkB,MAAM;gBAChC,UAAU;gBACV,YAAY;YAChB;QACJ;IACJ;IACA,8BAA8B,QAAQ,EAAE,iBAAiB,EAAE;QACvD,KAAK,MAAM,WAAW,SAAU;YAC5B,mCAAmC;YACnC,MAAM,qBAAqB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,SAAS,EAAE,0CAA0C;;YAE/I,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,UAAU;gBACV,YAAY;YAChB;YACA,MAAM,iBAAiB,CAAC,GAAG,MAAM,+BAA+B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;YAC1F,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,UAAU;gBACV,YAAY;YAChB;QACJ;IACJ;IACA,gCAAgC,YAAY,EAAE;QAC1C,MAAM,mBAAmB,IAAI;QAC7B,MAAM,uBAAuB,IAAI;QACjC,MAAM,uBAAuB,IAAI;QACjC,KAAK,MAAM,eAAe,aAAc;YACpC,KAAK,MAAM,gBAAgB,YAAY,aAAa,CAAE;gBAClD,IAAI,CAAC,CAAC,GAAG,eAAe,uBAAuB,EAAE,eAAe;oBAC5D,IAAI,CAAC,mCAAmC,CAAC,aAAa,WAAW,EAAE,OAAO,kBAAkB;oBAC5F,IAAI,CAAC,aAAa,QAAQ,CAAC,EAAE,CAAC,mBAAmB,IAAI,KACjD,CAAC,aAAa,QAAQ,CAAC,EAAE,CAAC,mBAAmB,IAAI,GAAG;wBACpD,IAAI,CAAC,mCAAmC,CAAC,mBAAmB,uBAAuB,EAAE,OAAO,kBAAkB;oBAClH;gBACJ;YACJ;YACA,KAAK,MAAM,YAAY,YAAY,aAAa,CAAE;gBAC9C,IAAI,CAAC,CAAC,GAAG,WAAW,mBAAmB,EAAE,WAAW;oBAChD,IAAI,CAAC,mCAAmC,CAAC,SAAS,WAAW,EAAE,OAAO,kBAAkB,sBAAsB;gBAClH;YACJ;QACJ;QACA,OAAO;YACH;YACA;YACA;QACJ;IACJ;IACA,SAAS,OAAO,EAAE,YAAY,EAAE;QAC5B,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,cAAc,CAAC,aAAa,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,QAAU,MAAM,OAAO,KAAK;IACrI;IACA,iBAAiB,WAAW,EAAE,YAAY,EAAE;QACxC,IAAI;QACJ,OAAO,CAAC,KAAK,IAAI,CAAC,cAAc,CAAC,aAAa,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,QAAU,MAAM,WAAW,KAAK;IACzI;IACA;;;;;KAKC,GACD,MAAM,0BAA0B,WAAW,EAAE,YAAY,IAAI,EAAE,eAAe,YAAY,gBAAgB,EAAE,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,KAAK,EAAE;QACvK,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,IAAI,aAAa,WAAW,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB,GAAG;YACrE,OAAO;QACX;QACA,MAAM,OAAO,WAAW,IAAI;QAC5B,OAAO,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,MAAM,WAAW,oBAAoB;IACjG;IACA,kDAAkD,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,eAAe,YAAY,gBAAgB,EAAE;QACxH,OAAO,IAAI,UAAU,sBAAsB,CAAC;YACxC,MAAM;gBACF;oBAAE,QAAQ;oBAAO,UAAU;oBAAM,YAAY;gBAAK;gBAClD;oBAAE,QAAQ;oBAAS,UAAU;oBAAO,YAAY;gBAAK;gBACrD;oBAAE,QAAQ;oBAAO,UAAU;oBAAO,YAAY;gBAAM;gBACpD;oBAAE,QAAQ;oBAAM,UAAU;oBAAO,YAAY;gBAAM;gBACnD;oBACI,QAAQ,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;oBAC3C,UAAU;oBACV,YAAY;gBAChB;gBACA;oBAAE,QAAQ;oBAAc,UAAU;oBAAO,YAAY;gBAAM;aAC9D;YACD,WAAW,YAAY,2BAA2B;YAClD,MAAM,OAAO,IAAI,CAAC;gBAAC;aAAI;QAC3B;IACJ;IACA,MAAM,gBAAgB,MAAM,EAAE,WAAW,EAAE,sBAAsB,EAAE,YAAY,EAAE,aAAa,KAAK,EAAE;QACjG,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,cAAc,kBAAkB,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB;QAChF,MAAM,kBAAkB,IAAI,CAAC,MAAM,CAAC,SAAS;QAC7C,MAAM,yBAAyB,eAAe,uBAAuB,MAAM,CAAC;QAC5E,MAAM,eAAe,EAAE;QACvB,IAAI,wBAAwB;YACxB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,QAAQ;YAC3E,yBAAyB;YACzB,aAAa,IAAI,IAAI;QACzB;QACA,MAAM,sBAAsB,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ,aAAa,wBAAwB,cAAc,YAAY;QACpI,aAAa,IAAI,CAAC;QAClB,8DAA8D;QAC9D,IAAI,wBAAwB;YACxB,aAAa,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,wBAAwB,iBAAiB,iBAAiB,EAAE;QACjI;QACA,OAAO;IACX;IACA,MAAM,oBAAoB,iBAAiB,EAAE,SAAS,EAAE,aAAa,EAAE,sBAAsB,EAAE,oBAAoB,EAAE,YAAY,EAAE,2BAA2B,EAAE,mBAAmB,KAAK,EAAE;QACtL,MAAM,eAAe,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,wBAAwB,6BAA6B,cAAc;QAClI,IAAI,kBAAkB;YAClB,MAAM,0CAA0C,MAAM,IAAI,CAAC,uCAAuC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;YACxH,IAAI,CAAC,yCAAyC;gBAC1C,MAAM,GAAG,uCAAuC,GAAG,MAAM,IAAI,CAAC,yCAAyC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC/H,aAAa,IAAI,CAAC;YACtB;QACJ;QACA,MAAM,eAAe,MAAM,IAAI,CAAC,kCAAkC,CAAC,mBAAmB,sBAAsB,WAAW;QACvH,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc;YACtC,mBAAmB;YACnB,cAAc;QAClB;IACJ;IACA,MAAM,iBAAiB,MAAM,EAAE,WAAW,EAAE,sBAAsB,EAAE,YAAY,EAAE,aAAa,KAAK,EAAE,QAAQ,EAAE,mBAAmB,KAAK,EAAE;QACtI,MAAM,eAAe,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,aAAa,wBAAwB,cAAc;QAC3G,IAAI,kBAAkB;YAClB,MAAM,0CAA0C,MAAM,IAAI,CAAC,uCAAuC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;YACxH,IAAI,CAAC,yCAAyC;gBAC1C,MAAM,GAAG,uCAAuC,GAAG,MAAM,IAAI,CAAC,yCAAyC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;gBAC/H,aAAa,IAAI,CAAC;YACtB;QACJ;QACA,WAAW;YAAE,GAAI,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;YAAG,cAAc;QAAO;QAC5G,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc;QACrD,OAAO;IACX;IACA;;;;;;;;KAQC,GACD,MAAM,QAAQ,MAAM,EAAE,WAAW,EAAE,sBAAsB,EAAE,YAAY,EAAE,aAAa,KAAK,EAAE,QAAQ,EAAE,mBAAmB,KAAK,EAAE;QAC7H,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,aAAa,wBAAwB,cAAc,YAAY,UAAU;QACxH,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QACpE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,OAAO;IACX;IACA,MAAM,sBAAsB,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE,YAAY,EAAE,aAAa,KAAK,EAAE,kBAAkB,IAAI,EAAE;QACzH,MAAM,uBAAuB,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,iBAAiB,QAAQ,iBAAiB,KAAK,IAAI,eAAe,IAAI,CAAC,kBAAkB;QACvM,IAAI,oBAAoB,EAAE;QAC1B,IAAI,iBAAiB;YACjB,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBAC1C,cAAc;oBAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC;iBAAc;gBAC5D,wBAAwB;gBACxB,2BAA2B;oBAAC;iBAAY;YAC5C;QACJ,OACK;YACD,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBAC1C,cAAc,EAAE;gBAChB,2BAA2B;oBAAC;iBAAY;YAC5C;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,IAAI,CAAC,+BAA+B,CAAC,mBAAmB;QACxD,IAAI,IAAI,CAAC,cAAc,CAAC,oBAAoB;YACxC,MAAM,IAAI,CAAC,uCAAuC,CAAC,kBAAkB,IAAI,EAAE;QAC/E;QACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;QACvD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,aAAa,QAAQ,YAAY;YAC3E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,iBAAiB,kBAAkB,KAAK;gBACxC,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,kBAAkB;gBAClB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;YACJ;YACA;QACJ;IACJ;IACA,MAAM,qBAAqB,OAAO,EAAE;QAChC,IAAI;YACA,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,OAAO,eAAe;QAC1B,EACA,OAAO,GAAG;YACN,wBAAwB;YACxB,OAAO;QACX;IACJ;IACA,MAAM,gCAAgC,MAAM,EAAE,WAAW,EAAE;QACvD,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;QACvC,gDAAgD;QAChD,MAAM,OAAO,UAAU,OAAO,CAAC,QAAQ,GAAG,SAAS,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAG;QACxE,kEAAkE;QAClE,MAAM,oBAAoB,MAAM,UAAU,SAAS,CAAC,cAAc,CAAC,WAAW,MAAM,YAAY,gBAAgB;QAChH,MAAM,SAAS;YACX,KAAK,EAAE;YACP,SAAS,EAAE;YACX,QAAQ;QACZ;QACA,MAAM,oBAAoB,IAAI,SAAS,EAAE,CAAC,UAAU,gBAAgB,GAAG;QACvE,MAAM,WAAW,cACX,OAAO,GAAG,CAAC,qBACX;QACN,OAAO,GAAG,CAAC,IAAI,CAAC,UAAU,aAAa,CAAC,qBAAqB,CAAC;YAC1D,YAAY;YACZ,YAAY;YACZ;YACA,kBAAkB;YAClB,UAAU,SAAS,QAAQ;YAC3B,OAAO;YACP,WAAW,YAAY,gBAAgB;QAC3C;QACA,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,YAAY,kCAAkC,EAAE,mBAAmB,cAAc,gBAAgB,EAAE;QACvH,OAAO;IACX;IACA,6BAA6B,iBAAiB,EAAE;QAC5C,IAAI,IAAI,CAAC,WAAW,CAAC,oBAAoB;YACrC,OAAO,YAAY,qBAAqB;QAC5C;QACA,OAAO,YAAY,gBAAgB;IACvC;IACA,YAAY,iBAAiB,EAAE;QAC3B,OAAQ,CAAC,kBAAkB,gBAAgB,GAAG,QAAQ,gBAAgB,CAAC,SAAS,IAAI;IACxF;IACA,eAAe,iBAAiB,EAAE;QAC9B,OAAQ,CAAC,kBAAkB,gBAAgB,GAAG,QAAQ,gBAAgB,CAAC,YAAY,IAAI;IAC3F;IACA,gCAAgC,iBAAiB,EAAE,iBAAiB,EAAE;QAClE,IAAI,IAAI,CAAC,WAAW,CAAC,oBAAoB;YACrC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,kBAAkB,IAAI;gBAC9B,UAAU;gBACV,YAAY;YAChB;QACJ;IACJ;IACA,MAAM,wCAAwC,IAAI,EAAE,iBAAiB,EAAE;QACnE,MAAM,cAAc,MAAM,CAAC,GAAG,YAAY,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,MAAM,aAAa,YAAY,qBAAqB;QACxH,MAAM,cAAc,CAAC,GAAG,YAAY,eAAe,EAAE;QACrD,IAAI,YAAY,SAAS,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;YAC3D;QACJ;QACA,MAAM,2BAA2B,CAAC,GAAG,YAAY,0BAA0B,EAAE,MAAM,YAAY,SAAS;QACxG,MAAM,oBAAoB,CAAC,GAAG,YAAY,oBAAoB,EAAE,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;QACrG,KAAK,MAAM,OAAO,kBAAmB;YACjC,oEAAoE;YACpE,MAAM,cAAc,MAAM,CAAC,GAAG,YAAY,uBAAuB,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,mBAAmB,OAAO,IAAI,CAAC,EAAE,GAAG,YAAY,SAAS;YAClJ,kBAAkB,IAAI,CAAC;QAC3B;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,YAAY,SAAS;YAC7B,UAAU;YACV,YAAY;QAChB;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ;YACR,UAAU;YACV,YAAY;QAChB;IACJ;IACA,oCAAoC,gBAAgB,EAAE,sBAAsB,EAAE,YAAY,EAAE;QACxF,OAAO,CAAC,GAAG,YAAY,uCAAuC,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,wBAAwB,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,kBAAkB;IAC5J;IACA,MAAM,mDAAmD,MAAM,EAAE,gBAAgB,EAAE,cAAc,CAAC,EAAE,eAAe,CAAC,EAAE,IAAI,EAAE,gBAAgB,EAAE,YAAY,EAAE,YAAY,EAAE,oBAAoB,EAAE,MAAM,EAAE;QACpM,MAAM,MAAM,EAAE;QACd,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,MAAM,IAAI,CAAC,6BAA6B,CAAC,cAAc,MAAM;QACrH,MAAM,0CAA0C,MAAM,IAAI,CAAC,uCAAuC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;QACxH,IAAI,CAAC,yCAAyC;YAC1C,MAAM,GAAG,uCAAuC,GAAG,MAAM,IAAI,CAAC,yCAAyC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;YAC/H,IAAI,IAAI,CAAC;QACb;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,cAAc,WAAW,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB;QACzE,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;QACvC,MAAM,mBAAmB,qBAAqB,QAC1C,qBAAqB,aACrB,CAAC,MAAM;QACX,eAAe,eAAe,eAAe,mBAAmB,IAAI;QACpE,MAAM,yBAAyB,AAAC,eAC5B,iBAAiB,MAAM,CAAC,cACxB,CAAC,oBACD,CAAC,aAAa,EAAE,CAAC,mBAAmB,IAAI;QAC5C,MAAM,aAAa,cAAc,OAAO,GAAG,CAAC,gBAAgB;QAC5D,IAAI;QACJ,IAAI,wBAAwB;YACxB,MAAM,EAAE,KAAK,QAAQ,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,YAAY;YACzF,mBAAmB;YACnB,IAAI,aAAa;gBACb,mBAAmB;YACvB;YACA,IAAI,IAAI,IAAI;QAChB;QACA,MAAM,sBAAsB,mBACtB,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,aAAa,kBAAkB,gBACvE,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ,aAAa,kBAAkB,cAAc,OAAO;QACnG,IAAI,iBAAiB,GAAG;YACpB,IAAI,CAAE,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,4BAA4B,KAAM;gBACzE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,wBAAwB;YAChD;QACJ;QACA,IAAI,IAAI,CAAC;QACT,IAAI,QAAQ;YACR,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ;QACtD;QACA,IAAI,IAAI,CAAC;QACT,IAAI,CAAC,aAAa,EAAE,CAAC,mBAAmB,IAAI,GAAG;YAC3C,MAAM,WAAW,MAAM,IAAI,CAAC,qCAAqC,CAAC,GAAG,cAAc;YACnF,IAAI,IAAI,CAAC;QACb;QACA,gEAAgE;QAChE,IAAI,sBAAsB;YACtB,MAAM,sBAAsB,MAAM,IAAI,CAAC,gCAAgC,CAAC,sBAAsB;YAC9F,IAAI,IAAI,CAAC;QACb;QACA,8DAA8D;QAC9D,IAAI,wBAAwB;YACxB,IAAI,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,kBAAkB,WAAW,WAAW,EAAE;QACtG;QACA,OAAO;YACH;YACA;QACJ;IACJ;IACA,MAAM,gDAAgD,MAAM,EAAE,gBAAgB,EAAE,cAAc,CAAC,EAAE,eAAe,CAAC,EAAE,IAAI,EAAE,gBAAgB,EAAE,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAE,oBAAoB,EAAE,MAAM,EAAE;QAC3M,MAAM,EAAE,GAAG,EAAE,oBAAoB,EAAE,GAAG,MAAM,IAAI,CAAC,kDAAkD,CAAC,QAAQ,kBAAkB,aAAa,cAAc,MAAM,kBAAkB,cAAc,cAAc,sBAAsB;QACnO,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK;QAC5C,OAAO;YAAC;YAAI;SAAqB;IACrC;IACA;;;;;;;;;;;;KAYC,GACD,MAAM,0CAA0C,MAAM,EAAE,gBAAgB,EAAE,cAAc,CAAC,EAAE,eAAe,CAAC,EAAE,IAAI,EAAE,gBAAgB,EAAE,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAE,oBAAoB,EAAE,MAAM,EAAE;QACrM,MAAM,CAAC,IAAI,qBAAqB,GAAG,MAAM,IAAI,CAAC,+CAA+C,CAAC,QAAQ,kBAAkB,aAAa,cAAc,MAAM,kBAAkB,cAAc,cAAc,UAAU,sBAAsB;QACvO,MAAM,oBAAoB,EAAE;QAC5B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,mBAAmB,IAAI,CAAC,IAAI;QACnF,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,MAAM,IAAI,CAAC,OAAO,CAAC;QACnB,OAAO;YAAC;YAAO;SAAqB;IACxC;IACA,MAAM,+BAA+B,eAAe,CAAC,EAAE,OAAO,WAAW,iBAAiB,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE;QAClJ,MAAM,MAAM,EAAE;QACd,MAAM,CAAC,yBAAyB,2BAA2B,SAAS,GAAG,MAAM,YAAY,iDAAiD,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAClK,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,MAAM,IAAI,CAAC,6BAA6B,CAAC,cAAc,MAAM;QACrH,MAAM,sBAAsB,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ,aAAa,yBAAyB,cAAc,OAAO;QAChI,IAAI,IAAI,CAAC,2BAA2B;QACpC,IAAI,iBAAiB,GAAG;YACpB,IAAI,CAAE,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,4BAA4B,KAAM;gBACzE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,wBAAwB;YAChD;QACJ;QACA,IAAI,IAAI,CAAC,yBAAyB;QAClC,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK;QAC5C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,MAAM,IAAI,CAAC,OAAO,CAAC;QACnB,OAAO;YAAC;YAAO;SAAqB;IACxC;IACA,MAAM,iBAAiB,MAAM,EAAE,WAAW,EAAE,sBAAsB,EAAE,aAAa,KAAK,EAAE,YAAY,EAAE,aAAa,KAAK,EAAE;QACtH,MAAM,cAAc,EAAE;QACtB,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,cAAc,kBAAkB,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB;QAChF,MAAM,YAAY,IAAI,CAAC,MAAM,CAAC,SAAS;QACvC,IAAI,YAAY;YACZ,MAAM,eAAe,MAAM,IAAI,CAAC,wBAAwB,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,eAAe,IAAI,CAAC,cAAc,CAAC,eAAe,IAAI,CAAC,SAAS;YAC5J,YAAY,IAAI,CAAC;QACrB;QACA,MAAM,yBAAyB,eAAe,uBAAuB,MAAM,CAAC;QAC5E,IAAI,wBAAwB;YACxB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,QAAQ;YAC3E,yBAAyB;YACzB,YAAY,IAAI,IAAI;QACxB,OACK;YACD,MAAM,gBAAgB,MAAM,IAAI,CAAC,oBAAoB,CAAC;YACtD,IAAI,CAAC,eAAe;gBAChB,MAAM,iCAAiC,IAAI,CAAC,mCAAmC,CAAC,kBAAkB,IAAI,EAAE,wBAAwB,IAAI,CAAC,4BAA4B,CAAC;gBAClK,YAAY,IAAI,CAAC;YACrB;QACJ;QACA,MAAM,uBAAuB,MAAM,IAAI,CAAC,aAAa,CAAC,QAAQ,kBAAkB,WAAW,EAAE,wBAAwB,YAAY;QACjI,YAAY,IAAI,CAAC;QACjB,8DAA8D;QAC9D,IAAI,wBAAwB;YACxB,YAAY,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,wBAAwB,WAAW,WAAW,EAAE;QACpH;QACA,OAAO;IACX;IACA;;;;;;KAMC,GACD,MAAM,SAAS,MAAM,EAAE,WAAW,EAAE,sBAAsB,EAAE,aAAa,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,aAAa,KAAK,EAAE;QACxH,MAAM,oBAAoB,EAAE;QAC5B,MAAM,cAAc,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,aAAa,wBAAwB,YAAY,cAAc;QACvH,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,aAAa,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;QACvH,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,mBAAmB,IAAI,CAAC,IAAI;QACnF,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,OAAO;IACX;IACA,MAAM,yBAAyB,YAAY,EAAE,QAAQ,EAAE,IAAI,EAAE;QACzD,IAAI,IAAI;QACR,MAAM,OAAO,IAAI,CAAC,OAAO,CAAC;QAC1B,MAAM,iCAAiC,KAAK,qCAAqC;QACjF,IAAI,CAAC,kCACD,+BAA+B,MAAM,KAAK,GAAG;YAC7C,CAAC,KAAK,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,yBAAyB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,MAAM;YACrI,OAAO;QACX;QACA,CAAC,KAAK,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,yBAAyB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,IAAI,CAAC,MAAM,+BAA+B,MAAM;QAC1K,IAAI,iBAAiB,EAAE;QACvB,KAAK,MAAM,YAAY,+BAAgC;YACnD,MAAM,eAAe,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,SAAS,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;YAC1G,MAAM,cAAc,MAAM,KAAK,cAAc,CAAC,SAAS,WAAW;YAClE,MAAM,cAAc,MAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,IAAI,CAAC,IACjE,SAAS,WAAW,EAAE,cAAc,MACpC;YACA,iBAAiB,eAAe,MAAM,CAAC;QAC3C;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;QAC1H,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,cAAc,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE,aAAa,KAAK,EAAE,YAAY,EAAE;QACzF,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;YACxB,2BAA2B;gBAAC;aAAY;YACxC,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,IAAI,CAAC,+BAA+B,CAAC,mBAAmB;QACxD,IAAI,IAAI,CAAC,cAAc,CAAC,oBAAoB;YACxC,MAAM,IAAI,CAAC,uCAAuC,CAAC,kBAAkB,IAAI,EAAE;QAC/E;QACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;QACvD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,QAAQ,YAAY;YAC5E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,iBAAiB,kBAAkB,KAAK;gBACxC,aAAa,IAAI,CAAC,kBAAkB;gBACpC;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,kBAAkB;gBAClB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;YACJ;YACA;QACJ;IACJ;IACA;;;;;;;KAOC,GACD,MAAM,gBAAgB,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE,cAAc,EAAE,QAAQ,EAAE;QACnF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,aAAa,kBAAkB,iBAAiB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/L,IAAI,qBAAqB,IAAI,CAAC,kBAAkB,IAC5C,mBAAmB,IAAI,CAAC,kBAAkB,EAAE;YAC5C,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAClD;QACA,OAAO;IACX;IACA,MAAM,qBAAqB,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE,cAAc,EAAE;QAC9E,MAAM,WAAW,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACzG,MAAM,SAAS,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACvG,IAAI;QACJ,MAAM,aAAa,IAAI,CAAC,aAAa,CAAC,kBAAkB,IAAI,CAAC,MAAM,CAAC,SAAS;QAC7E,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa;YAC5B,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBAC1C,cAAc;oBAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,cAAc;iBAAG;gBAC3D,wBAAwB;gBACxB,2BAA2B;oBAAC;iBAAY;YAC5C;QACJ,OACK;YACD,MAAM,uBAAuB,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE;YAC5G,MAAM,kBAAmB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;YAC/D,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBAC1C,cAAc;oBAAC;iBAAgB;gBAC/B,wBAAwB;gBACxB,2BAA2B;oBAAC;iBAAY;YAC5C;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC,aAAa,QAAQ;YACvE,UAAU;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,iBAAiB,IAAI,CAAC,oBAAoB,CAAC,aAAa,KAAK;YACjE;YACA;QACJ;IACJ;IACA,MAAM,cAAc,sBAAsB,EAAE,oBAAoB,EAAE,qBAAqB,EAAE,mBAAmB,EAAE,aAAa,EAAE,YAAY,EAAE,gBAAgB,EAAE,cAAc,EAAE,QAAQ,EAAE;QACnL,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,wBAAwB,sBAAsB,uBAAuB,qBAAqB,eAAe,cAAc,kBAAkB,iBAAiB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/R,IAAI,qBAAqB,IAAI,CAAC,kBAAkB,IAC5C,mBAAmB,IAAI,CAAC,kBAAkB,EAAE;YAC5C,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,wBAAwB;YACzD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,sBAAsB;YACvD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,uBAAuB;YACxD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,qBAAqB;QAC1D;QACA,OAAO;IACX;IACA,MAAM,mBAAmB,sBAAsB,EAAE,oBAAoB,EAAE,qBAAqB,EAAE,mBAAmB,EAAE,aAAa,EAAE,YAAY,EAAE,gBAAgB,EAAE,cAAc,EAAE,iBAAiB,EAAE;QACjM,MAAM,WAAW,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACzG,MAAM,SAAS,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACvG,MAAM,eAAe;YAAC,IAAI,CAAC,cAAc,CAAC;SAAkB;QAC5D,IAAI,CAAC,mBAAmB;YACpB,aAAa,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QAC1C;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,wBAAwB;YACxB,2BAA2B;gBACvB;gBACA;gBACA;gBACA;aACH;QACL;QACA,MAAM,gBAAgB,IAAI;QAC1B,MAAM,wBAAwB,IAAI,CAAC,oBAAoB,CAAC;QACxD,MAAM,uBAAuB,IAAI,CAAC,oBAAoB,CAAC;QACvD,cAAc,GAAG,CAAC,IAAI,CAAC,4BAA4B,CAAC,uBAAuB,QAAQ;QACnF,cAAc,GAAG,CAAC,IAAI,CAAC,4BAA4B,CAAC,sBAAsB,QAAQ;QAClF,KAAK,MAAM,gBAAgB,cAAe;YACtC,kBAAkB,IAAI,CAAC;gBACnB,UAAU;gBACV,YAAY;gBACZ,QAAQ,IAAI,UAAU,SAAS,CAAC;YACpC;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,wBAAwB,sBAAsB,uBAAuB,qBAAqB,kBAAkB,QAAQ,kBAAkB,KAAK,IAAI,gBAAgB,MAAM,iBAAiB,QAAQ,iBAAiB,KAAK,IAAI,eAAe,MAAM;YAC7R,UAAU;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,4BAA4B,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,KAAK;gBACnF,0BAA0B,IAAI,CAAC,oBAAoB,CAAC,sBAAsB,KAAK;gBAC/E,2BAA2B,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,KAAK;gBACjF,yBAAyB,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,KAAK;gBAC7E,aAAa,IAAI,CAAC,kBAAkB;YACxC;YACA;QACJ;IACJ;IACA,MAAM,qBAAqB,gBAAgB,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE;QACxF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,gBAAgB,aAAa,SAAS,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9L,OAAO;IACX;IACA,MAAM,0BAA0B,gBAAgB,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,EAAE;QACnF,MAAM,WAAW,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE;QAClG,MAAM,SAAS,MAAM,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE;QAChG,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBACV,IAAI,CAAC,cAAc,CAAC;gBACpB,IAAI,CAAC,cAAc,CAAC;aACvB;YACD,wBAAwB;YACxB,2BAA2B;gBAAC;aAAY;QAC5C;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,aAAa,WAAW,QAAQ,WAAW,KAAK,IAAI,SAAS,MAAM;YAC1H,UAAU;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,OAAO,MAAM,IAAI,CAAC,iBAAiB;YACvC;YACA;QACJ;IACJ;IACA,MAAM,mCAAmC,WAAW,EAAE,QAAQ,EAAE;QAC5D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oCAAoC,CAAC,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/J,OAAO;IACX;IACA,MAAM,qCAAqC,WAAW,EAAE;QACpD,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kCAAkC,CAAC;YACrE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,iBAAiB,WAAW,KAAK;gBACjC,QAAQ,WAAW,MAAM;YAC7B;QACJ;IACJ;IACA,MAAM,SAAS,2BAA2B,EAAE,WAAW,EAAE,QAAQ,EAAE;QAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,UAAU,CAAC,6BAA6B,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAClK,OAAO;IACX;IACA,MAAM,WAAW,2BAA2B,EAAE,WAAW,EAAE;QACvD,MAAM,qBAAsB,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAmB;YAClC,2BAA2B;gBAAC;aAAY;QAC5C;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa;YAClD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;YACV;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,mBAAmB,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE;QACxE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,aAAa,cAAc,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9K,OAAO;IACX;IACA,MAAM,mCAAmC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAE,QAAQ,EAAE;QAChG,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,qCAAqC,CAAC,aAAa,sBAAsB,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACpM,OAAO;IACX;IACA,MAAM,sCAAsC,WAAW,EAAE,oBAAoB,EAAE,YAAY,EAAE;QACzF,MAAM,cAAe,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;QAC3D,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B,2BAA2B;gBAAC;aAAY;QAC5C;QACA,IAAI,gBAAgB,WAAW;YAC3B,MAAM,eAAe,YAAY,aAAa,CAAC,MAAM,CAAC,CAAC,WAAa,SAAS,WAAW,KAAK,YAAY,CAAC,EAAE;YAC5G,eAAe,aAAa,QAAQ;YACpC,QAAQ,GAAG,CAAC,sBAAsB,aAAa,QAAQ;QAC3D;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kCAAkC,CAAC,cAAc,aAAa;YAC1F,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;YACV;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,wBAAwB,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE;QACnE,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;YACxB,2BAA2B;gBAAC;aAAY;QAC5C;QACA,IAAI,gBAAgB,WAAW;YAC3B,MAAM,cAAc,IAAI,CAAC,cAAc,CAAC;YACxC,MAAM,eAAe,YAAY,aAAa,CAAC,MAAM,CAAC,CAAC,WAAa,SAAS,WAAW,KAAK,YAAY,CAAC,EAAE;YAC5G,eAAe,aAAa,QAAQ;YACpC,QAAQ,GAAG,CAAC,sBAAsB,aAAa,QAAQ;QAC3D;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,cAAc,aAAa;YAC1E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,gBAAgB,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QAC/D,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,aAAa,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC3K,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,OAAO;IACX;IACA,MAAM,qBAAqB,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE;QAC1D,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;YACxB,2BAA2B;gBAAC;aAAY;QAC5C;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC,QAAQ,aAAa;YACjE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA,mBAAmB;QACvB;IACJ;IACA,wBAAwB,WAAW,EAAE;QACjC,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,WAAW,SAAS,EAAE,CAAC,GAAG,CAAC,kBAAkB,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,GAAG,CAAC,mBAAmB,GAAG,mBAAmB,IAAI;QAC/I,MAAM,WAAW,SAAS,EAAE,CAAC,GAAG,CAAC,kBAAkB,GAAG,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,GAAG,CAAC,gBAAgB,GAAG,mBAAmB,IAAI;QAC/I,MAAM,kBAAkB,IAAI,CAAC,0BAA0B,CAAC;QACxD,MAAM,kBAAkB,SAAS,EAAE,CAAC,GAAG,CAAC,UAAU;QAClD,MAAM,uBAAuB,gBACxB,GAAG,CAAC,gBAAgB,KAAK,EACzB,GAAG,CAAC,mBAAmB,eAAe,EACtC,GAAG,CAAC,mBAAmB,eAAe,EACtC,GAAG,CAAC,kBAAkB,GAAG,CAAC,KAAK;QACpC,OAAO;IACX;IACA;;KAEC,GACD,MAAM,aAAa,SAAS,EAAE,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE;QACzE,OAAO,MAAM,IAAI,CAAC,qBAAqB,CAAC;YACpC,WAAW,QAAQ,SAAS,CAAC,MAAM;YACnC;YACA;YACA,iBAAiB;YACjB,OAAO;QACX,GAAG,WAAW,WAAW,WAAW,WAAW,WAAW;IAC9D;IACA,MAAM,aAAa,EAAE,EAAE,IAAI,EAAE;QACzB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,WAAW,SAAS,QAAQ,SAAS,KAAK,IAAI,OAAO,IAAI,CAAC,IAAI,EAAE;QACjH,OAAO;IACX;IACA,MAAM,sBAAsB,WAAW,EAAE,oBAAoB,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,sBAAsB,IAAI,OAAO,EAAE,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE,cAAc,EAAE;QAC/L,MAAM,cAAc,YAAY,WAAW;QAC3C,MAAM,UAAU,YAAY,WAAW;QACvC,MAAM,mBAAmB;YACrB,wBAAwB;YACxB,aAAa;YACb,QAAQ;YACR,eAAe;QACnB;QACA,MAAM,SAAS,OAAO,IAAI,CAAC;QAC3B,MAAM,mBAAmB,iBACnB,IAAI,CAAC,oCAAoC,CAAC;YAAC;eAAgB;SAAoB,EAAE,gBAAgB,YAAY,YAAY,IACzH,IAAI,CAAC,gBAAgB,CAAC;YAAC;eAAgB;SAAoB,EAAE,YAAY,YAAY;QAC3F,iBAAiB,aAAa,GAAG;QACjC,6CAA6C,GAC7C,IAAI,wBAAwB,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,UAAU,EAAE,SAAS;YAChF,iBAAiB,sBAAsB,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,UAAU,EAAE,YAAY,WAAW,EAAE,MAAM,YAAY,YAAY;QACpJ;QACA,sCAAsC,GACtC,IAAI,aAAa,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,UAAU,EAAE,SAAS;YACrE,iBAAiB,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,sBAAsB,aAAa;QACvF;QACA,yFAAyF;QACzF,IAAI,IAAI,CAAC,SAAS,KAAK,GAAG;YACtB,iBAAiB,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,aAAa;gBACjF;gBACA;YACJ,GAAG,WAAW,cAAc,YAAY,YAAY;QACxD;QACA,MAAM,MAAM,MAAM,QAAQ,GAAG,CAAC,OAAO,MAAM,CAAC;QAC5C,MAAM,SAAS,IAAI,MAAM,CAAC,CAAC,KAAK,IAAI;YAChC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG;YACjB,OAAO;QACX,GAAG,CAAC;QACJ,MAAM,SAAU,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ;QACxD,OAAO;IACX;IACA;;;;;;;;;;KAUC,GACD,MAAM,kCAAkC,WAAW,EAAE,oBAAoB,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,sBAAsB,IAAI,OAAO,EAAE,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE;QAC3L,MAAM,aAAa,MAAM,IAAI,CAAC,qBAAqB,CAAC,aAAa,sBAAsB,aAAa,WAAW,UAAU,qBAAqB,cAAc,sBAAsB;QAClL,MAAM,YAAY,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,IAAI,CAAC,MAAM,CAAC,EAAE,WAAW;QACrG,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,aAAa,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;QAC3F,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;YACH;YACA,cAAc,UAAU,MAAM;YAC9B,8BAA8B,UAAU,sBAAsB;YAC9D,mBAAmB,UAAU,WAAW;QAC5C;IACJ;IACA,MAAM,eAAe,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QACtD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC,aAAa,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAClK,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;IACX;IACA,MAAM,oBAAoB,WAAW,EAAE,YAAY,EAAE,kBAAkB,EAAE;QACrE,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,uBAAuB;QAClD,MAAM,OAAO,qBACP,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,gBAC/E,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACzC,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,CAAC,uBAAuB,QAAQ,uBAAuB,KAAK,IAAI,KAAK,IAAI,mBAAmB,kBAAkB,IACtH,EAAE,GACF;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACzC,wBAAwB;YACxB,yBAAyB,YAAY,WAAW;YAChD,2BAA2B,qBACrB;gBAAC,uBAAuB,QAAQ,uBAAuB,KAAK,IAAI,KAAK,IAAI,mBAAmB,kBAAkB;aAAC,GAC/G;QACV;QACA,IAAI,CAAC,GAAG,cAAc,wBAAwB,EAAE,YAAY,QAAQ,GAAG;YACnE,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;gBAC5E,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,aAAa;YAC9D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,WAAW,aAAa,EAAE,QAAQ,EAAE;QACtC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,gBAAgB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5I,OAAO;IACX;IACA,MAAM,gBAAgB,aAAa,EAAE;QACjC,MAAM,qBAAqB,EAAE;QAC7B,MAAM,qBAAqB,EAAE;QAC7B,KAAK,MAAM,eAAe,cAAe;YACrC,MAAM,SAAS,IAAI,CAAC,oBAAoB,CAAC;YACzC,mBAAmB,IAAI,CAAC;gBACpB,QAAQ,OAAO,MAAM;gBACrB,YAAY;gBACZ,UAAU;YACd;YACA,mBAAmB,IAAI,CAAC;gBACpB,QAAQ,OAAO,GAAG,CAAC,MAAM;gBACzB,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,oBAAoB,mBAAmB,MAAM,CAAC;QACpD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe;YAC5D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,oBAAoB,WAAW,EAAE,QAAQ,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,wBAAwB,CAAC,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACnJ,OAAO;IACX;IACA,MAAM,yBAAyB,WAAW,EAAE;QACxC,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;aAAY;YACxC,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,MAAM,sBAAsB,MAAM,CAAC,GAAG,MAAM,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5F,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,mBAAmB,CAAC,aAAa;YACnE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,OAAO,IAAI,CAAC,YAAY,GAClB,IAAI,CAAC,eAAe,GAAG,KAAK,GAC5B,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC3B,YAAY;YAChB;YACA;QACJ;IACJ;IACA,MAAM,sCAAsC,WAAW,EAAE,QAAQ,EAAE;QAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0CAA0C,CAAC,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrK,OAAO;IACX;IACA,MAAM,2CAA2C,eAAe,EAAE;QAC9D,MAAM,sBAAsB,MAAM,CAAC,GAAG,MAAM,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5F,MAAM,sBAAsB,MAAM,CAAC,GAAG,MAAM,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,uBAAuB;QACtI,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qCAAqC,CAAC;YACxE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,OAAO,IAAI,CAAC,YAAY,GAClB,IAAI,CAAC,eAAe,GAAG,KAAK,GAC5B,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC3B,YAAY;gBACZ,YAAY;YAChB;QACJ;IACJ;IACA,MAAM,YAAY,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE;QAC/C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrJ,OAAO;IACX;IACA,MAAM,iBAAiB,OAAO,EAAE,YAAY,EAAE;QAC1C,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;QAC5B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,YAAY,QAAQ,YAAY,KAAK,IAAI,UAAU,MAAM;YACvG,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,oBAAoB,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QAC3D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,wBAAwB,CAAC,aAAa,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACjK,OAAO;IACX;IACA,MAAM,yBAAyB,WAAW,EAAE,YAAY,EAAE;QACtD,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,QAAQ,IAAI,CAAC,gBAAgB,CAAC;QACpC,MAAM,SAAS,IAAI,CAAC,oBAAoB,CAAC,MAAM,WAAW,EAAE,GAAG,CAAC,MAAM;QACtE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;QAC5B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,mBAAmB,CAAC,aAAa;YACnE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;YACJ;YACA;QACJ;IACJ;IACA;;;;;;;;KAQC,GACD,MAAM,kBAAkB,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI,EAAE,SAAS,EAAE;QACvE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,UAAU,cAAc,MAAM,YAAY,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC7K,OAAO;IACX;IACA;;;;;;;KAOC,GACD,MAAM,uBAAuB,QAAQ,EAAE,YAAY,EAAE,IAAI,EAAE,SAAS,EAAE;QAClE,IAAI,IAAI,IAAI;QACZ,MAAM,oBAAoB,CAAC,KAAK,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,oBAAoB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAM,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAC5K,MAAM,cAAc,CAAC,KAAK,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,cAAc,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,cAAc,CAAC;QAClJ,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B,wBAAwB;QAC5B;QACA,MAAM,YAAY,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACzJ,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,UAAU;YAC9D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN;YACJ;YACA;QACJ;IACJ;IACA,MAAM,aAAa,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE;QAC3E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,YAAY,aAAa,WAAW,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACjL,OAAO;IACX;IACA,MAAM,kBAAkB,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE;QACtE,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,IAAI,0BAA0B;QAC9B,IAAI,4BAA4B;QAChC,IAAI,OAAO,gBAAgB,UAAU;YACjC,IAAI,cAAc,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,SAAS;gBAC1D,0BAA0B;YAC9B,OACK,IAAI,cAAc,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,SAAS;gBAC/D,4BAA4B;oBAAC;iBAAY;YAC7C;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD;YACA;YACA,wBAAwB;QAC5B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,eAAe,QAAQ,eAAe,KAAK,IAAI,aAAa,MAAM,gBAAgB,QAAQ,gBAAgB,KAAK,IAAI,cAAc,MAAM,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,MAAM;YACrP,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,qBAAqB,iBAAiB,EAAE,gBAAgB,EAAE,QAAQ,EAAE,YAAY,EAAE;QACpF,MAAM,MAAM;YACR,MAAM,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,UAAU,EAAE,kBAAkB,WAAW,EAAE,kBAAkB,SAAS,EAAE;YACvH,MAAM,IAAI,CAAC,gBAAgB,CAAC,kBAAkB;SACjD;QACD,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK;QAC5C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,YAAY,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE;QAC3D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,UAAU,cAAc,YAAY,EAAE,aAAa,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;QAC1J,OAAO;IACX;IACA,MAAM,qBAAqB,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE;QACpE,MAAM,sBAAsB,MAAM,IAAI,CAAC,2BAA2B;QAClE,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,eAAe,UAAU,WAAW,qBAAqB,WAAW,WAAW;QAC1J,OAAO;YACH,eAAe;QACnB;IACJ;IACA,MAAM,iBAAiB,MAAM,EAAE,YAAY,EAAE,SAAS,EAAE;QACpD,IAAI;QACJ,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,0BAA0B,EAAE;QAClC,MAAM,4BAA4B,EAAE;QACpC,KAAK,MAAM,SAAS,OAAQ;YACxB,IAAI,CAAC,MAAM,UAAU,EAAE;gBACnB,MAAM,IAAI,MAAM;YACpB;YACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,MAAM,UAAU,EAAE,SAAS;gBAClD,wBAAwB,IAAI,CAAC,MAAM,WAAW;YAClD,OACK;gBACD,0BAA0B,IAAI,CAAC,MAAM,WAAW;YACpD;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD;YACA;YACA,wBAAwB;QAC5B;QACA,KAAK,MAAM,SAAS,OAAQ;YACxB,IAAI,CAAC,GAAG,cAAc,wBAAwB,EAAE,MAAM,QAAQ,GAAG;gBAC7D,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;oBAC5E,YAAY;oBACZ,UAAU;gBACd;YACJ;QACJ;QACA,MAAM,kBAAkB,OAAO,GAAG,CAAC,CAAC,OAAS,CAAC,GAAG,cAAc,cAAc,EAAE;QAC/E,MAAM,YAAY,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACzJ,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,iBAAiB;YAC/D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C;YACJ;YACA;QACJ;IACJ;IACA,MAAM,qCAAqC,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE;QAC7E,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,0BAA0B,EAAE;QAClC,MAAM,4BAA4B,EAAE;QACpC,KAAK,MAAM,SAAS,OAAQ;YACxB,IAAI,CAAC,MAAM,UAAU,EAAE;gBACnB,MAAM,IAAI,MAAM;YACpB;YACA,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,MAAM,UAAU,EAAE,SAAS;gBAClD,wBAAwB,IAAI,CAAC,MAAM,WAAW;YAClD,OACK;gBACD,0BAA0B,IAAI,CAAC,MAAM,WAAW;YACpD;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD;YACA;YACA,wBAAwB;QAC5B;QACA,KAAK,MAAM,SAAS,OAAQ;YACxB,IAAI,CAAC,GAAG,cAAc,wBAAwB,EAAE,MAAM,QAAQ,GAAG;gBAC7D,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;oBAC5E,YAAY;oBACZ,UAAU;gBACd;YACJ;QACJ;QACA,MAAM,kBAAkB,OAAO,GAAG,CAAC,CAAC,OAAS,CAAC,GAAG,cAAc,cAAc,EAAE;QAC/E,MAAM,iBAAiB,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,iBAAiB;YAC/E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;QACA,MAAM,cAAc,KAAK,KAAK,CAAC,AAAC,IAAI,iBAAkB,mBAAmB,gBAAgB,CAAC,QAAQ;QAClG,iCAAiC;QACjC,MAAM,uBAAuB,MAAM,IAAI,CAAC,4CAA4C,CAAC,uBAAuB,CAAC,EAAE,EAAE,aAAa;QAC9H,OAAO;YAAC;YAAgB;SAAqB;IACjD;IACA,MAAM,cAAc,oBAAoB,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,kBAAkB,EAAE,eAAe,EAAE,aAAa,EAAE;QAC1I,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,MAAM,OAAO,WAAW,cAAc,oBAAoB,WAAW,iBAAiB,gBAAgB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC3P,OAAO;IACX;IACA,MAAM,mBAAmB,oBAAoB,EAAE,WAAW,EAAE,KAAK,EAAE,SAAS,EAAE,YAAY,EAAE,kBAAkB,EAAE,WAAW,EAAE,eAAe,EAAE,aAAa,EAAE;QACzJ,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,IAAI;QACJ,IAAI,iBAAiB;YACjB,SAAS,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,iBAAiB;QAC7F,OACK;YACD,SAAS,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD;QACA,IAAI;QACJ,IAAI,iBAAiB;YACjB,uBAAuB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC3F,OACK;YACD,uBAAuB,IAAI,CAAC,4BAA4B;QAC5D;QACA,MAAM,cAAc,QACd,MAAM,WAAW,GACjB,YAAY,MAAM,CAAC,IAAI,CAAC,CAAC,QAAU,MAAM,OAAO,KAAK,YAAY,WAAW,GAAG,GAAG,WAAW;QACnG,YAAY,MAAM,OAAO,CAAC,aACpB,YACA,YACI;YAAC;SAAU,GACX,EAAE;QACZ,MAAM,eAAe;YAAC;SAAY;QAClC,KAAK,MAAM,SAAS,UAAW;YAC3B,aAAa,IAAI,CAAC,MAAM,gBAAgB;QAC5C;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,2BAA2B;gBAAC;aAAY;QAC5C;QACA,KAAK,MAAM,SAAS,UAAW;YAC3B,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,KAAK;gBACnB,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,UAAU;gBACxB,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,cAAc;YACd,MAAM,kBAAkB,UAAU,IAAI,CAAC,CAAC,QAAU,MAAM,KAAK,CAAC,MAAM,CAAC,aAAa,QAAQ,OACtF;YACJ,IAAI,CAAC,iBAAiB;gBAClB,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,aAAa,QAAQ;oBAC7B,YAAY;oBACZ,UAAU;gBACd;gBACA,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,aAAa,aAAa;oBAClC,YAAY;oBACZ,UAAU;gBACd;YACJ;QACJ;QACA,IAAI,cAAc;QAClB,IAAI,eAAe;YACf,cAAc;QAClB,OACK;YACD,+CAA+C;YAC/C,IAAI,SAAS,CAAC,aAAa;gBACvB,MAAM,YAAY,YAAY,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,MAAM,OAAO;gBAC5E,IAAI,WAAW;oBACX,cAAc,CAAC,GAAG,SAAS,UAAU,EAAE;gBAC3C;YACJ,OACK,IAAI,aAAa;gBAClB,yEAAyE;gBACzE,4BAA4B;gBAC5B,cAAc;YAClB;QACJ;QACA,IAAI,aAAa;YACb,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;gBACtG,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,UAAU,cAAc,OAAO,MAAM,OAAO;QAClD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,MAAM;YAC/D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,aAAa;gBACb,MAAM;gBACN,WAAW;gBACX,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,gBAAgB,eAAe,EAAE;QACnC,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,MAAM,uBAAuB,IAAI,CAAC,4BAA4B;QAC9D,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC;YACvC,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,aAAa;gBACb,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;IACJ;IACA,MAAM,eAAe,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QACtD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,aAAa,UAAU,aAAa,EACtH,gBAAgB,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;QACtC,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,uBAAuB,EAAE;QAC7E,OAAO;IACX;IACA,MAAM,wBAAwB,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QAC/D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC,aAAa,eAAe;QAClG,OAAO;YACH,kBAAkB;QACtB;IACJ;IACA,MAAM,oBAAoB,WAAW,EAAE,YAAY,EAAE;QACjD,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,uBAAuB,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;YACxB,2BAA2B;gBACvB,YAAY,WAAW;gBACvB,mBAAmB,uBAAuB;aAC7C;QACL;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC,aAAa;YAC9D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,cAAc,oBAAoB,EAAE,IAAI,EAAE,KAAK,EAAE,iBAAiB,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE;QACzG,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,MAAM,OAAO,mBAAmB,WAAW,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/M,OAAO;IACX;IACA,MAAM,mBAAmB,oBAAoB,EAAE,WAAW,EAAE,KAAK,EAAE,iBAAiB,EAAE,SAAS,EAAE,YAAY,EAAE,eAAe,EAAE;QAC5H,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,MAAM,uBAAuB,IAAI,CAAC,4BAA4B;QAC9D,MAAM,cAAc,QACd,MAAM,WAAW,GACjB,YAAY,MAAM,CAAC,IAAI,CAAC,CAAC,QAAU,MAAM,OAAO,KAAK,YAAY,WAAW,GAAG,GAAG,WAAW;QACnG,YAAY,MAAM,OAAO,CAAC,aACpB,YACA,YACI;YAAC;SAAU,GACX,EAAE;QACZ,MAAM,eAAe;YAAC;SAAY;QAClC,KAAK,MAAM,SAAS,UAAW;YAC3B,aAAa,IAAI,CAAC,MAAM,gBAAgB;QAC5C;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,2BAA2B;gBAAC;gBAAa,mBAAmB,uBAAuB;aAAC;QACxF;QACA,KAAK,MAAM,SAAS,UAAW;YAC3B,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,KAAK;gBACnB,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,UAAU;gBACxB,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,UAAU,MAAM,OAAO;QAC7B,IAAI,CAAC,0BAA0B,CAAC,aAAa,mBAAmB;QAChE,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,oBAAoB,kBAAkB,eAAe,GAAG,MAAM,MAAM;YAC7H,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,aAAa;gBACb,MAAM;gBACN,WAAW;gBACX,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,2BAA2B,WAAW,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;QAC1E,IAAI,mBAAmB;YACnB,IAAI,oBAAoB,mBAAmB;gBACvC,IAAI,CAAC,yBAAyB,CAAC,aAAa,mBAAmB;YACnE,OACK,IAAI,sBAAsB,mBAAmB;gBAC9C,IAAI,CAAC,2BAA2B,CAAC,aAAa,mBAAmB;YACrE,OACK,IAAI,yBAAyB,mBAAmB;gBACjD,IAAI,CAAC,4BAA4B,CAAC,aAAa,mBAAmB;YACtE,OACK;gBACD,MAAM,MAAM;YAChB;QACJ,OACK;YACD,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,KAAK;gBACpD,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,IAAI,CAAC,yBAAyB,GAAG,KAAK;gBAC9C,YAAY;gBACZ,UAAU;YACd;QACJ;IACJ;IACA,0BAA0B,WAAW,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;QACzE,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,MAAM;YAChC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,cAAc;YACxC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,WAAW;YACrC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,iBAAiB;YAC3C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,eAAe;YACzC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,SAAS;YACnC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,SAAS;YACnC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,cAAc;YACxC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,eAAe;YACzC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,eAAe;YACzC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,CAAC,GAAG,MAAM,uBAAuB,EAAE,kBAAkB,cAAc,EAAE,kBAAkB,WAAW,EAAE,kBAAkB,gBAAgB;YAC9I,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,kBAAkB;YAC/B,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,YAAY,gBAAgB;YACpC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,KAAK;YACpD,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,yBAAyB,GAAG,KAAK;YAC9C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,eAAe,GAAG,QAAQ;YACvC,YAAY;YACZ,UAAU;QACd;IACJ;IACA,4BAA4B,WAAW,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;QAC3E,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,MAAM;YAChC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,gBAAgB;YAC1C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,mBAAmB;YAC7C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,aAAa;YACvC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,kBAAkB;YAC/B,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,gBAAgB;YAC1C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,iBAAiB;YAC3C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,KAAK;YACpD,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,yBAAyB,GAAG,KAAK;YAC9C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,YAAY,gBAAgB;YACpC,YAAY;YACZ,UAAU;QACd;IACJ;IACA,6BAA6B,WAAW,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;QAC5E,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,MAAM;YAChC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,kBAAkB;YAC/B,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,mBAAmB;YAC7C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,gBAAgB;YAC1C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,yBAAyB;YACnD,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,mBAAmB;YAC7C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,cAAc;YACxC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,cAAc;YACxC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,mBAAmB;YAC7C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,kBAAkB,oBAAoB;YAC9C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,KAAK;YACpD,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,yBAAyB,GAAG,KAAK;YAC9C,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,YAAY,gBAAgB;YACpC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,UAAU,aAAa,CAAC,SAAS;YACzC,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,MAAM;YACrD,YAAY;YACZ,UAAU;QACd;QACA,kBAAkB,IAAI,CAAC;YACnB,QAAQ,IAAI,CAAC,yBAAyB,GAAG,MAAM;YAC/C,YAAY;YACZ,UAAU;QACd;QACA,IAAI,kBAAkB,iBAAiB,EAAE;YACrC,KAAK,MAAM,oBAAoB,kBAAkB,iBAAiB,CAAE;gBAChE,kBAAkB,IAAI,CAAC;oBACnB,QAAQ;oBACR,YAAY;oBACZ,UAAU;gBACd;YACJ;QACJ;IACJ;IACA;;;;;;;;;;;;;;;;KAgBC,GACD,MAAM,KAAK,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,mBAAmB,KAAK,EAAG,EAAE;QACrN,iFAAiF;QACjF,MAAM,cAAc,cAAc;QAClC,IAAI,CAAC,aAAa;YACd,MAAM,IAAI,MAAM;QACpB;QACA,IAAI;QACJ,sCAAsC;QACtC,IAAI,uBAAuB,oBAAoB,iBAAiB,EAAE;YAC9D,MAAM,MAAM,IAAI,CAAC,WAAW,CAAC;gBACzB,YAAY;gBACZ;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACJ;QACJ,OACK,IAAI,uBAAuB,cAAc,WAAW,EAAE;YACvD,MAAM,MAAM,IAAI,CAAC,cAAc,CAAC;gBAC5B,aAAa;gBACb;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACJ;QACJ,OACK,IAAI,uBAAuB,gBAAgB,aAAa,EAAE;YAC3D,MAAM,aAAa,UAAU,QAAQ,UAAU,KAAK,IAAI,QAAQ,OAAO,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK;YAChH,MAAM,MAAM,IAAI,CAAC,kBAAkB,CAAC;gBAChC,eAAe;gBACf;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,OAAO;gBACP;gBACA;YACJ;QACJ,OACK;YACD,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,MAAM,IAAI,GAAG;QACnB,MAAM,eAAe,IAAI,YAAY;QACrC,MAAM,KAAM,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,UAAU,GAAG;QAC1D,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC;QACnD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,gBAAgB;QACjD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,eAAe;QAChD,OAAO;IACX;IACA,MAAM,eAAe,EAAE,WAAW,EAAE,cAAc,EAAE,aAAa,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,UAAU,EAAE,oBAAoB,EAAG,EAAE;QAC1M,MAAM,YAAY,IAAI,CAAC,oBAAoB,CAAC;QAC5C,MAAM,WAAW,IAAI,CAAC,oBAAoB,CAAC;QAC3C,MAAM,aAAa,aAAa;QAChC,MAAM,2BAA2B,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,kBAAkB;QACjF,MAAM,kBAAkB,EAAE;QAC1B,IAAI,CAAC,2BAA2B;YAC5B,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,4BAA4B,MAAM,IAAI,CAAC,yBAAyB,CAAC,UAAU,WAAW,EAAE,OAAO;YAC/F,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,2BAA2B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE;YAC3L;QACJ;QACA,IAAI,CAAC,0BAA0B;YAC3B,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,2BAA2B,MAAM,IAAI,CAAC,yBAAyB,CAAC,SAAS,WAAW,EAAE,OAAO;YAC7F,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,0BAA0B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,IAAI,EAAE;YACzL;QACJ;QACA,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC;YACpD;YACA;YACA,UAAU,aAAa,2BAA2B;YAClD,gBAAgB;YAChB,iBAAiB;YACjB;YACA;QACJ;QACA,MAAM,EAAE,kBAAkB,EAAE,YAAY,EAAE,GAAG,MAAM,YAAY,OAAO,CAAC;YACnE,WAAW,SAAS,IAAI;YACxB,YAAY,UAAU,IAAI;YAC1B;YACA,eAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS;YAC7C;YACA,UAAU,aAAa,cAAc,QAAQ,CAAC,QAAQ,GAAG,cAAc,QAAQ,CAAC,OAAO;YACvF;YACA,gBAAgB,QAAQ,gBAAgB,GAAG;QAC/C;QACA,MAAM,oBAAoB,YAAY,oBAAoB,CAAC;YACvD;YACA,WAAW,SAAS,IAAI;YACxB,YAAY,UAAU,IAAI;QAC9B;QACA,MAAM,MAAM;eACL;YACH;eACG;YACH;SACH;QACD,OAAO;YAAE;YAAK;QAAa;IAC/B;IACA,MAAM,mBAAmB,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,KAAK,EAAE,UAAU,EAAE,oBAAoB,EAAG,EAAE;QACvN,MAAM,YAAY,IAAI,CAAC,oBAAoB,CAAC;QAC5C,MAAM,WAAW,IAAI,CAAC,oBAAoB,CAAC;QAC3C,IAAI,CAAC,OAAO;YACR,MAAM,eAAe,MAAM,cAAc,QAAQ,CAAC;gBAC9C,WAAW,SAAS,IAAI;gBACxB,YAAY,UAAU,IAAI;gBAC1B;gBACA;gBACA;gBACA;YACJ;YACA,QAAQ;QACZ;QACA,IAAI,CAAC,OAAO;YACR,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,aAAa,aAAa,cAAc,MAAM,QAAQ,KAAK;QACjE,MAAM,WAAW,IAAI,SAAS,EAAE,CAAC,MAAM,QAAQ;QAC/C,MAAM,2BAA2B,SAAS,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,kBAAkB;QACnF,MAAM,cAAc,MAAM,cAAc,OAAO,CAAC;YAC5C;YACA,eAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS;YAC7C;QACJ;QACA,MAAM,EAAE,kBAAkB,EAAE,YAAY,EAAE,GAAG,MAAM,cAAc,oCAAoC,CAAC;YAClG;QACJ;QACA,MAAM,sBAAsB,cAAc,sBAAsB,CAAC;YAC7D;YACA,WAAW,SAAS,IAAI;YACxB,YAAY,UAAU,IAAI;QAC9B;QACA,MAAM,kBAAkB,EAAE;QAC1B,IAAI,CAAC,2BAA2B;YAC5B,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,4BAA4B,MAAM,IAAI,CAAC,yBAAyB,CAAC,UAAU,WAAW,EAAE,OAAO;YAC/F,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,2BAA2B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE;YAC3L;QACJ;QACA,IAAI,CAAC,0BAA0B;YAC3B,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,2BAA2B,MAAM,IAAI,CAAC,yBAAyB,CAAC,SAAS,WAAW,EAAE,OAAO;YAC7F,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,0BAA0B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,IAAI,EAAE;YACzL;QACJ;QACA,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC;YACpD;YACA;YACA,UAAU,aAAa,2BAA2B;YAClD,gBAAgB;YAChB,iBAAiB;YACjB;YACA;QACJ;QACA,MAAM,MAAM;eACL;YACH;eACG;YACH;SACH;QACD,OAAO;YAAE;YAAK;QAAa;IAC/B;IACA;;;;;;;;;;;KAWC,GACD,MAAM,UAAU,EAAE,cAAc,EAAE,aAAa,EAAE,QAAQ,EAAE,cAAc,EAAE,eAAe,EAAE,UAAU,EAAE,UAAU,EAAE,oBAAoB,EAAG,EAAE;QACzI,MAAM,4BAA4B,wBAAyB,MAAM,IAAI,CAAC,uBAAuB;QAC7F,MAAM,eAAe,EAAE;QACvB,IAAI;YACA,IAAI,IAAI,CAAC,OAAO,MAAM,IAAI,CAAC,OAAO,GAAG,qBAAqB,IAAI;gBAC1D,aAAa,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,qBAAqB,GAAG,IAAI;YACjE;QACJ,EACA,OAAO,KAAK;QACR,SAAS;QACb;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,2BAA2B;gBAAC;gBAAgB;aAAc;YAC1D,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,MAAM,gBAAgB,IAAI,CAAC,oBAAoB,CAAC;QAChD,MAAM,eAAe,IAAI,CAAC,oBAAoB,CAAC;QAC/C,MAAM,kBAAkB,IAAI,CAAC,4BAA4B,CAAC;QAC1D,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,IAAI,CAAC,gBAAgB,MAAM,CAAC,iBAAiB;YACzC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,IAAI,CAAC,WAAW,CAAC,kBAAkB,IAAI,CAAC,WAAW,CAAC,eAAe;YACnE,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,IAAI;gBACzB,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,cAAc,IAAI;gBAC1B,YAAY;gBACZ,UAAU;YACd;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,gBAAgB;gBACpC,IAAI,CAAC,uCAAuC,CAAC,cAAc,IAAI,EAAE;YACrE;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,eAAe;gBACnC,IAAI,CAAC,uCAAuC,CAAC,aAAa,IAAI,EAAE;YACpE;QACJ;QACA,MAAM,cAAc,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,gBAAgB,UAAU;YAClG,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,oBAAoB,cAAc,KAAK;gBACvC,mBAAmB,aAAa,KAAK;gBACrC;gBACA;gBACA,cAAc;gBACd,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,MAAM,YAAY,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,gBAAgB,eAAe,QAAQ,eAAe,KAAK,IAAI,aAAa,MAAM,eAAe,QAAQ,eAAe,KAAK,IAAI,aAAa,MAAM;YACxN,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,oBAAoB,cAAc,KAAK;gBACvC,mBAAmB,aAAa,KAAK;gBACrC;gBACA;gBACA,cAAc;gBACd,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,OAAO;YAAE;YAAa;QAAU;IACpC;IACA,MAAM,YAAY,EAAE,UAAU,EAAE,cAAc,EAAE,aAAa,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,UAAU,EAAE,KAAK,EAAE,EAAE,EAAG,EAAE;QAC3L,yCAAyC;QACzC,MAAM,YAAY,IAAI,CAAC,oBAAoB,CAAC;QAC5C,MAAM,WAAW,IAAI,CAAC,oBAAoB,CAAC;QAC3C,MAAM,aAAa,aAAa;QAChC,MAAM,2BAA2B,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,kBAAkB;QACjF,MAAM,kBAAkB,EAAE;QAC1B,wCAAwC;QACxC,IAAI,iCAAiC;QACrC,IAAI,gCAAgC;QACpC,IAAI,CAAC,gCAAgC;YACjC,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,iCAAiC,MAAM,IAAI,CAAC,yBAAyB,CAAC,UAAU,WAAW,EAAE,OAAO;YACpG,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,gCAAgC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,IAAI,EAAE;YAChM;QACJ;QACA,IAAI,CAAC,+BAA+B;YAChC,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,gCAAgC,MAAM,IAAI,CAAC,yBAAyB,CAAC,SAAS,WAAW,EAAE,OAAO;YAClG,MAAM,cAAc,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC;YACzD,IAAI,CAAC,aAAa;gBACd,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,+BAA+B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,IAAI,EAAE;YAC9L;QACJ;QACA,gDAAgD;QAChD,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC;YACpD;YACA;YACA,UAAU,aAAa,2BAA2B;YAClD,gBAAgB;YAChB,iBAAiB;YACjB;QACJ;QACA,6CAA6C;QAC7C,MAAM,aAAa,MAAM,WAAW,mBAAmB,CAAC;YACpD,WAAW,SAAS,IAAI;YACxB,YAAY,UAAU,IAAI;YAC1B;YACA,eAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS;YAC7C;YACA;YACA;YACA,OAAO,UAAU,QAAQ,UAAU,KAAK,IAAI,QAAQ,OAAO,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK;QACxG;QACA,MAAM,kBAAkB;eACjB;YACH;eACG,WAAW,YAAY;YAC1B;SACH;QACD,OAAO;YACH,KAAK;YACL,cAAc,WAAW,YAAY;QACzC;IACJ;IACA,MAAM,aAAa,EAAE,MAAM,EAAE,EAAE;QAC3B,MAAM,MAAM,MAAM,IAAI,CAAC,iBAAiB,CAAC;YAAE;QAAO;QAClD,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC;IACA,MAAM,kBAAkB,EAAE,MAAM,EAAE,oBAAoB,EAAG,EAAE;QACvD,MAAM,WAAW,IAAI,CAAC,oBAAoB,CAAC,GAAG,IAAI;QAClD,MAAM,cAAc,MAAM,IAAI,CAAC,yBAAyB,CAAC;QACzD,MAAM,cAAc,MAAM,IAAI,CAAC,yBAAyB,CAAC,GAAG;QAC5D,MAAM,oBAAoB,MAAM,IAAI,CAAC,oBAAoB,CAAC;QAC1D,MAAM,cAAc,CAAC,GAAG,YAAY,6BAA6B,EAAE,aAAa,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;QAC5H,MAAM,eAAe,MAAM,IAAI,CAAC,iDAAiD,CAAC,aAAa,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAC7I,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC;YACpD,eAAe;YACf,gBAAgB;YAChB,UAAU;YACV,gBAAgB;YAChB,iBAAiB;YACjB;QACJ;QACA,MAAM,UAAU,CAAC,GAAG,WAAW,yBAAyB,EAAE,IAAI,CAAC,QAAQ;QACvE,MAAM,YAAY,MAAM,CAAC,GAAG,WAAW,oBAAoB,EAAE;YACzD;YACA,aAAa;YACb,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS;YACnC;QACJ;QACA,MAAM,MAAM,EAAE;QACd,IAAI,CAAC,mBAAmB;YACpB,IAAI,IAAI,CAAC;QACb;QACA,IAAI,IAAI,CAAC,aAAa,aAAa,WAAW,cAAc;QAC5D,OAAO;IACX;IACA,MAAM,aAAa,oBAAoB,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,eAAe,EAAE;QAC7E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,MAAM,OAAO,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACnL,OAAO;IACX;IACA,MAAM,kBAAkB,oBAAoB,EAAE,WAAW,EAAE,KAAK,EAAE,eAAe,EAAE;QAC/E,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,IAAI;QACJ,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,MAAM,UAAU,EAAE,SAAS;YAClD,0BAA0B;gBACtB,cAAc;oBAAC;iBAAY;gBAC3B,2BAA2B;oBAAC,MAAM,WAAW;iBAAC;YAClD;QACJ,OACK;YACD,0BAA0B;gBACtB,cAAc;oBAAC;iBAAY;gBAC3B,2BAA2B;oBAAC,MAAM,WAAW;oBAAE,mBAAmB,uBAAuB;iBAAC;YAC9F;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,UAAU,MAAM,OAAO;QAC7B,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,SAAS;YACxD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,kBAAkB,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,EAAE;QAC3E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,sBAAsB,MAAM,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACjL,OAAO;IACX;IACA,MAAM,uBAAuB,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE;QAC7E,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC;YACpD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,eAAe,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,EAAE;QACxE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC,sBAAsB,MAAM,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9K,OAAO;IACX;IACA,MAAM,oBAAoB,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE;QAC1E,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;QAC/B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC;YACjD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,gBAAgB,oBAAoB,EAAE,QAAQ,EAAE;QAClD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACxJ,OAAO;IACX;IACA,MAAM,qBAAqB,oBAAoB,EAAE;QAC7C,MAAM,cAAe,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;QAC3D,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;QAC/B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC;YAClD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,oBAAoB,oBAAoB,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE;QAC3E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,MAAM,gBAAgB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACjL,OAAO;IACX;IACA,MAAM,yBAAyB,oBAAoB,EAAE,WAAW,EAAE,aAAa,EAAE;QAC7E,MAAM,4BAA4B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAClG,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;QAC/B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,mBAAmB,CAAC;YACtD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW;gBACX,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,8BAA8B,aAAa,EAAE,QAAQ,EAAE;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kCAAkC,CAAC,gBAAgB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/J,OAAO;IACX;IACA,MAAM,mCAAmC,aAAa,EAAE;QACpD,MAAM,4BAA4B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAClG,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,6BAA6B,CAAC;YAChE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW;gBACX,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;QACJ;IACJ;IACA,MAAM,0BAA0B,oBAAoB,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,EAAE;QACnF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,8BAA8B,CAAC,sBAAsB,MAAM,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACzL,OAAO;IACX;IACA,MAAM,+BAA+B,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE;QACrF,MAAM,SAAS,oBAAoB,QAAQ,oBAAoB,KAAK,IAAI,kBAAmB,MAAM,IAAI,CAAC,uBAAuB;QAC7H,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;QAC/B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,yBAAyB,CAAC;YAC5D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,sBAAsB,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,gBAAgB,EAAE,yBAAyB,EAAE,QAAQ,EAAE,YAAY,EAAE;QACnI,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,WAAW,cAAc,kBAAkB,2BAA2B,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC/O,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;IACX;IACA,MAAM,iDAAiD,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,sBAAsB,IAAI,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE,mBAAmB,EAAE,yBAAyB,EAAE,WAAW,EAAE;QAClP,MAAM,kBAAkB,EAAE;QAC1B,MAAM,YAAY;YACd,gBAAgB;YAChB,wBAAwB;YACxB,aAAa;QACjB;QACA,2HAA2H;QAC3H,MAAM,kBAAkB,MAAM,IAAI,CAAC,SAAS,CAAC,gCAAgC;QAC7E,MAAM,sBAAsB,MAAM,IAAI,CAAC,2BAA2B;QAClE,IAAI,iCAAiC;QACrC,MAAM,qBAAqB;YACvB,IAAI;YACJ,MAAM,iBAAiB,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,WAAW,cAAc,WAAW,2BAA2B;YACzI,gBAAgB,IAAI,CAAC;YACrB,IAAI,oBAAoB,MAAM,GAAG,GAAG;gBAChC,MAAM,kBAAkB,MAAM,IAAI,CAAC,gBAAgB,CAAC,qBAAqB;gBACzE,gBAAgB,IAAI,CAAC;YACzB;YACA,MAAM,kCAAkC,aAAa,QAAQ,aAAa,KAAK,IAAI,KAAK,IAAI,SAAS,wBAAwB;YAC7H,MAAM,8BAA8B;YACpC,MAAM,oCAAoC;gBACtC,GAAG,QAAQ;gBACX,0BAA0B;YAC9B;YACA,IAAI,mCAAmC,6BAA6B;gBAChE,MAAM,sBAAuB,MAAM,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,UAAU,WAAW,qBAAqB,MAAM,iBAAiB;gBAC3I,MAAM,mBAAmB,MAAM,mBAAmB,yBAAyB,CAAC,oBAAoB,CAAC,qBAAqB,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,SAAS,4BAA4B,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,KAAK,SAAS,YAAY;gBAC/O,IAAI,+BAA+B,CAAC,iBAAiB,OAAO,EAAE;oBAC1D,iCAAiC;oBACjC;gBACJ;gBACA,UAAU,cAAc,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,iBAAiB;oBACpE,GAAG,iCAAiC;oBACpC,cAAc,iBAAiB,YAAY;gBAC/C,GAAG,WAAW,qBAAqB,WAAW,iBAAiB;YACnE,OACK;gBACD,UAAU,cAAc,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,UAAU,WAAW,qBAAqB,WAAW,iBAAiB;YAClJ;YACA;QACJ;QACA,MAAM,oBAAoB;YACtB,IAAI,wBAAwB,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,UAAU,EAAE,SAAS;gBAChF,MAAM,iBAAiB,MAAM,IAAI,CAAC,iBAAiB,CAAC,YAAY,UAAU,EAAE,YAAY,WAAW,EAAE,MAAM;gBAC3G,UAAU,sBAAsB,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC;oBAAC;iBAAe,EAAE,UAAU,IAAI,CAAC,SAAS,EAAE,qBAAqB,WAAW,iBAAiB;YAChK;YACA;QACJ;QACA,MAAM,kBAAkB;YACpB,IAAI,aAAa,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,UAAU,EAAE,SAAS;gBACrE,MAAM,uBAAuB,MAAM,IAAI,CAAC,uBAAuB,CAAC;gBAChE,MAAM,cAAc,MAAM,IAAI,CAAC,WAAW,CAAC,sBAAsB,IAAI,CAAC,cAAc,CAAC,eAAe,YAAY,WAAW;gBAC3H,UAAU,WAAW,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC;oBAAC;iBAAY,EAAE,UAAU,IAAI,CAAC,SAAS,EAAE,qBAAqB,WAAW,iBAAiB;YAClJ;YACA;QACJ;QACA,MAAM,QAAQ,GAAG,CAAC;YACd;YACA;YACA;SACH;QACD,IAAI,gCAAgC;YAChC,OAAO;QACX;QACA,OAAO;IACX;IACA,MAAM,qCAAqC,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,sBAAsB,IAAI,OAAO,EAAE,QAAQ,EAAE,YAAY,EAAE,oBAAoB,EAAE,SAAS,EAAE,mBAAmB,EAAE;QAC9L,MAAM,YAAY,MAAM,IAAI,CAAC,gDAAgD,CAAC,aAAa,WAAW,cAAc,qBAAqB,UAAU,cAAc,sBAAsB,WAAW;QAClM,IAAI,CAAC,WAAW;YACZ,OAAO;QACX;QACA,MAAM,YAAY,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,WAChE,aAAa;QACb,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,WAAW;QAClC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,cAAc,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;QAC5F,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;YACH;YACA,8BAA8B,UAAU,sBAAsB;YAC9D,mBAAmB,UAAU,WAAW;QAC5C;IACJ;IACA,MAAM,2BAA2B,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,gBAAgB,EAAE,yBAAyB,EAAE,YAAY,EAAE,SAAS,EAAE;QACzI,IAAI;QACJ,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,MAAM,IAAI,CAAC,4BAA4B;QAClE,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,YAAY,MAAM,OAAO,CAAC,aACpB,YACA,YACI;YAAC;SAAU,GACX,EAAE;QACZ,MAAM,eAAe;YAAC,IAAI,CAAC,cAAc,CAAC;SAAc;QACxD,KAAK,MAAM,SAAS,UAAW;YAC3B,aAAa,IAAI,CAAC,MAAM,gBAAgB;QAC5C;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,wBAAwB;YACxB,2BAA2B;gBAAC,YAAY,WAAW;aAAC;QACxD;QACA,KAAK,MAAM,SAAS,UAAW;YAC3B,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,KAAK;gBACnB,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,MAAM,UAAU;gBACxB,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,cAAc;YACd,MAAM,kBAAkB,UAAU,IAAI,CAAC,CAAC,QAAU,MAAM,KAAK,CAAC,MAAM,CAAC,aAAa,QAAQ,OACtF;YACJ,IAAI,CAAC,iBAAiB;gBAClB,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,aAAa,QAAQ;oBAC7B,YAAY;oBACZ,UAAU;gBACd;gBACA,kBAAkB,IAAI,CAAC;oBACnB,QAAQ,aAAa,aAAa;oBAClC,YAAY;oBACZ,UAAU;gBACd;YACJ;QACJ;QACA,IAAI,CAAC,GAAG,cAAc,wBAAwB,EAAE,YAAY,QAAQ,GAAG;YACnE,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;gBAC5E,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,iBAAiB;QACrB,IAAI,6BAA6B,kBAAkB;YAC/C,iBACI,AAAC,CAAC,8BAA8B,QAAQ,8BAA8B,KAAK,IAAI,4BAA4B,GAAG,KAAK,IAAK,CAAC,qBAAqB,QAAQ,qBAAqB,KAAK,IAAI,mBAAmB,CAAC;QAChN;QACA,MAAM,YAAY,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACzJ,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa,gBAAgB;YACrF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW;gBACX;YACJ;YACA;QACJ;IACJ;IACA,MAAM,sBAAsB,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE;QACtF,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,WAAW,cAAc,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAClM,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;IACX;IACA,MAAM,2BAA2B,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE;QACjF,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,IAAI,CAAC,4BAA4B;QAC5D,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBACV,IAAI,CAAC,cAAc,CAAC;gBACpB,UAAU,gBAAgB;aAC7B;YACD,wBAAwB;YACxB,2BAA2B;gBAAC,YAAY,WAAW;aAAC;QACxD;QACA,IAAI,cAAc;YACd,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,QAAQ;gBAC7B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,aAAa;gBAClC,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,eAAe,UAAU,KAAK,CAAC,OAAO;QAC5C,IAAI,CAAC,GAAG,SAAS,UAAU,EAAE,UAAU,KAAK,GAAG;YAC3C,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,gBAAgB,CAAC,SAAS;gBACrH,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa,cAAc;YACnF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW;gBACX,OAAO,UAAU,KAAK;gBACtB,YAAY,UAAU,UAAU;gBAChC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,gCAAgC,kBAAkB,EAAE,cAAc,EAAE;QAChE,MAAM,WAAW,IAAI,CAAC,iCAAiC,CAAC,oBAAoB;QAC5E,MAAM,cAAc,OAAO,IAAI,CAAC,SAAS,QAAQ,CAAC;QAClD,OAAO;YACH;YACA,WAAW,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,CAAC,SAAS,QAAQ,CAAC;QAC9D;IACJ;IACA;;;;;;;;KAQC,GACD,0CAA0C,SAAS,EAAE,kBAAkB,EAAE,cAAc,EAAE;QACrF,oCAAoC;QACpC,MAAM,sBAAsB,OAAO,IAAI,CAAC,UAAU,SAAS;QAC3D,uDAAuD;QACvD,MAAM,aAAa,IAAI,CAAC,+BAA+B,CAAC,oBAAoB;QAC5E,OAAO;YACH,YAAY;YACZ,aAAa;QACjB;IACJ;IACA;;KAEC,GACD,kCAAkC,kBAAkB,EAAE,cAAc,EAAE;QAClE,IAAI,mBAAmB,cAAc,KAAK,WAAW;YACjD,mBAAmB,cAAc,GAAG;QACxC;QACA,IAAI,mBAAmB,uBAAuB,KAAK,WAAW;YAC1D,mBAAmB,uBAAuB,GAAG;QACjD;QACA,MAAM,eAAe,iBACf,WAAW,MAAM,wCACjB,WAAW,MAAM;QACvB,MAAM,SAAS,OAAO,IAAI,CAAC,CAAC,GAAG,SAAS,MAAM,EAAE,cAAc,KAAK,CAAC,GAAG;QACvE,2EAA2E;QAC3E,MAAM,sBAAsB;YACxB,GAAG,kBAAkB;YACrB,YAAY,mBAAmB,UAAU,KAAK,YACxC,mBAAmB,UAAU,GAC7B;YACN,oBAAoB,mBAAmB,kBAAkB,KAAK,YACxD,mBAAmB,kBAAkB,GACrC;QACV;QACA,MAAM,MAAM,OAAO,MAAM,CAAC;YACtB;YACA,iBACM,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,uCAAuC,uBACvE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,+BAA+B;SACxE;QACD,OAAO;IACX;IACA;;;;;KAKC,GACD,kCAAkC,cAAc,EAAE,cAAc,EAAE;QAC9D,MAAM,YAAY,iBACZ,wCACA;QACN,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,OAAO,MAAM,CAAC;YAC5D,eAAe,KAAK,CAAC;YACrB,OAAO,KAAK,CAAC;SAChB;IACL;IACA,YAAY,OAAO,EAAE,UAAU,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;QAC9C,OAAO,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,QAAQ,SAAS;IACnF;IACA,MAAM,yBAAyB,0BAA0B,EAAE,WAAW,EAAE,SAAS,EAAE,eAAe,EAAE,EAAE,qBAAqB,EAAE,QAAQ,EAAE;QACnI,MAAM,MAAM,MAAM,IAAI,CAAC,kCAAkC,CAAC,4BAA4B,aAAa,WAAW,cAAc;QAC5H,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACtG,OAAO;IACX;IACA,MAAM,mCAAmC,0BAA0B,EAAE,WAAW,EAAE,SAAS,EAAE,eAAe,EAAE,EAAE,qBAAqB,EAAE;QACnI,IAAI;QACJ,MAAM,mBAAmB,UAAU,gBAAgB,CAAC,MAAM,CAAC,UAAU,gBAAgB,CAAC,QAAQ;QAC9F,MAAM,WAAW,OAAO,IAAI,CAAC,2BAA2B,WAAW,CAAC,QAAQ,IAAI;QAChF,MAAM,gBAAgB,IAAI,CAAC,iCAAiC,CAAC,UAAU;QACvE,MAAM,4BAA4B,CAAC,CAAC,KAAK,cAAc,uBAAuB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,EAAE,CAAC,mBAAmB,IAAI,CAAC,IAC7I;YAAC,mBAAmB,uBAAuB;SAAC,GAC5C;QACN,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,UAAU,gBAAgB;aAAC;YAC1C,wBAAwB;YACxB,yBAAyB;YACzB;QACJ;QACA,IAAI,CAAC,GAAG,cAAc,wBAAwB,EAAE,cAAc,oBAAoB,CAAC,QAAQ,GAAG;YAC1F,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;gBAC5E,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,cAAc,kBAAkB,KAAK,QACrC,cAAc,UAAU,KAAK,MAAM;YACnC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,gBAAgB,CAAC,SAAS;gBACrH,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,sBAAsB,OAAO,KAAK,CAAC;QACzC,oBAAoB,aAAa,CAAC,2BAA2B,WAAW,CAAC,MAAM;QAC/E,MAAM,kBAAkB,OAAO,MAAM,CAAC;YAClC,2BAA2B,SAAS;YACpC,UAAU,gBAAgB,CAAC,OAAO;YAClC;YACA,2BAA2B,WAAW;SACzC;QACD,MAAM,kCAAkC,CAAC,GAAG,eAAe,4BAA4B,EAAE,yBAAyB,aAAa,MAAM,GAAG,GAAG,IAAI,iBAAiB;QAChK,MAAM,iCAAiC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,wBAAwB,CAAC,iBAAiB,kBAAkB;YACxH,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM,UAAU,KAAK;gBACrB,WAAW,UAAU,UAAU;gBAC/B,qBAAqB,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,gBAAgB,CAAC,SAAS;gBAC7H,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,UAAU,UAAU,0BAA0B;YAClD;YACA;QACJ;QACA,OAAO;YAAC;YAAiC;SAA+B;IAC5E;IACA,MAAM,+BAA+B,0BAA0B,EAAE,kBAAkB,EAAE,SAAS,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE,eAAe,EAAE,EAAE,qBAAqB,EAAE;QACzL,MAAM,MAAM,MAAM,IAAI,CAAC,oCAAoC,CAAC,4BAA4B,oBAAoB,WAAW,aAAa,cAAc,cAAc,cAAc;QAC9K,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5G,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,OAAO;IACX;IACA,MAAM,qCAAqC,0BAA0B,EAAE,kBAAkB,EAAE,SAAS,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,eAAe,EAAE,EAAE,qBAAqB,EAAE;QACrL,MAAM,CAAC,2BAA2B,+BAA+B,GAAG,MAAM,IAAI,CAAC,kCAAkC,CAAC,4BAA4B,YAAY,WAAW,EAAE,WAAW,cAAc;QAChM,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,IAAI,CAAC,4BAA4B;QAC5D,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBACV,IAAI,CAAC,cAAc,CAAC;gBACpB,UAAU,gBAAgB;aAC7B;YACD,wBAAwB;YACxB,2BAA2B;gBAAC,YAAY,WAAW;aAAC;QACxD;QACA,IAAI,cAAc;YACd,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,QAAQ;gBAC7B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,aAAa;gBAClC,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,mBAAmB,UAAU,gBAAgB,CAAC,MAAM,CAAC,UAAU,gBAAgB,CAAC,QAAQ;QAC9F,MAAM,WAAW,OAAO,IAAI,CAAC,2BAA2B,WAAW,CAAC,QAAQ,IAAI;QAChF,MAAM,gBAAgB,IAAI,CAAC,iCAAiC,CAAC,UAAU;QACvE,IAAI,cAAc,kBAAkB,KAAK,QACrC,cAAc,UAAU,KAAK,MAAM;YACnC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,gBAAgB,CAAC,SAAS;gBACrH,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,iBAAiB,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,aAAa,oBAAoB;YAClH,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW;gBACX,OAAO,UAAU,KAAK;gBACtB,YAAY,UAAU,UAAU;gBAChC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,0BAA0B,CAAC,GAAG,MAAM,gCAAgC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,UAAU,gBAAgB,CAAC,SAAS;YACtI;YACA;QACJ;QACA,OAAO;YACH;YACA;YACA;SACH;IACL;IACA,MAAM,6BAA6B,WAAW,EAAE,iBAAiB,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE;QAChH,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,mBAAmB,WAAW,cAAc,eAAe;QACrJ,OAAO;YACH,yBAAyB;QAC7B;IACJ;IACA,MAAM,sBAAsB,WAAW,EAAE,iBAAiB,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE;QACzG,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,IAAI,CAAC,4BAA4B,CAAC,aAAa,mBAAmB,WAAW,cAAc,UAAU,aAAa,EAAE,uBAAuB,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;QACtN,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,uBAAuB,EAAE;QAC7E,OAAO;IACX;IACA,MAAM,2BAA2B,WAAW,EAAE,iBAAiB,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE;QACpG,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,IAAI,CAAC,4BAA4B;QAC5D,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,eAAe;YAAC,IAAI,CAAC,cAAc,CAAC;SAAc;QACxD,IAAI,cAAc,WAAW;YACzB,aAAa,IAAI,CAAC,UAAU,gBAAgB;QAChD;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,wBAAwB;YACxB,2BAA2B;gBACvB,YAAY,WAAW;gBACvB,mBAAmB,uBAAuB;aAC7C;QACL;QACA,IAAI,eAAe;QACnB,IAAI,WAAW;YACX,eAAe,UAAU,KAAK,CAAC,OAAO;YACtC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,UAAU,KAAK;gBACvB,UAAU;gBACV,YAAY;YAChB;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,UAAU,UAAU;gBAC5B,UAAU;gBACV,YAAY;YAChB;QACJ;QACA,IAAI,cAAc;YACd,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,QAAQ;gBAC7B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,aAAa;gBAClC,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,CAAC,0BAA0B,CAAC,YAAY,WAAW,EAAE,mBAAmB;QAC5E,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa,oBAAoB,kBAAkB,eAAe,GAAG,MAAM,cAAc;YACjJ,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW;gBACX,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,sBAAsB,WAAW,EAAE,SAAS,EAAE,iBAAiB,EAAE,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE;QACzG,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,WAAW,mBAAmB,cAAc,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACrN,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,YAAY,WAAW,EAAE;QAC1D,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,mBAAmB,uBAAuB,EAAE;QAC7E,OAAO;IACX;IACA,MAAM,2BAA2B,WAAW,EAAE,SAAS,EAAE,iBAAiB,EAAE,YAAY,EAAE,YAAY,EAAE;QACpG,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,aAAa;YAAE,YAAY,QAAQ,UAAU,CAAC,IAAI;QAAC;QACnG,MAAM,qBAAqB,IAAI,CAAC,4BAA4B;QAC5D,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBACV,IAAI,CAAC,cAAc,CAAC;gBACpB,UAAU,gBAAgB;aAC7B;YACD,wBAAwB;YACxB,2BAA2B;gBACvB,YAAY,WAAW;gBACvB,mBAAmB,uBAAuB;aAC7C;QACL;QACA,IAAI,cAAc;YACd,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,QAAQ;gBAC7B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,aAAa;gBAClC,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,CAAC,0BAA0B,CAAC,YAAY,WAAW,EAAE,mBAAmB;QAC5E,MAAM,eAAe,UAAU,KAAK,CAAC,OAAO;QAC5C,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa,cAAc,oBAAoB,kBAAkB,eAAe,GAAG,MAAM;YACjJ,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW;gBACX,OAAO,UAAU,KAAK;gBACtB,YAAY,UAAU,UAAU;gBAChC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA;;KAEC,GACD,MAAM,cAAc,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE;QACvD,MAAM,eAAe,IAAI,CAAC,OAAO,CAAC,cAAc,eAAe,CAAC;QAChE,IAAI,CAAC,cAAc;YACf,MAAM,MAAM,CAAC,sBAAsB,EAAE,YAAY,QAAQ,IAAI;QACjE;QACA,OAAO,MAAM,IAAI,CAAC,qBAAqB,CAAC;YACpC,WAAW,QAAQ,SAAS,CAAC,MAAM;YACnC;YACA,WAAW,CAAC,GAAG,WAAW,oBAAoB,EAAE;YAChD,iBAAiB,aAAa,eAAe,CAAC,GAAG;YACjD,YAAY;YACZ,OAAO;QACX,GAAG,WAAW,WAAW,WAAW,WAAW,WAAW;IAC9D;IACA;;;;;;;;KAQC,GACD,MAAM,gBAAgB,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,oBAAoB,EAAE;QAC/E,OAAO,IAAI,CAAC,WAAW,CAAC;YACpB;YACA;YACA;YACA;QACJ;IACJ;IACA;;;;;;;;KAQC,GACD,MAAM,6BAA6B,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,oBAAoB,EAAE;QAChG,OAAO,IAAI,CAAC,wBAAwB,CAAC;YACjC;YACA;YACA;YACA;QACJ;IACJ;IACA;;;;;;;;;;;;;;;;;KAiBC,GACD,MAAM,YAAY,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QACnD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,aAAa,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACzJ,OAAO;IACX;IACA;;;;;KAKC,GACD,MAAM,iBAAiB,EAAE,OAAO,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,oBAAoB,EAAE,eAAe,EAAE,mBAAmB,EAAE,eAAe,EAAE,iBAAiB,EAAE,eAAe,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAG,EAAE,YAAY,EAAE,SAAS,EAAE;QACtQ,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;QAC5B,MAAM,aAAa,CAAC,KAAK,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,uBAAuB,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAM,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAC7O,MAAM,cAAc,CAAC,KAAK,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,cAAc,CAAC;QACrN,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B,wBAAwB;QAC5B;QACA,MAAM,cAAc;YAChB,iBAAiB,iBAAiB;YAClC,WAAW,gBAAgB;YAC3B,OAAO,iBAAiB;YACxB,mBAAmB,wBAAwB;YAC3C,cAAc,mBAAmB;YACjC,kBAAkB,uBAAuB;YACzC,iBAAiB,mBAAmB;YACpC,mBAAmB,qBAAqB;YACxC,iBAAiB,mBAAmB;YACpC,YAAY,cAAc,YAAY,aAAa;YACnD,UAAU,YAAY,YAAY,WAAW;YAC7C,UAAU,YAAY,YAAY,WAAW;YAC7C,QAAQ,UAAU;YAClB,OAAO,SAAS;QACpB;QACA,MAAM,YAAY,CAAC,KAAK,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,cAAc,GAAG,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QAChV,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,aAAa;YACpE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,4BAA4B;gBAC5C;YACJ;YACA;QACJ;IACJ;IACA;;;;;;;;;;;;;;;;;KAiBC,GACD,MAAM,yBAAyB,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE;QAChE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,wBAAwB,CAAC,aAAa,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACjK,OAAO;IACX;IACA,MAAM,yBAAyB,EAAE,WAAW,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,oBAAoB,EAAE,eAAe,EAAE,mBAAmB,EAAE,eAAe,EAAE,iBAAiB,EAAE,eAAe,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAG,EAAE,YAAY,EAAE;QACvQ,MAAM,OAAO,MAAM,IAAI,CAAC,uBAAuB,CAAC;QAChD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;aAAc;YACjD,wBAAwB;QAC5B;QACA,MAAM,cAAc;YAChB,iBAAiB,iBAAiB;YAClC,WAAW,gBAAgB;YAC3B,OAAO,iBAAiB;YACxB,mBAAmB,wBAAwB;YAC3C,cAAc,mBAAmB;YACjC,kBAAkB,uBAAuB;YACzC,iBAAiB,mBAAmB;YACpC,mBAAmB,qBAAqB;YACxC,iBAAiB,mBAAmB;YACpC,YAAY,cAAc;YAC1B,UAAU,YAAY;YACtB,UAAU,YAAY;YACtB,QAAQ,UAAU;YAClB,OAAO,SAAS;QACpB;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,mBAAmB,CAAC,aAAa,aAAa;YAChF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,4BAA4B;gBAC5C,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,WAAW,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE;QACnD,MAAM,uBAAuB,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,oBAAoB;QAClG,uDAAuD;QACvD,MAAM,sBAAsB,uBACtB,EAAE,GACF;QACN,IAAI,sBAAsB;YACtB,KAAK,MAAM,eAAe,cAAe;gBACrC,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;gBACpD,MAAM,kBAAkB,IAAI,CAAC,0BAA0B,CAAC;gBACxD,MAAM,sBAAsB,IAAI,CAAC,iBAAiB,CAAC,sBAAsB;gBACzE,MAAM,mBAAmB,oBAAoB,IAAI,CAAC,gBAAgB;gBAClE,MAAM,UAAU,CAAC,GAAG,UAAU,aAAa,EAAE,mBAAmB,iBAAiB,kBAAkB,oBAAoB,IAAI;gBAC3H,IAAI,SAAS;oBACT,oBAAoB,IAAI,CAAC;gBAC7B;YACJ;QACJ;QACA,mCAAmC;QACnC,MAAM,MAAM,MAAM,IAAI,CAAC,gBAAgB,CAAC,OAAO;QAC/C,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW;YAC9F,cAAc;QAClB;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,iBAAiB,KAAK,EAAE,aAAa,EAAE,qBAAqB,EAAE;QAChE,MAAM,MAAM,EAAE;QACd,KAAK,MAAM,EAAE,2BAA2B,EAAE,kBAAkB,EAAE,IAAI,MAAO;YACrE,KAAK,MAAM,eAAe,cAAe;gBACrC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,6BAA6B,oBAAoB,aAAa;YAClG;QACJ;QACA,OAAO;IACX;IACA,MAAM,UAAU,2BAA2B,EAAE,kBAAkB,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,qBAAqB,EAAE;QACxH,MAAM,sBAAsB,MAAM,IAAI,CAAC,2BAA2B;QAClE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,6BAA6B,oBAAoB,aAAa,wBAAwB,UAAU,WAAW,qBAAqB,WAAW,WAAW,cAAc,EAAE,EAAE,IAAI,CAAC,IAAI;QACjR,OAAO;IACX;IACA,MAAM,YAAY,2BAA2B,EAAE,kBAAkB,EAAE,WAAW,EAAE,qBAAqB,EAAE;QACnG,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAmB;YAClC,2BAA2B;gBAAC;aAAY;YACxC,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,IAAI,uBAAuB;YACvB,MAAM,SAAS,sBAAsB,GAAG,CAAC,mBAAmB,SAAS,CAAC,QAAQ;YAC9E,IAAI,QAAQ;gBACR,MAAM,WAAW,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,SAAS;gBACtH,MAAM,WAAW,IAAI;gBACrB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAE;oBAC/B,MAAM,kBAAkB,CAAC,GAAG,UAAU,uBAAuB,EAAE,UAC3D,CAAC,CAAC,GAAG,UAAU,sBAAsB,EAAE,UACvC,MAAM,WAAW,CAAC,EAAE,CAAC,mBAAmB,IAAI,KAC5C,MAAM,WAAW,KAAK;oBAC1B,IAAI,mBAAmB,CAAC,SAAS,GAAG,CAAC,MAAM,UAAU,GAAG;wBACpD,SAAS,GAAG,CAAC,MAAM,UAAU,EAAE,OAAO,gBAAgB,CAAC,MAAM,UAAU,CAAC,CAAC,SAAS;oBACtF;gBACJ;gBACA,IAAI,SAAS,IAAI,GAAG,GAAG;oBACnB,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;wBAC3D,kBAAkB,IAAI,CAAC;4BACnB,QAAQ;4BACR,UAAU;4BACV,YAAY;wBAChB;oBACJ;oBACA,IAAI,CAAC,6BAA6B,CAAC,MAAM,IAAI,CAAC,SAAS,MAAM,KAAK;gBACtE;gBACA,iFAAiF;gBACjF,MAAM,uBAAuB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,CAAC,GAAG,UAAU,sBAAsB,EAAE,MACzF,EAAE,WAAW,CAAC,EAAE,CAAC,mBAAmB,IAAI,KACxC,EAAE,WAAW,KAAK;gBACtB,IAAI,sBAAsB;oBACtB,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;wBAC3D,kBAAkB,IAAI,CAAC;4BACnB,QAAQ;4BACR,UAAU;4BACV,YAAY;wBAChB;oBACJ;oBACA,IAAI,CAAC,OAAO,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;wBACtD,IAAI,CAAC,6BAA6B,CAAC;4BAAC,OAAO,QAAQ;yBAAC,EAAE;oBAC1D;gBACJ;YACJ,OACK;gBACD,4FAA4F;gBAC5F,+DAA+D;gBAC/D,KAAK,MAAM,SAAS,mBAAmB,MAAM,CAAE;oBAC3C,IAAI,CAAC,GAAG,SAAS,UAAU,EAAE,QAAQ;wBACjC,MAAM,WAAW,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,SAAS;wBACtH,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;4BAC3D,kBAAkB,IAAI,CAAC;gCACnB,QAAQ;gCACR,UAAU;gCACV,YAAY;4BAChB;wBACJ;wBACA;oBACJ;gBACJ;YACJ;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa;YACzD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,iBAAiB,IAAI,CAAC,yBAAyB,GAAG,KAAK;YAC3D;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,mBAAmB,2BAA2B,EAAE,kBAAkB,EAAE,aAAa,EAAE,IAAI,EAAE,qBAAqB,EAAE,QAAQ,EAAE;QAC5H,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,oBAAoB,CAAC,6BAA6B,oBAAoB,eAAe,MAAM,WAAW,wBAAwB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC1O,OAAO;IACX;IACA,MAAM,8BAA8B,2BAA2B,EAAE,kBAAkB,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,qBAAqB,EAAE;QACpJ,kFAAkF;QAClF,MAAM,YAAY,EAAE;QACpB,MAAM,4BAA4B,EAAE;QACpC,IAAK,IAAI,IAAI,GAAG,IAAI,cAAc,MAAM,EAAE,KAAK,EAAG;YAC9C,0BAA0B,IAAI,CAAC,cAAc,KAAK,CAAC,GAAG,IAAI;QAC9D;QACA,KAAK,MAAM,iBAAiB,0BAA2B;YACnD,MAAM,KAAK,MAAM,IAAI,CAAC,oBAAoB,CAAC,6BAA6B,oBAAoB,eAAe,MAAM,WAAW;YAC5H,MAAM,eAAe,KAAK,GAAG,CAAC,SAAS,cAAc,MAAM,EAAE;YAC7D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI;gBACvC,GAAG,QAAQ;gBACX;YACJ,GAAG,WAAW,WAAW,WAAW,WAAW;YAC/C,UAAU,IAAI,CAAC;QACnB;QACA,MAAM,SAAS,CAAC;QAChB,IAAI,IAAI;QACR,KAAK,MAAM,MAAM,UAAW;YACxB,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG;YACpB;QACJ;QACA,MAAM,YAAY,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,WAAW;QAC1G,MAAM,SAAS,EAAE;QACjB,IAAK,MAAM,OAAO,UAAW;YACzB,MAAM,KAAK,SAAS,CAAC,IAAI;YACzB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE;YAChE,OAAO,IAAI,CAAC;QAChB;QACA,OAAO;IACX;IACA,MAAM,qBAAqB,2BAA2B,EAAE,kBAAkB,EAAE,aAAa,EAAE,IAAI,EAAE,SAAS,EAAE,qBAAqB,EAAE;QAC/H,IAAI;QACJ,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAmB;YAClC,2BAA2B;YAC3B,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,IAAI,uBAAuB;YACvB,MAAM,SAAS,sBAAsB,GAAG,CAAC,mBAAmB,SAAS,CAAC,QAAQ;YAC9E,MAAM,WAAW,IAAI;YACrB,IAAI,QAAQ;gBACR,KAAK,MAAM,SAAS,OAAO,MAAM,CAAE;oBAC/B,MAAM,kBAAkB,CAAC,GAAG,UAAU,uBAAuB,EAAE,UAC3D,CAAC,CAAC,GAAG,UAAU,sBAAsB,EAAE,UACvC,MAAM,WAAW,CAAC,EAAE,CAAC,mBAAmB,IAAI,KAC5C,cAAc,QAAQ,CAAC,MAAM,WAAW;oBAC5C,IAAI,mBAAmB,CAAC,SAAS,GAAG,CAAC,MAAM,UAAU,GAAG;wBACpD,SAAS,GAAG,CAAC,MAAM,UAAU,EAAE,OAAO,gBAAgB,CAAC,MAAM,UAAU,CAAC,CAAC,SAAS;oBACtF;gBACJ;gBACA,IAAI,SAAS,IAAI,GAAG,GAAG;oBACnB,MAAM,WAAW,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,SAAS;oBACtH,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;wBAC3D,kBAAkB,IAAI,CAAC;4BACnB,QAAQ;4BACR,UAAU;4BACV,YAAY;wBAChB;oBACJ;oBACA,IAAI,CAAC,6BAA6B,CAAC,MAAM,IAAI,CAAC,SAAS,MAAM,KAAK;gBACtE;gBACA,uEAAuE;gBACvE,2EAA2E;gBAC3E,MAAM,iCAAiC,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,CAAC,GAAG,UAAU,sBAAsB,EAAE,MACnG,EAAE,WAAW,CAAC,EAAE,CAAC,mBAAmB,IAAI,KACxC,cAAc,QAAQ,CAAC,EAAE,WAAW;gBACxC,IAAI,gCAAgC;oBAChC,MAAM,WAAW,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,SAAS;oBACtH,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;wBAC3D,kBAAkB,IAAI,CAAC;4BACnB,QAAQ;4BACR,UAAU;4BACV,YAAY;wBAChB;oBACJ;oBACA,gDAAgD;oBAChD,IAAI,CAAC,OAAO,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;wBACtD,IAAI,CAAC,6BAA6B,CAAC;4BAAC,OAAO,QAAQ;yBAAC,EAAE;oBAC1D;gBACJ;YACJ,OACK;gBACD,4FAA4F;gBAC5F,+DAA+D;gBAC/D,KAAK,MAAM,SAAS,mBAAmB,MAAM,CAAE;oBAC3C,IAAI,CAAC,GAAG,SAAS,UAAU,EAAE,QAAQ;wBACjC,MAAM,WAAW,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,mBAAmB,SAAS;wBACtH,IAAI,CAAC,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;4BAC3D,kBAAkB,IAAI,CAAC;gCACnB,QAAQ;gCACR,UAAU;gCACV,YAAY;4BAChB;wBACJ;wBACA;oBACJ;gBACJ;YACJ;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,eAAe,MAAM;YAC1E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,SAAS,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;gBAClJ,MAAM;gBACN,iBAAiB,IAAI,CAAC,yBAAyB,GAAG,KAAK;YAC3D;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,oCAAoC,oBAAoB,EAAE,WAAW,EAAE;QACzE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;QAC/B;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC;YACjE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YACpC;YACA;QACJ;IACJ;IACA,MAAM,+BAA+B,oBAAoB,EAAE,WAAW,EAAE;QACpE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mCAAmC,CAAC,sBAAsB,eAAe,EAAE,EAAE,IAAI,CAAC,IAAI;QAC1K,OAAO;IACX;IACA,MAAM,cAAc,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QAClI,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,aAAa,aAAa,oBAAoB,YAAY,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9O,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,OAAO;IACX;IACA,MAAM,mBAAmB,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,EAAE,sBAAsB,EAAE;QAC7H,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,wBAAwB;YACxB,2BAA2B;gBAAC;aAAY;QAC5C;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,aAAa,oBAAoB,eAAe,QAAQ,eAAe,KAAK,IAAI,aAAa,MAAM;YACnJ,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;YACrB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,sBAAsB,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QACtH,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,sBAAsB,aAAa,aAAa,YAAY,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAClO,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,aAAa;QAC9C,OAAO;IACX;IACA,MAAM,2BAA2B,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,sBAAsB,EAAE;QACjH,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBACV;mBACG,WAAW,GAAG,CAAC,CAAC,YAAc,UAAU,gBAAgB;aAC9D;YACD,2BAA2B;gBAAC;aAAY;QAC5C;QACA,KAAK,MAAM,aAAa,WAAY;YAChC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,UAAU,KAAK;gBACvB,UAAU;gBACV,YAAY;YAChB;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,UAAU,UAAU;gBAC5B,UAAU;gBACV,YAAY;YAChB;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa;YACrE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;YACrB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,cAAc,oBAAoB,EAAE,WAAW,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QAC/J,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,aAAa,kBAAkB,sBAAsB,sBAAsB,YAAY,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC3Q,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,kBAAkB;QACnD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,sBAAsB;QACvD,OAAO;IACX;IACA,MAAM,mBAAmB,oBAAoB,EAAE,WAAW,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,sBAAsB,EAAE;QAC1J,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,wBAAwB;YACxB,2BAA2B;gBAAC;gBAAsB;aAAiB;QACvE;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,kBAAkB,sBAAsB,sBAAsB,cAAc,MAAM;YAClI,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;YACrB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,oCAAoC,EAAE,aAAa,EAAE,oBAAoB,EAAE,gBAAgB,EAAE,UAAU,EAAE,iBAAiB,EAAE,qBAAqB,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,KAAK,EAAE,WAAW,EAAE,oBAAoB,EAAE,yBAAyB,EAAE,sBAAsB,EAAE,WAAW,EAAG,EAAE;QAC3S,MAAM,kBAAkB,IAAI,CAAC,oBAAoB,CAAC;QAClD,MAAM,cAAc,IAAI,CAAC,oBAAoB,CAAC;QAC9C,IAAI,CAAC,OAAO;YACR,MAAM,eAAe,MAAM,cAAc,QAAQ,CAAC;gBAC9C,WAAW,YAAY,IAAI;gBAC3B,YAAY,gBAAgB,IAAI;gBAChC,QAAQ;gBACR;gBACA;gBACA;gBACA;YACJ;YACA,QAAQ;QACZ;QACA,IAAI,CAAC,OAAO;YACR,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,WAAW,IAAI,SAAS,EAAE,CAAC,MAAM,QAAQ;QAC/C,MAAM,cAAc,MAAM,cAAc,OAAO,CAAC;YAC5C;YACA,eAAe,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS;YAC7C;QACJ;QACA,MAAM,EAAE,kBAAkB,EAAE,YAAY,EAAE,GAAG,MAAM,cAAc,oCAAoC,CAAC;YAClG;QACJ;QACA,MAAM,sBAAsB,cAAc,sBAAsB,CAAC;YAC7D;YACA,WAAW,YAAY,IAAI;YAC3B,YAAY,gBAAgB,IAAI;QACpC;QACA,MAAM,kBAAkB,EAAE;QAC1B,IAAI,CAAC,uBAAuB;YACxB,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,wBAAwB,MAAM,IAAI,CAAC,yBAAyB,CAAC,gBAAgB,WAAW,EAAE,OAAO;YACjG,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,uBAAuB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,gBAAgB,IAAI,EAAE;QAC7L;QACA,IAAI,CAAC,mBAAmB;YACpB,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;YACvD,oBAAoB,MAAM,IAAI,CAAC,yBAAyB,CAAC,YAAY,WAAW,EAAE,OAAO;YACzF,gBAAgB,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,mBAAmB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,YAAY,IAAI,EAAE;QACrL;QACA,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC;YACrE;YACA;YACA,YAAY;YACZ;YACA;YACA;YACA;YACA;YACA;QACJ;QACA,MAAM,MAAM;eACL;YACH;eACG;YACH;SACH;QACD,OAAO;YAAE;YAAK;QAAa;IAC/B;IACA;;;;;;;;;;;KAWC,GACD,MAAM,2BAA2B,EAAE,oBAAoB,EAAE,gBAAgB,EAAE,YAAY,UAAU,EAAE,iBAAiB,EAAE,qBAAqB,EAAE,WAAW,EAAE,oBAAoB,EAAE,yBAAyB,EAAE,sBAAsB,EAAG,EAAE;QAClO,MAAM,6BAA6B,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtE,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,eAAe;YAAC;SAAY;QAClC,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD;YACA,2BAA2B;gBAAC;gBAAsB;aAAiB;YACnE,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,MAAM,sBAAsB,IAAI,CAAC,oBAAoB,CAAC;QACtD,MAAM,kBAAkB,IAAI,CAAC,oBAAoB,CAAC;QAClD,MAAM,wBAAwB,IAAI,CAAC,4BAA4B,CAAC;QAChE,MAAM,oBAAoB,IAAI,CAAC,4BAA4B,CAAC;QAC5D,IAAI,CAAC,sBAAsB,MAAM,CAAC,oBAAoB;YAClD,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,IAAI,IAAI,CAAC,WAAW,CAAC,wBACjB,IAAI,CAAC,WAAW,CAAC,kBAAkB;YACnC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,gBAAgB,IAAI;gBAC5B,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,oBAAoB,IAAI;gBAChC,YAAY;gBACZ,UAAU;YACd;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,kBAAkB;gBACtC,IAAI,CAAC,uCAAuC,CAAC,gBAAgB,IAAI,EAAE;YACvE;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,sBAAsB;gBAC1C,IAAI,CAAC,uCAAuC,CAAC,oBAAoB,IAAI,EAAE;YAC3E;QACJ;QACA,MAAM,cAAc,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,0BAA0B,CAAC,kBAAkB,sBAAsB,YAAY;YAC9H,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW;gBACX,YAAY;gBACZ,iBAAiB;gBACjB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,0BAA0B,oBAAoB,KAAK;gBACnD,sBAAsB,gBAAgB,KAAK;gBAC3C,mBAAmB;gBACnB,uBAAuB;gBACvB,cAAc;gBACd,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,MAAM,YAAY,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,wBAAwB,CAAC,kBAAkB,sBAAsB;YAC9G,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW;gBACX,YAAY;gBACZ,iBAAiB;gBACjB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,0BAA0B,oBAAoB,KAAK;gBACnD,sBAAsB,gBAAgB,KAAK;gBAC3C,mBAAmB;gBACnB,uBAAuB;gBACvB,cAAc;gBACd,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,OAAO;YAAE;YAAa;QAAU;IACpC;IACA,MAAM,uBAAuB,EAAE,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,cAAc,EAAE,eAAe,EAAG,EAAE;QACxG,MAAM,oBAAoB,MAAM,IAAI,CAAC,oBAAoB,CAAC;YACtD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;gBAAe;aAAe;QAC9D;QACA,MAAM,eAAe,IAAI,CAAC,oBAAoB,CAAC;QAC/C,MAAM,gBAAgB,IAAI,CAAC,oBAAoB,CAAC;QAChD,IAAI,IAAI,CAAC,WAAW,CAAC,iBAAiB,IAAI,CAAC,WAAW,CAAC,gBAAgB;YACnE,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,aAAa,IAAI;gBACzB,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ,cAAc,IAAI;gBAC1B,YAAY;gBACZ,UAAU;YACd;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,eAAe;gBACnC,IAAI,CAAC,uCAAuC,CAAC,aAAa,IAAI,EAAE;YACpE;YACA,IAAI,IAAI,CAAC,cAAc,CAAC,gBAAgB;gBACpC,IAAI,CAAC,uCAAuC,CAAC,cAAc,IAAI,EAAE;YACrE;QACJ;QACA,MAAM,oBAAoB,CAAC,GAAG,MAAM,6BAA6B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,eAAe;QAC1G,MAAM,cAAc,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,sBAAsB,CAAC,eAAe,gBAAgB,UAAU;YAC/G,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,uBAAuB,cAAc,aAAa,CAAC,KAAK;gBACxD,sBAAsB,aAAa,aAAa,CAAC,KAAK;gBACtD;gBACA;gBACA,mBAAmB;gBACnB,cAAc,YAAY,gBAAgB;gBAC1C,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,MAAM,YAAY,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,eAAe,gBAAgB;YACjG,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,uBAAuB,cAAc,aAAa,CAAC,KAAK;gBACxD,sBAAsB,aAAa,aAAa,CAAC,KAAK;gBACtD;gBACA;gBACA,mBAAmB;gBACnB,cAAc,YAAY,gBAAgB;gBAC1C,aAAa,IAAI,CAAC,eAAe,GAAG,MAAM;gBAC1C,cAAc,OAAO,IAAI,CAAC,0BAA0B;YACxD;YACA;QACJ;QACA,OAAO;YAAE;YAAa;QAAU;IACpC;IACA,MAAM,0BAA0B,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QAC1K,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,8BAA8B,CAAC,sBAAsB,aAAa,iBAAiB,sBAAsB,sBAAsB,YAAY,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACtR,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,iBAAiB;QAClD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,sBAAsB;QACvD,OAAO;IACX;IACA,MAAM,+BAA+B,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,UAAU,EAAE,sBAAsB,EAAE;QACrK,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,2BAA2B;gBAAC;aAAgB;YAC5C,2BAA2B;gBAAC;aAAqB;QACrD;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,yBAAyB,CAAC,iBAAiB,sBAAsB,sBAAsB,cAAc,MAAM;YAC7I,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;YACrB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,2BAA2B,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,gBAAgB,EAAE,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QACjK,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,+BAA+B,CAAC,sBAAsB,aAAa,iBAAiB,kBAAkB,gBAAgB,YAAY,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC7Q,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,iBAAiB;QAClD,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,kBAAkB;QACnD,OAAO;IACX;IACA,MAAM,gCAAgC,oBAAoB,EAAE,WAAW,EAAE,eAAe,EAAE,gBAAgB,EAAE,cAAc,EAAE,UAAU,EAAE,sBAAsB,EAAE;QAC5J,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,2BAA2B;gBAAC;aAAgB;YAC5C,2BAA2B;gBAAC;aAAiB;QACjD;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,0BAA0B,CAAC,iBAAiB,kBAAkB,gBAAgB,cAAc,MAAM;YACpI,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;YACrB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,sBAAsB,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QAC1G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,sBAAsB,aAAa,aAAa,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAChN,OAAO;IACX;IACA,MAAM,2BAA2B,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,sBAAsB,EAAE;QACrG,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,2BAA2B;gBAAC;aAAY;YACxC,2BAA2B;gBAAC,mBAAmB,uBAAuB;aAAC;QAC3E;QACA,MAAM,aAAa,IAAI,CAAC,yBAAyB;QACjD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,mBAAmB,uBAAuB,EAAE,aAAa;YACjH,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX;gBACA,iBAAiB;gBACjB,iBAAiB,WAAW,KAAK;gBACjC,oBAAoB,WAAW,aAAa,CAAC,KAAK;gBAClD,aAAa,IAAI,CAAC,kBAAkB;gBACpC,cAAc,YAAY,gBAAgB;YAC9C;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,sBAAsB,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,sBAAsB,EAAE;QAC1G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,sBAAsB,aAAa,aAAa,yBAAyB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAChN,OAAO;IACX;IACA,MAAM,2BAA2B,oBAAoB,EAAE,WAAW,EAAE,WAAW,EAAE,sBAAsB,EAAE;QACrG,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,SAAS;QAChH,MAAM,aAAa,MAAM,IAAI,CAAC,uBAAuB,CAAC;QACtD,MAAM,2BAA2B,IAAI,CAAC,4BAA4B;QAClE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc,CAAC;gBAAyB;aAAY;YACxE,2BAA2B;gBAAC;aAAY;QAC5C;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,IAAI,CAAC,+BAA+B,CAAC,YAAY;QACjD,IAAI,IAAI,CAAC,cAAc,CAAC,aAAa;YACjC,MAAM,IAAI,CAAC,uCAAuC,CAAC,WAAW,IAAI,EAAE;QACxE;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa;YACrE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,MAAM;gBACN,WAAW;gBACX,iBAAiB;gBACjB;gBACA,iBAAiB,WAAW,KAAK;gBACjC,oBAAoB,WAAW,aAAa,CAAC,KAAK;gBAClD,aAAa,IAAI,CAAC,kBAAkB;gBACpC,cAAc;YAClB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,kBAAkB,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAE;QACvD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,sBAAsB,CAAC,iBAAiB,SAAS,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC7J,OAAO;IACX;IACA,MAAM,uBAAuB,eAAe,EAAE,MAAM,EAAE;QAClD,MAAM,sBAAsB,MAAM,CAAC,GAAG,MAAM,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5F,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,iBAAiB;YACrE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY;gBACZ,QAAQ;YACZ;QACJ;IACJ;IACA,MAAM,sBAAsB,eAAe,EAAE,QAAQ,EAAE;QACnD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACzJ,OAAO;IACX;IACA,MAAM,2BAA2B,eAAe,EAAE;QAC9C,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,IAAI,CAAC,CAAC,GAAG,QAAQ,SAAS,EAAE,WAAW,GAAG,CAAC,YAAY,EAAE,cAAc;YACnE,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,WAAW,GAAG,CAAC,YAAY,EAAE;QACxE;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC;YACxD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,QAAQ,WAAW,GAAG,CAAC,MAAM;YACjC;QACJ;IACJ;IACA,MAAM,qBAAqB,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAE;QAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,SAAS,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAChK,OAAO;IACX;IACA,MAAM,0BAA0B,eAAe,EAAE,MAAM,EAAE;QACrD,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,oBAAoB,EAAE;QAC5B,KAAK,MAAM,CAAC,OAAO,WAAW,IAAI,OAAQ;YACtC,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;YACA,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC;YACvD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,QAAQ,WAAW,GAAG,CAAC,MAAM;gBAC7B,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,aAAa,IAAI,CAAC,4BAA4B;YAClD;YACA;QACJ;IACJ;IACA,MAAM,qBAAqB,oBAAoB,EAAE,QAAQ,EAAE;QACvD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,yBAAyB,CAAC,uBAAuB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC7J,OAAO;IACX;IACA,MAAM,0BAA0B,oBAAoB,EAAE;QAClD,MAAM,cAAe,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;QAC3D,MAAM,4BAA4B,EAAE;QACpC,KAAK,MAAM,YAAY,YAAY,aAAa,CAAE;YAC9C,IAAI,CAAC,CAAC,GAAG,WAAW,mBAAmB,EAAE,WAAW;gBAChD,0BAA0B,IAAI,CAAC,SAAS,WAAW;YACvD;QACJ;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC;aAAY;YAC3B;QACJ;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC;YACvD,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;YACV;YACA;QACJ;IACJ;IACA,aAAa,SAAS,EAAE,IAAI,EAAE;QAC1B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW;IACtC;IACA,2BAA2B,WAAW,EAAE;QACpC,OAAO,IAAI,CAAC,iBAAiB,CAAC,sCAAsC,CAAC,aAAa,IAAI;IAC1F;IACA,6BAA6B,WAAW,EAAE;QACtC,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,aAAa,IAAI,CAAC,0BAA0B,CAAC;QACnD,MAAM,sBAAsB,IAAI,CAAC,iBAAiB,CAAC,sBAAsB;QACzE,MAAM,mBAAmB,CAAC,WAAW,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,mBAAmB,IAAI;QAChF,MAAM,UAAU,WAAW,GAAG,CAAC,aAAa,CACvC,GAAG,CAAC,WAAW,KAAK,EACpB,GAAG,GACH,GAAG,CAAC,mBAAmB,oBAAoB,EAC3C,GAAG,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,WAAW,KAAK,EAAE,mBAAmB,GAAG;QACjE,MAAM,qBAAqB,WAAW,GAAG,CAAC,kBAAkB;QAC5D,8EAA8E;QAC9E,MAAM,wBAAwB,WAAW,UAAU,IAAI,QACnD,WAAW,UAAU,CAAC,EAAE,CAAC,mBAAmB,IAAI,KAChD,mBAAmB,EAAE,CAAC,mBAAmB,IAAI,KAC7C,WAAW,UAAU,CAChB,GAAG,CAAC,WAAW,GAAG,CAAC,kBAAkB,EACrC,GAAG,GACH,EAAE,CAAC,WAAW,UAAU,CAAC,GAAG,CAAC,IAAI,SAAS,EAAE,CAAC;QACtD,IAAI,6BAA6B;QACjC,IAAI,yBACA,WAAW,IAAI,IAAI,WAAW,GAAG,CAAC,YAAY,EAAE;YAChD,6BAA6B;QACjC,OACK,IAAI,CAAC,yBACN,WAAW,UAAU,GAAG,oBAAoB;YAC5C,6BAA6B;QACjC;QACA,MAAM,OAAO,CAAC,GAAG,QAAQ,mCAAmC,EAAE,WAAW,GAAG,CAAC,aAAa,EAAE;QAC5F,IAAI,CAAC,GAAG,UAAU,oBAAoB,EAAE,WAAW,GAAG,EAAE;YACpD,OAAO,WAAW,GAAG,CAAC,aAAa;YACnC,MAAM,WAAW,GAAG,CAAC,YAAY;YACjC,YAAY;YACZ,iCAAiC;QACrC,GAAG,oBAAoB,IAAI,CAAC,gBAAgB,KACxC,WAAW,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,mBAAmB,IAAI,KACvD,8BACA,QAAQ,EAAE,CAAC,mBAAmB,oBAAoB,CAAC,IAAI,CAAC,MAAM,eAAe;UAC/E;YACE,OAAO;gBAAE,GAAG,UAAU;gBAAE;YAAiB;QAC7C,OACK;YACD,OAAO;gBACH,OAAO,WAAW,GAAG,CAAC,aAAa;gBACnC,MAAM,WAAW,GAAG,CAAC,YAAY;gBACjC,YAAY;gBACZ,iCAAiC;gBACjC;YACJ;QACJ;IACJ;IACA,2BAA2B,WAAW,EAAE;QACpC,OAAO,IAAI,CAAC,iBAAiB,CAAC,sCAAsC,CAAC,aAAa,IAAI;IAC1F;IACA,MAAM,6BAA6B,WAAW,EAAE,QAAQ,EAAE;QACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,iCAAiC,CAAC,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5J,OAAO;IACX;IACA,MAAM,kCAAkC,WAAW,EAAE;QACjD,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAChI,MAAM,WAAW;YACb,oBAAoB;YACpB,YAAY,IAAI,CAAC,oBAAoB,CAAC,aAAa,MAAM;YACzD,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,kEAAkE;;YAEnK,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;YAChC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;YAC5B,MAAM,OAAO,IAAI,CAAC,kBAAkB;YACpC,eAAe,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS;YAClD,OAAO,MAAM,IAAI,CAAC,iBAAiB;QACvC;QACA,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,4BAA4B,CAAC,aAAa;YAC5E;QACJ;IACJ;IACA,MAAM,2BAA2B,WAAW,EAAE,MAAM,EAAE,0BAA0B,EAAE;QAC9E,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAChI,MAAM,oBAAoB,EAAE;QAC5B,IAAI,CAAC,+BAA+B,CAAC,YAAY;QACjD,IAAI,IAAI,CAAC,cAAc,CAAC,aAAa;YACjC,MAAM,IAAI,CAAC,uCAAuC,CAAC,WAAW,IAAI,EAAE;QACxE;QACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;QACvD,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,aAAa,QAAQ;YAC3E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,oBAAoB;gBACpB,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,8DAA8D;;gBAE/J,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,iBAAiB,WAAW,KAAK;gBACjC,oBAAoB,WAAW,aAAa,CAAC,KAAK;gBAClD,aAAa,IAAI,CAAC,kBAAkB;gBACpC,kBAAkB;gBAClB;YACJ;YACA;QACJ;QACA,OAAO;IACX;IACA;;KAEC,GACD,MAAM,sBAAsB,EAAE,WAAW,EAAE,MAAM,EAAE,0BAA0B,EAAE,sBAAsB,EAAE,cAAc,EAAE,QAAQ,EAAG,EAAE;QAChI,MAAM,gBAAgB,MAAM,IAAI,CAAC,2BAA2B,CAAC;YACzD;YACA;YACA;YACA;YACA;QACJ;QACA,MAAM,oBAAoB,EAAE;QAC5B,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe;QACtD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,mBAAmB,IAAI,CAAC,IAAI;QAC7E,OAAO;IACX;IACA;;KAEC,GACD,MAAM,4BAA4B,EAAE,WAAW,EAAE,MAAM,EAAE,0BAA0B,EAAE,sBAAsB,EAAE,cAAc,EAAG,EAAE;QAC5H,MAAM,gBAAgB,EAAE;QACxB,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,cAAc,kBAAkB,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB;QAChF,MAAM,yBAAyB,eAAe,2BAA2B,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;QACrG,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,2DAA2D;QAC3D,MAAM,kCAAkC,CAAC,GAAG,YAAY,6BAA6B,EAAE,kBAAkB,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM;QAC5I,cAAc,IAAI,CAAC,MAAM,CAAC,GAAG,YAAY,iDAAiD,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,iCAAiC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,kBAAkB,IAAI,EAAE;QACnM,IAAI;QACJ,IAAI,CAAE,MAAM,IAAI,CAAC,oBAAoB,CAAC,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,wDAAwD;YAC/K;YACD,cAAc,IAAI,CAAC,MAAM,IAAI,CAAC,wBAAwB;QAC1D;QACA,IAAI,wBAAwB;YACxB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,QAAQ;YAC3E,eAAe;YACf,IAAI,OAAO,CAAC,CAAC;gBACT,cAAc,IAAI,CAAC;YACvB;QACJ,OACK;YACD,eAAe;QACnB;QACA,IAAI,gBAAgB;YAChB,MAAM,aAAa,MAAM,IAAI,CAAC,aAAa,CAAC,QAAQ,aAAa;YACjE,cAAc,IAAI,CAAC;QACvB;QACA,IAAI,wBAAwB;YACxB,MAAM,eAAe,MAAM,IAAI,CAAC,iCAAiC,CAAC;YAClE,cAAc,IAAI,CAAC;QACvB;QACA,MAAM,aAAa,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,QAAQ;QAC9E,cAAc,IAAI,CAAC;QACnB,IAAI,wBAAwB;YACxB,cAAc,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE;QACpI;QACA,OAAO;IACX;IACA,MAAM,gCAAgC,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE;QACjE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAChI,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,+BAA+B,CAAC,aAAa,QAAQ;YAC3F,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,oBAAoB;gBACpB,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,sEAAsE;;gBAEvK,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,oBAAoB,kBAAkB,aAAa,CAAC,KAAK;YAC7D;QACJ;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI;QAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,sCAAsC,WAAW,EAAE,QAAQ,EAAE;QAC/D,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAChI,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qCAAqC,CAAC,aAAa;YACzF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,oBAAoB;gBACpB,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,sEAAsE;;gBAEvK,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,oBAAoB,kBAAkB,aAAa,CAAC,KAAK;YAC7D;QACJ;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI;QAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,yBAAyB,WAAW,EAAE,0BAA0B,EAAE,QAAQ,EAAE;QAC9E,MAAM,mBAAmB,EAAE;QAC3B,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAChI,MAAM,oBAAoB,EAAE;QAC5B,MAAM,cAAc,kBAAkB,IAAI,CAAC,MAAM,CAAC,cAAc,gBAAgB;QAChF,MAAM,yBAAyB,eAAe,2BAA2B,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS;QACrG,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,IAAI;QACJ,IAAI,wBAAwB;YACxB,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,mBAAmB,IAAI,EAAE;YAC5F,eAAe;YACf,IAAI,OAAO,CAAC,CAAC;gBACT,iBAAiB,IAAI,CAAC;YAC1B;QACJ,OACK;YACD,eAAe;YACf,MAAM,qBAAqB,MAAM,IAAI,CAAC,oBAAoB,CAAC;YAC3D,IAAI,CAAC,oBAAoB;gBACrB,MAAM,uBAAuB,MAAM,IAAI,CAAC,iDAAiD,CAAC,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,kBAAkB,IAAI,EAAE;gBAC9K,iBAAiB,IAAI,CAAC;YAC1B;QACJ;QACA,MAAM,oBAAoB,EAAE;QAC5B,IAAI,CAAC,+BAA+B,CAAC,mBAAmB;QACxD,IAAI,IAAI,CAAC,cAAc,CAAC,oBAAoB;YACxC,MAAM,IAAI,CAAC,uCAAuC,CAAC,kBAAkB,IAAI,EAAE;QAC/E;QACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;QACvD,MAAM,gBAAgB,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,wBAAwB,CAAC,aAAa;YACvF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,oBAAoB;gBACpB,WAAW,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,sEAAsE;;gBAEvK,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,oBAAoB,kBAAkB,aAAa,CAAC,KAAK;gBACzD,aAAa,IAAI,CAAC,kBAAkB;gBACpC,kBAAkB;gBAClB;YACJ;YACA;QACJ;QACA,iBAAiB,IAAI,CAAC;QACtB,8DAA8D;QAC9D,IAAI,wBAAwB;YACxB,iBAAiB,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE;QACvI;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,kBAAkB;QACzD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,mBAAmB,IAAI,CAAC,IAAI;QAC7E,OAAO;IACX;IACA,MAAM,mCAAmC,SAAS,EAAE,QAAQ,EAAE;QAC1D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,uCAAuC,CAAC,YAAY;QACtG,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,wCAAwC,SAAS,EAAE;QACrD,MAAM,cAAc,mBAAmB,uBAAuB;QAC9D,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW;QACpH,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC3F,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kCAAkC,CAAC;YACnE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,oBAAoB;gBACpB,WAAW;gBACX,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,oBAAoB,WAAW,aAAa,CAAC,KAAK;YACtD;QACJ;QACA,OAAO;IACX;IACA,MAAM,iCAAiC,SAAS,EAAE,QAAQ,EAAE;QACxD,MAAM,KAAK,MAAM,IAAI,CAAC,qCAAqC,CAAC;QAC5D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI;QAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,sCAAsC,SAAS,EAAE;QACnD,MAAM,cAAc,mBAAmB,qBAAqB;QAC5D,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,0BAA0B,CAAC,GAAG,MAAM,qCAAqC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,WAAW;QACpH,MAAM,qBAAqB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC3F,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,gCAAgC,CAAC;YACjE,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,oBAAoB;gBACpB,WAAW;gBACX,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,oBAAoB,WAAW,aAAa,CAAC,KAAK;YACtD;QACJ;QACA,OAAO;IACX;IACA,MAAM,6BAA6B,eAAe,EAAE,QAAQ,EAAE;QAC1D,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,iCAAiC,CAAC,kBAAkB;QACtG,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,kCAAkC,eAAe,EAAE;QACrD,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;QACpD,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,MAAM,oBAAoB,EAAE;QAC5B,IAAI,CAAC,+BAA+B,CAAC,mBAAmB;QACxD,IAAI,IAAI,CAAC,cAAc,CAAC,oBAAoB;YACxC,MAAM,IAAI,CAAC,uCAAuC,CAAC,kBAAkB,IAAI,EAAE;QAC/E;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,4BAA4B,CAAC,iBAAiB;YACpF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,kBAAkB,MAAM;gBACpC,iBAAiB,kBAAkB,KAAK;gBACxC,aAAa,IAAI,CAAC,kBAAkB;gBACpC,oBAAoB,kBAAkB,aAAa,CAAC,KAAK;gBACzD,cAAc;YAClB;YACA;QACJ;QACA,OAAO;IACX;IACA,MAAM,sBAAsB,eAAe,EAAE,eAAe,EAAE,QAAQ,EAAE;QACpE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC1K,OAAO;IACX;IACA,MAAM,2BAA2B,eAAe,EAAE,eAAe,EAAE;QAC/D,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc;gBAAC,IAAI,CAAC,cAAc;aAAG;YACrC,2BAA2B;gBAAC;aAAgB;YAC5C,2BAA2B;gBAAC;aAAgB;QAChD;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,iBAAiB,IAAI,CAAC,4BAA4B,CAAC;QACzD,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,iBAAiB,iBAAiB;YAC1F,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,iBAAiB,WAAW,KAAK;gBACjC,oBAAoB,WAAW,aAAa,CAAC,KAAK;gBAClD,aAAa,IAAI,CAAC,kBAAkB;gBACpC,cAAc;YAClB;YACA,mBAAmB;QACvB;IACJ;IACA,MAAM,sCAAsC,WAAW,EAAE,MAAM,EAAE,yBAAyB,EAAE;QACxF,MAAM,aAAa,MAAM,IAAI,CAAC,oBAAoB,CAAC;QACnD,MAAM,oBAAoB,EAAE;QAC5B,IAAI,CAAC,+BAA+B,CAAC,YAAY;QACjD,IAAI,IAAI,CAAC,cAAc,CAAC,aAAa;YACjC,MAAM,IAAI,CAAC,uCAAuC,CAAC,WAAW,IAAI,EAAE;QACxE;QACA,MAAM,eAAe,IAAI,CAAC,4BAA4B,CAAC;QACvD,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,gCAAgC,CAAC,QAAQ;YAC/E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,YAAY,WAAW,MAAM;gBAC7B,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,iBAAiB,WAAW,KAAK;gBACjC,kBAAkB;gBAClB;YACJ;QACJ;QACA,OAAO;IACX;IACA;;;;;;KAMC,GACD,MAAM,iCAAiC,WAAW,EAAE,MAAM,EAAE,yBAAyB,EAAE;QACnF,MAAM,KAAK,MAAM,IAAI,CAAC,qCAAqC,CAAC,aAAa,QAAQ;QACjF,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAAC;SAAG;QAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,0BAA0B,WAAW,EAAE;QACnC,IAAI,IAAI;QACR,MAAM,gBAAgB,IAAI,CAAC,oBAAoB,CAAC;QAChD,MAAM,eAAe,IAAI,CAAC,oBAAoB,CAAC,mBAAmB,uBAAuB;QACzF,MAAM,eAAe;YACjB;YACA,cAAc,CAAC,KAAK,cAAc,GAAG,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,YAAY;YAC3F,mBAAmB,cAAc,sBAAsB;YACvD,cAAc,CAAC,GAAG,cAAc,cAAc,EAAE,CAAC,KAAK,cAAc,OAAO,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,aAAa,EAAE,cAAc,QAAQ,eAAe,CAAC,OAAO;YACjL,cAAc,cAAc,YAAY;YACxC,oBAAoB,CAAC,GAAG,SAAS,oCAAoC,EAAE,eAAe;QAC1F;QACA,OAAO;IACX;IACA;;;;;KAKC,GACD,cAAc,UAAU,EAAE,WAAW,EAAE,IAAI,EAAE,wBAAwB,EAAE;QACnE,IAAI;QACJ,IAAI;QACJ,MAAM,UAAU,CAAC,CAAC,KAAK,SAAS,QAAQ,SAAS,KAAK,IAAI,KAAK,IAAI,KAAK,kBAAkB,CAAC,UAAU,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,KAAK,KACzI;QACJ,IAAI,QAAQ,CAAC,SAAS;YAClB,UAAU,KAAK,cAAc,CAAC;QAClC,OACK;YACD,MAAM,QAAQ,IAAI,CAAC,eAAe;YAClC,UAAU,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,UACvC,MAAM,gBAAgB,CAAC,QAAQ,CAAC,EAAE,GAClC,MAAM,gBAAgB,CAAC,QAAQ,CAAC,EAAE;QAC5C;QACA,IAAI,WAAW,QAAQ,YAAY,GAAG,QAAQ,cAAc;QAC5D,IAAI,WAAW,QAAQ,oBAAoB,GAAG,QAAQ,sBAAsB;QAC5E,IAAI,gBAAgB,WAAW;YAC3B,IAAI,gBAAgB;YACpB,IAAI,CAAC,GAAG,QAAQ,SAAS,EAAE,YAAY,SAAS;gBAC5C,gBAAgB,IAAI,CAAC,oBAAoB,CAAC;YAC9C,OACK;gBACD,gBAAgB,IAAI,CAAC,oBAAoB,CAAC;YAC9C;YACA,YAAY,AAAC,WAAW,cAAc,aAAa,GAAI;YACvD,IAAI,SAAS;gBACT,YAAY;YAChB;YACA,YAAY,AAAC,WAAW,cAAc,aAAa,GAAI;QAC3D;QACA,OAAO;YACH;YACA;QACJ;IACJ;IACA;;;;;KAKC,GACD,sBAAsB,IAAI,EAAE;QACxB,OAAO,KAAK,WAAW;QACvB,KAAK,MAAM,qBAAqB,IAAI,CAAC,qBAAqB,GAAI;YAC1D,IAAI,CAAC,GAAG,WAAW,UAAU,EAAE,kBAAkB,IAAI,EAAE,WAAW,OAAO,MAAM;gBAC3E,OAAO;oBACH,aAAa,kBAAkB,WAAW;oBAC1C,YAAY,QAAQ,UAAU,CAAC,IAAI;gBACvC;YACJ;QACJ;QACA,KAAK,MAAM,qBAAqB,IAAI,CAAC,qBAAqB,GAAI;YAC1D,IAAI,CAAC,GAAG,WAAW,UAAU,EAAE,kBAAkB,IAAI,EAAE,WAAW,OAAO,MAAM;gBAC3E,OAAO;oBACH,aAAa,kBAAkB,WAAW;oBAC1C,YAAY,QAAQ,UAAU,CAAC,IAAI;gBACvC;YACJ;QACJ;QACA,OAAO;IACX;IACA,qBAAqB;QACjB,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACpC,IAAI,CAAC,eAAe,GAAG,IAAI,SAAS,OAAO,CAAC,4BAA4B,OAAO,EAAE,uBAAuB,2BAA2B,EAAE,IAAI,CAAC,QAAQ;QACtJ;QACA,OAAO,IAAI,CAAC,eAAe;IAC/B;IACA,MAAM,gCAAgC;QAClC,IAAI,IAAI,CAAC,iBAAiB,KAAK,WAAW;YACtC,IAAI,CAAC,iBAAiB,GAAG,MAAM,YAAY,WAAW,CAAC,yBAAyB,CAAC,IAAI,CAAC,UAAU;QACpG;QACA,OAAO,IAAI,CAAC,iBAAiB;IACjC;IACA,MAAM,+BAA+B,SAAS,EAAE,MAAM,EAAE;QACpD,MAAM,UAAU,MAAM,IAAI,CAAC,oCAAoC,CAAC,WAAW;QAC3E,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,qCAAqC,SAAS,EAAE,OAAO,EAAE;QAC3D,MAAM,UAAU,MAAM,IAAI,CAAC,oCAAoC,CAAC,WAAW;QAC3E,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,qCAAqC,SAAS,EAAE,OAAO,EAAE,gBAAgB,CAAC,EAAE;QAC9E,MAAM,wBAAwB,CAAC,GAAG,oBAAoB,0BAA0B,EAAE,OAAO,IAAI,CAAC,WAAW;QACzG,MAAM,mBAAmB,sBAAsB,GAAG,CAAC,YAAY,CAAC;QAChE,MAAM,cAAc,CAAC,GAAG,UAAU,iBAAiB,EAAE,kBAAkB,UAAU,2BAA2B;QAC5G,MAAM,aAAa,CAAC,GAAG,UAAU,iBAAiB,EAAE,sBAAsB,GAAG,EAAE;QAC/E,MAAM,UAAU,EAAE;QAClB,IAAI,sBAAsB,OAAO,CAAC,MAAM,GAAG,GAAG;YAC1C,MAAM,gBAAgB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,gCAAgC;gBAC/F,KAAK;gBACL,oBAAoB,sBAAsB,OAAO;YACrD;YACA,MAAM,eAAe,OAAO,YAAY,WAAW;gBAAC;aAAQ,GAAG;YAC/D,MAAM,UAAU,aAAa,GAAG,CAAC,CAAC;gBAC9B,OAAO,CAAC,GAAG,MAAM,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,GAAG,kBAAkB,mBAAmB,EAAE;YACpH;YACA,MAAM,oBAAoB,QAAQ,GAAG,CAAC,CAAC;gBACnC,OAAO;oBACH;oBACA,UAAU;oBACV,YAAY;gBAChB;YACJ;YACA,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oCAAoC,CAAC,eAAe;gBACtF,UAAU;oBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;oBAC7B,oBAAoB,SAAS,wBAAwB;oBACrD;gBACJ;gBACA;YACJ;QACJ,OACK;YACD,IAAI,cAAc,OAAO,YAAY,WAAW,UAAU,OAAO,CAAC,EAAE;YACpE,cAAc,CAAC,GAAG,kBAAkB,UAAU,EAAE;YAChD,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,mCAAmC,CAAC;gBACxD,KAAK;gBACL,mBAAmB,sBAAsB,OAAO,CAAC,EAAE;YACvD,GAAG,aAAa;QACpB;QACA,OAAO;IACX;IACA,MAAM,oCAAoC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE;QACnE,MAAM,eAAe,CAAC,GAAG,kBAAkB,mBAAmB,EAAE;QAChE,MAAM,kBAAkB,IAAI,CAAC,kBAAkB;QAC/C,MAAM,gBAAgB,gBAAgB,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,0BAA0B;QACnF,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,cAAc,eAAe;YACxF,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,oBAAoB,SAAS,wBAAwB;gBACrD;gBACA,WAAW,CAAC,GAAG,MAAM,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;YAC7E;QACJ;IACJ;IACA,MAAM,qBAAqB,SAAS,EAAE,MAAM,EAAE;QAC1C,SAAS,CAAC,GAAG,kBAAkB,UAAU,EAAE;QAC3C,MAAM,wBAAwB,CAAC,GAAG,oBAAoB,0BAA0B,EAAE,OAAO,IAAI,CAAC,WAAW;QACzG,MAAM,mBAAmB,sBAAsB,GAAG,CAAC,YAAY,CAAC;QAChE,MAAM,cAAc,CAAC,GAAG,UAAU,iBAAiB,EAAE,kBAAkB,UAAU,2BAA2B;QAC5G,MAAM,CAAC,SAAS,kBAAkB,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,sBAAsB,GAAG,EAAE;QACjG,KAAK,MAAM,UAAU,sBAAsB,OAAO,CAAE;YAChD,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC;gBAC/C,mBAAmB;YACvB,GAAG,QAAQ,kBAAkB,SAAS;QAC1C;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI;YAAC;SAAkB,EAAE,IAAI,CAAC,IAAI;QAC/E,OAAO;IACX;IACA,MAAM,2BAA2B,MAAM,EAAE,MAAM,EAAE,iBAAiB,EAAE;QAChE,MAAM,eAAe,CAAC,GAAG,kBAAkB,mBAAmB,EAAE;QAChE,MAAM,kBAAkB,IAAI,CAAC,kBAAkB;QAC/C,MAAM,gBAAgB,gBAAgB,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,oBAAoB;QAC7E,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,oBAAoB,CAAC,cAAc,eAAe;YAC9E,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,oBAAoB,SAAS,wBAAwB;gBACrD,YAAY;gBACZ,WAAW,CAAC,GAAG,MAAM,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;YAC7E;QACJ;IACJ;IACA,MAAM,0BAA0B,OAAO,EAAE,cAAc,EAAE;QACrD,MAAM,UAAU,MAAM,IAAI,CAAC,+BAA+B,CAAC,SAAS,gBAAgB,WAAW;QAC/F,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC;QACvC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,gCAAgC,OAAO,EAAE,cAAc,EAAE,eAAe,EAAE,EAAE,qBAAqB,EAAE;QACrG,MAAM,mBAAmB,OAAO,IAAI,CAAC,gBAAgB;QACrD,MAAM,WAAW,CAAC,GAAG,eAAe,4BAA4B,EAAE,yBAAyB,aAAa,MAAM,GAAG,GAAG,IAAI;QACxH,MAAM,wBAAwB,QAAQ,GAAG,CAAC,CAAC;YACvC,OAAO;gBACH,QAAQ,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBACvE,UAAU;gBACV,YAAY;YAChB;QACJ;QACA,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,yBAAyB,CAAC,kBAAkB;YAC5E,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,kBAAkB,SAAS,8BAA8B;gBACzD,UAAU,UAAU,0BAA0B;YAClD;YACA,mBAAmB;QACvB;QACA,OAAO;YAAC;YAAU;SAAG;IACzB;IACA,MAAM,+CAA+C,KAAK,EAAE,cAAc,EAAE,gBAAgB,CAAC,EAAE;QAC3F,MAAM,UAAU,MAAM,IAAI,CAAC,6BAA6B;QACxD,MAAM,CAAC,SAAS,OAAO,aAAa,GAAG,MAAM,YAAY,QAAQ,CAAC,sBAAsB,CAAC,SAAS;YAC9F;YACA;YACA,kBAAkB,iBACZ;gBAAC;oBAAC,IAAI,SAAS,EAAE,CAAC,eAAe,IAAI;oBAAG,eAAe,IAAI;iBAAC;aAAC,GAC7D;YACN,OAAO;YACP,SAAS,IAAI,CAAC,GAAG;QACrB;QACA,IAAI,CAAC,SAAS;YACV,OAAO;QACX;QACA,OAAO;IACX;IACA,wJAAwJ;IACxJ,MAAM,yCAAyC,IAAI,EAAE,cAAc,EAAE,gBAAgB,CAAC,EAAE;QACpF,MAAM,UAAU,MAAM,IAAI,CAAC,6BAA6B;QACxD,MAAM,cAAc,IAAI,YAAY,QAAQ,CAAC,SAAS;QACtD,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE;YAC5B,IAAI,CAAC,oBAAoB,GAAG,IAAI;QACpC;QACA,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,MAAM,CAAC,QAAQ,KAAK;YAC/D,MAAM,aAAa,MAAM,YAAY,WAAW;YAChD,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI;QACnD;QACA,MAAM,CAAC,QAAQ,YAAY,QAAQ,GAAG,MAAM,YAAY,QAAQ,CAAC,iBAAiB,CAAC,SAAS;YACxF,OAAO;gBAAC;aAAK;YACb;YACA,kBAAkB,iBACZ;gBAAC;oBAAC,IAAI,SAAS,EAAE,CAAC,eAAe,IAAI;oBAAG,eAAe,IAAI;iBAAC;aAAC,GAC7D;QACV;QACA,IAAI,CAAC,SAAS;YACV,OAAO;QACX;QACA,OAAO,MAAM,CAAC,EAAE;IACpB;IACA,MAAM,8BAA8B,IAAI,EAAE,cAAc,EAAE,gBAAgB,CAAC,EAAE;QACzE,MAAM,SAAS,MAAM,IAAI,CAAC,wCAAwC,CAAC,MAAM,gBAAgB;QACzF,IAAI,CAAC,QAAQ;YACT,OAAO;QACX;QACA,MAAM,KAAK,MAAM,CAAC,GAAG,YAAY,MAAM,EAAE;YACrC,YAAY,IAAI,CAAC,UAAU;YAC3B,KAAK;gBAAC;aAAO;YACb,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS;YAC5B,0BAA0B;YAC1B,cAAc,MAAM,IAAI,CAAC,2BAA2B;QACxD;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE;YACjD,YAAY;YACZ,eAAe;YACf,YAAY;QAChB;QACA,OAAO;IACX;IACA,MAAM,sBAAsB,GAAG,EAAE,WAAW,EAAE;QAC1C,MAAM,UAAU,EAAE;QAClB,IAAI,IAAI,CAAC,eAAe,KAAK,WAAW;YACpC,IAAI,CAAC,eAAe,GAAG,IAAI,SAAS,OAAO,CAAC,uBAAuB,qBAAqB,EAAE,UAAU,2BAA2B,EAAE,IAAI,CAAC,QAAQ;QAClJ;QACA,MAAM,oBAAoB,IAAI,UAAU,OAAO;QAC/C,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,UAAU,CAAC,iBAAiB,CAAC,mBAAmB,IAAI,MAAM,GAAG;QAC7G,2BAA2B;QAC3B,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAC1C,cAAc,GACd,QAAQ,CAAC;YACV,YAAY,kBAAkB,SAAS;QAC3C,GACK,WAAW;QAChB,+BAA+B;QAC/B,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAC1C,eAAe,CAAC;YACjB,OAAO;YACP,MAAM,IAAI,QAAQ,CAAC,GAAG;QAC1B,GACK,QAAQ,CAAC;YACV,UAAU,kBAAkB,SAAS;QACzC,GACK,WAAW;QAChB,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAC1C,eAAe,CAAC;YACjB,OAAO;YACP,MAAM,IAAI,QAAQ,CAAC;QACvB,GACK,QAAQ,CAAC;YACV,UAAU,kBAAkB,SAAS;QACzC,GACK,WAAW;QAChB,SAAS;QACT,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAC1C,kBAAkB,GAClB,QAAQ,CAAC;YACV;YACA,UAAU,kBAAkB,SAAS;QACzC,GACK,WAAW;QAChB,OAAO;YAAC;YAAS;SAAkB;IACvC;IACA,MAAM,2BAA2B,YAAY,EAAE,QAAQ,EAAE;QACrD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,2BAA2B,CAAC,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACvJ,OAAO;IACX;IACA,MAAM,4BAA4B,YAAY,EAAE,kBAAkB,EAAE,SAAS,EAAE;QAC3E,IAAI,IAAI,IAAI,IAAI;QAChB,MAAM,qBAAqB,uBAAuB;QAClD,MAAM,uBAAuB,CAAC,KAAK,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,uBAAuB,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACzS,MAAM,mBAAmB,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,gBAAgB,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,SAAS;QACvK,MAAM,cAAc,CAAC,KAAK,cAAc,QAAQ,cAAc,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,CAAC,cAAc,EAAE,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,CAAC,cAAc,CAAC;QACtK,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,CAAC,uBAAuB,QAAQ,uBAAuB,KAAK,IAAI,KAAK,IAAI,mBAAmB,kBAAkB,IAAI,EAAE,GAAG;gBAAC;aAAY;YAClJ,wBAAwB;YACxB,yBAAyB,uBAAuB,QAAQ,uBAAuB,KAAK,IAAI,KAAK,IAAI,mBAAmB,gBAAgB;YACpI,2BAA2B,qBACrB;gBAAC,uBAAuB,QAAQ,uBAAuB,KAAK,IAAI,KAAK,IAAI,mBAAmB,kBAAkB;aAAC,GAC/G;QACV;QACA,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,0BAA0B,CAAC,cAAc;YAC/E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM;gBACN,WAAW;gBACX,wBAAwB,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;YAChG;YACA;QACJ;QACA,OAAO;IACX;IACA,MAAM,4BAA4B,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE;QAC3D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,4BAA4B,CAAC,MAAM,cAAc,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC7J,OAAO;IACX;IACA,MAAM,6BAA6B,IAAI,EAAE,WAAW,EAAE,cAAc,KAAK,EAAE;QACvE,MAAM,oBAAoB,cACpB,IAAI,CAAC,oBAAoB,CAAC;YACxB,cAAc;gBAAC;aAAY;QAC/B,KACE;QACN,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,2BAA2B,CAAC,aAAa;YAC/E,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,wBAAwB,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;YAChG;YACA;QACJ;QACA,OAAO;IACX;IACA,MAAM,8BAA8B;QAChC,MAAM,SAAS,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,kCAAkC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;QAC3I,OAAO;IACX;IACA,MAAM,gCAAgC;QAClC,MAAM,SAAS,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,oCAAoC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;QAC/I,OAAO;IACX;IACA,MAAM,+BAA+B,YAAY,EAAE,eAAe,EAAE,SAAS,EAAE,QAAQ,EAAE;QACrF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mCAAmC,CAAC,cAAc,iBAAiB,YAAY,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC3L,OAAO;IACX;IACA,MAAM,oCAAoC,YAAY,EAAE,eAAe,EAAE,SAAS,EAAE;QAChF,MAAM,KAAK,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC,cAAc,iBAAiB;YACpG,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,MAAM,CAAC,GAAG,MAAM,2BAA2B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS,EAAE;gBAC9I,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,0BAA0B,CAAC,GAAG,MAAM,oCAAoC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;YACpG;QACJ;QACA,OAAO;IACX;IACA,MAAM,oCAAoC,eAAe,EAAE;QACvD,MAAM,aAAa,MAAM,IAAI,CAAC,oBAAoB,CAAC;QACnD,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,8BAA8B,CAAC;YAC3D,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,YAAY,WAAW,MAAM;gBAC7B,iBAAiB,WAAW,KAAK;YACrC;QACJ;IACJ;IACA,MAAM,+BAA+B,eAAe,EAAE,QAAQ,EAAE;QAC5D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mCAAmC,CAAC,kBAAkB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAClK,OAAO;IACX;IACA,MAAM,qBAAqB,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE;QACnE,MAAM,mBAAmB,MAAM,IAAI,CAAC,yBAAyB,CAAC,aAAa,aAAa;QACxF,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,kBAAkB;YACrD,cAAc;YACd,mBAAmB;QACvB;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,MAAM,0BAA0B,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE;QACxE,MAAM,sBAAsB,CAAC,GAAG,QAAQ,0CAA0C,EAAE;QACpF,MAAM,OAAO,OAAO,KAAK,CAAC,oBAAoB,MAAM,GAAG;QACvD,KAAK,GAAG,CAAC,qBAAqB;QAC9B,KAAK,GAAG,CAAC,YAAY,WAAW,CAAC,QAAQ,MAAM,IAAI,IAAI,eAAe;QACtE,KAAK,GAAG,CAAC,iBAAiB,WAAW,CAAC,QAAQ,MAAM,IAAI,KAAK,eAAe;QAC5E,iCAAiC;QACjC,OAAO,IAAI,UAAU,sBAAsB,CAAC;YACxC,WAAW,IAAI,CAAC,OAAO,CAAC,SAAS;YACjC,MAAM;gBACF;oBACI,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,MAAM;oBACrD,YAAY;oBACZ,UAAU;gBACd;gBACA;oBACI,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;oBAC7B,YAAY;oBACZ,UAAU;gBACd;gBACA;oBACI,QAAQ,UAAU,mBAAmB;oBACrC,YAAY;oBACZ,UAAU;gBACd;gBACA;oBACI,QAAQ,MAAM,IAAI,CAAC,iBAAiB;oBACpC,YAAY;oBACZ,UAAU;gBACd;aACH;YACD;QACJ;IACJ;IACA,MAAM,gCAAgC,WAAW,EAAE,mBAAmB,EAAE;QACpE,MAAM,mBAAmB,MAAM,IAAI,CAAC,oCAAoC,CAAC,aAAa;QACtF,MAAM,KAAK,MAAM,IAAI,CAAC,gBAAgB,CAAC,kBAAkB;YACrD,cAAc;YACd,mBAAmB;QACvB;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI;QAC9D,OAAO;IACX;IACA,qCAAqC,WAAW,EAAE,oBAAoB,KAAK;IAAN,EACnE;QACE,MAAM,sBAAsB,CAAC,GAAG,QAAQ,0CAA0C,EAAE;QACpF,MAAM,OAAO,OAAO,KAAK,CAAC,oBAAoB,MAAM,GAAG;QACvD,KAAK,GAAG,CAAC,qBAAqB;QAC9B,KAAK,SAAS,CAAC,qBAAqB,IAAI,YAAY;QACpD,iCAAiC;QACjC,OAAO,IAAI,UAAU,sBAAsB,CAAC;YACxC,WAAW,IAAI,CAAC,OAAO,CAAC,SAAS;YACjC,MAAM;gBACF;oBACI,QAAQ,IAAI,CAAC,oBAAoB,CAAC,aAAa,MAAM;oBACrD,YAAY;oBACZ,UAAU;gBACd;gBACA;oBACI,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;oBAC7B,YAAY;oBACZ,UAAU;gBACd;aACH;YACD;QACJ;IACJ;IACA,MAAM,iBAAiB,QAAQ,EAAE;QAC7B,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;IAC1G;IACA,MAAM,gCAAgC,QAAQ,EAAE;QAC5C,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,GAAG,MAAM,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;IAC9L;IACA,MAAM,cAAc;QAChB,OAAQ,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;IAC5G;IACA,MAAM,8BAA8B,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE;QAClE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kCAAkC,CAAC,UAAU,eAAe,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACxK,OAAO;IACX;IACA,MAAM,mCAAmC,QAAQ,EAAE,YAAY,EAAE;QAC7D,MAAM,SAAS,CAAC,GAAG,MAAM,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACrE,MAAM,iCAAiC,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5G,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACnG,MAAM,WAAW,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;QACvE,MAAM,oBAAoB,aAAa,GAAG,CAAC,CAAC;YACxC,OAAO;gBACH,YAAY;gBACZ,UAAU;gBACV,QAAQ;YACZ;QACJ;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,6BAA6B,CAAC;YAC1D,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B;gBACA,uBAAuB;gBACvB;gBACA,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;YACJ;YACA;QACJ;IACJ;IACA,MAAM,gBAAgB,MAAM,EAAE,6BAA6B,EAAE,QAAQ,EAAE;QACnE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ,gCAAgC,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC1K,OAAO;IACX;IACA,MAAM,sBAAsB,MAAM,EAAE,6BAA6B,EAAE;QAC/D,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;QAC/B;QACA,kBAAkB,IAAI,IAAI,8BAA8B,GAAG,CAAC,CAAC;YACzD,OAAO;gBACH,QAAQ,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;gBAClF,UAAU;gBACV,YAAY;YAChB;QACJ;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,eAAe,CAAC;YAC5C,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,QAAQ,OAAO,MAAM;gBACrB,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,uBAAuB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;gBACzG,UAAU,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;YACpE;YACA;QACJ;IACJ;IACA,MAAM,eAAe,iBAAiB,EAAE,QAAQ,EAAE;QAC9C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACpJ,OAAO;IACX;IACA,MAAM,oBAAoB,iBAAiB,EAAE;QACzC,IAAI,kBAAkB,MAAM,GAAG,IAAI;YAC/B,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,yBAAyB;QAC7B;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,CAAC;YAC3C,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,UAAU,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;gBAChE,aAAa,IAAI,CAAC,oBAAoB,CAAC,GAAG,MAAM;YACpD;YACA;QACJ;IACJ;IACA,MAAM,4BAA4B,WAAW,EAAE;QAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,gCAAgC,CAAC,cAAc,YAAY,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5J,OAAO;IACX;IACA,MAAM,iCAAiC,WAAW,EAAE;QAChD,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC,YAAY,eAAe;QACxE,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,2BAA2B,CAAC;YACxD,UAAU;gBACN,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,aAAa,YAAY,MAAM;gBAC/B,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,WAAW,MAAM;gBACzB,YAAY,WAAW,MAAM;YACjC;QACJ;IACJ;IACA,MAAM,WAAW,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,aAAa,EAAE,QAAQ,EAAE;QACrG,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,gBAAgB,UAAU,cAAc,QAAQ,gBAAgB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC3M,OAAO;IACX;IACA,MAAM,gBAAgB,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,aAAa,EAAE;QAChG,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;gBAAe;aAAe;QAC9D;QACA,MAAM,4BAA4B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;QAC1G,MAAM,6BAA6B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;QAC3G,MAAM,qBAAqB,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,IAAI,CAAC,oBAAoB,CAAC,eAAe,IAAI,EAAE;QAC3H,MAAM,sBAAsB,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,IAAI,EAAE;QAC7H,MAAM,gBAAgB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;QACzF,MAAM,iBAAiB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;QAC1F,MAAM,eAAe,IAAI,CAAC,oBAAoB,CAAC,eAAe,IAAI;QAClE,MAAM,gBAAgB,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,IAAI;QACpE,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACnG,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,gBAAgB,UAAU,cAAc;YAC9F;YACA,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA;gBACA;gBACA;gBACA,yBAAyB,CAAC,GAAG,MAAM,mCAAmC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBAChG;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,cAAc,YAAY,gBAAgB;YAC9C;QACJ;IACJ;IACA,MAAM,mBAAmB,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,cAAc,EAAE,eAAe,EAAE,MAAM,EAAE,qBAAqB,EAAE,yBAAyB,EAAE,0BAA0B,EAAE,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE;QAC9N,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,eAAe,gBAAgB,UAAU,gBAAgB,iBAAiB,QAAQ,uBAAuB,2BAA2B,4BAA4B,eAAe,iBAAiB,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACpU,OAAO;IACX;IACA,MAAM,wBAAwB,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,cAAc,EAAE,eAAe,EAAE,MAAM,EAAE,qBAAqB,EAAE,yBAAyB,EAAE,0BAA0B,EAAE,aAAa,EAAE,cAAc,EAAE;QACzN,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;gBAAe;aAAe;QAC9D;QACA,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,eAAe,gBAAgB,UAAU,gBAAgB,iBAAiB;YACzH;YACA,UAAU;gBACN,aAAa,IAAI,CAAC,kBAAkB;gBACpC,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC;gBACA;gBACA;gBACA;gBACA,yBAAyB,CAAC,GAAG,MAAM,mCAAmC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;gBAChG;gBACA;gBACA,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC,cAAc,YAAY,gBAAgB;YAC9C;QACJ;IACJ;IACA,MAAM,8BAA8B,MAAM,EAAE;QACxC,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,qBAAqB,MAAM,CAAC,GAAG,MAAM,mCAAmC,EAAE,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;QAC7G,OAAO,IAAI,CAAC,iDAAiD,CAAC,oBAAoB,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;IACpI;IACA,MAAM,yBAAyB,MAAM,EAAE,QAAQ,EAAE;QAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,6BAA6B,CAAC,SAAS,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QACnJ,OAAO;IACX;IACA,MAAM,mBAAmB,EAAE,aAAa,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,EAAE,QAAQ,EAAG,EAAE;QACpF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC;YACxG;YACA;YACA;YACA;QACJ,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5B,OAAO;IACX;IACA,MAAM,wBAAwB,EAAE,aAAa,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,EAAG,EAAE;QAC/E,MAAM,MAAM,EAAE;QACd,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;aAAc;QAC9C;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,eAAe,WAAW,IAAI;QACpC,MAAM,cAAc,aAAa,MAAM,CAAC,cAAc,gBAAgB;QACtE,IAAI;QACJ,IAAI,aAAa;YACb,MAAM,EAAE,KAAK,OAAO,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,UAAU;YACtF,mBAAmB;YACnB,IAAI,IAAI,IAAI;QAChB;QACA,MAAM,gBAAgB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QAChG,MAAM,qBAAqB,qBAAqB,QAAQ,qBAAqB,KAAK,IAAI,mBAAoB,MAAM,IAAI,CAAC,yBAAyB,CAAC,eAAe;QAC9J,MAAM,4BAA4B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QACjH,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,qBAAqB,MAAM,CAAC,GAAG,MAAM,mCAAmC,EAAE,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;QAC7G,IAAI,CAAE,MAAM,IAAI,CAAC,oBAAoB,CAAC,qBAAsB;YACxD,IAAI,IAAI,CAAC,IAAI,CAAC,iDAAiD,CAAC,oBAAoB,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACtI;QACA,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;QAChH,IAAI,CAAC,OAAO,aAAa,CAAC,MAAM,CAAC,UAAU,SAAS,CAAC,OAAO,GAAG;YAC3D,MAAM,2BAA2B,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,OAAO,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;YAC7H,kBAAkB,IAAI,CAAC;gBACnB,QAAQ;gBACR,YAAY;gBACZ,UAAU;YACd;QACJ;QACA,MAAM,uBAAuB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC,eAAe,UAAU,eAAe;YAC7G;YACA,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,OAAO,MAAM;gBACrB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,kBAAkB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;gBAC/F;gBACA,cAAc,YAAY,gBAAgB;YAC9C;QACJ;QACA,IAAI,IAAI,CAAC;QACT,IAAI,eAAe,kBAAkB;YACjC,IAAI,IAAI,CAAC,CAAC,GAAG,YAAY,6BAA6B,EAAE,kBAAkB,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;QAC1H;QACA,OAAO;eAAI;SAAI;IACnB;IACA,MAAM,2BAA2B,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAG,EAAE;QAC7E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,+BAA+B,CAAC;YAChH;YACA;YACA;QACJ,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5B,OAAO;IACX;IACA,MAAM,gCAAgC,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAG,EAAE;QACxE,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;aAAc;QAC9C;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,eAAe,WAAW,IAAI;QACpC,MAAM,gBAAgB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QAChG,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;QAChH,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,0BAA0B,CAAC,eAAe,UAAU;YAChF,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,OAAO,MAAM;gBACrB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA;gBACA;YACJ;YACA;QACJ;IACJ;IACA,MAAM,sBAAsB,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAG,EAAE;QACvF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC;YAC3G;YACA;YACA;YACA;QACJ,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5B,OAAO;IACX;IACA,MAAM,2BAA2B,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAG,EAAE;QAClF,MAAM,MAAM,EAAE;QACd,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;aAAe;QAC/C;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,gBAAgB,WAAW,IAAI;QACrC,MAAM,iBAAiB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QACjG,IAAI,cAAc,MAAM,CAAC,cAAc,gBAAgB,GAAG;YACtD,IAAI,IAAI,CAAC,CAAC,GAAG,YAAY,iDAAiD,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,yBAAyB,CAAC,gBAAgB,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,cAAc,gBAAgB;QACzN;QACA,MAAM,sBAAsB,MAAM,IAAI,CAAC,yBAAyB,CAAC,gBAAgB;QACjF,MAAM,6BAA6B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QAClH,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,qBAAqB,MAAM,CAAC,GAAG,YAAY,yBAAyB,EAAE,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QAC3G,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;QAChH,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,qBAAqB,CAAC,gBAAgB,UAAU,cAAc;YAC5F;YACA,UAAU;gBACN,aAAa,IAAI,CAAC,kBAAkB;gBACpC,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,OAAO,MAAM;gBACrB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA;gBACA;gBACA;gBACA,wBAAwB,WAAW,KAAK;gBACxC;gBACA,kBAAkB,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;gBAC/F;gBACA,cAAc,YAAY,gBAAgB;gBAC1C,UAAU,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;YACpE;QACJ;QACA,OAAO;IACX;IACA,MAAM,8BAA8B,EAAE,cAAc,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAG,EAAE;QACjF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,kCAAkC,CAAC;YACnH;YACA;YACA;QACJ,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,IAAI;QAC5B,OAAO;IACX;IACA,MAAM,mCAAmC,EAAE,cAAc,EAAE,QAAQ,EAAE,MAAM,EAAG,EAAE;QAC5E,MAAM,oBAAoB,IAAI,CAAC,oBAAoB,CAAC;YAChD,cAAc,EAAE;YAChB,2BAA2B;gBAAC;aAAe;QAC/C;QACA,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;QAC7C,MAAM,gBAAgB,WAAW,IAAI;QACrC,MAAM,iBAAiB,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;QACjG,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,wBAAwB,CAAC,GAAG,MAAM,iCAAiC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,MAAM;QAChH,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,6BAA6B,CAAC,gBAAgB,UAAU;YACpF;YACA,UAAU;gBACN,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,OAAO,MAAM;gBACrB,WAAW,IAAI,CAAC,MAAM,CAAC,SAAS;gBAChC;gBACA;gBACA;gBACA;YACJ;QACJ;IACJ;IACA,MAAM,4BAA4B,EAAE,aAAa,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,EAAG,EAAE,cAAc,EAAE,qCAAqC,IAAI,EAAE,OAAO,KAAK,EAAE;QAC5J,MAAM,MAAM,EAAE;QACd,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,wBAAwB,CAAC,QAAQ,gBAAgB;QACzE,IAAI,MAAM;YACN,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,+BAA+B,CAAC;gBAChD;gBACA;gBACA;YACJ;QACJ,OACK;YACD,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,uBAAuB,CAAC;gBAC5C;gBACA;gBACA;gBACA;YACJ;QACJ;QACA,OAAO;IACX;IACA,MAAM,+BAA+B,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAG,EAAE,cAAc,EAAE,qCAAqC,IAAI,EAAE,OAAO,KAAK,EAAE;QAC/J,MAAM,MAAM,EAAE;QACd,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,2BAA2B,CAAC,OAAO,QAAQ,EAAE,IAAI,CAAC,qBAAqB,GAC1F,MAAM,CAAC,CAAC,gBAAkB,cAAc,QAAQ,GAAG,GACnD,GAAG,CAAC,CAAC,gBAAkB,cAAc,WAAW;QACrD,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,wBAAwB,CAAC,QAAQ,gBAAgB;QACzE,IAAI,MAAM;YACN,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,kCAAkC,CAAC;gBACnD;gBACA;gBACA;YACJ;QACJ,OACK;YACD,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,0BAA0B,CAAC;gBAC/C;gBACA;gBACA;gBACA;YACJ;QACJ;QACA,OAAO;IACX;IACA,MAAM,yBAAyB,MAAM,EAAE,cAAc,EAAE,qCAAqC,IAAI,EAAE;QAC9F,MAAM,MAAM,EAAE;QACd,MAAM,eAAe,MAAM,IAAI,CAAC,eAAe,MAAM;QACrD,IAAI,oCAAoC;YACpC,KAAK,MAAM,eAAe,aAAc;gBACpC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,gCAAgC,CAAC;YACzD;QACJ;QACA,MAAM,oBAAoB,aAAa,GAAG,CAAC,CAAC,cAAgB,YAAY,eAAe;QACvF,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,QAAQ;QAClD,OAAO;IACX;IACA,MAAM,qCAAqC,iBAAiB,EAAE,MAAM,EAAE,cAAc,EAAE,qCAAqC,IAAI,EAAE;QAC7H,MAAM,MAAM,EAAE;QACd,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC;QACxC,MAAM,eAAe,MAAM,IAAI,CAAC,eAAe,MAAM;QACrD,IAAI,oCAAoC;YACpC,KAAK,MAAM,eAAe,aAAc;gBACpC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,gCAAgC,CAAC;YACzD;QACJ;QACA,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,kCAAkC,CAAC,OAAO,QAAQ,EAAE,MAAM,IAAI,CAAC,eAAe,MAAM,IAAI,GAAG,CAAC,CAAC,cAAgB,YAAY,MAAM;QACnJ,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,wBAAwB,CAAC,QAAQ,gBAAgB;QACzE,OAAO;IACX;IACA,MAAM,oBAAoB,MAAM,EAAE,cAAc,EAAE,aAAa,EAAE,cAAc,EAAE,QAAQ,EAAE,YAAY,EAAE,aAAa,EAAE;QACpH,MAAM,MAAM,EAAE;QACd,IAAI,IAAI,IAAK,MAAM,IAAI,CAAC,wBAAwB,CAAC,QAAQ;QACzD,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,gBAAgB,UAAU,cAAc,OAAO,MAAM,EAAE;QAC1G,OAAO;IACX;IACA,MAAM,mBAAmB,QAAQ,EAAE,iBAAiB,EAAE;QAClD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,UAAU,oBAAoB,YAAY,EAAE,EAAE,IAAI,CAAC,IAAI;QACnK,OAAO;IACX;IACA,MAAM,wBAAwB,QAAQ,EAAE,iBAAiB,EAAE;QACvD,MAAM,oBAAoB,EAAE;QAC5B,kBAAkB,IAAI,IAAI,kBAAkB,GAAG,CAAC,CAAC;YAC7C,OAAO;gBACH,QAAQ,IAAI,CAAC,oBAAoB,CAAC,OAAO,MAAM;gBAC/C,UAAU;gBACV,YAAY;YAChB;QACJ;QACA,MAAM,yBAAyB,IAAI,CAAC,yBAAyB;QAC7D,MAAM,SAAS,CAAC,GAAG,MAAM,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QACrE,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,kBAAkB,CAAC;YAC/C,UAAU;gBACN,aAAa,IAAI,CAAC,kBAAkB;gBACpC,OAAO,MAAM,IAAI,CAAC,iBAAiB;gBACnC,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS;gBAC7B,UAAU,CAAC,GAAG,MAAM,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;gBAChE,aAAa,uBAAuB,MAAM;gBAC1C,aAAa,CAAC,GAAG,MAAM,uBAAuB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;gBAChF,8BAA8B,CAAC,GAAG,MAAM,4BAA4B,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ;gBACtG;gBACA,iBAAiB,uBAAuB,KAAK;gBAC7C,cAAc,IAAI,CAAC,4BAA4B,CAAC;YACpD;YACA;QACJ;IACJ;IACA,MAAM,4BAA4B,QAAQ,EAAE,aAAa,EAAE;QACvD,MAAM,MAAM,EAAE;QACd,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,mBAAmB,CAAC;QACxC,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,uBAAuB,CAAC,UAAU;QACtD,OAAO;IACX;IACA;;KAEC,GACD,wBAAwB,SAAS,EAAE;QAC/B,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YACtD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY;QAC9C;IACJ;IACA,6BAA6B;QACzB,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YACtD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC;QAClC;IACJ;IACA,uBAAuB,EAAE,EAAE;QACvB,OAAO,CAAC,GAAG,QAAQ,sBAAsB,EAAE;IAC/C;IACA;;;;;;;;KAQC,GACD,gBAAgB,EAAE,EAAE,iBAAiB,EAAE,IAAI,EAAE,SAAS,EAAE;QACpD,MAAM,gBAAgB,IAAI,CAAC,sBAAsB,CAAC;QAClD,IAAI,eAAe;YACf,OAAO,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,IAAI,mBAAmB,SAAS,QAAQ,SAAS,KAAK,IAAI,OAAO,IAAI,CAAC,IAAI,EAAE;QAC9H,OACK;YACD,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,mBAAmB,SAAS,QAAQ,SAAS,KAAK,IAAI,OAAO,IAAI,CAAC,IAAI,EAAE;QAC1G;IACJ;IACA,MAAM,iBAAiB,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,yBAAyB,EAAE,eAAe,EAAE,WAAW,EAAE;QAC7H,OAAO,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC;YACnC;YACA,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;YAClF,UAAU,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;YAC7E,YAAY,IAAI,CAAC,UAAU;YAC3B,qBAAqB,IAAI,CAAC,IAAI,CAAC,mBAAmB;YAClD,mCAAmC,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI;YAC7E;YACA;YACA;YACA;QACJ;IACJ;IACA,MAAM,sBAAsB,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,yBAAyB,EAAE;QACpG,OAAO,IAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC;YACxC;YACA,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;YAClF,UAAU,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;YAC7E,YAAY,IAAI,CAAC,UAAU;YAC3B,qBAAqB,IAAI,CAAC,IAAI,CAAC,mBAAmB;YAClD,mCAAmC,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI;YAC7E;YACA;QACJ;IACJ;IACA,MAAM,qBAAqB,eAAe,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,yBAAyB,EAAE;QACtG,OAAO,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC;YACvC;YACA,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;YAClF,UAAU,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;YAC7E,YAAY,IAAI,CAAC,UAAU;YAC3B,qBAAqB,IAAI,CAAC,IAAI,CAAC,mBAAmB;YAClD,mCAAmC,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI;YAC7E;YACA;QACJ;IACJ;IACA,MAAM,4BAA4B,eAAe,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,yBAAyB,EAAE;QAC7G,OAAO,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC;YAC7C;YACA,WAAW,cAAc,QAAQ,cAAc,KAAK,IAAI,YAAY,IAAI,CAAC,SAAS;YAClF,UAAU,aAAa,QAAQ,aAAa,KAAK,IAAI,WAAW,IAAI,CAAC,QAAQ;YAC7E,YAAY,IAAI,CAAC,UAAU;YAC3B,qBAAqB,IAAI,CAAC,IAAI,CAAC,mBAAmB;YAClD,mCAAmC,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,IAAI;YAC7E;YACA;QACJ;IACJ;AACJ;AACA,QAAQ,WAAW,GAAG","ignoreList":[0]}}]
}