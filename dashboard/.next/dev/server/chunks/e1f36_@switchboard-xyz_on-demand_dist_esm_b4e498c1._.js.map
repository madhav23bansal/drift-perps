{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/instruction-utils/InstructionUtils.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/instruction-utils/InstructionUtils.ts"],"sourcesContent":["import { web3 } from '@coral-xyz/anchor-30';\n\n/*\n * Utilities namespace for instruction related functions\n * */\nexport class InstructionUtils {\n  /**\n   *  Disable instantiation of the InstructionUtils class\n   */\n  private constructor() {}\n  /**\n   * Function to convert transaction instructions to a versioned transaction.\n   *\n   * @param {object} params - The parameters object.\n   * @param {web3.Connection} params.connection - The connection to use.\n   * @param {web3.TransactionInstruction[]} params.ixs - The transaction instructions.\n   * @param {web3.PublicKey} [params.payer] - The payer for the transaction.\n   * @param {number} [params.computeUnitLimitMultiple] - The compute units to cap the transaction as a multiple of the simulated units consumed (e.g., 1.25x).\n   * @param {number} [params.computeUnitPrice] - The price per compute unit in microlamports.\n   * @param {web3.AddressLookupTableAccount[]} [params.lookupTables] - The address lookup tables.\n   * @param {web3.Signer[]} [params.signers] - The signers for the transaction.\n   * @returns {Promise<web3.VersionedTransaction>} A promise that resolves to the versioned transaction.\n   */\n  static async asV0TxWithComputeIxs(params: {\n    connection: web3.Connection;\n    ixs: web3.TransactionInstruction[];\n    payer?: web3.PublicKey;\n    computeUnitLimitMultiple?: number;\n    computeUnitPrice?: number;\n    lookupTables?: web3.AddressLookupTableAccount[];\n    signers?: web3.Signer[];\n  }): Promise<web3.VersionedTransaction> {\n    let payer = params.payer;\n    if (!payer) {\n      if (!params.signers?.length) {\n        throw new Error('Payer not provided');\n      }\n      payer = params.signers[0].publicKey;\n    }\n    const priorityFeeIx = web3.ComputeBudgetProgram.setComputeUnitPrice({\n      microLamports: params.computeUnitPrice ?? 0,\n    });\n    const simulationComputeLimitIx =\n      web3.ComputeBudgetProgram.setComputeUnitLimit({\n        units: 1_400_000, // 1.4M compute units\n      });\n    const recentBlockhash = (await params.connection.getLatestBlockhash())\n      .blockhash;\n\n    const simulateMessageV0 = new web3.TransactionMessage({\n      recentBlockhash,\n      instructions: [...params.ixs, priorityFeeIx, simulationComputeLimitIx],\n      payerKey: payer,\n    }).compileToV0Message(params.lookupTables ?? []);\n    const simulateTx = new web3.VersionedTransaction(simulateMessageV0);\n    try {\n      simulateTx.serialize();\n    } catch (e) {\n      if (e instanceof RangeError) {\n        throw new Error(\n          'Transaction failed to serialize: Transaction too large'\n        );\n      }\n      throw e;\n    }\n    const simulationResult = await params.connection.simulateTransaction(\n      simulateTx,\n      { commitment: 'processed', sigVerify: false }\n    );\n\n    const simulationUnitsConsumed = simulationResult.value.unitsConsumed!;\n    const computeLimitIx = web3.ComputeBudgetProgram.setComputeUnitLimit({\n      units: Math.floor(\n        simulationUnitsConsumed * (params.computeUnitLimitMultiple ?? 1)\n      ),\n    });\n    const messageV0 = new web3.TransactionMessage({\n      recentBlockhash,\n      instructions: [...params.ixs, priorityFeeIx, computeLimitIx],\n      payerKey: payer,\n    }).compileToV0Message(params.lookupTables ?? []);\n    const tx = new web3.VersionedTransaction(messageV0);\n    tx.sign(params.signers ?? []);\n    return tx;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/instruction-utils/Secp256k1InstructionUtils.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/instruction-utils/Secp256k1InstructionUtils.ts"],"sourcesContent":["import { web3 } from '@coral-xyz/anchor-30';\nimport { NonEmptyArrayUtils } from '@switchboard-xyz/common';\n\n// The serialized size of a secp256k1 signature\nconst SIGNATURE_SERIALIZED_SIZE = 64;\n// The serialized size of a hashed pubkey\nconst HASHED_PUBKEY_SERIALIZED_SIZE = 20;\n// The serialized size of the signature offsets\nconst SIGNATURE_OFFSETS_SERIALIZED_SIZE = 11;\n\nexport type Secp256k1Signature = {\n  ethAddress: Buffer;\n  signature: Buffer;\n  message: Buffer;\n  recoveryId: number;\n};\n\nexport class Secp256k1InstructionUtils {\n  /**\n   *  Disable instantiation of the InstructionUtils class\n   */\n  private constructor() {}\n\n  static buildSecp256k1Instruction(\n    signatures: Secp256k1Signature[],\n    instructionIndex: number\n  ): web3.TransactionInstruction {\n    // Ensure that the `instructionIndex` is both a valid finite number and non-negative\n    if (!Number.isFinite(instructionIndex) || instructionIndex < 0) {\n      throw new Error('Invalid instruction index');\n    }\n    // Ensure that the `signatures` array is non-empty and that all signatures share the same\n    // common message\n    NonEmptyArrayUtils.validate(signatures);\n    const diffIdx = signatures.findIndex(\n      sig => !sig.message.equals(signatures[0].message)\n    );\n    if (diffIdx !== -1) {\n      const expectedMessage = signatures[0].message.toString('base64');\n      const differentMessage = signatures[diffIdx].message.toString('base64');\n      throw new Error(`\n        All signatures must share the same message. The signed message at #${diffIdx}\n        (${differentMessage}) does not match the expected message (${expectedMessage})\n      `);\n    }\n\n    // We've validated that all signatures share the same message, so we can use the first\n    // signature's message as the common message.\n    const commonMessage = signatures[0].message;\n    const commonMessageSize = commonMessage.length;\n\n    const signatureBlockSize =\n      SIGNATURE_SERIALIZED_SIZE + 1 + HASHED_PUBKEY_SERIALIZED_SIZE;\n    const numSignatures = signatures.length;\n    const offsetsAreaSize =\n      1 + numSignatures * SIGNATURE_OFFSETS_SERIALIZED_SIZE;\n    const messageOffset = offsetsAreaSize + numSignatures * signatureBlockSize;\n\n    const signatureOffsets: Uint8Array[] = [];\n    const signatureBuffer: number[] = [];\n\n    for (const sig of signatures) {\n      // Calculate the offset of the current signature block\n      const currentOffset = offsetsAreaSize + signatureBuffer.length;\n      // Create a new Uint8Array to store the signature offsets\n      const offsetsBytes = new Uint8Array(SIGNATURE_OFFSETS_SERIALIZED_SIZE);\n      let position = 0;\n\n      // Write signature offset (2 bytes LE)\n      const signatureOffset = currentOffset;\n      offsetsBytes.set(writeUInt16LE(signatureOffset), position);\n      position += 2;\n\n      // 1. Write signature instruction index (1 byte)\n      offsetsBytes[position] = instructionIndex;\n      position += 1;\n      // 2. Write eth address offset (2 bytes LE)\n      const ethAddressOffset = currentOffset + SIGNATURE_SERIALIZED_SIZE + 1;\n      offsetsBytes.set(writeUInt16LE(ethAddressOffset), position);\n      position += 2;\n      // 3. Write eth address instruction index (1 byte)\n      offsetsBytes[position] = instructionIndex;\n      position += 1;\n      // 4. Write message offset (2 bytes LE)\n      const messageDataOffset = messageOffset;\n      offsetsBytes.set(writeUInt16LE(messageDataOffset), position);\n      position += 2;\n      // 5. Write message size (2 bytes LE)\n      offsetsBytes.set(writeUInt16LE(commonMessageSize), position);\n      position += 2;\n      // 6. Write message instruction index (1 byte)\n      offsetsBytes[position] = instructionIndex;\n\n      // Append the signature offsets to the list of signature offsets\n      signatureOffsets.push(offsetsBytes);\n\n      // Append the signature block to the signature buffer\n      signatureBuffer.push(...Array.from(sig.signature));\n      signatureBuffer.push(sig.recoveryId);\n      signatureBuffer.push(...Array.from(sig.ethAddress));\n    }\n\n    // Build final instruction data\n    let position = 0;\n    const instrData = new Uint8Array(\n      1 + // count byte\n        signatureOffsets.length * SIGNATURE_OFFSETS_SERIALIZED_SIZE + // offsets area\n        signatureBuffer.length + // signature blocks\n        commonMessage.length // common message\n    );\n    // 1. Write count byte\n    instrData[position] = numSignatures;\n    position += 1;\n    // 2. Write offsets area\n    for (const offs of signatureOffsets) {\n      instrData.set(offs, position);\n      position += SIGNATURE_OFFSETS_SERIALIZED_SIZE;\n    }\n    // 3. Write signature blocks\n    instrData.set(new Uint8Array(signatureBuffer), position);\n    position += signatureBuffer.length;\n    // 4. Write common message\n    instrData.set(commonMessage, position);\n\n    return new web3.TransactionInstruction({\n      programId: web3.Secp256k1Program.programId,\n      data: Buffer.from(instrData),\n      keys: [],\n    });\n  }\n}\n\nfunction writeUInt16LE(value: number): Uint8Array {\n  const buf = Buffer.alloc(2);\n  buf.writeUInt16LE(value, 0);\n  return new Uint8Array(buf);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/instruction-utils/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/instruction-utils/index.ts"],"sourcesContent":["export * from './InstructionUtils.js';\nexport * from './Secp256k1InstructionUtils.js';\n"],"names":[],"mappings":";AAAA,cAAc,uBAAuB,CAAC;AACtC,cAAc,gCAAgC,CAAC"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/constants.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/constants.ts"],"sourcesContent":["import { web3 } from '@coral-xyz/anchor-30';\n\n/**\n *  Address of the SPL Token program.\n */\nexport const SPL_TOKEN_PROGRAM_ID = new web3.PublicKey(\n  'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA'\n);\n/**\n *  The public key of the Solana SPL Associated Token Account program.\n */\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID = new web3.PublicKey(\n  'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL'\n);\n/**\n *  The public key of the Solana SlotHashes sysvar.\n */\nexport const SPL_SYSVAR_SLOT_HASHES_ID = new web3.PublicKey(\n  'SysvarS1otHashes111111111111111111111111111'\n);\n/**\n *  The public key of the Solana Instructions sysvar.\n */\nexport const SPL_SYSVAR_INSTRUCTIONS_ID = new web3.PublicKey(\n  'Sysvar1nstructions1111111111111111111111111'\n);\n\n/**\n *  Address of the SPL Token 2022 program.\n */\nexport const SPL_TOKEN_2022_PROGRAM_ID = new web3.PublicKey(\n  'TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb'\n);\n\n/**\n *  Address of the special mint for wrapped native SOL in spl-token.\n */\nexport const SOL_NATIVE_MINT = new web3.PublicKey(\n  'So11111111111111111111111111111111111111112'\n);\n/**\n *  Address of the special mint for wrapped native SOL in spl-token-2022.\n */\nexport const SOL_NATIVE_MINT_2022 = new web3.PublicKey(\n  '9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP'\n);\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,sBAAsB,CAAC;;AAKrC,MAAM,oBAAoB,GAAG,IAAI,kTAAI,CAAC,SAAS,CACpD,6CAA6C,CAC9C,CAAC;AAIK,MAAM,uCAAuC,GAAG,IAAI,kTAAI,CAAC,SAAS,CACvE,8CAA8C,CAC/C,CAAC;AAIK,MAAM,yBAAyB,GAAG,IAAI,kTAAI,CAAC,SAAS,CACzD,6CAA6C,CAC9C,CAAC;AAIK,MAAM,0BAA0B,GAAG,IAAI,kTAAI,CAAC,SAAS,CAC1D,6CAA6C,CAC9C,CAAC;AAKK,MAAM,yBAAyB,GAAG,IAAI,kTAAI,CAAC,SAAS,CACzD,6CAA6C,CAC9C,CAAC;AAKK,MAAM,eAAe,GAAG,IAAI,kTAAI,CAAC,SAAS,CAC/C,6CAA6C,CAC9C,CAAC;AAIK,MAAM,oBAAoB,GAAG,IAAI,kTAAI,CAAC,SAAS,CACpD,8CAA8C,CAC/C,CAAC"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/utils/lookupTable.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/utils/lookupTable.ts"],"sourcesContent":["import type { BN } from '@coral-xyz/anchor-30';\nimport { web3 } from '@coral-xyz/anchor-30';\n\nexport function getLutSigner(\n  programId: web3.PublicKey,\n  pubkey: web3.PublicKey\n): web3.PublicKey {\n  return web3.PublicKey.findProgramAddressSync(\n    [Buffer.from('LutSigner'), pubkey.toBuffer()],\n    programId\n  )[0];\n}\n\nexport function getLutKey(\n  lutSigner: web3.PublicKey,\n  lutSlot: number | BN\n): web3.PublicKey {\n  const lutKey = web3.AddressLookupTableProgram.createLookupTable({\n    authority: lutSigner,\n    payer: web3.PublicKey.default,\n    recentSlot: BigInt(lutSlot.toString()),\n  })[1];\n  return lutKey;\n}\n"],"names":[],"mappings":";;;;;;;AACA,OAAO,EAAE,IAAI,EAAE,MAAM,sBAAsB,CAAC;;AAEtC,SAAU,YAAY,CAC1B,SAAyB,EACzB,MAAsB;IAEtB,OAAO,kTAAI,CAAC,SAAS,CAAC,sBAAsB,CAC1C;QAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QAAE,MAAM,CAAC,QAAQ,EAAE;KAAC,EAC7C,SAAS,CACV,CAAC,CAAC,CAAC,CAAC;AACP,CAAC;AAEK,SAAU,SAAS,CACvB,SAAyB,EACzB,OAAoB;IAEpB,MAAM,MAAM,GAAG,kTAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC;QAC9D,SAAS,EAAE,SAAS;QACpB,KAAK,EAAE,kTAAI,CAAC,SAAS,CAAC,OAAO;QAC7B,UAAU,EAAE,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;KACvC,CAAC,CAAC,CAAC,CAAC,CAAC;IACN,OAAO,MAAM,CAAC;AAChB,CAAC"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/utils/cache.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/utils/cache.ts"],"sourcesContent":["import TTLCache from '@isaacs/ttlcache';\n\n/**\n *  Cache for gateway ping responses.\n *\n *  A value of true means that the gateway is healthy.\n */\nexport const GATEWAY_PING_CACHE = new TTLCache<string, boolean>({\n  ttl: 1000 * 60,\n});\n"],"names":[],"mappings":";;;;AAAA,OAAO,QAAQ,MAAM,kBAAkB,CAAC;;AAOjC,MAAM,kBAAkB,GAAG,IAAI,wOAAQ,CAAkB;IAC9D,GAAG,EAAE,IAAI,GAAG,EAAE;CACf,CAAC,CAAC"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/oracle-interfaces/gateway.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/oracle-interfaces/gateway.ts"],"sourcesContent":["import type { FeedRequest } from './../accounts/pullFeed.js';\nimport { GATEWAY_PING_CACHE } from './../utils/cache.js';\n\nimport type { web3 } from '@coral-xyz/anchor-30';\nimport type { Program } from '@coral-xyz/anchor-30';\nimport type { IOracleJob } from '@switchboard-xyz/common';\nimport { OracleJobUtils } from '@switchboard-xyz/common';\nimport type { AxiosInstance } from 'axios';\nimport axios from 'axios';\nimport bs58 from 'bs58';\n\n// const httpsAgent = new HttpsAgent({\n//   rejectUnauthorized: false, // WARNING: This disables SSL/TLS certificate verification.\n// });\nconst TIMEOUT = 10_000;\n\nconst axiosClient: () => AxiosInstance = (() => {\n  let instance: AxiosInstance;\n  return () => (instance ??= axios.create());\n})();\n\n/**\n *  The response from the gateway after fetching signatures.\n *  Variables are snake_case for serialization.\n */\nexport type FeedEvalResponse = {\n  /**\n   *  Hex encoded oracle pubkey\n   */\n  oracle_pubkey: string;\n  /**\n   *  Hex encoded queue pubkey\n   */\n  queue_pubkey: string;\n  /**\n   *  Hex encoded oracle signing pubkey\n   */\n  oracle_signing_pubkey: string;\n  /**\n   *  Hex encoded feed id\n   */\n  feed_hash: string;\n  /**\n   *  Hex encoded blockhash/slothash the response was signed with.\n   */\n  recent_hash: string;\n  /**\n   *  Errors encountered while fetching feed value\n   */\n  failure_error: string;\n  /**\n   *  Feed values derived\n   */\n  success_value: string;\n  /**\n   *  Signed message of the result and blockhash\n   */\n  msg: string;\n  /**\n   *  Oracle signature of the result and blockhash\n   *\n   *  Sha256(success_feed_hashes || results || slothash)\n   */\n  signature: string;\n  recovery_id: number;\n\n  /**\n   *  If the feed fetch failed, get other recent successes\n   */\n  recent_successes_if_failed: Array<FeedEvalResponse>;\n\n  /**\n   * Timestamp marking when the result was fetched\n   */\n  timestamp?: number;\n};\n\nexport type FeedEvalManyResponse = {\n  feed_responses: FeedEvalResponse[];\n  signature: string;\n  recovery_id: number;\n  errors: string[];\n};\n\nexport type FetchSignaturesMultiResponse = {\n  oracle_responses: FeedEvalManyResponse[];\n  errors: string[];\n};\n\nexport type FeedEvalBatchResponse = {\n  feed_responses: FeedEvalResponse[];\n  errors: string[];\n};\n\nexport type FetchSignaturesBatchResponse = {\n  oracle_responses: FeedEvalBatchResponse[];\n  errors: string[];\n};\n\nexport type FetchSignaturesConsensusResponse = {\n  median_responses: { value: string; feed_hash: string }[];\n  oracle_responses: {\n    oracle_pubkey: string;\n    eth_address: string;\n    signature: string;\n    checksum: string;\n    recovery_id: number;\n    feed_responses: FeedEvalResponse[];\n    errors: string[];\n  }[];\n};\n\n/**\n *  The response from the gateway after revealing randomness.\n *  Variables are snake_case for serialization.\n */\nexport type RandomnessRevealResponse = {\n  /**\n   * Signature of the randomness using the oracle's enclave key\n   */\n  signature: string;\n  /**\n   * Recovery ID of the signature\n   */\n  recovery_id: number;\n  /**\n   * The randomness value\n   */\n  value: Array<number>;\n};\n\n/**\n * The response from the gateway after attesting an enclave.\n */\nexport type AttestEnclaveResponse = {\n  /**\n   * The guardian's public key\n   */\n  guardian: string;\n  /**\n   * The signature of the guardian\n   */\n  signature: string;\n  /**\n   * The recovery ID of the signature\n   */\n  recovery_id: number;\n};\n\n/**\n * The response from the ping endpoint.\n */\nexport type PingResponse = {\n  /**\n   * The oracle's public key\n   */\n  oracle_pubkey: string;\n\n  /**\n   * The oracle's authority pubkey\n   */\n  oracle_authority: string;\n\n  /**\n   * The oracle's queue pubkey\n   */\n  queue: string;\n\n  /**\n   * The registered rate limit for oracle\n   */\n  rate_limit: number;\n\n  /**\n   * The oracle's version\n   */\n  version: string;\n\n  /**\n   * The oracle's enclave measurement\n   */\n  mr_enclave: string;\n\n  /**\n   * Is the oracle a push oracle\n   */\n  is_push_oracle: boolean;\n\n  /**\n   * Is the oracle a pull oracle\n   */\n  is_pull_oracle: boolean;\n\n  /**\n   * Is the oracle a guardian\n   */\n  is_gateway: boolean;\n\n  /**\n   * Is the oracle a guardian\n   */\n  is_guardian: boolean;\n};\n\n/**\n * The Quote info from the gateway_fetch_quote endpoint\n */\nexport type FetchQuoteResponse = {\n  /**\n   * The oracle's pubkey\n   */\n  oracle_pubkey: string;\n\n  /**\n   * The oracle's queue pubkey\n   */\n  queue: string;\n\n  /**\n   * The current timestamp used for generating the checksum\n   */\n  now: number;\n\n  /**\n   * The oracle's enclave measurement\n   */\n  mr_enclave: string;\n\n  /**\n   * The oracle's ed25519 pubkey\n   */\n  ed25519_pubkey: string;\n\n  /**\n   * The oracle's secp256k1 pubkey\n   */\n  secp256k1_pubkey: string;\n\n  /**\n   * The base64 encoded quote\n   */\n  quote: string;\n};\n\nexport interface BridgeEnclaveResponse {\n  /**\n   * The guardian's public key\n   */\n  guardian: string;\n\n  /**\n   * The oracle's public key\n   */\n  oracle: string;\n\n  /**\n   * The queue (pubkey) that the oracle belongs to\n   */\n  queue: string;\n\n  /**\n   * The enclave measurement for the oracle\n   */\n  mr_enclave: string;\n\n  /**\n   * The chain hash read on the guardian\n   */\n  chain_hash: string;\n\n  /**\n   * The secp256k1 enclave signer for the oracle\n   */\n  oracle_secp256k1_enclave_signer: string;\n\n  /**\n   * The checksum of the attestation message\n   */\n  msg: string;\n\n  /**\n   * (UNUSED) The attestation message before being hashed\n   */\n  msg_prehash: string;\n\n  /**\n   * The ed25519 enclave signer for the oracle\n   */\n  oracle_ed25519_enclave_signer?: string;\n\n  /**\n   * The timestamp of the attestation\n   */\n  timestamp?: number;\n\n  /**\n   * The signature from the guardian\n   */\n  signature: string;\n  recovery_id: number;\n}\n\n/**\n *  `base64` encodes an array of oracle jobs. to send to a gateway\n */\nfunction encodeJobs(jobArray: IOracleJob[]): string[] {\n  return jobArray.map(job =>\n    OracleJobUtils.serializeOracleJob(job).toString('base64')\n  );\n}\n\n/**\n *  The gateway class is used to interface with the switchboard gateway REST API.\n */\nexport class Gateway {\n  /**\n   *  Constructs a `Gateway` instance.\n   *\n   *  @param program The Anchor program instance.\n   *  @param gatewayUrl The URL of the switchboard gateway.\n   */\n  constructor(\n    readonly program: Program,\n    readonly gatewayUrl: string,\n    readonly oracleKey?: web3.PublicKey\n  ) {}\n\n  /**\n   *  Fetches signatures from the gateway.\n   *\n   *  REST API endpoint: /api/v1/fetch_signatures\n   *\n   *  @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   *  @param encodedJobs The base64 encoded oracle jobs.\n   *  @param numSignatures The number of oracles to fetch signatures from.\n   *  @returns A promise that resolves to the feed evaluation responses.\n   *  @throws if the request fails.\n   */\n  async fetchSignaturesFromEncoded(params: {\n    recentHash?: string;\n    encodedJobs: string[];\n    numSignatures: number;\n    maxVariance: number;\n    minResponses: number;\n    useTimestamp?: boolean;\n  }): Promise<{ responses: FeedEvalResponse[]; failures: string[] }> {\n    // TODO: have total NumOracles count against rate limit per IP\n    const { recentHash, encodedJobs, numSignatures } = params;\n    const url = `${this.gatewayUrl}/gateway/api/v1/fetch_signatures`;\n    const headers = { 'Content-Type': 'application/json' };\n    const maxVariance = params.maxVariance * 1e9;\n    const body = JSON.stringify({\n      api_version: '1.0.0',\n      jobs_b64_encoded: encodedJobs,\n      recent_chainhash: recentHash ?? bs58.encode(Buffer.alloc(32, 0)),\n      signature_scheme: 'Secp256k1',\n      hash_scheme: 'Sha256',\n      num_oracles: numSignatures,\n      max_variance: maxVariance,\n      min_responses: params.minResponses,\n      use_timestamp: params.useTimestamp ?? false,\n    });\n    return axiosClient()\n      .post(url, body, {\n        headers,\n        timeout: TIMEOUT,\n      })\n      .then(r => r.data);\n  }\n\n  async ping(): Promise<PingResponse> {\n    const url = `${this.gatewayUrl}/gateway/api/v1/ping`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = JSON.stringify({ api_version: '1.0.0' });\n    return axiosClient()\n      .post(url, body, { method, headers, timeout: TIMEOUT })\n      .then(r => r.data);\n  }\n\n  /**\n   *\n   * Fetches signatures from the gateway.\n   * REST API endpoint: /api/v1/gateway_attest_enclave\n   * @param timestamp The timestamp of the attestation\n   * @param quote The quote of the attestation\n   * @param oracle_pubkey The oracle's public key\n   * @param oracle_reward_wallet The oracle's reward wallet\n   * @param oracle_ed25519_enclave_signer The oracle's ed25519 enclave signer\n   * @param oracle_secp256k1_enclave_signer The oracle's secp256k1 enclave signer\n   * @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   * @returns A promise that resolves to the attestation response.\n   * @throws if the request fails.\n   */\n  async fetchAttestation(params: {\n    timestamp: number;\n    quote: string;\n    oracle_pubkey: string;\n    oracle_reward_wallet: string;\n    oracle_ed25519_enclave_signer: string;\n    oracle_secp256k1_enclave_signer: string;\n    recentHash: string;\n  }): Promise<AttestEnclaveResponse> {\n    const url = `${this.gatewayUrl}/gateway/api/v1/gateway_attest_enclave`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = JSON.stringify({\n      api_version: '1.0.0',\n      timestamp: params.timestamp,\n      quote: params.quote,\n      oracle_pubkey: params.oracle_pubkey,\n      oracle_reward_wallet: params.oracle_reward_wallet,\n      oracle_ed25519_enclave_signer: params.oracle_ed25519_enclave_signer,\n      oracle_secp256k1_enclave_signer: params.oracle_secp256k1_enclave_signer,\n      chain_hash: params.recentHash,\n    });\n\n    return axiosClient()\n      .post(url, { method, headers, data: body, timeout: TIMEOUT })\n      .then(r => r.data);\n  }\n\n  /**\n   * Fetches a quote from the gateway.\n   *\n   * REST API endpoint: /api/v1/gateway_fetch_quote\n   *\n   *\n   * @param blockhash The blockhash to fetch the quote for.\n   * @param get_for_oracle Whether to fetch the quote for the oracle.\n   * @param get_for_guardian Whether to fetch the quote for the guardian.\n   * @returns A promise that resolves to the quote response.\n   * @throws if the request fails.\n   */\n  async fetchQuote(params: {\n    blockhash: string;\n    get_for_oracle: boolean;\n    get_for_guardian: boolean;\n  }): Promise<FetchQuoteResponse[]> {\n    const url = `${this.endpoint()}/gateway/api/v1/gateway_fetch_quote`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = JSON.stringify({\n      api_version: '1.0.0',\n      blockhash: params.blockhash,\n      get_for_oracle: params.get_for_oracle,\n      get_for_guardian: params.get_for_guardian,\n    });\n    return axiosClient()\n      .post(url, { method, headers, data: body, timeout: TIMEOUT })\n      .then(r => r.data);\n  }\n\n  // alberthermida@Switchboard ts % curl -X POST \\\n  // -H \"Content-Type: application/json\" \\\n  // -d '{\n  //   \"api_version\": \"1.0.0\",\n  //   \"blockhash\": \"0000000000000000000000000000000000000000000000000000000000000000\",\n  //   \"get_for_oracle\": true,\n  //   \"get_for_guardian\": false\n  // }' \\\n  // https://vu-ams-02.switchboard-oracles.xyz/gateway/api/v1/gateway_fetch_quote\n\n  /**\n   *  Fetches signatures from the gateway.\n   *\n   *  REST API endpoint: /api/v1/fetch_signatures\n   *\n   *  @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   *  @param jobs The oracle jobs to perform.\n   *  @param numSignatures The number of oracles to fetch signatures from.\n   *  @param maxVariance The maximum variance allowed in the feed values.\n   *  @param minResponses The minimum number of responses of jobs to succeed.\n   *  @param useTimestamp Whether to use the timestamp in the response & to encode update signature.\n   *  @returns A promise that resolves to the feed evaluation responses.\n   *  @throws if the request fails.\n   */\n  async fetchSignatures(params: {\n    recentHash?: string;\n    jobs: IOracleJob[];\n    numSignatures?: number;\n    maxVariance?: number;\n    minResponses?: number;\n    useTimestamp?: boolean;\n  }): Promise<{ responses: FeedEvalResponse[]; failures: string[] }> {\n    params.numSignatures = params.numSignatures ?? 1;\n    params.maxVariance = params.maxVariance ?? 1;\n    params.minResponses = params.minResponses ?? 1;\n    const {\n      recentHash,\n      jobs,\n      numSignatures,\n      maxVariance,\n      minResponses,\n      useTimestamp,\n    } = params;\n    const encodedJobs = encodeJobs(jobs);\n    const res = await this.fetchSignaturesFromEncoded({\n      recentHash,\n      encodedJobs,\n      numSignatures,\n      maxVariance,\n      minResponses,\n      useTimestamp,\n    });\n    return res;\n  }\n\n  async fetchSignaturesMulti(params: {\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    numSignatures?: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesMultiResponse> {\n    const { recentHash, feedConfigs, useTimestamp, numSignatures } = params;\n    const encodedConfigs = feedConfigs.map(config => ({\n      encodedJobs: encodeJobs(config.jobs),\n      maxVariance: config.maxVariance ?? 1,\n      minResponses: config.minResponses ?? 1,\n    }));\n    const res = await this.fetchSignaturesFromEncodedMulti({\n      recentHash,\n      encodedConfigs,\n      numSignatures: numSignatures ?? 1,\n      useTimestamp,\n    });\n    return res;\n  }\n\n  async fetchSignaturesFromEncodedMulti(params: {\n    recentHash?: string;\n    encodedConfigs: {\n      encodedJobs: string[];\n      maxVariance: number;\n      minResponses: number;\n    }[];\n    numSignatures: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesMultiResponse> {\n    // TODO: have total NumOracles count against rate limit per IP\n    const { recentHash, encodedConfigs, numSignatures } = params;\n    if (numSignatures <= 0) {\n      throw new Error('numSignatures must be greater than 0');\n    }\n\n    const url = `${this.gatewayUrl}/gateway/api/v1/fetch_signatures_multi`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = {\n      api_version: '1.0.0',\n      num_oracles: numSignatures,\n      recent_hash: recentHash ?? bs58.encode(Buffer.alloc(32, 0)),\n      signature_scheme: 'Secp256k1',\n      hash_scheme: 'Sha256',\n      feed_requests: encodedConfigs.map(config => ({\n        jobs_b64_encoded: config.encodedJobs,\n        max_variance: Math.floor(Number(config.maxVariance ?? 1) * 1e9),\n        min_responses: config.minResponses ?? 1,\n        use_timestamp: params.useTimestamp ?? false,\n      })),\n    };\n    const data = JSON.stringify(body);\n    try {\n      const resp = await axiosClient()(url, { method, headers, data });\n      return resp.data;\n    } catch (err) {\n      console.error('fetchSignaturesFromEncodedMulti error', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Fetches signatures from the gateway without pre-encoded jobs\n   * REST API endpoint: /api/v1/fetch_signatures_batch\n   *\n   * @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   * @param feedConfigs The feed configurations to fetch signatures for.\n   * @param numSignatures The number of oracles to fetch signatures from.\n   * @param useTimestamp Whether to use the timestamp in the response & to encode update signature.\n   * @returns A promise that resolves to the feed evaluation responses.\n   * @throws if the request fails.\n   */\n  async fetchSignaturesBatch(params: {\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    numSignatures?: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesBatchResponse> {\n    const { recentHash, feedConfigs, useTimestamp, numSignatures } = params;\n    const encodedConfigs = feedConfigs.map(config => {\n      const encodedJobs = encodeJobs(config.jobs);\n      return {\n        encodedJobs,\n        maxVariance: config.maxVariance ?? 1,\n        minResponses: config.minResponses ?? 1,\n      };\n    });\n    const res = await this.fetchSignaturesFromEncodedBatch({\n      recentHash,\n      encodedConfigs,\n      numSignatures: numSignatures ?? 1,\n      useTimestamp,\n    });\n    return res;\n  }\n\n  /**\n   * Fetches signatures from the gateway.\n   * REST API endpoint: /api/v1/fetch_signatures_batch\n   *\n   * @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   * @param encodedConfigs The encoded feed configurations to fetch signatures for.\n   * @param numSignatures The number of oracles to fetch signatures from.\n   * @param useTimestamp Whether to use the timestamp in the response & to encode update signature.\n   * @returns A promise that resolves to the feed evaluation responses.\n   * @throws if the request fails.\n   */\n  async fetchSignaturesFromEncodedBatch(params: {\n    recentHash?: string;\n    encodedConfigs: {\n      encodedJobs: string[];\n      maxVariance: number;\n      minResponses: number;\n    }[];\n    numSignatures: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesBatchResponse> {\n    type BatchFeedRequests = {\n      jobs_b64_encoded: string[];\n      max_variance: number;\n      min_responses: number;\n      use_timestamp: boolean;\n    }[];\n\n    const { recentHash, encodedConfigs, numSignatures } = params;\n    const url = `${this.gatewayUrl}/gateway/api/v1/fetch_signatures_batch`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = {\n      api_version: '1.0.0',\n      num_oracles: numSignatures,\n      recent_hash: recentHash ?? bs58.encode(Buffer.alloc(32, 0)),\n      signature_scheme: 'Secp256k1',\n      hash_scheme: 'Sha256',\n      feed_requests: [] as BatchFeedRequests,\n    };\n    for (const config of encodedConfigs) {\n      const maxVariance = Math.floor(Number(config.maxVariance ?? 1) * 1e9);\n      body.feed_requests.push({\n        jobs_b64_encoded: config.encodedJobs,\n        max_variance: maxVariance,\n        min_responses: config.minResponses ?? 1,\n        use_timestamp: params.useTimestamp ?? false,\n      });\n    }\n    const data = JSON.stringify(body);\n\n    // get size of data\n    try {\n      const resp = await axiosClient()(url, { method, headers, data });\n      return resp.data;\n    } catch (err) {\n      console.error('fetchSignaturesFromEncodedBatch error', err);\n      throw err;\n    }\n  }\n\n  async fetchSignaturesConsensus(params: {\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    useTimestamp?: boolean;\n    numSignatures?: number;\n  }): Promise<FetchSignaturesConsensusResponse> {\n    const { recentHash, feedConfigs } = params;\n\n    const feedRequests = feedConfigs.map(config => ({\n      jobs_b64_encoded: encodeJobs(config.jobs),\n      max_variance: Math.floor(Number(config.maxVariance ?? 1) * 1e9),\n      min_responses: config.minResponses ?? 1,\n    }));\n\n    const url = `${this.gatewayUrl}/gateway/api/v1/fetch_signatures_consensus`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const data = JSON.stringify({\n      api_version: '1.0.0',\n      recent_hash: recentHash ?? bs58.encode(Buffer.alloc(32, 0)),\n      signature_scheme: 'Secp256k1',\n      hash_scheme: 'Sha256',\n      feed_requests: feedRequests,\n      num_oracles: params.numSignatures ?? 1,\n    });\n\n    try {\n      const resp = await axiosClient()(url, { method, headers, data });\n      return resp.data;\n    } catch (err) {\n      console.error('fetchSignaturesConsensus error', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Sends a request to the gateway bridge enclave.\n   *\n   * REST API endpoint: /api/v1/gateway_bridge_enclave\n   *\n   * @param chainHash The chain hash to include in the request.\n   * @param oraclePubkey The public key of the oracle.\n   * @param queuePubkey The public key of the queue.\n   * @returns A promise that resolves to the response.\n   * @throws if the request fails.\n   */\n  async fetchBridgingMessage(params: {\n    chainHash: string;\n    oraclePubkey: string;\n    queuePubkey: string;\n  }): Promise<BridgeEnclaveResponse> {\n    const url = `${this.gatewayUrl}/gateway/api/v1/gateway_bridge_enclave`;\n    const method = 'POST';\n    const headers = { 'Content-Type': 'application/json' };\n    const body = {\n      api_version: '1.0.0',\n      chain_hash: params.chainHash,\n      oracle_pubkey: params.oraclePubkey,\n      queue_pubkey: params.queuePubkey,\n    };\n    const data = JSON.stringify(body);\n    const resp = await axiosClient()(url, { method, headers, data });\n    return resp.data;\n  }\n\n  /**\n   * Fetches the randomness reveal from the gateway.\n   * @param params The parameters for the randomness reveal.\n   * @returns The randomness reveal response.\n   */\n  async fetchRandomnessReveal(\n    params:\n      | {\n          randomnessAccount: web3.PublicKey;\n          slothash: string;\n          slot: number;\n          rpc?: string;\n        }\n      | {\n          randomnessId: string;\n          timestamp: number;\n          minStalenessSeconds: number;\n        }\n  ): Promise<RandomnessRevealResponse> {\n    const url = `${this.gatewayUrl}/gateway/api/v1/randomness_reveal`;\n    const method = 'POST';\n    const responseType = 'text';\n    const headers = { 'Content-Type': 'application/json' };\n\n    // Handle Solana and Cross-Chain Randomness\n    let data: string;\n    if ('slot' in params) {\n      // Solana Randomness\n      data = JSON.stringify({\n        slothash: [...bs58.decode(params.slothash)],\n        randomness_key: params.randomnessAccount.toBuffer().toString('hex'),\n        slot: params.slot,\n        rpc: params.rpc,\n      });\n    } else {\n      // Cross-chain randomness\n      data = JSON.stringify({\n        timestamp: params.timestamp,\n        min_staleness_seconds: params.minStalenessSeconds,\n        randomness_key: params.randomnessId,\n      });\n    }\n    try {\n      const txtResponse = await axiosClient()(url, {\n        method,\n        headers,\n        data,\n        responseType,\n      });\n      return JSON.parse(txtResponse.data);\n    } catch (err) {\n      console.error('fetchRandomnessReveal error', err);\n      throw err;\n    }\n  }\n\n  async test(): Promise<boolean> {\n    const url = `${this.gatewayUrl}/gateway/api/v1/test`;\n    const cachedResponse = GATEWAY_PING_CACHE.get(this.gatewayUrl);\n    if (cachedResponse !== undefined) return cachedResponse;\n\n    try {\n      const txt = await axiosClient()(url);\n      if (txt.data.length !== 0) {\n        GATEWAY_PING_CACHE.set(this.gatewayUrl, true);\n        return true;\n      }\n    } catch {} // eslint-disable-line no-empty\n    GATEWAY_PING_CACHE.set(this.gatewayUrl, false);\n    return false;\n  }\n\n  endpoint(): string {\n    return this.gatewayUrl;\n  }\n\n  toString(): string {\n    return JSON.stringify({\n      gatewayUrl: this.gatewayUrl,\n      programId: this.program.programId.toBase58(),\n    });\n  }\n\n  [Symbol.toPrimitive](hint: string) {\n    return hint === 'string' ? `Gateway: ${this.toString()}` : null;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/permission.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/permission.ts"],"sourcesContent":["import { getNodePayer } from '../utils/index.js';\n\nimport type { Program, web3 } from '@coral-xyz/anchor-30';\n\nexport enum SwitchboardPermission {\n  PermitOracleHeartbeat = 1 << 0,\n  PermitOracleQueueUsage = 1 << 1,\n}\n\n/**\n *  Abstraction around the Switchboard-On-Demand Permission meta-account\n */\nexport class Permission {\n  /**\n   *  Set the permission for a given granter and grantee.\n   *\n   *  @param program - The program that owns the permission account.\n   *  @param params - The parameters for setting the permission.\n   *  @returns A promise that resolves to the transaction instruction.\n   */\n  static async setIx(\n    program: Program,\n    params: {\n      authority: web3.PublicKey;\n      granter: web3.PublicKey;\n      grantee: web3.PublicKey;\n      enable?: boolean;\n      permission: SwitchboardPermission;\n    }\n  ): Promise<web3.TransactionInstruction> {\n    const payer = getNodePayer(program);\n    const ix = await program.instruction.permissionSet(\n      {\n        enable: params.enable ?? false,\n        permission: params.permission,\n      },\n      {\n        accounts: {\n          granter: params.granter,\n          authority: params.authority,\n        },\n        remainingAccounts: [\n          { pubkey: params.grantee, isSigner: false, isWritable: true },\n        ],\n        signers: [payer],\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Disable object instantiation.\n   */\n  private constructor() {}\n}\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIjD,IAAY,qBAGX;AAHD,CAAA,SAAY,qBAAqB;IAC/B,qBAAA,CAAA,qBAAA,CAAA,wBAAA,GAAA,EAAA,GAAA,uBAA8B,CAAA;IAC9B,qBAAA,CAAA,qBAAA,CAAA,yBAAA,GAAA,EAAA,GAAA,wBAA+B,CAAA;AACjC,CAAC,EAHW,qBAAqB,IAAA,CAArB,qBAAqB,GAAA,CAAA,CAAA,GAGhC;AAKK,MAAO,UAAU;IACrB;;;;;;OAMG,CACH,MAAM,CAAO,KAAK,CAChB,OAAgB,EAChB,MAMC,EAAA;;;YAED,MAAM,KAAK,GAAG,YAAY,0WAAC,OAAO,CAAC,CAAC;YACpC,MAAM,EAAE,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,aAAa,CAChD;gBACE,MAAM,EAAE,CAAA,KAAA,MAAM,CAAC,MAAM,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,KAAK;gBAC9B,UAAU,EAAE,MAAM,CAAC,UAAU;aAC9B,EACD;gBACE,QAAQ,EAAE;oBACR,OAAO,EAAE,MAAM,CAAC,OAAO;oBACvB,SAAS,EAAE,MAAM,CAAC,SAAS;iBAC5B;gBACD,iBAAiB,EAAE;oBACjB;wBAAE,MAAM,EAAE,MAAM,CAAC,OAAO;wBAAE,QAAQ,EAAE,KAAK;wBAAE,UAAU,EAAE,IAAI;oBAAA,CAAE;iBAC9D;gBACD,OAAO,EAAE;oBAAC,KAAK;iBAAC;aACjB,CACF,CAAC;YACF,OAAO,EAAE,CAAC;QACZ,CAAC;KAAA;IAED;;OAEG,CACH,aAAA,CAAuB,CAAC;CACzB"}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/queue.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/queue.ts"],"sourcesContent":["import {\n  SOL_NATIVE_MINT,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\nimport type {\n  FeedEvalResponse,\n  FetchSignaturesBatchResponse,\n  FetchSignaturesConsensusResponse,\n  FetchSignaturesMultiResponse,\n} from '../oracle-interfaces/gateway.js';\nimport { Gateway } from '../oracle-interfaces/gateway.js';\nimport { getAssociatedTokenAddress, getNodePayer } from '../utils/index.js';\nimport { getLutKey, getLutSigner } from '../utils/lookupTable.js';\n\nimport { Oracle, OracleAccountData } from './oracle.js';\nimport type { SwitchboardPermission } from './permission.js';\nimport { Permission } from './permission.js';\nimport type { FeedRequest } from './pullFeed.js';\nimport { State } from './state.js';\n\nimport type { Program } from '@coral-xyz/anchor-30';\nimport { BN, web3 } from '@coral-xyz/anchor-30';\nimport { AsyncUtils, type IOracleJob, toUtf8 } from '@switchboard-xyz/common';\nimport { Buffer } from 'buffer';\n\nexport interface QueueAccountData {\n  authority: web3.PublicKey;\n  mrEnclaves: Uint8Array[];\n  oracleKeys: web3.PublicKey[];\n  maxQuoteVerificationAge: BN;\n  lastHeartbeat: BN;\n  nodeTimeout: BN;\n  oracleMinStake: BN;\n  allowAuthorityOverrideAfter: BN;\n  mrEnclavesLen: number;\n  oracleKeysLen: number;\n  reward: number;\n  currIdx: number;\n  gcIdx: number;\n  requireAuthorityHeartbeatPermission: boolean;\n  requireAuthorityVerifyPermission: boolean;\n  requireUsagePermissions: boolean;\n  signerBump: number;\n  mint: web3.PublicKey;\n  lutSlot: BN;\n  allowSubsidies: boolean;\n  ncn: web3.PublicKey;\n}\n\n/**\n *  Abstraction around the Switchboard-On-Demand Queue account\n *\n *  This account is used to store the queue data for a given feed.\n */\nexport class Queue {\n  static async createIx(\n    program: Program,\n    params: {\n      allowAuthorityOverrideAfter?: number;\n      requireAuthorityHeartbeatPermission?: boolean;\n      requireUsagePermission?: boolean;\n      maxQuoteVerificationAge?: number;\n      reward?: number;\n      nodeTimeout?: number;\n      lutSlot?: number;\n    }\n  ): Promise<[Queue, web3.Keypair, web3.TransactionInstruction]> {\n    const queue = web3.Keypair.generate();\n    const allowAuthorityOverrideAfter =\n      params.allowAuthorityOverrideAfter ?? 60 * 60;\n    const requireAuthorityHeartbeatPermission =\n      params.requireAuthorityHeartbeatPermission ?? true;\n    const requireUsagePermission = params.requireUsagePermission ?? false;\n    const maxQuoteVerificationAge =\n      params.maxQuoteVerificationAge ?? 60 * 60 * 24 * 7;\n    const reward = params.reward ?? 1000000;\n    const nodeTimeout = params.nodeTimeout ?? 300;\n    const payer = getNodePayer(program);\n    // Prepare accounts for the transaction\n    const lutSigner = getLutSigner(program.programId, queue.publicKey);\n    const recentSlot =\n      params.lutSlot ??\n      (await program.provider.connection.getSlot('finalized'));\n    const lutKey = getLutKey(lutSigner, recentSlot);\n\n    const ix = await program.instruction.queueInit(\n      {\n        allowAuthorityOverrideAfter,\n        requireAuthorityHeartbeatPermission,\n        requireUsagePermission,\n        maxQuoteVerificationAge,\n        reward,\n        nodeTimeout,\n        recentSlot: new BN(recentSlot),\n      },\n      {\n        accounts: {\n          queue: queue.publicKey,\n          queueEscrow: await getAssociatedTokenAddress(\n            SOL_NATIVE_MINT,\n            queue.publicKey\n          ),\n          authority: payer.publicKey,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          nativeMint: SOL_NATIVE_MINT,\n          programState: State.keyFromSeed(program),\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n        },\n        signers: [payer, queue],\n      }\n    );\n    return [new Queue(program, queue.publicKey), queue, ix];\n  }\n\n  /**\n   * Creates a new instance of the `Queue` account with a PDA for SVM (non-solana) chains.\n   * @param program The anchor program instance.\n   * @param params The initialization parameters for the queue.\n   * @returns\n   */\n  static async createIxSVM(\n    program: Program,\n    params: {\n      sourceQueueKey: web3.PublicKey;\n      allowAuthorityOverrideAfter?: number;\n      requireAuthorityHeartbeatPermission?: boolean;\n      requireUsagePermission?: boolean;\n      maxQuoteVerificationAge?: number;\n      reward?: number;\n      nodeTimeout?: number;\n      lutSlot?: number;\n    }\n  ): Promise<[Queue, web3.TransactionInstruction]> {\n    // Generate the queue PDA for the given source queue key\n    const [queue] = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('Queue'), params.sourceQueueKey.toBuffer()],\n      program.programId\n    );\n    const allowAuthorityOverrideAfter =\n      params.allowAuthorityOverrideAfter ?? 60 * 60;\n    const requireAuthorityHeartbeatPermission =\n      params.requireAuthorityHeartbeatPermission ?? true;\n    const requireUsagePermission = params.requireUsagePermission ?? false;\n    const maxQuoteVerificationAge =\n      params.maxQuoteVerificationAge ?? 60 * 60 * 24 * 7;\n    const reward = params.reward ?? 1000000;\n    const nodeTimeout = params.nodeTimeout ?? 300;\n    const payer = getNodePayer(program);\n    // Prepare accounts for the transaction\n    const lutSigner = getLutSigner(program.programId, queue);\n    const recentSlot =\n      params.lutSlot ??\n      (await program.provider.connection.getSlot('finalized'));\n    const lutKey = getLutKey(lutSigner, recentSlot);\n\n    const ix = program.instruction.queueInitSvm(\n      {\n        allowAuthorityOverrideAfter,\n        requireAuthorityHeartbeatPermission,\n        requireUsagePermission,\n        maxQuoteVerificationAge,\n        reward,\n        nodeTimeout,\n        recentSlot: new BN(recentSlot),\n        sourceQueueKey: params.sourceQueueKey,\n      },\n      {\n        accounts: {\n          queue: queue,\n          queueEscrow: await getAssociatedTokenAddress(\n            SOL_NATIVE_MINT,\n            queue,\n            true\n          ),\n          authority: payer.publicKey,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          nativeMint: SOL_NATIVE_MINT,\n          programState: State.keyFromSeed(program),\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n        },\n        signers: [payer],\n      }\n    );\n    return [new Queue(program, queue), ix];\n  }\n\n  /**\n   * Add an Oracle to a queue and set permissions\n   * @param program\n   * @param params\n   */\n  async overrideSVM(params: {\n    oracle: web3.PublicKey;\n    secp256k1Signer: Buffer;\n    maxQuoteVerificationAge: number;\n    mrEnclave: Buffer;\n    slot: number;\n  }) {\n    const stateKey = State.keyFromSeed(this.program);\n    const { authority } = await this.loadData();\n\n    const ix = this.program.instruction.queueOverrideSvm(\n      {\n        secp256K1Signer: Array.from(params.secp256k1Signer),\n        maxQuoteVerificationAge: new BN(params.maxQuoteVerificationAge),\n        mrEnclave: params.mrEnclave,\n        slot: new BN(params.slot),\n      },\n      {\n        accounts: {\n          queue: this.pubkey,\n          oracle: params.oracle,\n          authority,\n          state: stateKey,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Fetches signatures from a random gateway on the queue.\n   *\n   *  REST API endpoint: /api/v1/fetch_signatures\n   *\n   *  @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   *  @param jobs The oracle jobs to perform.\n   *  @param numSignatures The number of oracles to fetch signatures from.\n   *  @returns A promise that resolves to the feed evaluation responses.\n   *  @throws if the request fails.\n   */\n  static async fetchSignatures(\n    program: Program,\n    params: {\n      gateway?: string;\n      queue: web3.PublicKey;\n      recentHash?: string;\n      jobs: IOracleJob[];\n      numSignatures?: number;\n      maxVariance?: number;\n      minResponses?: number;\n    }\n  ): Promise<{ responses: FeedEvalResponse[]; failures: string[] }> {\n    const queueAccount = new Queue(program, params.queue);\n    return queueAccount.fetchSignatures(params);\n  }\n\n  static async fetchSignaturesMulti(\n    program: Program,\n    params: {\n      gateway?: string;\n      queue: web3.PublicKey;\n      recentHash?: string;\n      feedConfigs: FeedRequest[];\n      minResponses?: number;\n    }\n  ): Promise<FetchSignaturesMultiResponse> {\n    const queueAccount = new Queue(program, params.queue!);\n    return queueAccount.fetchSignaturesMulti(params);\n  }\n\n  static async fetchSignaturesBatch(\n    program: Program,\n    params: {\n      gateway?: string;\n      queue: web3.PublicKey;\n      recentHash?: string;\n      feedConfigs: FeedRequest[];\n      minResponses?: number;\n    }\n  ): Promise<FetchSignaturesBatchResponse> {\n    const queueAccount = new Queue(program, params.queue!);\n    return queueAccount.fetchSignaturesBatch(params);\n  }\n\n  static async fetchSignaturesConsensus(\n    program: Program,\n    params: {\n      gateway?: string;\n      queue: web3.PublicKey;\n      recentHash?: string;\n      feedConfigs: FeedRequest[];\n      useTimestamp?: boolean;\n      numSignatures?: number;\n    }\n  ): Promise<FetchSignaturesConsensusResponse> {\n    const queueAccount = new Queue(program, params.queue!);\n    return queueAccount.fetchSignaturesConsensus({\n      gateway: params.gateway,\n      recentHash: params.recentHash,\n      feedConfigs: params.feedConfigs,\n      useTimestamp: params.useTimestamp,\n      numSignatures: params.numSignatures,\n    });\n  }\n\n  /**\n   * @deprecated\n   * Deprecated. Use {@linkcode @switchboard-xyz/common#FeedHash.compute} instead.\n   */\n  static async fetchFeedHash(\n    program: Program,\n    params: {\n      gateway?: string;\n      queue: web3.PublicKey;\n      recentHash?: string;\n      jobs: IOracleJob[];\n      numSignatures?: number;\n      maxVariance?: number;\n      minResponses?: number;\n    }\n  ): Promise<Buffer> {\n    const queueAccount = new Queue(program, params.queue);\n    const oracleSigs = await queueAccount.fetchSignatures(params);\n    return Buffer.from(oracleSigs[0].feed_hash, 'hex');\n  }\n\n  /**\n   *  Constructs a `OnDemandQueue` instance.\n   *\n   *  @param program The Anchor program instance.\n   *  @param pubkey The public key of the queue account.\n   */\n  constructor(\n    readonly program: Program,\n    readonly pubkey: web3.PublicKey\n  ) {\n    if (this.pubkey === undefined) {\n      throw new Error('NoPubkeyProvided');\n    }\n  }\n\n  /**\n   *  Loads the queue data from on chain and returns the listed oracle keys.\n   *\n   *  @returns A promise that resolves to an array of oracle public keys.\n   */\n  async fetchOracleKeys(): Promise<web3.PublicKey[]> {\n    const data = await this.loadData();\n    const oracles = data.oracleKeys.slice(0, data.oracleKeysLen);\n    return oracles;\n  }\n\n  /**\n   *  Loads the queue data from on chain and returns the listed gateways.\n   *\n   *  @returns A promise that resolves to an array of gateway URIs.\n   */\n  async fetchAllGateways(): Promise<Gateway[]> {\n    const program = this.program;\n    const oracles = await this.fetchOracleKeys();\n    const oracleAccounts = await Oracle.loadMany(program, oracles);\n    const gatewayUris = oracleAccounts\n      .map(oracleAccount =>\n        oracleAccount ? toUtf8(oracleAccount.gatewayUri) : ''\n      )\n      .filter(gatewayUri => gatewayUri.length > 0)\n      .filter(gatewayUri => !gatewayUri.includes('infstones'));\n\n    const tests: { gateway: Gateway; promise: Promise<boolean> }[] = [];\n    for (const i in gatewayUris) {\n      const gw = new Gateway(program, gatewayUris[i], oracles[i]);\n      tests.push({ gateway: gw, promise: gw.test() });\n    }\n\n    let gateways: Gateway[] = [];\n    for (const test of tests) {\n      try {\n        const { gateway, promise } = test;\n        // Test gateways to see if they are good. Timeout after 2 seconds.\n        const isGood = await AsyncUtils.promiseWithTimeout(2000, promise);\n        if (!isGood) continue;\n\n        // If the gateway is good, add it to the list\n        gateways.push(gateway);\n      } catch (e) {\n        console.log('Timeout', e);\n      }\n    }\n    gateways = gateways.sort(() => Math.random() - 0.5);\n    return gateways as Gateway[];\n  }\n\n  /**\n   * Fetches a gateway interface for interacting with oracle nodes.\n   *\n   * @param gatewayUrl - Optional URL of a specific gateway to use. If not provided,\n   *                     a random gateway will be selected from the queue's available gateways.\n   * @returns Gateway - A Gateway instance for making oracle requests\n   * @throws {Error} If no gateways are available on the queue when selecting randomly\n   */\n  async fetchGateway(gatewayUrl?: string): Promise<Gateway> {\n    if (gatewayUrl) return new Gateway(this.program, gatewayUrl);\n\n    const gateways = await this.fetchAllGateways();\n    if (gateways.length === 0) throw new Error('NoGatewayAvailable');\n    return gateways[Math.floor(Math.random() * gateways.length)];\n  }\n\n  /**\n   *  Fetches signatures from a random gateway on the queue.\n   *\n   *  REST API endpoint: /api/v1/fetch_signatures\n   *\n   *  @param gateway The gateway to fetch signatures from. If not provided, a gateway will be automatically selected.\n   *  @param recentHash The chain metadata to sign with. Blockhash or slothash.\n   *  @param jobs The oracle jobs to perform.\n   *  @param numSignatures The number of oracles to fetch signatures from.\n   *  @param maxVariance The maximum variance allowed in the responses.\n   *  @param minResponses The minimum number of responses to attempt to fetch.\n   *  @returns A promise that resolves to the feed evaluation responses.\n   *  @throws if the request fails.\n   */\n  async fetchSignatures(params: {\n    gateway?: string;\n    recentHash?: string;\n    jobs: IOracleJob[];\n    numSignatures?: number;\n    maxVariance?: number;\n    minResponses?: number;\n    useTimestamp?: boolean;\n  }): Promise<{ responses: FeedEvalResponse[]; failures: string[] }> {\n    const gateway = await this.fetchGateway(params.gateway);\n    return await gateway.fetchSignatures({\n      recentHash: params.recentHash,\n      jobs: params.jobs,\n      numSignatures: params.numSignatures,\n      maxVariance: params.maxVariance,\n      minResponses: params.minResponses,\n      useTimestamp: params.useTimestamp,\n    });\n  }\n\n  async fetchSignaturesMulti(params: {\n    gateway?: string;\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    numSignatures?: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesMultiResponse> {\n    const gateway = await this.fetchGateway(params.gateway);\n    return await gateway.fetchSignaturesMulti({\n      recentHash: params.recentHash,\n      feedConfigs: params.feedConfigs,\n      numSignatures: params.numSignatures,\n      useTimestamp: params.useTimestamp,\n    });\n  }\n\n  async fetchSignaturesConsensus(params: {\n    gateway?: string;\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    useTimestamp?: boolean;\n    numSignatures?: number;\n  }): Promise<FetchSignaturesConsensusResponse> {\n    const gateway = await this.fetchGateway(params.gateway);\n    return await gateway.fetchSignaturesConsensus({\n      recentHash: params.recentHash,\n      feedConfigs: params.feedConfigs,\n      useTimestamp: params.useTimestamp,\n      numSignatures: params.numSignatures,\n    });\n  }\n\n  async fetchSignaturesBatch(params: {\n    gateway?: string;\n    recentHash?: string;\n    feedConfigs: FeedRequest[];\n    numSignatures?: number;\n    useTimestamp?: boolean;\n  }): Promise<FetchSignaturesBatchResponse> {\n    const gateway = await this.fetchGateway(params.gateway);\n    return await gateway.fetchSignaturesBatch({\n      recentHash: params.recentHash,\n      feedConfigs: params.feedConfigs,\n      numSignatures: params.numSignatures,\n      useTimestamp: params.useTimestamp,\n    });\n  }\n\n  /**\n   *  Loads the queue data for this {@linkcode Queue} account from on chain.\n   *\n   *  @returns A promise that resolves to the queue data.\n   *  @throws if the queue account does not exist.\n   */\n  static loadData(\n    program: Program,\n    pubkey: web3.PublicKey\n  ): Promise<QueueAccountData> {\n    return program.account['queueAccountData'].fetch(pubkey);\n  }\n\n  /**\n   *  Loads the queue data for this {@linkcode Queue} account from on chain.\n   *\n   *  @returns A promise that resolves to the queue data.\n   *  @throws if the queue account does not exist.\n   */\n  async loadData(): Promise<QueueAccountData> {\n    return await Queue.loadData(this.program, this.pubkey);\n  }\n\n  /**\n   *  Adds a new MR enclave to the queue.\n   *  This will allow the queue to accept signatures from the given MR enclave.\n   *  @param mrEnclave The MR enclave to add.\n   *  @returns A promise that resolves to the transaction instruction.\n   *  @throws if the request fails.\n   *  @throws if the MR enclave is already added.\n   *  @throws if the MR enclave is invalid.\n   *  @throws if the MR enclave is not a valid length.\n   */\n  async addMrEnclaveIx(params: {\n    mrEnclave: Uint8Array;\n  }): Promise<web3.TransactionInstruction> {\n    const stateKey = State.keyFromSeed(this.program);\n    const state = await State.loadData(this.program);\n    const programAuthority = state.authority;\n    const { authority } = await this.loadData();\n    const ix = await this.program.instruction.queueAddMrEnclave(\n      { mrEnclave: params.mrEnclave },\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority,\n          programAuthority,\n          state: stateKey,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Removes an MR enclave from the queue.\n   *  This will prevent the queue from accepting signatures from the given MR enclave.\n   *  @param mrEnclave The MR enclave to remove.\n   *  @returns A promise that resolves to the transaction instruction.\n   *  @throws if the request fails.\n   *  @throws if the MR enclave is not present.\n   */\n  async rmMrEnclaveIx(params: {\n    mrEnclave: Uint8Array;\n  }): Promise<web3.TransactionInstruction> {\n    const stateKey = State.keyFromSeed(this.program);\n    const state = await State.loadData(this.program);\n    const programAuthority = state.authority;\n    const { authority } = await this.loadData();\n    const ix = await this.program.instruction.queueRemoveMrEnclave(\n      { mrEnclave: params.mrEnclave },\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority,\n          programAuthority,\n          state: stateKey,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Sets the queue configurations.\n   * @param params.authority The new authority for the queue.\n   * @param params.reward The new reward for the queue.\n   * @param params.nodeTimeout The new node timeout for the queue.\n   * @returns A promise that resolves to the transaction instruction.\n   */\n  async setConfigsIx(params: {\n    authority?: web3.PublicKey;\n    reward?: number;\n    nodeTimeout?: number;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const stateKey = State.keyFromSeed(this.program);\n    const nodeTimeout = params.nodeTimeout ? new BN(params.nodeTimeout) : null;\n    const ix = await this.program.instruction.queueSetConfigs(\n      {\n        authority: params.authority ?? null,\n        reward: params.reward ?? null,\n        nodeTimeout: nodeTimeout,\n      },\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority: data.authority,\n          state: stateKey,\n        },\n      }\n    );\n    return ix;\n  }\n\n  async setNcnIx(params: {\n    ncn: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const authority = data.authority;\n    const state = State.keyFromSeed(this.program);\n    return this.program.instruction.queueSetNcn(\n      {},\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority,\n          state,\n          ncn: params.ncn,\n        },\n      }\n    );\n  }\n\n  async setVaultIx(params: {\n    vault: web3.PublicKey;\n    enable: boolean;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const authority = data.authority;\n    const state = State.keyFromSeed(this.program);\n    const ncn = data.ncn;\n    return this.program.instruction.queueSetVault(\n      {\n        enable: params.enable,\n      },\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority,\n          state,\n          ncn,\n          vault: params.vault,\n        },\n      }\n    );\n  }\n\n  async allowSubsidyIx(params: {\n    enable: boolean;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const authority = data.authority;\n    const state = State.keyFromSeed(this.program);\n    return this.program.instruction.queueAllowSubsidies(\n      {\n        allowSubsidies: params.enable,\n      },\n      {\n        accounts: {\n          queue: this.pubkey,\n          authority,\n          state,\n        },\n      }\n    );\n  }\n\n  /**\n   * Sets the oracle permission on the queue.\n   * @param params.oracle The oracle to set the permission for.\n   * @param params.permission The permission to set.\n   * @param params.enabled Whether the permission is enabled.\n   * @returns A promise that resolves to the transaction instruction   */\n  async setOraclePermissionIx(params: {\n    oracle: web3.PublicKey;\n    permission: SwitchboardPermission;\n    enable: boolean;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    return Permission.setIx(this.program, {\n      authority: data.authority,\n      grantee: params.oracle,\n      granter: this.pubkey,\n      permission: params.permission,\n      enable: params.enable,\n    });\n  }\n\n  /**\n   *  Removes all MR enclaves from the queue.\n   *  @returns A promise that resolves to an array of transaction instructions.\n   *  @throws if the request fails.\n   */\n  async rmAllMrEnclaveIxs(): Promise<Array<web3.TransactionInstruction>> {\n    const { mrEnclaves, mrEnclavesLen } = await this.loadData();\n    const activeEnclaves = mrEnclaves.slice(0, mrEnclavesLen);\n    const ixs: Array<web3.TransactionInstruction> = [];\n    for (const mrEnclave of activeEnclaves) {\n      ixs.push(await this.rmMrEnclaveIx({ mrEnclave }));\n    }\n    return ixs;\n  }\n\n  /**\n   *  Fetches most recently added and verified Oracle Key.\n   *  @returns A promise that resolves to an oracle public key.\n   *  @throws if the request fails.\n   */\n  async fetchFreshOracle(): Promise<web3.PublicKey> {\n    const now = Math.floor(+new Date() / 1000);\n    const oracles = await this.fetchOracleKeys();\n    const oracleAccounts = await Oracle.loadMany(this.program, oracles);\n    const oracleUris = oracleAccounts\n      .map(data => toUtf8(data!.gatewayUri))\n      .filter(gatewayUri => gatewayUri.length);\n\n    const tests: Promise<boolean>[] = [];\n    for (const i in oracleUris) {\n      const gw = new Gateway(this.program, oracleUris[i], oracles[i]);\n      tests.push(gw.test());\n    }\n\n    const zip: { key: web3.PublicKey; data: OracleAccountData }[] = [];\n    for (let i = 0; i < oracles.length; i++) {\n      try {\n        // Test gateways to see if they are good. Timeout after 2 seconds.\n        const isGood = AsyncUtils.promiseWithTimeout(2000, tests[i]);\n        if (!isGood) continue;\n      } catch (e) {\n        console.log('Gateway Timeout', e);\n      }\n      zip.push({ data: oracleAccounts[i]!, key: oracles[i] });\n    }\n\n    const validOracles = zip\n      .filter(x => x.data.enclave.verificationStatus === 4) // value 4 is for verified\n      .filter(x => x.data.enclave.validUntil.gt(new BN(now + 3600))); // valid for 1 hour at least\n    if (validOracles.length === 0) throw new Error('NoValidOracles');\n\n    const chosen =\n      validOracles[Math.floor(Math.random() * validOracles.length)];\n    return chosen.key;\n  }\n\n  /**\n   * Get the PDA for the queue (SVM chains that are not solana)\n   * @returns Queue PDA Pubkey\n   */\n  queuePDA(): web3.PublicKey {\n    return Queue.queuePDA(this.program, this.pubkey);\n  }\n\n  /**\n   * Get the PDA for the queue (SVM chains that are not solana)\n   * @param program Anchor program\n   * @param pubkey Queue pubkey\n   * @returns Queue PDA Pubkey\n   */\n  static queuePDA(program: Program, pubkey: web3.PublicKey): web3.PublicKey {\n    const [queuePDA] = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('Queue'), pubkey.toBuffer()],\n      program.programId\n    );\n    return queuePDA;\n  }\n\n  async loadLookupTable(): Promise<web3.AddressLookupTableAccount> {\n    const data = await this.loadData();\n    const lutSigner = getLutSigner(this.program.programId, this.pubkey);\n    const lutKey = getLutKey(lutSigner, data.lutSlot);\n    const accnt =\n      await this.program.provider.connection.getAddressLookupTable(lutKey);\n    return accnt.value!;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1537, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/state.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/state.ts"],"sourcesContent":["import { getNodePayer } from '../utils/index.js';\n\nimport { Queue } from './queue.js';\n\nimport type { BN, Program } from '@coral-xyz/anchor-30';\nimport { web3 } from '@coral-xyz/anchor-30';\nimport { Buffer } from 'buffer';\n\nexport interface StateData {\n  bump: number;\n  testOnlyDisableMrEnclaveCheck: boolean;\n  enableStaking: boolean;\n  // padding1\n  authority: web3.PublicKey;\n  guardianQueue: web3.PublicKey;\n  // reserved1\n  epochLength: BN;\n  // reserved2\n  switchMint: web3.PublicKey;\n  advisories: Uint16Array;\n  advisoriesLen: number;\n  // padding2\n  flatRewardCutPercentage: number;\n  enableSlashing: boolean;\n  // padding3\n  lutSlot: BN;\n  baseReward: number;\n  // padding4\n  subsidyAmount: BN;\n  // ebuf6\n  // ebuf5\n  // ebuf4\n  // ebuf3\n  // ebuf2\n  costWhitelist: web3.PublicKey[];\n}\n\n/**\n *  Abstraction around the Switchboard-On-Demand State account\n *\n *  This account is used to store the state data for a given program.\n */\nexport class State {\n  public pubkey: web3.PublicKey;\n\n  /**\n   * Derives a state PDA (Program Derived Address) from the program.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @returns {web3.PublicKey} The derived state account's public key.\n   */\n  static keyFromSeed(program: Program): web3.PublicKey {\n    const [state] = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('STATE')],\n      program.programId\n    );\n    return state;\n  }\n\n  /**\n   * Initializes the state account.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @returns {Promise<[State, string]>} A promise that resolves to the state account and the transaction signature.\n   */\n  static async create(program: Program): Promise<[State, string]> {\n    const payer = getNodePayer(program);\n    const sig = await program.rpc.stateInit(\n      {},\n      {\n        accounts: {\n          state: State.keyFromSeed(program),\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n        },\n        signers: [payer],\n      }\n    );\n\n    return [new State(program), sig];\n  }\n\n  /**\n   * Constructs a `State` instance.\n   *\n   * @param {Program} program - The Anchor program instance.\n   */\n  constructor(readonly program: Program) {\n    const pubkey = State.keyFromSeed(program);\n    this.pubkey = pubkey;\n  }\n\n  /**\n   * Set program-wide configurations.\n   *\n   * @param {object} params - The configuration parameters.\n   * @param {web3.PublicKey} [params.guardianQueue] - The guardian queue account.\n   * @param {web3.PublicKey} [params.newAuthority] - The new authority account.\n   * @param {BN} [params.minQuoteVerifyVotes] - The minimum number of votes required to verify a quote.\n   * @param {number} [params.permitAdvisory] - The permit advisory value.\n   * @param {number} [params.denyAdvisory] - The deny advisory value.\n   * @param {boolean} [params.testOnlyDisableMrEnclaveCheck] - A flag to disable MrEnclave check for testing purposes.\n   * @param {web3.PublicKey} [params.switchMint] - The switch mint account.\n   * @returns {Promise<web3.TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async setConfigsIx(params: {\n    guardianQueue?: web3.PublicKey;\n    newAuthority?: web3.PublicKey;\n    minQuoteVerifyVotes?: BN;\n    permitAdvisory?: number;\n    denyAdvisory?: number;\n    testOnlyDisableMrEnclaveCheck?: boolean;\n    subsidyAmount?: BN;\n    switchMint?: web3.PublicKey;\n    addCostWl?: web3.PublicKey;\n    rmCostWl?: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const state = await this.loadData();\n    const queue = params.guardianQueue ?? state.guardianQueue;\n    const payer = getNodePayer(this.program);\n    const testOnlyDisableMrEnclaveCheck =\n      params.testOnlyDisableMrEnclaveCheck ??\n      state.testOnlyDisableMrEnclaveCheck;\n    const ix = await this.program.instruction.stateSetConfigs(\n      {\n        newAuthority: params.newAuthority ?? state.authority,\n        testOnlyDisableMrEnclaveCheck: testOnlyDisableMrEnclaveCheck ? 1 : 0,\n        addAdvisory: params.permitAdvisory,\n        rmAdvisory: params.denyAdvisory,\n        lutSlot: state.lutSlot,\n        subsidyAmount: params.subsidyAmount ?? state.subsidyAmount,\n        switchMint: params.switchMint ?? state.switchMint,\n        authority: params.newAuthority ?? state.authority,\n        addCostWl: params.addCostWl ?? web3.PublicKey.default,\n        rmCostWl: params.rmCostWl ?? web3.PublicKey.default,\n      },\n      {\n        accounts: {\n          state: this.pubkey,\n          authority: state.authority,\n          queue,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Register a guardian with the global guardian queue.\n   *\n   * @param {object} params - The parameters object.\n   * @param {PublicKey} params.guardian - The guardian account.\n   * @returns {Promise<TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async registerGuardianIx(params: {\n    guardian: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const state = await this.loadData();\n    const payer = getNodePayer(this.program);\n    const ix = await this.program.instruction.guardianRegister(\n      {},\n      {\n        accounts: {\n          oracle: params.guardian,\n          state: this.pubkey,\n          guardianQueue: state.guardianQueue,\n          authority: state.authority,\n        },\n        signers: [payer],\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Unregister a guardian from the global guardian queue.\n   *\n   * @param {object} params - The parameters object.\n   * @param {web3.PublicKey} params.guardian - The guardian account.\n   * @returns {Promise<web3.TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async unregisterGuardianIx(params: {\n    guardian: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const state = await this.loadData();\n    const guardianQueue = new Queue(this.program, state.guardianQueue);\n    const queueData = await guardianQueue.loadData();\n    const idx = queueData.oracleKeys.findIndex(key =>\n      key.equals(params.guardian)\n    );\n    const payer = getNodePayer(this.program);\n    const ix = await this.program.instruction.guardianUnregister(\n      { idx },\n      {\n        accounts: {\n          oracle: params.guardian,\n          state: this.pubkey,\n          guardianQueue: state.guardianQueue,\n          authority: state.authority,\n        },\n        signers: [payer],\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Loads the state data from on chain.\n   *\n   *  @returns A promise that resolves to the state data.\n   *  @throws if the state account does not exist.\n   */\n  async loadData(): Promise<StateData> {\n    return await this.program.account['state'].fetch(this.pubkey);\n  }\n\n  /**\n   *  Loads the state data from on chain.\n   *\n   *  @returns A promise that resolves to the state data.\n   *  @throws if the state account does not exist.\n   */\n  static async loadData(program: Program) {\n    return await new State(program).loadData();\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/oracle.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/oracle.ts"],"sourcesContent":["import { SOL_NATIVE_MINT, SPL_TOKEN_PROGRAM_ID } from '../constants.js';\nimport * as spl from '../utils/index.js';\nimport { getLutKey, getLutSigner } from '../utils/lookupTable.js';\n\nimport { State } from './state.js';\n\nimport type { Program } from '@coral-xyz/anchor-30';\nimport { BN, web3 } from '@coral-xyz/anchor-30';\nimport { Buffer } from 'buffer';\n\nexport interface OracleAccountData {\n  enclave: {\n    enclaveSigner: web3.PublicKey;\n    mrEnclave: Uint8Array;\n    verificationStatus: number;\n    // padding1\n    verificationTimestamp: BN;\n    validUntil: BN;\n    quoteRegistry: Uint8Array;\n    registryKey: Uint8Array;\n    secp256K1Signer: Uint8Array;\n    lastEd25519Signer: web3.PublicKey;\n    lastSecp256K1Signer: Uint8Array;\n    lastRotateSlot: BN;\n    guardianApprovers: web3.PublicKey[];\n    guardianApproversLen: number;\n    // padding2\n    stagingEd25519Signer: web3.PublicKey;\n    stagingSecp256K1Signer: Uint8Array;\n    ethSigner: Uint8Array;\n    // ebuf4\n    // ebuf3\n    // ebuf2\n    // ebuf1\n  };\n  authority: web3.PublicKey;\n  queue: web3.PublicKey;\n  createdAt: BN;\n  lastHeartbeat: BN;\n  secpAuthority: Uint8Array;\n  gatewayUri: Uint8Array;\n  permissions: BN;\n  isOnQueue: boolean;\n  // padding1\n  lutSlot: BN;\n  lastRewardEpoch: BN;\n  operator: web3.PublicKey;\n  // ebuf3\n  // ebuf2\n  // ebuf1\n}\n\n/**\n *  This class represents an oracle account on chain.\n */\nexport class Oracle {\n  lut: web3.AddressLookupTableAccount | null;\n\n  constructor(\n    readonly program: Program,\n    readonly pubkey: web3.PublicKey\n  ) {\n    this.lut = null;\n  }\n\n  /**\n   * Creates a new oracle account. linked to the specified queue.\n   * After creation the oracle still must receive run approval and verify their\n   * enclave measurement.\n   * @param program - The program that owns the oracle account.\n   * @param params.queue - The queue that the oracle will be linked to.\n   * @returns A promise that resolves to a tuple containing the oracle account\n   * and the transaction signature.\n   *\n   */\n  static async create(\n    program: Program,\n    params: {\n      queue: web3.PublicKey;\n    }\n  ): Promise<[Oracle, web3.TransactionInstruction[], web3.Keypair]> {\n    const stateKey = State.keyFromSeed(program);\n    const state = await State.loadData(program);\n    const payer = spl.getNodePayer(program);\n    const oracle = web3.Keypair.generate();\n    const oracleStats = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('OracleStats'), oracle.publicKey.toBuffer()],\n      program.programId\n    )[0];\n    const lutSigner = getLutSigner(program.programId, oracle.publicKey);\n    const recentSlot = await program.provider.connection.getSlot('finalized');\n    const lutKey = getLutKey(lutSigner, recentSlot);\n\n    const ix = await program.instruction.oracleInit(\n      {\n        recentSlot: new BN(recentSlot.toString()),\n        authority: payer.publicKey,\n        queue: params.queue,\n        secpAuthority: null,\n      },\n      {\n        accounts: {\n          oracle: oracle.publicKey,\n          oracleStats,\n          authority: payer.publicKey,\n          programState: stateKey,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          tokenMint: SOL_NATIVE_MINT,\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n          switchMint: state.switchMint,\n          wsolVault: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            oracle.publicKey\n          ),\n          switchVault: spl.getAssociatedTokenAddressSync(\n            state.switchMint,\n            oracle.publicKey\n          ),\n        },\n      }\n    );\n\n    return [new Oracle(program, oracle.publicKey), [ix], oracle];\n  }\n\n  /**\n   * Creates a new oracle account for SVM chains (non-solana). linked to the specified queue.\n   * After creation the oracle still must receive run approval and verify their\n   * enclave measurement.\n   * @param program - The program that owns the oracle account.\n   * @param params.queue - The queue that the oracle will be linked to.\n   * @returns A promise that resolves to a tuple containing the oracle account\n   * and the transaction signature.\n   *\n   */\n  static async createSVM(\n    program: Program,\n    params: {\n      queue: web3.PublicKey;\n      sourceOracleKey: web3.PublicKey;\n    }\n  ): Promise<[Oracle, web3.TransactionInstruction[]]> {\n    const stateKey = State.keyFromSeed(program);\n    const state = await State.loadData(program);\n    const payer = spl.getNodePayer(program);\n    // Generate the queue PDA for the given source queue key\n    const [oracle] = web3.PublicKey.findProgramAddressSync(\n      [\n        Buffer.from('Oracle'),\n        params.queue.toBuffer(),\n        params.sourceOracleKey.toBuffer(),\n      ],\n      program.programId\n    );\n    const oracleStats = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('OracleStats'), oracle.toBuffer()],\n      program.programId\n    )[0];\n    const lutSigner = getLutSigner(program.programId, oracle);\n    const recentSlot = await program.provider.connection.getSlot('finalized');\n    const lutKey = getLutKey(lutSigner, recentSlot);\n\n    const ix = program.instruction.oracleInitSvm(\n      {\n        recentSlot: new BN(recentSlot.toString()),\n        authority: payer.publicKey,\n        queue: params.queue,\n        secpAuthority: null,\n        sourceOracleKey: params.sourceOracleKey,\n      },\n      {\n        accounts: {\n          oracle: oracle,\n          oracleStats,\n          authority: payer.publicKey,\n          programState: stateKey,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          tokenMint: SOL_NATIVE_MINT,\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n          switchMint: state.switchMint,\n          wsolVault: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            oracle,\n            true\n          ),\n          switchVault: spl.getAssociatedTokenAddressSync(\n            state.switchMint,\n            oracle,\n            true\n          ),\n        },\n      }\n    );\n\n    return [new Oracle(program, oracle), [ix]];\n  }\n\n  /**\n   * TODO: wrap this one up with the gateway bridge oracle fn\n   * @param params\n   * @returns\n   */\n  // static async quoteVerifySvmIx(\n  //   program: Program,\n  //   params: {\n  //     chain?: string; // Unused atm\n  //     network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n  //     queue: web3.PublicKey; // Solana queue\n  //     attestee: web3.PublicKey; // Solana attestee\n  //     attester: web3.PublicKey; // Solana attester guardian we're requesting from\n  //   }\n  // ): Promise<web3.TransactionInstruction> {\n  // const [queuePDA, queueBump] = PublicKey.findProgramAddressSync(\n  //   [Buffer.from(\"Queue\"), params.queue.toBuffer()],\n  //   program.programId\n  // );\n\n  // timestamp handled by bridge fn\n  // mrEnclave handled by bridge fn\n  // secp256k1Key handled by bridge fn\n  // slot has to be handled by us I think\n  // signature has to be handled by bridge fn\n  // recoveryId has to be handled by bridge fn\n\n  // guardian key & oracle key\n\n  // source oracle key handled by us:\n\n  // source oracle queue key handled by us:\n\n  // source guardian queue key handled by us:\n\n  // const ix = await program.instruction.guardianQuoteVerifySvm(\n  //   {\n  //     timestamp: new anchor.BN(params.timestamp),\n  //     mrEnclave: params.mrEnclave, // 32-byte array\n  //     _reserved1: params._reserved1, // 32-bit unsigned integer\n  //     secp256k1Key: params.secp256k1Key, // 64-byte array\n  //     slot: new anchor.BN(params.slot), // Slot as u64\n  //     signature: params.signature, // 64-byte array\n  //     recoveryId: params.recoveryId, // u8\n  //     sourceOracleKey: params.sourceOracleKey, // Pubkey of source oracle\n  //     sourceOracleQueueKey: params.sourceOracleQueueKey, // Pubkey of oracle queue\n  //     sourceGuardianQueueKey: params.sourceGuardianQueueKey, // Pubkey of guardian queue\n  //     oracleBump: params.oracleBump, // Bump for oracle PDA\n  //     oracleQueueBump: params.oracleQueueBump, // Bump for oracle queue PDA\n  //     guardianQueueBump: params.guardianQueueBump, // Bump for guardian queue PDA\n  //   },\n  //   {\n  //     accounts: {\n  //       guardian: guardianAccountLoader, // AccountLoader for OracleAccountData\n  //       oracle: oracleAccountLoader, // AccountLoader for OracleAccountData\n  //       oracleStats: oracleStatsAccountLoader, // AccountLoader for OracleStatsAccountData\n  //       payer: payer.publicKey, // Signer for transaction\n  //       systemProgram: SystemProgram.programId, // System program ID\n  //       oracleQueue: oracleQueueAccountLoader, // AccountLoader for QueueAccountData\n  //       guardianQueue: guardianQueueAccountLoader, // AccountLoader for QueueAccountData\n  //       state: stateAccountLoader, // AccountLoader for State\n  //       recentSlothashes: anchor.web3.SYSVAR_SLOT_HASHES_PUBKEY, // Sysvar slot hashes\n  //       lutSigner: lutSignerAccount, // AccountInfo for lut signer\n  //       lut: lutAccount, // AccountInfo for lut (lookup table)\n  //       programState: programStateAccountLoader, // AccountLoader for State\n  //     },\n  //     signers: [payer], // Add payer as the signer for the instruction\n  //   }\n  // );\n\n  //   throw new Error('Quote verify SVM not implemented yet.');\n  // }\n\n  async findSolanaOracleFromPDA(): Promise<{\n    oracleData: OracleAccountData;\n    oracle: web3.PublicKey;\n  }> {\n    const oracleData = await this.loadData();\n    const isMainnet = oracleData.queue.equals(spl.ON_DEMAND_MAINNET_QUEUE_PDA);\n    const queue = await spl.getQueue({\n      program: this.program,\n      queueAddress: spl.getDefaultQueueAddress(isMainnet),\n    });\n    const solanaOracles = await queue.fetchOracleKeys();\n    for (const oracle of solanaOracles) {\n      const [oraclePDA] = web3.PublicKey.findProgramAddressSync(\n        [Buffer.from('Oracle'), oracleData.queue.toBuffer(), oracle.toBuffer()],\n        this.program.programId\n      );\n      if (oraclePDA.equals(this.pubkey)) {\n        return {\n          oracleData: await new Oracle(queue.program, oracle).loadData(),\n          oracle,\n        };\n      }\n    }\n    throw new Error(`Solana Oracle not found for ${this.pubkey.toBase58()}`);\n  }\n\n  async setConfigsIx(params: {\n    authority: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const ix = await this.program.instruction.oracleSetConfigs(\n      {\n        authority: params.authority,\n        newSecpAuthority: null,\n      },\n      {\n        accounts: {\n          oracle: this.pubkey,\n          authority: params.authority,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Loads the oracle data for this {@linkcode Oracle} account from on chain.\n   *\n   *  @returns A promise that resolves to the oracle data.\n   *  @throws if the oracle account does not exist.\n   */\n  async loadData(): Promise<OracleAccountData> {\n    return await Oracle.loadData(this.program, this.pubkey);\n  }\n\n  async fetchGateway(): Promise<string> {\n    const data = await this.loadData();\n    const gw = Buffer.from(data.gatewayUri).toString();\n    return gw.replace(/\\0+$/, '');\n  }\n\n  /**\n   *  Loads the oracle data for this {@linkcode Oracle} account from on chain.\n   *\n   *  @returns A promise that resolves to the oracle data.\n   *  @throws if the oracle account does not exist.\n   */\n  static async loadData(\n    program: Program,\n    pubkey: web3.PublicKey\n  ): Promise<OracleAccountData> {\n    return await program.account['oracleAccountData'].fetch(pubkey);\n  }\n\n  /**\n   * Loads the oracle data for a list of {@linkcode Oracle} accounts from on chain.\n   *\n   * @param program - The program that owns the oracle accounts.\n   * @param keys - The public keys of the oracle accounts to load.\n   * @returns A promise that resolves to an array of oracle data.\n   * @throws if any of the oracle accounts do not exist.\n   */\n  static async loadMany(\n    program: Program,\n    keys: web3.PublicKey[]\n  ): Promise<(OracleAccountData | null)[]> {\n    return await program.account['oracleAccountData'].fetchMultiple(keys);\n  }\n\n  /**\n   * Loads the oracle data and checks if the oracle is verified.\n   *\n   * @returns A promise that resolves to a tuple containing a boolean indicating\n   * if the oracle is verified and the expiration time of the verification.\n   * @throws if the oracle account does not exist.\n   */\n  async verificationStatus(): Promise<[boolean, number]> {\n    const data = await this.loadData();\n    const now = new BN(Date.now() / 1000);\n    const status = data.enclave.verificationStatus;\n    const expiration = data.enclave.validUntil;\n    return [status === 4 && now.lt(expiration), expiration.toNumber()];\n  }\n\n  /**\n   * Get the pubkey of the stats account for this oracle.\n   * @returns A promise that resolves to the pubkey of the stats account.\n   */\n  statsKey(): web3.PublicKey {\n    return web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('OracleStats'), this.pubkey.toBuffer()],\n      this.program.programId\n    )[0];\n  }\n\n  async loadLookupTableKey(): Promise<web3.PublicKey> {\n    const data = await this.loadData();\n    return this.lookupTableKey(data);\n  }\n\n  public lookupTableKey(data: { lutSlot: number | BN }): web3.PublicKey {\n    const lutSigner = getLutSigner(this.program.programId, this.pubkey);\n    return getLutKey(lutSigner, data.lutSlot);\n  }\n\n  async loadLookupTable(): Promise<web3.AddressLookupTableAccount> {\n    if (this.lut !== null && this.lut !== undefined) return this.lut;\n\n    const lutKey = await this.loadLookupTableKey();\n    const accnt =\n      await this.program.provider.connection.getAddressLookupTable(lutKey);\n    this.lut = accnt.value!;\n    return this.lut!;\n  }\n\n  async setOperatorIx(params: {\n    operator: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const ix = await this.program.instruction.oracleSetOperator(\n      {},\n      {\n        accounts: {\n          oracle: this.pubkey,\n          operator: params.operator,\n          authority: data.authority,\n        },\n      }\n    );\n    return ix;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2112, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/utils/fs.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/utils/fs.ts"],"sourcesContent":["// Add this type declaration at the top level\ntype FileSystem = {\n  writeFileSync: (path: string, data: any) => void; // eslint-disable-line @typescript-eslint/no-explicit-any\n  readFileSync: (\n    path: string,\n    options?: { encoding?: string | null; flag?: string } | string\n  ) => string;\n};\n\n// Declare fs variable safely\ndeclare const require: any; // eslint-disable-line @typescript-eslint/no-explicit-any\nexport const getFs = (): FileSystem => {\n  if (typeof window !== 'undefined') {\n    throw new Error(\n      'File system operations are not supported in browser environments'\n    );\n  }\n\n  try {\n    return require('fs');\n  } catch (error) {\n    console.error(error);\n    throw new Error('Failed to load file system module');\n  }\n};\n"],"names":[],"mappings":";;;;AAWO,MAAM,KAAK,GAAG,GAAe,EAAE;IACpC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE,CAAC;;IAMpC,IAAI,CAAC;QACH,OAAO,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACrB,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;IACvD,CAAC;AACH,CAAC,CAAC"}},
    {"offset": {"line": 2130, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/anchor-utils/AnchorUtils.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/anchor-utils/AnchorUtils.ts"],"sourcesContent":["import {\n  isDevnetConnection,\n  isMainnetConnection,\n  ON_DEMAND_DEVNET_PID,\n  ON_DEMAND_MAINNET_PID,\n} from '../utils';\nimport { getFs } from '../utils/fs';\n\nimport {\n  AnchorProvider,\n  BorshEventCoder,\n  Program,\n  Provider,\n  Wallet,\n  web3,\n} from '@coral-xyz/anchor-30';\nimport yaml from 'js-yaml';\nimport os from 'os';\nimport path from 'path';\n\ntype SolanaConfig = {\n  rpcUrl: string;\n  webSocketUrl: string;\n  keypairPath: string;\n  commitment: web3.Commitment;\n  keypair: web3.Keypair;\n  connection: web3.Connection;\n  provider: AnchorProvider;\n  wallet: Wallet;\n  program: Program | null;\n};\n\nconst readonlyWallet: AnchorProvider['wallet'] = {\n  publicKey: web3.PublicKey.default,\n  signTransaction: () => {\n    throw new Error('Program is in `readonly` mode.');\n  },\n  signAllTransactions: () => {\n    throw new Error('Program is in `readonly` mode.');\n  },\n};\n\n/*\n * AnchorUtils is a utility class that provides helper functions for working with\n * the Anchor framework. It is a static class, meaning that it does not need to be\n * instantiated to be used. It is a collection of helper functions that can be used\n * to simplify common tasks when working with Anchor.\n */\nexport class AnchorUtils {\n  private static async initWalletFromKeypair(keypair: web3.Keypair) {\n    const { default: NodeWallet } = await import(\n      '@coral-xyz/anchor-30/dist/cjs/nodewallet'\n    );\n    return new NodeWallet(keypair);\n  }\n\n  /**\n   * Initializes a wallet from a file.\n   *\n   * @param {string} filePath - The path to the file containing the wallet's secret key.\n   * @returns {Promise<[Wallet, web3.Keypair]>} A promise that resolves to a tuple containing the wallet and the keypair.\n   */\n  static async initWalletFromFile(filePath: string) {\n    const keypair = await AnchorUtils.initKeypairFromFile(filePath);\n    const wallet = await AnchorUtils.initWalletFromKeypair(keypair);\n    return [wallet, keypair] as const;\n  }\n\n  /**\n   * Initializes a keypair from a file.\n   *\n   * @param {string} filePath - The path to the file containing the keypair's secret key.\n   * @returns {Promise<web3.Keypair>} A promise that resolves to the keypair.\n   */\n  static async initKeypairFromFile(filePath: string): Promise<web3.Keypair> {\n    const secretKeyString = getFs().readFileSync(filePath, {\n      encoding: 'utf8',\n    });\n    const secretKey: Uint8Array = Uint8Array.from(JSON.parse(secretKeyString));\n    const keypair = web3.Keypair.fromSecretKey(secretKey);\n    return keypair;\n  }\n\n  /**\n   * Loads an Anchor program from a connection.\n   *\n   * @param {web3.Connection} connection - The connection to load the program from.\n   * @param {Wallet} wallet - An optional wallet to load the program from.\n   * @param {web3.PublicKey} programId - An optional program ID to load the program from.\n   * @returns {Promise<Program>} A promise that resolves to the loaded Anchor program.\n   */\n  static async loadProgramFromConnection(\n    connection: web3.Connection,\n    wallet?: Wallet,\n    programId?: web3.PublicKey\n  ) {\n    const provider = new AnchorProvider(connection, wallet ?? readonlyWallet);\n    return await AnchorUtils.loadProgramFromProvider(provider, programId);\n  }\n\n  /**\n   * Loads an Anchor program from a provider.\n   *\n   * @param {Provider} provider - The provider to load the program from.\n   * @param {web3.PublicKey} programId - An optional program ID to load the program from.\n   * @returns {Promise<Program>} A promise that resolves to the loaded Anchor program.\n   */\n  static async loadProgramFromProvider(\n    provider: Provider,\n    programId?: web3.PublicKey\n  ) {\n    const pid = await (async () => {\n      if (programId) return programId;\n      const isSolanaDevnet = await isDevnetConnection(provider.connection);\n      return isSolanaDevnet ? ON_DEMAND_DEVNET_PID : ON_DEMAND_MAINNET_PID;\n    })();\n    return await Program.at(pid, provider);\n  }\n\n  /**\n   * Loads an Anchor program from the environment.\n   *\n   * @returns {Promise<Program>} A promise that resolves to the loaded Anchor program.\n   */\n  static async loadProgramFromEnv(): Promise<Program> {\n    const config = await AnchorUtils.loadEnv();\n    const isDevnet = await isDevnetConnection(config.connection);\n    const pid = isDevnet ? ON_DEMAND_DEVNET_PID : ON_DEMAND_MAINNET_PID;\n    return Program.at(pid, config.provider);\n  }\n\n  /**\n   * Loads the same environment set for the Solana CLI.\n   *\n   * @returns {Promise<SolanaConfig>} A promise that resolves to the Solana configuration.\n   */\n  static async loadEnv(): Promise<SolanaConfig> {\n    const configPath = path.join(os.homedir(), '.config/solana/cli/config.yml');\n    const fileContents = getFs().readFileSync(configPath, 'utf8');\n    const data = yaml.load(fileContents);\n\n    const commitment = data.commitment as web3.Commitment;\n    const connection = new web3.Connection(data.json_rpc_url, {\n      commitment,\n      wsEndpoint: data.websocket_url,\n    });\n\n    const keypairPath = data.keypair_path;\n    const keypair = (await AnchorUtils.initWalletFromFile(keypairPath))[1];\n    const wallet = await this.initWalletFromKeypair(keypair);\n    const provider = new AnchorProvider(connection, wallet);\n\n    const isMainnet = await isMainnetConnection(connection);\n    const pid = isMainnet ? ON_DEMAND_MAINNET_PID : ON_DEMAND_DEVNET_PID;\n    const program = await Program.at(pid, provider);\n\n    return {\n      rpcUrl: connection.rpcEndpoint,\n      webSocketUrl: data.websocket_url,\n      connection: connection,\n      commitment: connection.commitment ?? 'confirmed',\n      keypairPath: keypairPath,\n      keypair: keypair,\n      provider: provider,\n      wallet: wallet,\n      program: program,\n    };\n  }\n\n  /**\n   * Parse out anchor events from the logs present in the program IDL.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @param {string[]} logs - The array of logs to parse.\n   * @returns {any[]} An array of parsed events.\n   */\n  static loggedEvents(program: Program, logs: string[]) {\n    type LoggedEvent = ReturnType<BorshEventCoder['decode']>;\n\n    const coder = new BorshEventCoder(program.idl);\n    const out: LoggedEvent[] = [];\n    logs.forEach(log => {\n      if (log.startsWith('Program data: ')) {\n        const strings = log.split(' ');\n        if (strings.length !== 3) return;\n        try {\n          out.push(coder.decode(strings[2]));\n        } catch {} // eslint-disable-line no-empty\n      }\n    });\n    return out;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2324, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/utils/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/utils/index.ts"],"sourcesContent":["import { Oracle } from '../accounts/oracle.js';\nimport type { PullFeed } from '../accounts/pullFeed.js';\nimport { Queue } from '../accounts/queue.js';\nimport { AnchorUtils } from '../anchor-utils/AnchorUtils.js';\nimport {\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\n\nimport type { Program } from '@coral-xyz/anchor-30';\nimport { web3 } from '@coral-xyz/anchor-30';\nimport type { IOracleJob } from '@switchboard-xyz/common';\nimport { CrossbarClient } from '@switchboard-xyz/common';\nimport { Buffer } from 'buffer';\n\ntype Account = {\n  pubkey: web3.PublicKey;\n  loadLookupTable: () => Promise<web3.AddressLookupTableAccount>;\n};\n\nexport function createLoadLookupTables() {\n  const promiseMap: Map<\n    string,\n    Promise<web3.AddressLookupTableAccount>\n  > = new Map();\n\n  async function loadLookupTables(\n    accounts: Account[]\n  ): Promise<web3.AddressLookupTableAccount[]> {\n    for (const account of accounts) {\n      const pubkey = account.pubkey.toString();\n      if (pubkey && account.loadLookupTable) {\n        if (!promiseMap.has(pubkey)) {\n          promiseMap.set(pubkey, account.loadLookupTable());\n        }\n      }\n    }\n\n    const out: Promise<web3.AddressLookupTableAccount>[] = [];\n    for (const account of accounts) {\n      const promise = promiseMap.get(account.pubkey.toString());\n      if (promise) out.push(promise);\n    }\n    return Promise.all(out).then(arr => {\n      return arr.filter(x => Boolean(x));\n    });\n  }\n\n  return loadLookupTables;\n}\n\nexport const loadLookupTables = createLoadLookupTables();\n\n// Mainnet ID's\nexport const ON_DEMAND_MAINNET_PID = new web3.PublicKey(\n  'SBondMDrcV3K4kxZR1HNVT7osZxAHVHgYXL5Ze1oMUv'\n);\nexport const ON_DEMAND_MAINNET_GUARDIAN_QUEUE = new web3.PublicKey(\n  'B7WgdyAgzK7yGoxfsBaNnY6d41bTybTzEh4ZuQosnvLK'\n);\nexport const ON_DEMAND_MAINNET_QUEUE = new web3.PublicKey(\n  'A43DyUGA7s8eXPxqEjJY6EBu1KKbNgfxF8h17VAHn13w'\n);\nexport const ON_DEMAND_MAINNET_QUEUE_PDA =\n  web3.PublicKey.findProgramAddressSync(\n    [Buffer.from('Queue'), ON_DEMAND_MAINNET_QUEUE.toBuffer()],\n    ON_DEMAND_MAINNET_PID\n  )[0];\n\n// Devnet ID's\nexport const ON_DEMAND_DEVNET_PID = new web3.PublicKey(\n  'Aio4gaXjXzJNVLtzwtNVmSqGKpANtXhybbkhtAC94ji2'\n);\nexport const ON_DEMAND_DEVNET_GUARDIAN_QUEUE = new web3.PublicKey(\n  'BeZ4tU4HNe2fGQGUzJmNS2UU2TcZdMUUgnCH6RPg4Dpi'\n);\nexport const ON_DEMAND_DEVNET_QUEUE = new web3.PublicKey(\n  'EYiAmGSdsQTuCw413V5BzaruWuCCSDgTPtBGvLkXHbe7'\n);\nexport const ON_DEMAND_DEVNET_QUEUE_PDA = web3.PublicKey.findProgramAddressSync(\n  [Buffer.from('Queue'), ON_DEMAND_DEVNET_QUEUE.toBuffer()],\n  ON_DEMAND_MAINNET_PID // SVM Devnet networks should be launched with SBond... as PID\n)[0];\n\n/**\n * Check if the connection is to the mainnet\n * @param connection - Connection: The connection\n * @returns - Promise<boolean> - Whether the connection is to the mainnet\n */\nexport async function isMainnetConnection(\n  connection: web3.Connection\n): Promise<boolean> {\n  try {\n    const genesisHash = await connection.getGenesisHash();\n    return genesisHash === '5eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d';\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Check if the connection is to the devnet\n * @param connection - Connection: The connection\n * @returns - Promise<boolean> - Whether the connection is to the devnet\n */\nexport async function isDevnetConnection(\n  connection: web3.Connection\n): Promise<boolean> {\n  try {\n    const genesisHash = await connection.getGenesisHash();\n    return genesisHash === 'EtWTRABZaYq6iMfeYKouRu166VU2xqa1wcaWoxPkrZBG';\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Get the program ID for the Switchboard program based on the connection\n * @param connection - Connection: The connection\n * @returns - Promise<PublicKey> - The program ID\n */\nexport async function getProgramId(\n  connection: web3.Connection\n): Promise<web3.PublicKey> {\n  const isDevnet = connection.rpcEndpoint.includes('devnet');\n  return isDevnet ? ON_DEMAND_DEVNET_PID : ON_DEMAND_MAINNET_PID;\n}\n\n/**\n * Get the default devnet queue for the Switchboard program\n * @param solanaRPCUrl - (optional) string: The Solana RPC URL\n * @returns - Promise<Queue> - The default devnet queue\n */\nexport async function getDefaultDevnetQueue(\n  solanaRPCUrl: string = 'https://api.devnet.solana.com'\n): Promise<Queue> {\n  return getQueue({\n    solanaRPCUrl,\n    queueAddress: ON_DEMAND_DEVNET_QUEUE.toString(),\n  });\n}\n\n/**\n * Get the default devnet guardian queue for the Switchboard program\n * @param solanaRPCUrl - (optional) string: The Solana RPC URL\n * @returns - Promise<Queue> - The default devnet guardian queue\n */\nexport async function getDefaultDevnetGuardianQueue(\n  solanaRPCUrl: string = 'https://api.devnet.solana.com'\n): Promise<Queue> {\n  return getQueue({\n    solanaRPCUrl,\n    queueAddress: ON_DEMAND_DEVNET_GUARDIAN_QUEUE.toString(),\n  });\n}\n\n/**\n * Get the default queue address for the Switchboard program on Solana.\n *\n * @param isMainnet - boolean: Whether the connection is to the mainnet\n * @returns - web3.PublicKey: The default queue address\n */\nexport function getDefaultQueueAddress(isMainnet: boolean) {\n  return isMainnet ? ON_DEMAND_MAINNET_QUEUE : ON_DEMAND_DEVNET_QUEUE;\n}\n\n/**\n * Get the default queue for the Switchboard program\n * @param solanaRPCUrl - (optional) string: The Solana RPC URL\n * @returns - Promise<Queue> - The default queue\n * @NOTE - SWITCHBOARD PID AND QUEUE PUBKEY ARE WRONG\n */\n\nexport async function getDefaultQueue(\n  solanaRPCUrl: string = web3.clusterApiUrl('mainnet-beta')\n): Promise<Queue> {\n  const connection = new web3.Connection(solanaRPCUrl, 'confirmed');\n  const isMainnet = await isMainnetConnection(connection);\n  const queueAddress = getDefaultQueueAddress(isMainnet);\n  return getQueue({ solanaRPCUrl, queueAddress });\n}\n\n/**\n * Get the default guardian queue for the Switchboard program\n * @param solanaRPCUrl - (optional) string: The Solana RPC URL\n * @returns - Promise<Queue> - The default guardian queue\n * @NOTE - SWITCHBOARD PID AND GUARDIAN QUEUE PUBKEY ARE WRONG\n */\nexport async function getDefaultGuardianQueue(\n  solanaRPCUrl: string = web3.clusterApiUrl('mainnet-beta')\n): Promise<Queue> {\n  return getQueue({\n    solanaRPCUrl,\n    queueAddress: ON_DEMAND_MAINNET_GUARDIAN_QUEUE.toString(),\n  });\n}\n\n/**\n * Get the queue for the Switchboard program\n * @param solanaRPCUrl - string: The Solana RPC URL\n * @param switchboardProgramId - string: The Switchboard program ID\n * @param queueAddress - string: The queue address\n * @returns - Promise<Queue> - The queue\n */\nexport async function getQueue(\n  params: {\n    queueAddress: string | web3.PublicKey;\n  } & ({ solanaRPCUrl: string } | { program: Program })\n): Promise<Queue> {\n  const queue = new web3.PublicKey(params.queueAddress);\n  const program =\n    'program' in params\n      ? params.program\n      : await AnchorUtils.loadProgramFromConnection(\n          new web3.Connection(params.solanaRPCUrl, 'confirmed')\n        );\n  return new Queue(program, queue);\n}\n\n/**\n * Get the unique LUT keys for the queue, all oracles in the queue, and all feeds\n * provided\n * @param queue - Queue: The queue\n * @param feeds - PullFeed[]: The feeds\n * @returns - Promise<PublicKey[]>: The unique LUT keys\n */\nexport async function fetchAllLutKeys(\n  queue: Queue,\n  feeds: PullFeed[]\n): Promise<web3.PublicKey[]> {\n  type LutOwner = {\n    loadLookupTable: () => Promise<web3.AddressLookupTableAccount>;\n  };\n\n  const oracles = await queue.fetchOracleKeys();\n  const lutOwners: LutOwner[] = [];\n  lutOwners.push(queue);\n  feeds.forEach(feed => lutOwners.push(feed));\n  oracles.forEach(oracle => lutOwners.push(new Oracle(queue.program, oracle)));\n\n  const lutPromises = lutOwners.map(lutOwner => lutOwner.loadLookupTable());\n  const luts = await Promise.all(lutPromises);\n\n  const keyset = new Set<web3.PublicKey>();\n  luts.forEach(lut => lut.state.addresses.forEach(keyset.add));\n  return Array.from(keyset).map(key => new web3.PublicKey(key));\n}\n\n/**\n * @param queue Queue pubkey as base58 string\n * @param jobs Array of jobs to store (Oracle Jobs Object)\n * @param crossbarUrl\n * @returns\n */\nexport async function storeFeed(\n  queue: string,\n  jobs: IOracleJob[],\n  crossbarUrl = CrossbarClient.default().crossbarUrl\n): Promise<{\n  cid: string;\n  feedHash: string;\n  queueHex: string;\n}> {\n  const crossbar = crossbarUrl.endsWith('/')\n    ? crossbarUrl.slice(0, -1)\n    : crossbarUrl;\n\n  const x = new CrossbarClient(crossbar);\n  return await x.store(queue, jobs);\n}\n\nexport async function getAssociatedTokenAddress(\n  mint: web3.PublicKey,\n  owner: web3.PublicKey,\n  allowOwnerOffCurve = false,\n  programId = SPL_TOKEN_PROGRAM_ID,\n  associatedTokenProgramId = SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n): Promise<web3.PublicKey> {\n  if (!allowOwnerOffCurve && !web3.PublicKey.isOnCurve(owner.toBuffer())) {\n    throw new Error('TokenOwnerOffCurveError');\n  }\n\n  const [address] = await web3.PublicKey.findProgramAddress(\n    [owner.toBuffer(), programId.toBuffer(), mint.toBuffer()],\n    associatedTokenProgramId\n  );\n\n  return address;\n}\n\nexport function getAssociatedTokenAddressSync(\n  mint: web3.PublicKey,\n  owner: web3.PublicKey,\n  allowOwnerOffCurve = false,\n  programId = SPL_TOKEN_PROGRAM_ID,\n  associatedTokenProgramId = SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n): web3.PublicKey {\n  if (!allowOwnerOffCurve && !web3.PublicKey.isOnCurve(owner.toBuffer())) {\n    throw new Error('TokenOwnerOffCurveError');\n  }\n\n  const [address] = web3.PublicKey.findProgramAddressSync(\n    [owner.toBuffer(), programId.toBuffer(), mint.toBuffer()],\n    associatedTokenProgramId\n  );\n\n  return address;\n}\n\nexport function getNodePayer(program: Program): web3.Keypair {\n  return (program.provider as any).wallet.payer; // eslint-disable-line @typescript-eslint/no-explicit-any\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2580, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/lutMap.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/lutMap.ts"],"sourcesContent":["import {\n  SOL_NATIVE_MINT,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\nimport { getAssociatedTokenAddress, getNodePayer } from '../utils/index.js';\nimport { getLutSigner } from '../utils/lookupTable.js';\n\nimport { Queue } from './queue.js';\nimport { State } from './state.js';\n\nimport type { BN, Program } from '@coral-xyz/anchor-30';\nimport { web3 } from '@coral-xyz/anchor-30';\nimport { Buffer } from 'buffer';\n\n/**\n *  A map of LUTs to their public keys.\n *\n *  Users can initialize to compact all oracle and feed keys they use into a single\n *  account, and then use the LUT to load all tx keys efficiently.\n */\nexport class LutMap {\n  /**\n   *  The public key of the LUT map account.\n   */\n  static async keyFromSeed(\n    program: Program,\n    queue: web3.PublicKey,\n    authority: web3.PublicKey\n  ): Promise<web3.PublicKey> {\n    const [lut] = web3.PublicKey.findProgramAddressSync(\n      [\n        Buffer.from('LutMapAccountData'),\n        queue.toBuffer(),\n        authority.toBuffer(),\n      ],\n      program.programId\n    );\n    return lut;\n  }\n\n  /**\n   * Creating a LUT map account will allow a user or protocol to easy manage\n   * and associate a common account grouping for their feeds to reduce the\n   * total number of transaction bytes taken by Switchboard.\n   * This will maximize the flexibility users have in their instructions.\n   *\n   * @param program - The program that owns the LUT map account.\n   * @param queue - The queue account that the LUT map is associated with.\n   * @param slot - The slot that the LUT map is associated with.\n   * @returns A promise that resolves to the LUT map and the transaction signature.\n   */\n  static async create(\n    program: Program,\n    queue: web3.PublicKey,\n    slot: BN\n  ): Promise<[LutMap, string]> {\n    const payer = getNodePayer(program);\n    const lutKey = await LutMap.keyFromSeed(program, queue, payer.publicKey);\n    const sig = await program.rpc.lutMapInit(\n      { slot },\n      {\n        accounts: {\n          lutMap: lutKey,\n          queue: queue,\n          payer: payer.publicKey,\n          authority: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n        },\n        signers: [payer],\n      }\n    );\n    return [new LutMap(program, lutKey), sig];\n  }\n\n  constructor(\n    readonly program: Program,\n    readonly pubkey: web3.PublicKey\n  ) {}\n\n  async queueLutExtendIx(params: {\n    queue: web3.PublicKey;\n    newKey: web3.PublicKey;\n    payer: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const payer = getNodePayer(this.program);\n    const queueAccount = new Queue(this.program, params.queue);\n    const queueData = await queueAccount.loadData();\n    const lutKey = await LutMap.keyFromSeed(\n      this.program,\n      params.queue,\n      payer.publicKey\n    );\n    const lutSigner = getLutSigner(this.program.programId, params.queue);\n    const ix = await this.program.instruction.queueLutExtend(\n      { newKey: params.newKey },\n      {\n        accounts: {\n          queue: params.queue,\n          authority: queueData.authority,\n          lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n          payer: payer.publicKey,\n          systemProgram: web3.SystemProgram.programId,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   *  Loads the data for this {@linkcode LutMap} account from on chain.\n   *\n   *  @returns A promise that resolves to the data.\n   *  @throws if the account does not exist.\n   */\n  async loadData() {\n    return await this.program.account['lutMapAccountData'].fetch(this.pubkey);\n  }\n\n  async loadLut(): Promise<[web3.PublicKey, web3.AddressLookupTableState]> {\n    const data = await this.loadData();\n    const lutKey = data.lut;\n    const lutAccountInfo =\n      await this.program.provider.connection.getAccountInfo(lutKey);\n    const lutData = web3.AddressLookupTableAccount.deserialize(\n      lutAccountInfo!.data\n    );\n    return [lutKey, lutData];\n  }\n\n  async syncLut(feeds: web3.PublicKey[]): Promise<void> {\n    const wrapperData = await this.loadData();\n    const queueKey = wrapperData.queue;\n    const queue = new Queue(this.program, queueKey);\n    const queueData = await queue.loadData();\n    const oracles = queueData.oracleKeys.slice(0, queueData.oracleKeysLen);\n    const neededLutAccounts: web3.PublicKey[] = [];\n    neededLutAccounts.push(queueKey);\n    neededLutAccounts.push(SOL_NATIVE_MINT);\n    neededLutAccounts.push(SPL_TOKEN_PROGRAM_ID);\n    neededLutAccounts.push(SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID);\n    neededLutAccounts.push(State.keyFromSeed(this.program));\n    for (const oracle of oracles) {\n      for (const feed of feeds) {\n        const [statsKey] = web3.PublicKey.findProgramAddressSync(\n          [Buffer.from('OracleFeedStats'), feed.toBuffer(), oracle.toBuffer()],\n          this.program.programId\n        );\n        const feedRewardEscrow = await getAssociatedTokenAddress(\n          SOL_NATIVE_MINT,\n          feed\n        );\n        neededLutAccounts.push(statsKey);\n        neededLutAccounts.push(feed);\n        neededLutAccounts.push(oracle);\n        neededLutAccounts.push(feedRewardEscrow);\n      }\n    }\n    // TODO: do anneal here\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2757, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/sysvars/recentSlothashes.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/sysvars/recentSlothashes.ts"],"sourcesContent":["import { SPL_SYSVAR_SLOT_HASHES_ID } from '../constants.js';\n\nimport type { web3 } from '@coral-xyz/anchor-30';\nimport { BN } from '@coral-xyz/anchor-30';\nimport bs58 from 'bs58';\n\n/**\n * Abstraction around the SysvarS1otHashes111111111111111111111111111 sysvar\n * This sysvar is used to store the recent slot hashes\n */\nexport class RecentSlotHashes {\n  /**\n   *  Disable object instantiation.\n   */\n  private constructor() {}\n  /**\n   * Fetches the latest slot hash from the sysvar.\n   * @param connection The connection to use.\n   * @returns A promise that resolves to the latest slot number and hash.\n   */\n  public static async fetchLatest(\n    connection: web3.Connection\n  ): Promise<[BN, string]> {\n    const defaultHash = bs58.encode(Array(32).fill(0));\n    const accountInfo = await connection.getAccountInfo(\n      SPL_SYSVAR_SLOT_HASHES_ID,\n      {\n        commitment: 'finalized',\n        dataSlice: { length: 40, offset: 8 },\n      }\n    );\n    if (!accountInfo) {\n      return [new BN(0), defaultHash];\n    }\n    const buffer = accountInfo.data;\n    const slotNumber = buffer.readBigUInt64LE(0);\n    const encoded = bs58.encode(Uint8Array.prototype.slice.call(buffer, 8));\n    return [new BN(slotNumber.toString()), encoded];\n  }\n\n  public static async fetchLatestNSlothashes(\n    connection: web3.Connection,\n    n: number\n  ): Promise<Array<[BN, string]>> {\n    const defaultHash = bs58.encode(Array(32).fill(0));\n    const accountInfo = await connection.getAccountInfo(\n      SPL_SYSVAR_SLOT_HASHES_ID,\n      {\n        commitment: 'finalized',\n        dataSlice: { length: 40 * Math.floor(n), offset: 8 },\n      }\n    );\n    if (!accountInfo) {\n      return Array.from({ length: n }, () => [new BN(0), defaultHash]);\n    }\n    const out: Array<[BN, string]> = [];\n    const buffer = accountInfo.data;\n    for (let i = 0; i < n; i++) {\n      const slotNumber = buffer.readBigUInt64LE(i * 40);\n      const hashStart = i * 40 + 8;\n      const hashEnd = hashStart + 32;\n      const encoded = bs58.encode(\n        Uint8Array.prototype.slice.call(buffer, hashStart, hashEnd)\n      );\n      out.push([new BN(slotNumber.toString()), encoded]);\n    }\n    return out;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2866, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/pullFeed.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/pullFeed.ts"],"sourcesContent":["import { AnchorUtils } from '../anchor-utils/AnchorUtils.js';\nimport {\n  SOL_NATIVE_MINT,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_SYSVAR_INSTRUCTIONS_ID,\n  SPL_SYSVAR_SLOT_HASHES_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\nimport { InstructionUtils } from '../instruction-utils/InstructionUtils.js';\nimport type { Secp256k1Signature } from '../instruction-utils/Secp256k1InstructionUtils.js';\nimport { Secp256k1InstructionUtils } from '../instruction-utils/Secp256k1InstructionUtils.js';\nimport type {\n  FeedEvalResponse,\n  FetchSignaturesConsensusResponse,\n} from '../oracle-interfaces/gateway.js';\nimport { RecentSlotHashes } from '../sysvars/recentSlothashes.js';\nimport * as spl from '../utils/index.js';\nimport { loadLookupTables } from '../utils/index.js';\nimport { getLutKey, getLutSigner } from '../utils/lookupTable.js';\n\nimport { Oracle } from './oracle.js';\nimport { Queue } from './queue.js';\nimport { State } from './state.js';\n\nimport type { Program } from '@coral-xyz/anchor-30';\nimport { BN, BorshAccountsCoder, web3 } from '@coral-xyz/anchor-30';\nimport type { IOracleJob } from '@switchboard-xyz/common';\nimport {\n  Big,\n  CrossbarClient,\n  FeedHash,\n  NonEmptyArrayUtils,\n} from '@switchboard-xyz/common';\nimport { Buffer } from 'buffer';\n\nexport interface CurrentResult {\n  value: BN;\n  stdDev: BN;\n  mean: BN;\n  range: BN;\n  minValue: BN;\n  maxValue: BN;\n  slot: BN;\n  minSlot: BN;\n  maxSlot: BN;\n}\n\nexport interface CompactResult {\n  stdDev: number;\n  mean: number;\n  slot: BN;\n}\n\nexport interface OracleSubmission {\n  oracle: web3.PublicKey;\n  slot: BN;\n  value: BN;\n}\n\nexport interface PullFeedAccountData {\n  submissions: OracleSubmission[];\n  authority: web3.PublicKey;\n  queue: web3.PublicKey;\n  feedHash: Uint8Array;\n  initializedAt: BN;\n  permissions: BN;\n  maxVariance: BN;\n  minResponses: number;\n  name: Uint8Array;\n  sampleSize: number;\n  lastUpdateTimestamp: BN;\n  lutSlot: BN;\n  result: CurrentResult;\n  maxStaleness: number;\n  minSampleSize: number;\n  historicalResultIdx: number;\n  historicalResults: CompactResult[];\n}\n\nexport type MultiSubmission = {\n  values: BN[];\n  signature: Buffer; // TODO: Does this need to be made a Uint8Array too?\n  recoveryId: number;\n};\n\nexport class OracleResponse {\n  constructor(\n    readonly oracle: Oracle,\n    readonly value: Big | null,\n    readonly error: string\n  ) {}\n\n  shortError(): string | undefined {\n    if (this.error === '[]') {\n      return undefined;\n    }\n    const parts = this.error.split('\\n');\n    return parts[0];\n  }\n}\n\nexport type FeedRequest = {\n  maxVariance: number;\n  minResponses: number;\n  jobs: IOracleJob[];\n};\n\nfunction padStringWithNullBytes(\n  input: string,\n  desiredLength: number = 32\n): string {\n  const nullByte = '\\0';\n  while (input.length < desiredLength) {\n    input += nullByte;\n  }\n  return input;\n}\n\nexport type FeedSubmission = { value: Big; slot: BN; oracle: web3.PublicKey };\n\nexport function toFeedValue(\n  submissions: FeedSubmission[],\n  onlyAfter: BN\n): FeedSubmission | null {\n  let values = submissions.filter(x => x.slot.gt(onlyAfter));\n  if (values.length === 0) {\n    return null;\n  }\n  values = values.sort((x, y) => (x.value.lt(y.value) ? -1 : 1));\n  return values[Math.floor(values.length / 2)];\n}\n\nfunction getIsSolana(chain?: string) {\n  return chain === undefined || chain === 'solana';\n}\n\nfunction getIsMainnet(network?: string) {\n  return network === 'mainnet' || network === 'mainnet-beta';\n}\n\n/**\n *  Checks if the pull feed account needs to be initialized.\n *\n *  @param connection The connection to use.\n *  @param programId The program ID.\n *  @param pubkey The public key of the pull feed account.\n *  @returns A promise that resolves to a boolean indicating if the account needs to be initialized.\n */\nasync function checkNeedsInit(\n  connection: web3.Connection,\n  programId: web3.PublicKey,\n  pubkey: web3.PublicKey\n): Promise<boolean> {\n  const accountInfo = await connection.getAccountInfo(pubkey);\n  if (accountInfo === null) return true;\n\n  const owner = accountInfo.owner;\n  if (!owner.equals(programId)) return true;\n\n  return false;\n}\n\n/**\n *  Abstraction around the Switchboard-On-Demand Feed account\n *\n *  This account is used to store the feed data and the oracle responses\n *  for a given feed.\n */\nexport class PullFeed {\n  gatewayUrl: string;\n  pubkey: web3.PublicKey;\n  configs: {\n    queue: web3.PublicKey;\n    maxVariance: number;\n    minResponses: number;\n    feedHash: Buffer;\n    minSampleSize: number;\n  } | null;\n  jobs: IOracleJob[] | null;\n  lut: web3.AddressLookupTableAccount | null;\n\n  /**\n   * Constructs a `PullFeed` instance.\n   *\n   * @param program - The Anchor program instance.\n   * @param pubkey - The public key of the pull feed account.\n   */\n  constructor(\n    readonly program: Program,\n    pubkey: web3.PublicKey | string\n  ) {\n    this.gatewayUrl = '';\n    this.pubkey = new web3.PublicKey(pubkey);\n    this.configs = null;\n    this.jobs = null;\n  }\n\n  static generate(program: Program): [PullFeed, web3.Keypair] {\n    const keypair = web3.Keypair.generate();\n    const feed = new PullFeed(program, keypair.publicKey);\n    return [feed, keypair];\n  }\n\n  async lookupTableKey(data?: PullFeedAccountData): Promise<web3.PublicKey> {\n    const lutSigner = getLutSigner(this.program.programId, this.pubkey);\n    const { lutSlot } = data ?? (await this.loadData());\n    return getLutKey(lutSigner, lutSlot);\n  }\n\n  /**\n   * Prefetch all lookup tables needed for the feed and queue.\n   * @returns A promise that resolves to an array of lookup tables.\n   * @throws if the lookup tables cannot be loaded.\n   */\n  async preHeatLuts(): Promise<web3.AddressLookupTableAccount[]> {\n    const data = await this.loadData();\n    const queue = new Queue(this.program, data.queue);\n    const oracleKeys = await queue.fetchOracleKeys();\n    const oracles = oracleKeys.map(k => new Oracle(this.program, k));\n    const lutOwners = [...oracles, queue, this];\n    const luts = await loadLookupTables(lutOwners);\n    return luts;\n  }\n\n  static async initTx(\n    program: Program,\n    params: {\n      name: string;\n      queue: web3.PublicKey;\n      maxVariance: number;\n      minResponses: number;\n      minSampleSize: number;\n      maxStaleness: number;\n      permitWriteByAuthority?: boolean;\n      payer?: web3.PublicKey;\n    } & ({ feedHash: Buffer } | { jobs: IOracleJob[] })\n  ): Promise<[PullFeed, web3.VersionedTransaction]> {\n    const [pullFeed, keypair] = PullFeed.generate(program);\n    const ix = await pullFeed.initIx(params);\n    const tx = await InstructionUtils.asV0TxWithComputeIxs({\n      connection: program.provider.connection,\n      ixs: [ix],\n    });\n    tx.sign([keypair]);\n    return [pullFeed, tx];\n  }\n\n  private static getPayer(\n    program: Program,\n    payer?: web3.PublicKey\n  ): web3.PublicKey {\n    return payer ?? program.provider.publicKey ?? web3.PublicKey.default;\n  }\n\n  private getPayer(payer?: web3.PublicKey): web3.PublicKey {\n    return PullFeed.getPayer(this.program, payer);\n  }\n\n  /**\n   *  Calls to initialize a pull feed account and to update the configuration account need to\n   *  compute the feed hash for the account (if one is not specified).\n   */\n  private static feedHashFromParams(params: {\n    queue: web3.PublicKey;\n    feedHash?: Buffer;\n    jobs?: IOracleJob[];\n  }): Buffer {\n    const hash = (() => {\n      if (params.feedHash) {\n        // If the feed hash is provided, use it.\n        return params.feedHash;\n      } else if (params.jobs?.length) {\n        // Else if jobs are provided, compute the feed hash from the queue and jobs.\n        return FeedHash.compute(params.queue.toBuffer(), params.jobs);\n      }\n      throw new Error('Either \"feedHash\" or \"jobs\" must be provided.');\n    })();\n    if (hash.byteLength === 32) return hash;\n    throw new Error('Feed hash must be 32 bytes');\n  }\n\n  /**\n   * Initializes a pull feed account.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @param {PublicKey} queue - The queue account public key.\n   * @param {Array<IOracleJob>} jobs - The oracle jobs to execute.\n   * @param {number} maxVariance - The maximum variance allowed for the feed.\n   * @param {number} minResponses - The minimum number of job responses required.\n   * @param {number} minSampleSize - The minimum number of samples required for setting feed value.\n   * @param {number} maxStaleness - The maximum number of slots that can pass before a feed value is considered stale.\n   * @returns {Promise<web3.TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async initIx(\n    params: {\n      name: string;\n      queue: web3.PublicKey;\n      maxVariance: number;\n      minResponses: number;\n      payer?: web3.PublicKey;\n      minSampleSize: number;\n      maxStaleness: number;\n      permitWriteByAuthority?: boolean;\n    } & ({ feedHash: Buffer } | { jobs: IOracleJob[] })\n  ): Promise<web3.TransactionInstruction> {\n    const program = this.program;\n    const feedHash = PullFeed.feedHashFromParams({\n      queue: params.queue,\n      feedHash: 'feedHash' in params ? params.feedHash : undefined,\n      jobs: 'jobs' in params ? params.jobs : undefined,\n    });\n    const payerPublicKey = this.getPayer(params.payer);\n    const maxVariance = Math.floor(params.maxVariance * 1e9);\n    const lutSigner = getLutSigner(program.programId, this.pubkey);\n    const recentSlot = await program.provider.connection.getSlot('finalized');\n    const lutKey = getLutKey(lutSigner, recentSlot);\n    const ix = program.instruction.pullFeedInit(\n      {\n        feedHash: feedHash,\n        maxVariance: new BN(maxVariance),\n        minResponses: params.minResponses,\n        name: Buffer.from(padStringWithNullBytes(params.name)),\n        recentSlot: new BN(recentSlot),\n        ipfsHash: new Uint8Array(32), // Deprecated.\n        minSampleSize: params.minSampleSize,\n        maxStaleness: params.maxStaleness,\n        permitWriteByAuthority: params.permitWriteByAuthority ?? null,\n      },\n      {\n        accounts: {\n          pullFeed: this.pubkey,\n          queue: params.queue,\n          authority: payerPublicKey,\n          payer: payerPublicKey,\n          systemProgram: web3.SystemProgram.programId,\n          programState: State.keyFromSeed(program),\n          rewardEscrow: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            this.pubkey\n          ),\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          wrappedSolMint: SOL_NATIVE_MINT,\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n        },\n      }\n    );\n    return ix;\n  }\n\n  async closeIx(params: {\n    payer?: web3.PublicKey;\n  }): Promise<web3.TransactionInstruction> {\n    const payerPublicKey = this.getPayer(params.payer);\n    const lutSigner = getLutSigner(this.program.programId, this.pubkey);\n    const data = await this.loadData();\n    const lutKey = getLutKey(lutSigner, data.lutSlot);\n    const ix = this.program.instruction.pullFeedClose(\n      {},\n      {\n        accounts: {\n          pullFeed: this.pubkey,\n          authority: data.authority,\n          payer: payerPublicKey,\n          rewardEscrow: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            this.pubkey\n          ),\n          lutSigner: lutSigner,\n          lut: lutKey,\n          state: State.keyFromSeed(this.program),\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          systemProgram: web3.SystemProgram.programId,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Set configurations for the feed.\n   *\n   * @param params\n   * @param params.feedHash - The hash of the feed as a `Uint8Array` or hexadecimal `string`. Only results signed with this hash will be accepted.\n   * @param params.authority - The authority of the feed.\n   * @param params.maxVariance - The maximum variance allowed for the feed.\n   * @param params.minResponses - The minimum number of responses required.\n   * @param params.minSampleSize - The minimum number of samples required for setting feed value.\n   * @param params.maxStaleness - The maximum number of slots that can pass before a feed value is considered stale.\n   * @returns A promise that resolves to the transaction instruction to set feed configs.\n   */\n  async setConfigsIx(params: {\n    name?: string;\n    authority?: web3.PublicKey;\n    maxVariance?: number;\n    minResponses?: number;\n    feedHash?: Buffer;\n    jobs?: IOracleJob[];\n    minSampleSize?: number;\n    maxStaleness?: number;\n    permitWriteByAuthority?: boolean;\n  }): Promise<web3.TransactionInstruction> {\n    const data = await this.loadData();\n    const name =\n      params.name !== undefined\n        ? Buffer.from(padStringWithNullBytes(params.name))\n        : null;\n    const feedHash =\n      params.feedHash || params.jobs\n        ? PullFeed.feedHashFromParams({\n            queue: data.queue,\n            feedHash: params.feedHash,\n            jobs: params.jobs,\n          })\n        : null;\n\n    const ix = this.program.instruction.pullFeedSetConfigs(\n      {\n        name: name,\n        feedHash: feedHash,\n        authority: params.authority ?? null,\n        maxVariance:\n          params.maxVariance !== undefined\n            ? new BN(Math.floor(params.maxVariance * 1e9))\n            : null,\n        minResponses: params.minResponses ?? null,\n        minSampleSize: params.minSampleSize ?? null,\n        maxStaleness: params.maxStaleness ?? null,\n        permitWriteByAuthority: params.permitWriteByAuthority ?? null,\n        ipfsHash: null, // Deprecated.\n      },\n      {\n        accounts: {\n          pullFeed: this.pubkey,\n          authority: data.authority,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Fetch updates for the feed.\n   *\n   * @param {object} params_ - The parameters object.\n   * @param {string} [params_.gateway] - Optionally specify the gateway to use. If not specified, the gateway is automatically fetched.\n   * @param {number} [params_.numSignatures] - Number of signatures to fetch.\n   * @param {FeedRequest} [params_.feedConfigs] - Optionally specify the feed configs. If not specified, the feed configs are automatically fetched.\n   * @param {IOracleJob[]} [params_.jobs] - An array of `IOracleJob` representing the jobs to be executed.\n   * @param {CrossbarClient} [params_.crossbarClient] - Optionally specify the CrossbarClient to use.\n   * @param {Array<[BN, string]>} [recentSlothashes] - An optional array of recent slothashes as `[BN, string]` tuples.\n   * @param {FeedEvalResponse[]} [priceSignatures] - An optional array of `FeedEvalResponse` representing the price signatures.\n   * @param {boolean} [debug=false] - A boolean flag to enable or disable debug mode. Defaults to `false`.\n   * @returns {Promise<[TransactionInstruction | undefined, OracleResponse[], number, any[]]>} A promise that resolves to a tuple containing:\n   * - The transaction instruction to fetch updates, or `undefined` if not applicable.\n   * - An array of `OracleResponse` objects.\n   * - A number representing the successful responses.\n   * - An array containing usable lookup tables.\n   */\n  async fetchUpdateIx(\n    params: {\n      // Optionally specify the gateway to use. Else, the gateway is automatically fetched.\n      gateway?: string;\n      // Number of signatures to fetch.\n      numSignatures?: number;\n      jobs?: IOracleJob[];\n      crossbarClient?: CrossbarClient;\n      retries?: number;\n      chain?: string;\n      network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n      solanaRpcUrl?: string;\n      recentSlothashes?: Array<[BN, string]>;\n    },\n    debug: boolean = false,\n    payer?: web3.PublicKey\n  ): Promise<\n    [\n      web3.TransactionInstruction[] | undefined,\n      OracleResponse[],\n      number,\n      web3.AddressLookupTableAccount[],\n      string[],\n    ]\n  > {\n    const feedConfigs = await this.loadConfigs();\n    const numSignatures =\n      params.numSignatures ??\n      feedConfigs.minSampleSize + Math.ceil(feedConfigs.minSampleSize / 3);\n\n    return await PullFeed.fetchUpdateIx(\n      /* params= */ {\n        pullFeed: this,\n        gateway: params.gateway,\n        chain: params.chain,\n        network: params.network,\n        numSignatures: numSignatures,\n        crossbarClient: params.crossbarClient,\n        solanaRpcUrl: params.solanaRpcUrl,\n        recentSlothashes: params.recentSlothashes,\n      },\n      debug,\n      payer\n    );\n  }\n\n  /**\n   * Loads the feed configurations (if not already cached) for this {@linkcode PullFeed} account from on chain.\n   * @returns A promise that resolves to the feed configurations.\n   * @throws if the feed account does not exist.\n   */\n  async loadConfigs(force?: boolean): Promise<{\n    queue: web3.PublicKey;\n    maxVariance: number;\n    minResponses: number;\n    feedHash: Buffer;\n    minSampleSize: number;\n  }> {\n    // If forcing a reload or configs are not already cached, load the configs.\n    if (force || !this.configs) {\n      this.configs = await (async () => {\n        const data = await this.loadData();\n        const maxVariance = data.maxVariance.toNumber() / 1e9;\n        return {\n          queue: data.queue,\n          maxVariance: maxVariance,\n          minResponses: data.minResponses,\n          feedHash: Buffer.from(data.feedHash),\n          minSampleSize: data.minSampleSize,\n        };\n      })();\n    }\n    return this.configs;\n  }\n\n  /**\n   * Fetches updates for a feed, returning instructions that must be executed in order at the front\n   * of the transaction.\n   *\n   * @param program - The Anchor program instance\n   * @param params - The parameters object\n   * @param params.feed - PullFeed address to fetch updates for\n   * @param params.gateway - Optional gateway URL to use for fetching updates\n   * @param params.chain - Optional chain identifier (defaults to \"solana\")\n   * @param params.network - Optional network identifier (\"mainnet\", \"mainnet-beta\", \"testnet\", \"devnet\")\n   * @param params.numSignatures - Number of signatures to fetch\n   * @param params.crossbarClient - Optional CrossbarClient instance to use\n   * @param recentSlothashes - Optional array of recent slothashes as [BN, string] tuples\n   * @param debug - Enable debug logging (default: false)\n   * @param payer - Optional transaction payer public key\n   * @returns Promise resolving to:\n   * - instructions: Array of instructions that must be executed in order:\n   *   [0] = secp256k1 program verification instruction\n   *   [1] = feed update instruction\n   * - oracleResponses: Array of responses from oracles\n   * - numSuccesses: Number of successful responses\n   * - luts: Array of AddressLookupTableAccount to include\n   * - failures: Array of errors that occurred during the fetch\n   */\n  static async fetchUpdateIx(\n    params: {\n      pullFeed: PullFeed;\n      gateway?: string;\n      chain?: string;\n      network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n      numSignatures: number;\n      crossbarClient?: CrossbarClient;\n      solanaRpcUrl?: string;\n      recentSlothashes?: Array<[BN, string]>;\n    },\n    debug?: boolean,\n    payer?: web3.PublicKey\n  ): Promise<\n    [\n      web3.TransactionInstruction[] | undefined,\n      OracleResponse[],\n      number,\n      web3.AddressLookupTableAccount[],\n      string[],\n    ]\n  > {\n    const isSolana = getIsSolana(params.chain);\n    const { queue } = await params.pullFeed.loadConfigs(false);\n\n    // SVM chains that arent solana should use the older `fetchUpdateIxSvm` function\n    if (!isSolana) {\n      return this.fetchUpdateIxSvm(params, debug, payer);\n    }\n\n    // Fetch the update using the `fetchUpdateManyIx` function\n    const [ixns, luts, report] = await PullFeed.fetchUpdateManyIx(\n      params.pullFeed.program,\n      {\n        feeds: [params.pullFeed.pubkey],\n        chain: params.chain,\n        network: params.network,\n        gateway: params.gateway,\n        recentSlothashes: params.recentSlothashes,\n        numSignatures: params.numSignatures,\n        crossbarClient: params.crossbarClient,\n        payer: payer,\n      },\n      debug\n    );\n\n    // Generate an OracleResponse for each oracle response in the returned report.\n    const oracleResponses = report.oracle_responses.map(x => {\n      // Because we only requested a single feed response, we can use the first one.\n      const feedResponse = x.feed_responses[0];\n\n      // The returned oracle_pubkey is a hex string, so we need to convert it to a PublicKey.\n      const oraclePubkeyBytes = Buffer.from(x.oracle_pubkey, 'hex');\n      const oraclePubkey = isSolana\n        ? new web3.PublicKey(oraclePubkeyBytes)\n        : web3.PublicKey.findProgramAddressSync(\n            [Buffer.from('Oracle'), queue.toBuffer(), oraclePubkeyBytes],\n            params.pullFeed.program.programId\n          )[0];\n\n      const oracle = new Oracle(params.pullFeed.program, oraclePubkey);\n      const error = feedResponse.failure_error;\n\n      const oldDP = Big.DP;\n      Big.DP = 40;\n      const value = feedResponse.success_value\n        ? new Big(feedResponse.success_value).div(1e18)\n        : null;\n      Big.DP = oldDP;\n\n      return new OracleResponse(oracle, value, error);\n    });\n\n    // Find the number of successful responses.\n    const numSuccesses = oracleResponses.filter(({ value }) => value).length;\n\n    return [\n      /* instructions= */ numSuccesses ? ixns : undefined,\n      /* oracleResponses= */ oracleResponses,\n      /* numSuccesses= */ numSuccesses,\n      /* luts= */ luts,\n      /* failures= */ oracleResponses.map(x => x.error),\n    ];\n  }\n\n  static async fetchUpdateIxSvm(\n    params: {\n      pullFeed: PullFeed;\n      gateway?: string;\n      chain?: string;\n      network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n      numSignatures: number;\n      crossbarClient?: CrossbarClient;\n      solanaRpcUrl?: string;\n      recentSlothashes?: Array<[BN, string]>;\n    },\n    debug?: boolean,\n    payer?: web3.PublicKey\n  ): Promise<\n    [\n      web3.TransactionInstruction[] | undefined,\n      OracleResponse[],\n      number,\n      web3.AddressLookupTableAccount[],\n      string[],\n    ]\n  > {\n    const isSolana = getIsSolana(params.chain);\n    const isMainnet = getIsMainnet(params.network);\n\n    // Get the feed data for this feed.\n    const feed = params.pullFeed;\n    const feedData = await feed.loadData();\n\n    // If we are using Solana, we can use the queue that the feed is on. Otherwise, we need to\n    // load the default queue for the specified network.\n    const solanaQueuePubkey = isSolana\n      ? feedData.queue\n      : spl.getDefaultQueueAddress(isMainnet);\n    if (debug) console.log(`Using queue ${solanaQueuePubkey.toBase58()}`);\n\n    const solanaProgram = isSolana\n      ? // If Solana, the feed's program can be used.\n        feed.program\n      : // If not Solana, load a Switchboard Solana program.\n        await (async () => {\n          const cluster: web3.Cluster = isMainnet ? 'mainnet-beta' : 'devnet';\n          const rpc = params.solanaRpcUrl ?? web3.clusterApiUrl(cluster);\n          const connection = new web3.Connection(rpc);\n          return AnchorUtils.loadProgramFromConnection(connection);\n        })();\n\n    const connection = feed.program.provider.connection;\n    const slotHashes =\n      params.recentSlothashes ??\n      (await RecentSlotHashes.fetchLatestNSlothashes(connection, 30));\n\n    const crossbarClient = params.crossbarClient ?? CrossbarClient.default();\n    const jobs = await crossbarClient\n      .fetch(Buffer.from(feedData.feedHash).toString('hex'))\n      .then(resp => resp.jobs);\n\n    const { responses, failures } = await Queue.fetchSignatures(solanaProgram, {\n      gateway: params.gateway,\n      numSignatures: params.numSignatures,\n      jobs: jobs,\n      queue: solanaQueuePubkey,\n      recentHash: slotHashes[0][1],\n    });\n\n    const oracleResponses = responses.map(resp => {\n      // The returned oracle_pubkey is a hex string, so we need to convert it to a PublicKey.\n      const oraclePubkeyBytes = Buffer.from(resp.oracle_pubkey, 'hex');\n      const oraclePubkey = isSolana\n        ? new web3.PublicKey(oraclePubkeyBytes)\n        : web3.PublicKey.findProgramAddressSync(\n            [\n              Buffer.from('Oracle'),\n              feedData.queue.toBuffer(),\n              oraclePubkeyBytes,\n            ],\n            params.pullFeed.program.programId\n          )[0];\n\n      const oracle = new Oracle(params.pullFeed.program, oraclePubkey);\n      const error = resp.failure_error;\n\n      const oldDP = Big.DP;\n      Big.DP = 40;\n      const value = resp.success_value\n        ? new Big(resp.success_value).div(1e18)\n        : null;\n      Big.DP = oldDP;\n\n      return new OracleResponse(oracle, value, error);\n    });\n    // Find the number of successful responses.\n    const numSuccesses = oracleResponses.filter(({ value }) => value).length;\n    if (!numSuccesses) {\n      throw new Error(\n        `PullFeed.fetchUpdateIx Failure: ${oracleResponses.map(x => x.error)}`\n      );\n    }\n\n    if (debug) console.log('responses', responses);\n\n    const submitSignaturesIx = feed.getSolanaSubmitSignaturesIx({\n      resps: responses,\n      // NOTE: offsets are deprecated.\n      offsets: Array(responses.length).fill(0),\n      slot: slotHashes[0][0],\n      payer,\n      chain: params.chain,\n    });\n\n    const loadLookupTables = spl.createLoadLookupTables();\n    const luts = await loadLookupTables([\n      feed,\n      ...oracleResponses.map(({ oracle }) => oracle),\n    ]);\n\n    return [\n      [submitSignaturesIx],\n      oracleResponses,\n      numSuccesses,\n      luts,\n      failures,\n    ];\n  }\n\n  /**\n   * Fetches updates for multiple feeds at once into a SINGLE tightly packed instruction.\n   * Returns instructions that must be executed in order, with the secp256k1 verification\n   * instruction placed at the front of the transaction.\n   *\n   * @param program - The Anchor program instance.\n   * @param params_ - The parameters object.\n   * @param params_.feeds - An array of PullFeed account public keys.\n   * @param params_.gateway - The gateway URL to use. If not provided, the gateway is automatically fetched.\n   * @param params_.recentSlothashes - The recent slothashes to use. If not provided, the latest 30 slothashes are fetched.\n   * @param params_.numSignatures - The number of signatures to fetch.\n   * @param params_.crossbarClient - Optionally specify the CrossbarClient to use.\n   * @param params_.payer - The payer of the transaction. If not provided, the payer is automatically fetched.\n   * @param debug - A boolean flag to enable or disable debug mode. Defaults to `false`.\n   * @returns A promise that resolves to a tuple containing:\n   * - An array of transaction instructions that must be executed in order:\n   *   [0] = secp256k1 program verification instruction\n   *   [1] = feed update instruction\n   * - An array of `AddressLookupTableAccount` to use.\n   * - The raw response data.\n   */\n  static async fetchUpdateManyIx(\n    program: Program,\n    params: {\n      feeds: web3.PublicKey[];\n      chain?: string;\n      network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n      gateway?: string;\n      recentSlothashes?: Array<[BN, string]>;\n      numSignatures: number;\n      crossbarClient?: CrossbarClient;\n      payer?: web3.PublicKey;\n    },\n    debug: boolean = false\n  ): Promise<\n    [\n      web3.TransactionInstruction[],\n      web3.AddressLookupTableAccount[],\n      FetchSignaturesConsensusResponse,\n    ]\n  > {\n    const isSolana = getIsSolana(params.chain);\n    const isMainnet = getIsMainnet(params.network);\n\n    const feeds = NonEmptyArrayUtils.validate(params.feeds);\n    const crossbarClient = params.crossbarClient ?? CrossbarClient.default();\n\n    // Validate that (1) all of the feeds specified exist and (2) all of the feeds are on the same\n    // queue. Assuming that these conditions are met, we can map the feeds' data to their configs to\n    // request signatures from a gateway.\n    const feedDatas = await PullFeed.loadMany(program, feeds);\n    const queue: web3.PublicKey = feedDatas[0]?.queue ?? web3.PublicKey.default;\n    const feedConfigs: FeedRequest[] = [];\n    for (let idx = 0; idx < feedDatas.length; idx++) {\n      const data = feedDatas[idx];\n      if (!data) {\n        const pubkey = feeds[idx];\n        throw new Error(`No feed found at ${pubkey.toBase58()}}`);\n      } else if (!queue.equals(data.queue)) {\n        throw new Error('All feeds must be on the same queue');\n      }\n      feedConfigs.push({\n        maxVariance: data.maxVariance.toNumber() / 1e9,\n        minResponses: data.minResponses,\n        jobs: await crossbarClient\n          .fetch(Buffer.from(data.feedHash).toString('hex'))\n          .then(resp => resp.jobs),\n      });\n    }\n\n    // If we are using Solana, we can use the queue that the feeds are on. Otherwise, we need to\n    // load the default queue for the specified network.\n    const solanaQueue = isSolana\n      ? queue\n      : spl.getDefaultQueueAddress(isMainnet);\n    if (debug) console.log(`Using queue ${solanaQueue.toBase58()}`);\n\n    const connection = program.provider.connection;\n    const slotHashes =\n      params.recentSlothashes ??\n      (await RecentSlotHashes.fetchLatestNSlothashes(connection, 30));\n    const response = await Queue.fetchSignaturesConsensus(\n      /* program= */ program,\n      /* params= */ {\n        queue: solanaQueue,\n        gateway: params.gateway,\n        recentHash: slotHashes[0][1],\n        feedConfigs,\n        numSignatures: params.numSignatures,\n      }\n    );\n\n    const secpSignatures: Secp256k1Signature[] =\n      response.oracle_responses.map<Secp256k1Signature>(oracleResponse => {\n        return {\n          ethAddress: Buffer.from(oracleResponse.eth_address, 'hex'),\n          signature: Buffer.from(oracleResponse.signature, 'base64'),\n          message: Buffer.from(oracleResponse.checksum, 'base64'),\n          recoveryId: oracleResponse.recovery_id,\n        };\n      });\n    const secpInstruction = Secp256k1InstructionUtils.buildSecp256k1Instruction(\n      secpSignatures,\n      0\n    );\n\n    // Prepare the instruction data for the `pullFeedSubmitResponseManySecp` instruction.\n    const instructionData = {\n      slot: new BN(slotHashes[0][0]),\n      values: response.median_responses.map(({ value }) => new BN(value)),\n    };\n\n    // Prepare the accounts for the `pullFeedSubmitResponseManySecp` instruction.\n    const accounts = {\n      queue: queue!,\n      programState: State.keyFromSeed(program),\n      recentSlothashes: SPL_SYSVAR_SLOT_HASHES_ID,\n      payer: PullFeed.getPayer(program, params.payer),\n      systemProgram: web3.SystemProgram.programId,\n      rewardVault: spl.getAssociatedTokenAddressSync(\n        SOL_NATIVE_MINT,\n        queue,\n        !isSolana // TODO: Review this.\n      ),\n      tokenProgram: SPL_TOKEN_PROGRAM_ID,\n      tokenMint: SOL_NATIVE_MINT,\n      ixSysvar: SPL_SYSVAR_INSTRUCTIONS_ID,\n    };\n\n    //\n    // Prepare the remaining accounts for the `pullFeedSubmitResponseManySecp` instruction.\n    //\n\n    // We only want to include feeds that have succcessful responses returned.\n    const feedPubkeys = response.median_responses.map(median_response => {\n      // For each successful 'median' response, locate a feed that has the same corresponding feed hash.\n      const feedIndex = feedDatas.findIndex(data => {\n        const feedHashHex = Buffer.from(data!.feedHash).toString('hex');\n        return feedHashHex === median_response.feed_hash;\n      });\n      if (feedIndex >= 0) return feeds[feedIndex];\n      if (debug) {\n        console.warn(`Feed not found for hash: ${median_response.feed_hash}`);\n      }\n      return web3.PublicKey.default;\n    });\n    // For each oracle response, create the oracle and oracle stats accounts.\n    const oraclePubkeys = response.oracle_responses.map(response => {\n      return new web3.PublicKey(Buffer.from(response.oracle_pubkey, 'hex'));\n    });\n    const oracleFeedStatsPubkeys = oraclePubkeys.map(\n      oracle =>\n        web3.PublicKey.findProgramAddressSync(\n          [Buffer.from('OracleStats'), oracle.toBuffer()],\n          program.programId\n        )[0]\n    );\n    const remainingAccounts: web3.AccountMeta[] = [\n      ...feedPubkeys.map(feedPubkey => ({\n        pubkey: feedPubkey,\n        isSigner: false,\n        isWritable: true,\n      })),\n      ...oraclePubkeys.map(oraclePubkey => ({\n        pubkey: oraclePubkey,\n        isSigner: false,\n        isWritable: false,\n      })),\n      ...oracleFeedStatsPubkeys.map(oracleFeedStatsPubkey => ({\n        pubkey: oracleFeedStatsPubkey,\n        isSigner: false,\n        isWritable: true,\n      })),\n    ];\n\n    const submitResponseIx =\n      program.instruction.pullFeedSubmitResponseConsensus(instructionData, {\n        accounts,\n        remainingAccounts,\n      });\n\n    // Load the lookup tables for the feeds and oracles.\n    const loadLookupTables = spl.createLoadLookupTables();\n    const luts = await loadLookupTables([\n      ...feedPubkeys.map(pubkey => new PullFeed(program, pubkey)),\n      ...oraclePubkeys.map(pubkey => new Oracle(program, pubkey)),\n    ]);\n\n    return [[secpInstruction, submitResponseIx], luts, response];\n  }\n\n  static async fetchUpdateManyLightIx(\n    program: Program,\n    params: {\n      feeds: web3.PublicKey[];\n      chain?: string;\n      network?: 'mainnet' | 'mainnet-beta' | 'testnet' | 'devnet';\n      gateway?: string;\n      recentSlothashes?: Array<[BN, string]>;\n      numSignatures: number;\n      crossbarClient?: CrossbarClient;\n      payer?: web3.PublicKey;\n    },\n    debug: boolean = false\n  ): Promise<\n    [\n      web3.TransactionInstruction[],\n      web3.AddressLookupTableAccount[],\n      FetchSignaturesConsensusResponse,\n    ]\n  > {\n    const isSolana = getIsSolana(params.chain);\n    const isMainnet = getIsMainnet(params.network);\n\n    const feeds = NonEmptyArrayUtils.validate(params.feeds);\n    const crossbarClient = params.crossbarClient ?? CrossbarClient.default();\n\n    // Validate that (1) all of the feeds specified exist and (2) all of the feeds are on the same\n    // queue. Assuming that these conditions are met, we can map the feeds' data to their configs to\n    // request signatures from a gateway.\n    const feedDatas = await PullFeed.loadMany(program, feeds);\n    const queue: web3.PublicKey = feedDatas[0]?.queue ?? web3.PublicKey.default;\n    const feedConfigs: FeedRequest[] = [];\n    for (let idx = 0; idx < feedDatas.length; idx++) {\n      const data = feedDatas[idx];\n      if (!data) {\n        const pubkey = feeds[idx];\n        throw new Error(`No feed found at ${pubkey.toBase58()}}`);\n      } else if (!queue.equals(data.queue)) {\n        throw new Error('All feeds must be on the same queue');\n      }\n      feedConfigs.push({\n        maxVariance: data.maxVariance.toNumber() / 1e9,\n        minResponses: data.minResponses,\n        jobs: await crossbarClient\n          .fetch(Buffer.from(data.feedHash).toString('hex'))\n          .then(resp => resp.jobs),\n      });\n    }\n\n    // If we are using Solana, we can use the queue that the feeds are on. Otherwise, we need to\n    // load the default queue for the specified network.\n    const solanaQueue = isSolana\n      ? queue\n      : spl.getDefaultQueueAddress(isMainnet);\n    if (debug) console.log(`Using queue ${solanaQueue.toBase58()}`);\n\n    const connection = program.provider.connection;\n    const slotHashes =\n      params.recentSlothashes ??\n      (await RecentSlotHashes.fetchLatestNSlothashes(connection, 30));\n    const response = await Queue.fetchSignaturesConsensus(\n      /* program= */ program,\n      /* params= */ {\n        queue: solanaQueue,\n        gateway: params.gateway,\n        recentHash: slotHashes[0][1],\n        feedConfigs,\n        numSignatures: params.numSignatures,\n      }\n    );\n\n    const secpSignatures: Secp256k1Signature[] =\n      response.oracle_responses.map<Secp256k1Signature>(oracleResponse => {\n        return {\n          ethAddress: Buffer.from(oracleResponse.eth_address, 'hex'),\n          signature: Buffer.from(oracleResponse.signature, 'base64'),\n          message: Buffer.from(oracleResponse.checksum, 'base64'),\n          recoveryId: oracleResponse.recovery_id,\n        };\n      });\n    const secpInstruction = Secp256k1InstructionUtils.buildSecp256k1Instruction(\n      secpSignatures,\n      0\n    );\n\n    // Prepare the instruction data for the `pullFeedSubmitResponseManySecp` instruction.\n    const instructionData = {\n      slot: new BN(slotHashes[0][0]),\n      values: response.median_responses.map(({ value }) => new BN(value)),\n    };\n\n    // Prepare the accounts for the `pullFeedSubmitResponseManySecp` instruction.\n    const accounts = {\n      queue: queue!,\n      programState: State.keyFromSeed(program),\n      recentSlothashes: SPL_SYSVAR_SLOT_HASHES_ID,\n      payer: PullFeed.getPayer(program, params.payer),\n      systemProgram: web3.SystemProgram.programId,\n      rewardVault: spl.getAssociatedTokenAddressSync(\n        SOL_NATIVE_MINT,\n        queue,\n        !isSolana // TODO: Review this.\n      ),\n      tokenProgram: SPL_TOKEN_PROGRAM_ID,\n      tokenMint: SOL_NATIVE_MINT,\n      ixSysvar: SPL_SYSVAR_INSTRUCTIONS_ID,\n    };\n\n    //\n    // Prepare the remaining accounts for the `pullFeedSubmitResponseManySecp` instruction.\n    //\n\n    // We only want to include feeds that have succcessful responses returned.\n    const feedPubkeys = response.median_responses.map(median_response => {\n      // For each successful 'median' response, locate a feed that has the same corresponding feed hash.\n      const feedIndex = feedDatas.findIndex(data => {\n        const feedHashHex = Buffer.from(data!.feedHash).toString('hex');\n        return feedHashHex === median_response.feed_hash;\n      });\n      if (feedIndex >= 0) return feeds[feedIndex];\n      if (debug) {\n        console.warn(`Feed not found for hash: ${median_response.feed_hash}`);\n      }\n      return web3.PublicKey.default;\n    });\n    // For each oracle response, create the oracle and oracle stats accounts.\n    const oraclePubkeys = response.oracle_responses.map(response => {\n      return new web3.PublicKey(Buffer.from(response.oracle_pubkey, 'hex'));\n    });\n    const remainingAccounts: web3.AccountMeta[] = [\n      ...feedPubkeys.map(feedPubkey => ({\n        pubkey: feedPubkey,\n        isSigner: false,\n        isWritable: true,\n      })),\n      ...oraclePubkeys.map(oraclePubkey => ({\n        pubkey: oraclePubkey,\n        isSigner: false,\n        isWritable: false,\n      })),\n    ];\n\n    const submitResponseIx =\n      program.instruction.pullFeedSubmitResponseConsensusLight(\n        instructionData,\n        {\n          accounts,\n          remainingAccounts,\n        }\n      );\n\n    // Load the lookup tables for the feeds and oracles.\n    const loadLookupTables = spl.createLoadLookupTables();\n    const luts = await loadLookupTables([\n      ...feedPubkeys.map(pubkey => new PullFeed(program, pubkey)),\n      ...oraclePubkeys.map(pubkey => new Oracle(program, pubkey)),\n    ]);\n\n    return [[secpInstruction, submitResponseIx], luts, response];\n  }\n\n  /**\n   *  Compiles a transaction instruction to submit oracle signatures for a given feed.\n   *\n   *  @param resps The oracle responses. This may be obtained from the `Gateway` class.\n   *  @param slot The slot at which the oracles signed the feed with the current slothash.\n   *  @returns A promise that resolves to the transaction instruction.\n   */\n  getSolanaSubmitSignaturesIx(params: {\n    resps: FeedEvalResponse[];\n    offsets: number[];\n    slot: BN;\n    payer?: web3.PublicKey;\n    chain?: string;\n  }): web3.TransactionInstruction {\n    const program = this.program;\n    const payerPublicKey = PullFeed.getPayer(program, params.payer);\n    const resps = params.resps.filter(x => (x.signature ?? '').length > 0);\n    const isSolana = getIsSolana(params.chain);\n\n    let queue = new web3.PublicKey(\n      Buffer.from(resps[0].queue_pubkey.toString(), 'hex')\n    );\n    const sourceQueueKey = new web3.PublicKey(\n      Buffer.from(resps[0].queue_pubkey.toString(), 'hex')\n    );\n    let queueBump = 0;\n\n    if (!isSolana) {\n      [queue, queueBump] = web3.PublicKey.findProgramAddressSync(\n        [Buffer.from('Queue'), queue.toBuffer()],\n        program.programId\n      );\n    }\n\n    const oracles = resps.map(x => {\n      const sourceOracleKey = new web3.PublicKey(\n        Buffer.from(x.oracle_pubkey.toString(), 'hex')\n      );\n      if (isSolana) {\n        return sourceOracleKey;\n      } else {\n        const [oraclePDA] = web3.PublicKey.findProgramAddressSync(\n          [Buffer.from('Oracle'), queue.toBuffer(), sourceOracleKey.toBuffer()],\n          program.programId\n        );\n        return oraclePDA;\n      }\n    });\n\n    const oracleFeedStats = oracles.map(\n      oracle =>\n        web3.PublicKey.findProgramAddressSync(\n          [Buffer.from('OracleStats'), oracle.toBuffer()],\n          program.programId\n        )[0]\n    );\n\n    const submissions = resps.map((resp, idx) => ({\n      value: new BN(resp.success_value.toString()),\n      signature: resp.signature,\n      recoveryId: resp.recovery_id,\n      // NOTE: offsets aren't used in the non-solana endpoint.\n      slotOffset: isSolana ? params.offsets[idx] : undefined,\n    }));\n\n    const instructionData = {\n      slot: new BN(params.slot),\n      submissions: submissions.map(x => ({\n        ...x,\n        signature: Buffer.from(x.signature, 'base64'),\n      })),\n      sourceQueueKey: isSolana ? undefined : sourceQueueKey,\n      queueBump: isSolana ? undefined : queueBump,\n    };\n\n    const accounts = {\n      feed: this.pubkey,\n      queue: queue,\n      programState: State.keyFromSeed(program),\n      recentSlothashes: SPL_SYSVAR_SLOT_HASHES_ID,\n      payer: payerPublicKey,\n      systemProgram: web3.SystemProgram.programId,\n      rewardVault: spl.getAssociatedTokenAddressSync(\n        SOL_NATIVE_MINT,\n        queue,\n        !isSolana\n      ),\n      tokenProgram: SPL_TOKEN_PROGRAM_ID,\n      tokenMint: SOL_NATIVE_MINT,\n    };\n\n    const remainingAccounts: web3.AccountMeta[] = [\n      ...oracles.map(k => ({\n        pubkey: k,\n        isSigner: false,\n        isWritable: false,\n      })),\n      ...oracleFeedStats.map(k => ({\n        pubkey: k,\n        isSigner: false,\n        isWritable: true,\n      })),\n    ];\n\n    if (isSolana) {\n      return program.instruction.pullFeedSubmitResponse(instructionData, {\n        accounts,\n        remainingAccounts,\n      });\n    } else {\n      return program.instruction.pullFeedSubmitResponseSvm(instructionData, {\n        accounts,\n        remainingAccounts,\n      });\n    }\n  }\n\n  /**\n   *  Checks if the pull feed account has been initialized.\n   *\n   *  @returns A promise that resolves to a boolean indicating if the account has been initialized.\n   */\n  async isInitializedAsync(): Promise<boolean> {\n    return !(await checkNeedsInit(\n      this.program.provider.connection,\n      this.program.programId,\n      this.pubkey\n    ));\n  }\n\n  /**\n   *  Loads the feed data for this {@linkcode PullFeed} account from on chain.\n   *\n   *  @returns A promise that resolves to the feed data.\n   *  @throws if the feed account does not exist.\n   */\n  async loadData(): Promise<PullFeedAccountData> {\n    return await this.program.account['pullFeedAccountData'].fetch(this.pubkey);\n  }\n\n  /**\n   *  Loads the feed data for multiple feeds at once.\n   *\n   *  @param program The program instance.\n   *  @param pubkeys The public keys of the feeds to load.\n   *  @returns A promise that resolves to an array of feed data (or null if the feed account does not exist)\n   */\n  static async loadMany(\n    program: Program,\n    pubkeys: web3.PublicKey[]\n  ): Promise<(PullFeedAccountData | null)[]> {\n    return await program.account['pullFeedAccountData'].fetchMultiple(pubkeys);\n  }\n\n  /**\n   *  Loads the feed data for this {@linkcode PullFeed} account from on chain.\n   *\n   *  @returns A promise that resolves to the values currently stored in the feed.\n   *  @throws if the feed account does not exist.\n   */\n  async loadValues(): Promise<FeedSubmission[]> {\n    const data = await this.loadData();\n    return PullFeed.mapFeedSubmissions(data);\n  }\n\n  /**\n   *  Loads the feed data for this {@linkcode PullFeed} account from on chain.\n   *\n   *  @param onlyAfter Call will ignore data signed before this slot.\n   *  @returns A promise that resolves to the observed value as it would be\n   *           seen on-chain.\n   */\n  async loadObservedValue(onlyAfter: BN): Promise<{\n    value: Big;\n    slot: BN;\n    oracle: web3.PublicKey;\n  } | null> {\n    const values = await this.loadValues();\n    return toFeedValue(values, onlyAfter);\n  }\n\n  /**\n   * Watches for any on-chain updates to the feed data.\n   *\n   * @param callback The callback to call when the feed data is updated.\n   * @returns A promise that resolves to a subscription ID.\n   */\n  async subscribeToValueChanges(\n    callback: (feed: FeedSubmission[]) => Promise<unknown>\n  ): Promise<number> {\n    const coder = new BorshAccountsCoder(this.program.idl);\n    const subscriptionId = this.program.provider.connection.onAccountChange(\n      this.pubkey,\n      async accountInfo => {\n        const feed = coder.decode('pullFeedAccountData', accountInfo.data);\n        await callback(PullFeed.mapFeedSubmissions(feed));\n      },\n      { commitment: 'processed' }\n    );\n    return subscriptionId;\n  }\n\n  static mapFeedSubmissions(data: PullFeedAccountData): FeedSubmission[] {\n    const oldDP = Big.DP;\n    Big.DP = 40;\n    const submissions = data.submissions\n      .filter(x => !x.oracle.equals(web3.PublicKey.default))\n      .map(x => ({\n        value: new Big(x.value.toString()).div(1e18),\n        slot: new BN(x.slot.toString()),\n        oracle: new web3.PublicKey(x.oracle),\n      }));\n    Big.DP = oldDP;\n    return submissions;\n  }\n\n  /**\n   * Watches for any on-chain updates to any data feed.\n   *\n   * @param program The Anchor program instance.\n   * @param callback The callback to call when the feed data is updated.\n   * @returns A promise that resolves to a subscription ID.\n   */\n  static async subscribeToAllUpdates(\n    program: Program,\n    callback: (\n      event: [number, { pubkey: web3.PublicKey; submissions: FeedSubmission[] }]\n    ) => Promise<void>\n  ): Promise<number> {\n    const coder = new BorshAccountsCoder(program.idl);\n    const subscriptionId = program.provider.connection.onProgramAccountChange(\n      program.programId,\n      async (keyedAccountInfo, ctx) => {\n        const { accountId, accountInfo } = keyedAccountInfo;\n        try {\n          const feed = coder.decode('pullFeedAccountData', accountInfo.data);\n          await callback([\n            ctx.slot,\n            {\n              pubkey: accountId,\n              submissions: feed.submissions\n                .filter(x => !x.oracle.equals(web3.PublicKey.default))\n                .map(x => {\n                  Big.DP = 40;\n                  return {\n                    value: new Big(x.value.toString()).div(1e18),\n                    slot: new BN(x.slot.toString()),\n                    oracle: new web3.PublicKey(x.oracle),\n                  };\n                }),\n            },\n          ]);\n        } catch (e) {\n          console.log(`ParseFailure: ${e}`);\n        }\n      },\n      'processed',\n      [\n        {\n          memcmp: {\n            bytes: 'ZoV7s83c7bd',\n            offset: 0,\n          },\n        },\n      ]\n    );\n    return subscriptionId;\n  }\n\n  async loadLookupTable(): Promise<web3.AddressLookupTableAccount> {\n    // If the lookup table is already loaded, return it\n    if (this.lut) return this.lut;\n\n    const lutKey = await this.lookupTableKey();\n    const accnt =\n      await this.program.provider.connection.getAddressLookupTable(lutKey);\n    this.lut = accnt.value!;\n    return this.lut!;\n  }\n\n  async loadHistoricalValuesCompact(\n    data_?: PullFeedAccountData\n  ): Promise<CompactResult[]> {\n    const data = data_ ?? (await this.loadData());\n    const values = data.historicalResults\n      .filter(x => x.slot.gt(new BN(0)))\n      .sort((a, b) => a.slot.cmp(b.slot));\n    return values;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3904, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/randomness.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/randomness.ts"],"sourcesContent":["import {\n  SOL_NATIVE_MINT,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_SYSVAR_SLOT_HASHES_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\nimport { InstructionUtils } from '../instruction-utils/InstructionUtils.js';\nimport { Gateway } from '../oracle-interfaces/gateway.js';\nimport * as spl from '../utils/index.js';\nimport { getLutKey, getLutSigner } from '../utils/lookupTable.js';\n\nimport { Oracle, OracleAccountData } from './oracle.js';\nimport { Queue } from './queue.js';\nimport { State } from './state.js';\n\nimport type { Program } from '@coral-xyz/anchor-30';\nimport { BN, web3 } from '@coral-xyz/anchor-30';\nimport bs58 from 'bs58';\nimport { Buffer } from 'buffer';\n\nfunction isNonSolana(queue: web3.PublicKey): boolean {\n  return (\n    queue.equals(spl.ON_DEMAND_MAINNET_QUEUE_PDA) ||\n    queue.equals(spl.ON_DEMAND_DEVNET_QUEUE_PDA)\n  );\n}\n\n/**\n * Switchboard commit-reveal randomness.\n * This account type controls commit-reveal style randomness employing\n * Intel SGX enclaves as a randomness security mechanism.\n * For this flow, a user must commit to a future slot that would be unknown\n * to all parties at the time of commitment. The user must then reveal the\n * randomness by then sending the future slot hash to the oracle which can\n * then be signed by the secret key secured within the Trusted Execution Environment.\n *\n * In this manner, the only way for one to predict the randomness is to:\n * 1. Have access to the randomness oracle\n * 2. have control of the solana network slot leader at the time of commit\n * 3. Have an unpatched Intel SGX vulnerability/advisory that the Switchboard\n *   protocol failed to auto-prune.\n */\nexport class Randomness {\n  private static getPayer(\n    program: Program,\n    payer?: web3.PublicKey\n  ): web3.PublicKey {\n    return payer ?? program.provider.publicKey ?? web3.PublicKey.default;\n  }\n\n  /**\n   * Constructs a `Randomness` instance.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @param {web3.PublicKey} pubkey - The public key of the randomness account.\n   */\n  constructor(\n    readonly program: Program,\n    readonly pubkey: web3.PublicKey\n  ) {}\n\n  /**\n   * Loads the randomness data for this {@linkcode Randomness} account from on chain.\n   *\n   * @returns {Promise<any>} A promise that resolves to the randomness data.\n   * @throws Will throw an error if the randomness account does not exist.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async loadData(): Promise<any> {\n    return await this.program.account['randomnessAccountData'].fetch(\n      this.pubkey\n    );\n  }\n\n  /**\n   * Creates a new `Randomness` account.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @param {web3.Keypair} kp - The keypair of the new `Randomness` account.\n   * @param {web3.PublicKey} queue - The queue account to associate with the new `Randomness` account.\n   * @param {web3.PublicKey} [payer_] - The payer for the transaction. If not provided, the default payer from the program provider is used.\n   * @returns {Promise<[Randomness, web3.TransactionInstruction]>} A promise that resolves to a tuple containing the new `Randomness` account and the transaction instruction.\n   */\n  static async create(\n    program: Program,\n    kp: web3.Keypair,\n    queue: web3.PublicKey,\n    payer_?: web3.PublicKey\n  ): Promise<[Randomness, web3.TransactionInstruction]> {\n    const payer = Randomness.getPayer(program, payer_);\n\n    const lutSigner = getLutSigner(program.programId, kp.publicKey);\n    const recentSlot = await program.provider.connection.getSlot('finalized');\n    const lutKey = getLutKey(lutSigner, recentSlot);\n    const ix = program.instruction.randomnessInit(\n      {\n        recentSlot: new BN(recentSlot.toString()),\n      },\n      {\n        accounts: {\n          randomness: kp.publicKey,\n          queue,\n          authority: payer,\n          payer: payer,\n          rewardEscrow: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            kp.publicKey\n          ),\n          systemProgram: web3.SystemProgram.programId,\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          wrappedSolMint: SOL_NATIVE_MINT,\n          programState: State.keyFromSeed(program),\n          lutSigner: lutSigner,\n          lut: lutKey,\n          addressLookupTableProgram: web3.AddressLookupTableProgram.programId,\n        },\n      }\n    );\n    return [new Randomness(program, kp.publicKey), ix];\n  }\n\n  /**\n   * Generate a randomness `commit` solana transaction instruction.\n   * This will commit the randomness account to use currentSlot + 1 slothash\n   * as the non-repeating randomness seed.\n   *\n   * @param {PublicKey} queue - The queue public key for the commit instruction.\n   * @param {PublicKey} [authority_] - The optional authority public key.\n   * @returns {Promise<TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async commitIx(\n    queue: web3.PublicKey,\n    authority_?: web3.PublicKey\n  ): Promise<web3.TransactionInstruction> {\n    const queueAccount = new Queue(this.program, queue);\n    let oracle: web3.PublicKey;\n\n    // If we're on a non-Solana SVM network - we'll need the oracle address as a PDA on the target chain\n    if (isNonSolana(queue)) {\n      const isMainnet = queue.equals(spl.ON_DEMAND_MAINNET_QUEUE_PDA);\n      const solanaQueue = await spl.getQueue({\n        program: this.program,\n        queueAddress: spl.getDefaultQueueAddress(isMainnet),\n      });\n      const solanaOracle = await solanaQueue.fetchFreshOracle();\n      [oracle] = web3.PublicKey.findProgramAddressSync(\n        [Buffer.from('Oracle'), queue.toBuffer(), solanaOracle.toBuffer()],\n        spl.ON_DEMAND_MAINNET_PID\n      );\n    } else {\n      oracle = await queueAccount.fetchFreshOracle();\n    }\n\n    const authority = authority_ ?? (await this.loadData()).authority;\n    const ix = this.program.instruction.randomnessCommit(\n      {},\n      {\n        accounts: {\n          randomness: this.pubkey,\n          queue,\n          oracle,\n          recentSlothashes: SPL_SYSVAR_SLOT_HASHES_ID,\n          authority,\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Generate a randomness `reveal` solana transaction instruction.\n   * This will reveal the randomness using the assigned oracle.\n   *\n   * @returns {Promise<web3.TransactionInstruction>} A promise that resolves to the transaction instruction.\n   */\n  async revealIx(\n    payer_?: web3.PublicKey\n  ): Promise<web3.TransactionInstruction> {\n    const payer = Randomness.getPayer(this.program, payer_);\n    const data = await this.loadData();\n\n    let oracleData: OracleAccountData;\n\n    // if non-Solana SVM network - we'll need to get the solana oracle address from the oracle PDA\n    if (isNonSolana(data.queue)) {\n      const solanaOracle = await new Oracle(\n        this.program,\n        data.oracle\n      ).findSolanaOracleFromPDA();\n      oracleData = solanaOracle.oracleData;\n    } else {\n      const oracle = new Oracle(this.program, data.oracle);\n      oracleData = await oracle.loadData();\n    }\n\n    const gatewayUrl = String.fromCharCode(...oracleData.gatewayUri).replace(\n      /\\0+$/,\n      ''\n    );\n\n    const gateway = new Gateway(this.program, gatewayUrl);\n    const gatewayRevealResponse = await gateway.fetchRandomnessReveal({\n      randomnessAccount: this.pubkey,\n      slothash: bs58.encode(data.seedSlothash),\n      slot: data.seedSlot.toNumber(),\n      rpc: this.program.provider.connection.rpcEndpoint,\n    });\n    const stats = web3.PublicKey.findProgramAddressSync(\n      [Buffer.from('OracleRandomnessStats'), data.oracle.toBuffer()],\n      this.program.programId\n    )[0];\n    const ix = this.program.instruction.randomnessReveal(\n      {\n        signature: Buffer.from(gatewayRevealResponse.signature, 'base64'),\n        recoveryId: gatewayRevealResponse.recovery_id,\n        value: gatewayRevealResponse.value,\n      },\n      {\n        accounts: {\n          randomness: this.pubkey,\n          oracle: data.oracle,\n          queue: data.queue,\n          stats,\n          authority: data.authority,\n          payer,\n          recentSlothashes: SPL_SYSVAR_SLOT_HASHES_ID,\n          systemProgram: web3.SystemProgram.programId,\n          rewardEscrow: spl.getAssociatedTokenAddressSync(\n            SOL_NATIVE_MINT,\n            this.pubkey\n          ),\n          tokenProgram: SPL_TOKEN_PROGRAM_ID,\n          associatedTokenProgram: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          wrappedSolMint: SOL_NATIVE_MINT,\n          programState: State.keyFromSeed(this.program),\n        },\n      }\n    );\n    return ix;\n  }\n\n  /**\n   * Commit and reveal randomness in a single transaction.\n   *\n   * @param {TransactionInstruction[]} callback - The callback to execute after the reveal in the same transaction.\n   * @param {Keypair[]} signers - The signers to sign the transaction.\n   * @param {PublicKey} queue - The queue public key.\n   * @param {object} [configs] - The configuration options.\n   * @param {number} [configs.computeUnitPrice] - The price per compute unit in microlamports.\n   * @param {number} [configs.computeUnitLimit] - The compute unit limit.\n   * @returns {Promise<void>} A promise that resolves when the transaction is confirmed.\n   */\n  async commitAndReveal(\n    callback: web3.TransactionInstruction[],\n    signers: web3.Keypair[],\n    queue: web3.PublicKey,\n    configs?: {\n      computeUnitPrice?: number;\n      computeUnitLimit?: number;\n    },\n    debug?: boolean\n  ): Promise<void> {\n    // In this function (because its 2 back to back transactions) we need to use the payer from the\n    // provider as the authority for the commit transaction.\n    const authority = spl.getNodePayer(this.program);\n    const computeUnitPrice = configs?.computeUnitPrice ?? 50_000;\n    const computeUnitLimit = configs?.computeUnitLimit ?? 200_000;\n    const connection = this.program.provider.connection;\n    for (;;) {\n      const data = await this.loadData();\n      if (data.seedSlot.toNumber() !== 0) {\n        if (debug) {\n          console.log('Randomness slot already committed. Jumping to reveal.');\n        }\n        break;\n      }\n      const tx = await InstructionUtils.asV0TxWithComputeIxs({\n        connection,\n        ixs: [\n          web3.ComputeBudgetProgram.setComputeUnitPrice({\n            microLamports: computeUnitPrice,\n          }),\n          await this.commitIx(queue, data.authority),\n        ],\n      });\n      tx.sign([authority]);\n      const sim = await connection.simulateTransaction(tx, {\n        commitment: 'processed',\n      });\n      if (sim.value.err !== null) {\n        if (debug) {\n          console.log('Logs', sim.value.logs);\n        }\n        throw new Error(\n          `Failed to simulate commit transaction: ${JSON.stringify(\n            sim.value.err\n          )}`\n        );\n      }\n      const sig = await connection.sendTransaction(tx, {\n        maxRetries: 2,\n        skipPreflight: true,\n      });\n      if (debug) {\n        console.log(`Commit transaction sent: ${sig}`);\n      }\n      try {\n        await connection.confirmTransaction(sig);\n        if (debug) {\n          console.log(`Commit transaction confirmed: ${sig}`);\n        }\n        break;\n      } catch {\n        if (debug) {\n          console.log('Failed to confirm commit transaction. Retrying...');\n        }\n        await new Promise(f => setTimeout(f, 1000));\n        continue;\n      }\n    }\n    await new Promise(f => setTimeout(f, 1000));\n    for (;;) {\n      const data = await this.loadData();\n      if (data.revealSlot.toNumber() !== 0) {\n        break;\n      }\n      let revealIx: web3.TransactionInstruction | undefined = undefined;\n      try {\n        revealIx = await this.revealIx(authority.publicKey);\n      } catch (e) {\n        if (debug) {\n          console.log(e);\n          console.log('Failed to grab reveal signature. Retrying...');\n        }\n        await new Promise(f => setTimeout(f, 1000));\n        continue;\n      }\n      const tx = await InstructionUtils.asV0TxWithComputeIxs({\n        connection: this.program.provider.connection,\n        ixs: [\n          web3.ComputeBudgetProgram.setComputeUnitPrice({\n            microLamports: computeUnitPrice,\n          }),\n          web3.ComputeBudgetProgram.setComputeUnitLimit({\n            units: computeUnitLimit,\n          }),\n          revealIx!,\n          ...callback,\n        ],\n      });\n\n      tx.sign([authority, ...signers]);\n      const sim = await connection.simulateTransaction(tx, {\n        commitment: 'processed',\n      });\n      if (sim.value.err !== null) {\n        if (debug) {\n          console.log('Logs', sim.value.logs);\n        }\n        throw new Error(\n          `Failed to simulate commit transaction: ${JSON.stringify(\n            sim.value.err\n          )}`\n        );\n      }\n      const sig = await connection.sendTransaction(tx, {\n        maxRetries: 2,\n        skipPreflight: true,\n      });\n      if (debug) {\n        console.log(`RevealAndCallback transaction sent: ${sig}`);\n      }\n      await connection.confirmTransaction(sig);\n      if (debug) {\n        console.log(`RevealAndCallback transaction confirmed: ${sig}`);\n      }\n    }\n  }\n\n  /**\n   * Creates a new `Randomness` account and prepares a commit transaction instruction.\n   *\n   * @param {Program} program - The Anchor program instance.\n   * @param {web3.PublicKey} queue - The queue account to associate with the new `Randomness` account.\n   * @returns {Promise<[Randomness, web3.Keypair, web3.TransactionInstruction[]]>} A promise that resolves to a tuple containing the new `Randomness` instance, the keypair, and an array of transaction instructions.\n   */\n  static async createAndCommitIxs(\n    program: Program,\n    queue: web3.PublicKey,\n    payer_?: web3.PublicKey\n  ): Promise<[Randomness, web3.Keypair, web3.TransactionInstruction[]]> {\n    const payer = Randomness.getPayer(program, payer_);\n    const accountKeypair = web3.Keypair.generate();\n    const [account, creationIx] = await Randomness.create(\n      /* program= */ program,\n      /* kp= */ accountKeypair,\n      /* queue= */ queue,\n      /* payer= */ payer\n    );\n    const commitIx = await account.commitIx(\n      /* queue= */ queue,\n      /* authority= */ payer\n    );\n\n    // TODO: Why do we return the account keypair? The authority is already set to the payer right?\n    return [account, accountKeypair, [creationIx, commitIx]];\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4275, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/accounts/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/accounts/index.ts"],"sourcesContent":["export * from './lutMap.js';\nexport * from './oracle.js';\nexport * from './permission.js';\nexport * from './pullFeed.js';\nexport * from './queue.js';\nexport * from './randomness.js';\nexport * from './state.js';\n"],"names":[],"mappings":";AAAA,cAAc,aAAa,CAAC;AAC5B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,eAAe,CAAC;AAC9B,cAAc,YAAY,CAAC;AAC3B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC"}},
    {"offset": {"line": 4294, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/anchor-utils/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/anchor-utils/index.ts"],"sourcesContent":["export * from './AnchorUtils.js';\n"],"names":[],"mappings":";AAAA,cAAc,kBAAkB,CAAC"}},
    {"offset": {"line": 4301, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/event-utils/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/event-utils/index.ts"],"sourcesContent":["type PullFeedValueEventData = {\n  feed: string;\n  oracle: string;\n  value: string | null;\n};\n\nconst I128MAX = '170141183460469231731687303715884105727';\n\nfunction splitFromTail(input_: string, places: number): [string, string] {\n  const input = input_.padStart(18, '0');\n  const splitIndex = input.length - places;\n  if (splitIndex <= 0) {\n    return ['', input]; // if the string is shorter than N characters, the first part is empty\n  }\n  const firstPart = input.slice(0, splitIndex);\n  const lastCharacters = input.slice(splitIndex);\n  return [firstPart, lastCharacters];\n}\n\nexport class PullFeedValueEvent {\n  constructor(public readonly raw: any) {} // eslint-disable-line @typescript-eslint/no-explicit-any\n  toRows(): Array<{ feed: string; oracle: string; value: string | null }> {\n    const out: PullFeedValueEventData[] = [];\n    if (!Array.isArray(this.raw?.data?.feeds)) return out;\n\n    for (const feedIdx in this.raw.data.feeds) {\n      const feed = this.raw.data.feeds[feedIdx];\n      for (const oracleIdx in this.raw.data.oracles) {\n        const oracle = this.raw.data.oracles[oracleIdx];\n        const value = this.raw.data.values[feedIdx][oracleIdx];\n        const valueParts = splitFromTail(value.toString(), 18);\n        if (value.toString() === I128MAX) {\n          out.push({\n            feed: feed.toString(),\n            oracle: oracle.toString(),\n            value: null,\n          });\n        } else {\n          out.push({\n            feed: feed.toString(),\n            oracle: oracle.toString(),\n            value: `${valueParts[0]}.${valueParts[1]}`,\n          });\n        }\n      }\n    }\n    return out;\n  }\n}\n"],"names":[],"mappings":";;;;AAMA,MAAM,OAAO,GAAG,yCAAyC,CAAC;AAE1D,SAAS,aAAa,CAAC,MAAc,EAAE,MAAc;IACnD,MAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;IACvC,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IACzC,IAAI,UAAU,IAAI,CAAC,EAAE,CAAC;QACpB,OAAO;YAAC,EAAE;YAAE,KAAK;SAAC,CAAC,CAAC,sEAAsE;IAC5F,CAAC;IACD,MAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;IAC7C,MAAM,cAAc,GAAG,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAC/C,OAAO;QAAC,SAAS;QAAE,cAAc;KAAC,CAAC;AACrC,CAAC;AAEK,MAAO,kBAAkB;IAC7B,YAA4B,GAAQ,CAAA;QAAR,IAAA,CAAA,GAAG,GAAH,GAAG,CAAK;IAAG,CAAC,CAAC,yDAAyD;IAClG,MAAM,GAAA;;QACJ,MAAM,GAAG,GAA6B,EAAE,CAAC;QACzC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA,KAAA,CAAA,KAAA,IAAI,CAAC,GAAG,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,IAAI,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,KAAK,CAAC,EAAE,OAAO,GAAG,CAAC;QAEtD,IAAK,MAAM,OAAO,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC;YAC1C,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAC1C,IAAK,MAAM,SAAS,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAE,CAAC;gBAC9C,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBAChD,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC;gBACvD,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;gBACvD,IAAI,KAAK,CAAC,QAAQ,EAAE,KAAK,OAAO,EAAE,CAAC;oBACjC,GAAG,CAAC,IAAI,CAAC;wBACP,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE;wBACrB,MAAM,EAAE,MAAM,CAAC,QAAQ,EAAE;wBACzB,KAAK,EAAE,IAAI;qBACZ,CAAC,CAAC;gBACL,CAAC,MAAM,CAAC;oBACN,GAAG,CAAC,IAAI,CAAC;wBACP,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE;wBACrB,MAAM,EAAE,MAAM,CAAC,QAAQ,EAAE;wBACzB,KAAK,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC,CAAA,CAAA,EAAI,UAAU,CAAC,CAAC,CAAC,EAAE;qBAC3C,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC;QACD,OAAO,GAAG,CAAC;IACb,CAAC;CACF"}},
    {"offset": {"line": 4358, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/evm/message.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/evm/message.ts"],"sourcesContent":["// Components for an EVM update message\n// This is for updating an existing feed\nexport type UpdateHexStringParams = {\n  discriminator: 1; // 1 for update, 3 for update with snapshot\n  feedId: string; // 32-byte feed id\n  result: string; // 16-byte result (i128 BE encoded)\n  blockNumber: string; // 8-byte block number (u64 BE encoded)\n  timestamp?: string; // 8-byte timestamp (u64 BE encoded)\n  r: string; // 32-byte r value\n  s: string; // 32-byte s value\n  v: number; // 1-byte v value\n};\n\n// Components for an EVM attestation message\n// This is for bridging new oracles onto the target chain\nexport type AttestationHexStringParams = {\n  discriminator: 2; // 2 for attestation\n  oracleId: string; // 32-byte oracle id\n  queueId: string; // 32-byte queue id\n  secp256k1Key: string; // 64-byte secp256k1 key\n  blockNumber: string; // 8-byte block number (u64 BE encoded)\n  mrEnclave: string; // 32-byte mr enclave\n  r: string; // 32-byte r value\n  s: string; // 32-byte s value\n  v: number; // 1-byte v value\n  timestamp: string; // 8-byte timestamp (u64 BE encoded)\n  guardianId: string; // 32-byte guardian id\n};\n\n// Components for an EVM attestation message\n// This is for bridging new oracles onto the target chain\nexport type V0AttestationHexStringParams = {\n  discriminator: 2; // 2 for attestation\n  oracleId: string; // 32-byte oracle id\n  queueId: string; // 32-byte queue id\n  ed25519Key: string; // 32-byte ed25519 key\n  secp256k1Key: string; // 64-byte secp256k1 key\n  blockNumber: string; // 8-byte block number (u64 BE encoded)\n  mrEnclave: string; // 32-byte mr enclave\n  r: string; // 32-byte r value\n  s: string; // 32-byte s value\n  v: number; // 1-byte v value\n};\n\n// Components for an EVM randomness reveal message\n// This is for revealing randomness\nexport type RandomnessRevealHexStringParams = {\n  discriminator: 4; // 4 for randomness reveal\n  randomnessId: string; // 32-byte randomness id\n  result: string; // 32-byte result\n  r: string; // 32-byte r value\n  s: string; // 32-byte s value\n  v: number; // 1-byte v value\n};\n\n/**\n * Create an EVM-serializable update message\n * @param param0 - UpdateHexStringParams: Components for an EVM update message\n * @returns hex string\n */\nexport function createUpdateHexString({\n  feedId,\n  discriminator,\n  result,\n  blockNumber,\n  r,\n  s,\n  v,\n  timestamp,\n}: UpdateHexStringParams): string {\n  const discriminatorHex = discriminator.toString(16).padStart(2, '0');\n  const resultHex = BigInt(result).toString(16).padStart(32, '0');\n  const blockNumberHex = BigInt(blockNumber).toString(16).padStart(16, '0');\n  const vHex = v.toString(16).padStart(2, '0');\n  const timestampHex = timestamp\n    ? BigInt(timestamp).toString(16).padStart(16, '0')\n    : '';\n  return `0x${discriminatorHex}${feedId}${resultHex}${r}${s}${vHex}${blockNumberHex}${timestampHex}`;\n}\n\n/**\n * Create an EVM-serializable attestation message\n * @param param0 - AttestationHexStringParams: Components for an EVM attestation message\n * @returns hex string\n */\nexport function createAttestationHexString({\n  discriminator,\n  oracleId,\n  queueId,\n  timestamp,\n  secp256k1Key,\n  r,\n  s,\n  v,\n  blockNumber,\n  mrEnclave,\n  guardianId,\n}: AttestationHexStringParams): string {\n  const discriminatorHex = discriminator.toString(16).padStart(2, '0');\n  const blockNumberHex = BigInt(blockNumber).toString(16).padStart(16, '0');\n  const timestampHex = BigInt(timestamp).toString(16).padStart(16, '0');\n  const vHex = v.toString(16).padStart(2, '0');\n  return `0x${discriminatorHex}${oracleId}${queueId}${mrEnclave}${secp256k1Key}${blockNumberHex}${r}${s}${vHex}${timestampHex}${guardianId}`;\n}\n\n/**\n * Create an EVM-serializable attestation message\n * @param param0 - AttestationHexStringParams: Components for an EVM attestation message\n * @returns hex string\n */\nexport function createV0AttestationHexString({\n  discriminator,\n  oracleId,\n  queueId,\n  ed25519Key,\n  secp256k1Key,\n  r,\n  s,\n  v,\n  blockNumber,\n  mrEnclave,\n}: V0AttestationHexStringParams): string {\n  const discriminatorHex = discriminator.toString(16).padStart(2, '0');\n  const blockNumberHex = BigInt(blockNumber).toString(16).padStart(16, '0');\n  const vHex = v.toString(16).padStart(2, '0');\n  return `0x${discriminatorHex}${oracleId}${queueId}${mrEnclave}${ed25519Key}${secp256k1Key}${blockNumberHex}${r}${s}${vHex}`;\n}\n\n/**\n * Create an EVM-serializable randomness reveal message\n * @param param0 - RandomnessRevealHexStringParams: Components for an EVM randomness reveal message\n * @returns hex string\n */\nexport function createRandomnessRevealHexString({\n  discriminator,\n  randomnessId,\n  result,\n  r,\n  s,\n  v,\n}: RandomnessRevealHexStringParams): string {\n  const discriminatorHex = discriminator.toString(16).padStart(2, '0');\n  const vHex = v.toString(16).padStart(2, '0');\n  return `0x${discriminatorHex}${randomnessId}${result}${r}${s}${vHex}`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4402, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/evm/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/evm/index.ts"],"sourcesContent":["import type { Queue } from '../accounts/index.js';\nimport type {\n  BridgeEnclaveResponse,\n  FeedEvalResponse,\n  Gateway,\n} from '../oracle-interfaces/index.js';\n\nimport {\n  createAttestationHexString,\n  createUpdateHexString,\n  createV0AttestationHexString,\n} from './message.js';\n\nimport {\n  Big,\n  CrossbarClient,\n  IOracleJob,\n  OracleJob,\n} from '@switchboard-xyz/common';\nimport axios from 'axios';\nimport bs58 from 'bs58';\nimport { Buffer } from 'buffer';\n\nexport * as message from './message.js';\n\n// Common options for feed updates\nexport interface FeedUpdateCommonOptions {\n  jobs: OracleJob[]; // Array of job definitions\n  numSignatures?: number; // Number of signatures to fetch\n  maxVariance?: number; // Maximum variance allowed for the feed\n  minResponses?: number; // Minimum number of responses to consider the feed valid\n  recentHash?: string; // Hex string of length 64 (32 bytes) which does not start with 0x\n  aggregatorId?: string; // Specify the aggregator ID if the feed already exists\n  blockNumber?: number; // The block number\n  gateway?: Gateway; // Gateway (optional)\n}\n\n// Define a type for the input parameters\nexport type FeedUpdateParams = FeedUpdateCommonOptions;\n\n// Attestation options\nexport interface AttestationOptions {\n  guardianQueue: Queue; // The guardian queue account\n  recentHash: string; // The blockhash to get the attestation for\n  blockNumber: number; // The timestamp\n  queueId: string; // The queue ID (queue pubkey as hex)\n  oracleId: string; // The oracle ID (oracle pubkey as hex)\n  gateway?: Gateway; // The gateway account (optional)\n}\n\n// Feed simulation result\nexport interface FeedSimulateResult {\n  result: number;\n  feedId: string;\n  response: FeedEvalResponse;\n}\n\n// Feed update result\nexport interface FeedUpdateResult {\n  feedId: string;\n  result: number;\n  encoded: string;\n  response: FeedEvalResponse;\n}\n\n// Attestation result\nexport interface AttestationResult {\n  oracleId: string; // Attestee oracle pubkey as hex\n  queueId: string; // Attestee queue pubkey as hex\n  guardian: string; // Guardian pubkey as hex\n  encoded: string; // The attestation as a hex string\n  response: BridgeEnclaveResponse; // The attestation response from guardian\n}\n\n// Fetch feed response\nexport interface FetchFeedResponse {\n  results: FeedEvalResponse[];\n  encoded: string[];\n}\n\n// Fetch randomness response\nexport interface FetchRandomnessResponse {\n  encoded: string;\n  response: {\n    signature: string;\n    recovery_id: number;\n    value: string;\n  };\n}\n\n// Fetch result response\nexport interface FetchResultResponse extends FetchFeedResponse {\n  feedId: string;\n}\n\n// Fetch results response\nexport interface FetchResultsArgs {\n  feedIds: string[];\n  chainId: number;\n  crossbarUrl?: string;\n  minResponses?: number;\n  maxVariance?: number;\n  numSignatures?: number;\n  syncOracles?: boolean;\n  syncGuardians?: boolean;\n  gateway?: string;\n}\n\n// Fetch result args\nexport interface FetchResultArgs {\n  feedId: string;\n  chainId: number;\n  crossbarUrl?: string;\n  minResponses?: number;\n  maxVariance?: number;\n  numSignatures?: number;\n  syncOracles?: boolean;\n  syncGuardians?: boolean;\n  gateway?: string;\n}\n\n// Feed evaluation response\nexport interface FetchRandomnessArgs {\n  chainId: number;\n  crossbarUrl: string;\n  randomnessId: string;\n  timestamp?: number;\n  minStalenessSeconds?: number;\n}\n\n/**\n * Get an oracle job from object definition\n * @param params the job parameters\n * @returns\n */\nexport function createJob(params: IOracleJob): OracleJob {\n  return OracleJob.fromObject(params);\n}\n\nfunction getCrossbarUrl(crossbarUrl?: string): string {\n  return crossbarUrl ?? CrossbarClient.default().crossbarUrl;\n}\n\n/**\n * Get the feed update data for a particular feed\n * @dev - this function is heavily rate limited\n * @param params the feed update parameters\n * @param queue the queue account\n * @returns the feed simulation result and feed id\n */\nexport async function simulateFeed(\n  params: FeedUpdateParams,\n  queue: Queue\n): Promise<FeedSimulateResult> {\n  const gateway = params.gateway ?? (await queue.fetchGateway());\n  const result = (\n    await gateway.fetchSignatures({\n      ...params,\n      useTimestamp: true,\n      recentHash: bs58.encode(\n        Buffer.from(params.recentHash ?? '0'.repeat(64), 'hex')\n      ),\n    })\n  ).responses[0];\n\n  return {\n    result: new Big(result.success_value).div(new Big(10).pow(18)).toNumber(),\n    feedId: result.feed_hash,\n    response: result,\n  };\n}\n\n/**\n * Get the feed update data for a particular feed\n * @param params the feed update parameters\n * @param queue the queue account\n * @returns the feed update data, the byte arrays that need to be sent to the target chain\n */\nexport async function getFeedUpdateData(\n  params: FeedUpdateParams,\n  queue: Queue\n): Promise<string[]> {\n  return (await getFeedUpdateWithContext(params, queue)).responses.map(\n    r => r.encoded\n  );\n}\n\n/**\n * Get the feed update data for a particular feed\n * @param params the feed update parameters\n * @param queue the queue account\n * @returns the feed update data with context (numeric result data, oracle response, AND encoded response)\n */\nexport async function getFeedUpdateWithContext(\n  params: FeedUpdateParams,\n  queue: Queue\n): Promise<{\n  responses: FeedUpdateResult[];\n  failures: string[];\n}> {\n  // Set the blockhash\n  const blockhash = params.recentHash ?? '0'.repeat(64);\n\n  // if we just want the time feed, return\n  if (params.jobs.length === 0) {\n    {\n      return {\n        responses: [],\n        failures: [],\n      };\n    }\n  }\n\n  // Get the Feed Update if the feed exists\n  // Setup the updates array\n  const updates = await getUpdate(\n    {\n      ...params,\n      recentHash: blockhash,\n    },\n    queue\n  );\n\n  return updates;\n}\n\n/**\n * Get the update message for the EVM for a particular feed\n * This is useful for feeds that have already been created on chain\n * @param params - FeedUpdateCommonOptions: Parameters for the upsert message\n * @param queue - Queue: The queue account\n * @returns - Promise<string> - The update message as a hex string\n */\nexport async function getUpdate(\n  params: FeedUpdateCommonOptions,\n  queue: Queue\n): Promise<{\n  responses: FeedUpdateResult[];\n  failures: string[];\n}> {\n  if (!params.recentHash) {\n    params.recentHash = '0'.repeat(64);\n  }\n\n  // slice if the recentHash starts with 0x\n  if (params.recentHash.startsWith('0x')) {\n    params.recentHash = params.recentHash.slice(2);\n  }\n\n  const gateway = params.gateway ?? (await queue.fetchGateway());\n\n  const { responses, failures } = await gateway.fetchSignatures({\n    ...params,\n    useTimestamp: true,\n    recentHash: bs58.encode(Buffer.from(params.recentHash, 'hex')),\n  });\n  const response: FeedUpdateResult[] = [];\n\n  for (const result of responses) {\n    if (!result.success_value) {\n      failures.push(result.failure_error.toString());\n      continue;\n    }\n\n    // Decode from Base64 to a Buffer\n    const signatureBuffer = new Uint8Array(\n      Buffer.from(result.signature, 'base64')\n    );\n\n    // Assuming each component (r and s) is 32 bytes long\n    const r = Buffer.from(signatureBuffer.slice(0, 32)).toString('hex');\n    const s = Buffer.from(signatureBuffer.slice(32, 64)).toString('hex');\n    const v = result.recovery_id;\n\n    // Create the upsert message\n    const updateString = createUpdateHexString({\n      discriminator: 1,\n      feedId: params.aggregatorId ?? result.feed_hash.toString(),\n      result: result.success_value.toString(),\n      blockNumber: params.blockNumber?.toString() ?? '0',\n      timestamp: result.timestamp?.toString(),\n      r,\n      s,\n      v,\n    });\n\n    // Add the response to the array\n    const res = {\n      feedId: result.feed_hash,\n      result: new Big(result.success_value).div(new Big(10).pow(18)).toNumber(),\n      encoded: updateString,\n      response: result,\n    };\n\n    // Add the response to the array\n    response.push(res);\n  }\n\n  // Sort the response by timestamp, ascending\n  response.sort(\n    (a, b) => (a.response.timestamp ?? 0) - (b.response.timestamp ?? 0)\n  );\n\n  // Return the response\n  return {\n    responses: response,\n    failures,\n  };\n}\n\n/**\n * Get attestation for a particular oracle on a particular queue\n * @param options - AttestationOptions: Options for the attestation\n * @returns - Promise<string> - The attestation as a hex string\n */\nexport async function getAttestation(\n  options: AttestationOptions\n): Promise<AttestationResult> {\n  const { guardianQueue, recentHash, queueId, oracleId, gateway, blockNumber } =\n    options;\n  const gatewayAccount = gateway ?? (await guardianQueue.fetchGateway());\n  const chainHash = recentHash.startsWith('0x')\n    ? recentHash.slice(2)\n    : recentHash;\n  const attestation = await gatewayAccount.fetchBridgingMessage({\n    chainHash,\n    queuePubkey: queueId,\n    oraclePubkey: oracleId,\n  });\n\n  if (!options.recentHash) {\n    options.recentHash = '0'.repeat(64);\n  }\n\n  // slice if the recentHash starts with 0x\n  if (options.recentHash.startsWith('0x')) {\n    options.recentHash = options.recentHash.slice(2);\n  }\n\n  // Decode from Base64 to a Buffer\n  const signatureBuffer = new Uint8Array(\n    Buffer.from(attestation.signature, 'base64')\n  );\n\n  // Assuming each component (r and s) is 32 bytes long\n  const r = Buffer.from(signatureBuffer.slice(0, 32)).toString('hex');\n  const s = Buffer.from(signatureBuffer.slice(32, 64)).toString('hex');\n  const v = attestation.recovery_id;\n\n  // Create the attestation bassed on message contents (it'll either be v0 or ordinary)\n  if (attestation.oracle_ed25519_enclave_signer) {\n    const hexString = createV0AttestationHexString({\n      discriminator: 2,\n      oracleId,\n      queueId,\n      ed25519Key: attestation.oracle_ed25519_enclave_signer,\n      secp256k1Key: attestation.oracle_secp256k1_enclave_signer,\n      r,\n      s,\n      v,\n      mrEnclave: attestation.mr_enclave,\n      blockNumber: blockNumber.toString(),\n    });\n\n    return {\n      oracleId,\n      queueId,\n      guardian: attestation.guardian,\n      encoded: hexString,\n      response: attestation,\n    };\n  } else if (attestation.timestamp) {\n    const hexString = createAttestationHexString({\n      discriminator: 2,\n      oracleId,\n      queueId,\n      secp256k1Key: attestation.oracle_secp256k1_enclave_signer,\n      timestamp: attestation.timestamp.toString(),\n      mrEnclave: attestation.mr_enclave,\n      r,\n      s,\n      v,\n      blockNumber: blockNumber.toString(),\n      guardianId: attestation.guardian,\n    });\n\n    return {\n      oracleId: attestation.oracle,\n      queueId: attestation.queue,\n      guardian: attestation.guardian,\n      encoded: hexString,\n      response: attestation,\n    };\n  }\n  throw new Error('Invalid attestation response');\n}\n\n/**\n * Crossbar API for EVM\n */\n\n/**\n * Fetch result from the Switchboard API\n * @param param0 The parameters to fetch results\n * @returns\n */\nexport async function fetchResult({\n  feedId,\n  chainId,\n  crossbarUrl,\n  minResponses,\n  maxVariance,\n  numSignatures,\n  syncOracles,\n  syncGuardians,\n}: FetchResultArgs): Promise<FetchResultResponse> {\n  return {\n    feedId,\n    ...(await fetchUpdateData(\n      getCrossbarUrl(crossbarUrl),\n      chainId.toString(),\n      feedId,\n      minResponses,\n      maxVariance,\n      numSignatures,\n      syncOracles,\n      syncGuardians\n    )),\n  };\n}\n\n/**\n * Fetch results from the Switchboard API\n * @param param0 The parameters to fetch results\n * @returns\n */\nexport async function fetchResults({\n  feedIds,\n  chainId,\n  crossbarUrl,\n  minResponses,\n  maxVariance,\n  numSignatures,\n  syncOracles,\n  syncGuardians,\n}: FetchResultsArgs): Promise<FetchResultResponse[]> {\n  if (!crossbarUrl) crossbarUrl = CrossbarClient.default().crossbarUrl;\n\n  const responses = await Promise.all(\n    feedIds.map(feedId => {\n      return fetchUpdateData(\n        crossbarUrl,\n        chainId.toString(),\n        feedId,\n        minResponses,\n        maxVariance,\n        numSignatures,\n        syncOracles,\n        syncGuardians\n      );\n    })\n  );\n\n  return responses.map((response, index) => {\n    return {\n      feedId: feedIds[index],\n      ...response,\n    };\n  });\n}\n\n/**\n * Fetch data to settle randomness\n * @param param0 The parameters to fetch randomness\n * @returns\n */\nexport async function fetchRandomness({\n  chainId,\n  crossbarUrl,\n  randomnessId,\n  timestamp,\n  minStalenessSeconds,\n}: FetchRandomnessArgs): Promise<{\n  encoded: string;\n  response: {\n    signature: string;\n    recovery_id: number;\n    value: string;\n  };\n}> {\n  if (!crossbarUrl) {\n    crossbarUrl = 'https://crossbar.switchboard.xyz';\n  }\n\n  return fetchRandomnessData(\n    crossbarUrl,\n    chainId.toString(),\n    randomnessId,\n    timestamp,\n    minStalenessSeconds\n  );\n}\n\n/**\n * Fetch update data from the Switchboard API\n * @param crossbarUrl The Crossbar URL\n * @param chainId The chain ID\n * @param feedId The feed ID\n * @param minResponses Minimum number of responses\n * @param maxVariance Maximum variance\n * @param numSignatures Number of signatures\n * @param syncOracles Sync oracles\n * @param syncGuardians Sync guardians\n * @param gateway Gateway\n * @returns\n */\nasync function fetchUpdateData(\n  crossbarUrl: string,\n  chainId: string,\n  feedId: string,\n  minResponses: number = 1,\n  maxVariance: number = 1e9,\n  numSignatures: number = 1,\n  syncOracles: boolean = true,\n  syncGuardians: boolean = true,\n  gateway?: string\n): Promise<FetchFeedResponse> {\n  const cleanedCrossbarUrl = crossbarUrl.endsWith('/')\n    ? crossbarUrl.slice(0, -1)\n    : crossbarUrl;\n\n  const url = new URL(`${cleanedCrossbarUrl}/updates/evm/${chainId}/${feedId}`);\n\n  // Add query parameters to the URL\n  if (minResponses !== undefined) {\n    url.searchParams.append('minResponses', minResponses.toString());\n  }\n  if (maxVariance !== undefined) {\n    url.searchParams.append('maxVariance', maxVariance.toString());\n  }\n  if (numSignatures !== undefined) {\n    url.searchParams.append('numSignatures', numSignatures.toString());\n  }\n  if (syncOracles !== undefined) {\n    url.searchParams.append('syncOracles', syncOracles.toString());\n  }\n  if (syncGuardians !== undefined) {\n    url.searchParams.append('syncGuardians', syncGuardians.toString());\n  }\n  if (gateway !== undefined) {\n    url.searchParams.append('gateway', gateway);\n  }\n\n  try {\n    const response = await axios.get(url.toString());\n    if (response.status !== 200) {\n      throw new Error(`Error fetching data: ${response.statusText}`);\n    }\n    return response.data as FetchFeedResponse;\n  } catch (error) {\n    console.error('Error fetching feed data:', error);\n    throw error;\n  }\n}\n\n/**\n * Fetch randomness data from the Switchboard API\n * @param chainId The chain ID\n * @param randomnessId The randomness ID configured on-chain\n * @param timestamp The timestamp that the randomness was configured at\n * @param minStalenessSeconds The minimum staleness of the data in seconds\n * @returns\n */\nasync function fetchRandomnessData(\n  crossbarUrl: string,\n  chainId: string,\n  randomnessId: string,\n  timestamp?: number,\n  minStalenessSeconds?: number\n): Promise<FetchRandomnessResponse> {\n  const cleanedCrossbarUrl = crossbarUrl.endsWith('/')\n    ? crossbarUrl.slice(0, -1)\n    : crossbarUrl;\n  const url = new URL(\n    `${cleanedCrossbarUrl}/randomness/evm/${chainId}/${randomnessId}`\n  );\n\n  // Add query parameters to the URL\n  if (timestamp !== undefined) {\n    url.searchParams.append('timestamp', timestamp.toString());\n  }\n  if (minStalenessSeconds !== undefined) {\n    url.searchParams.append(\n      'minStalenessSeconds',\n      minStalenessSeconds.toString()\n    );\n  }\n\n  try {\n    const response = await axios.get(url.toString());\n    if (response.status !== 200) {\n      throw new Error(`Error fetching data: ${response.statusText}`);\n    }\n    return response.data as FetchRandomnessResponse;\n  } catch (error) {\n    console.error('Error fetching randomness data:', error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4748, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/oracle-interfaces/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/oracle-interfaces/index.ts"],"sourcesContent":["export * from './gateway.js';\n"],"names":[],"mappings":";AAAA,cAAc,cAAc,CAAC"}},
    {"offset": {"line": 4755, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/sysvars/associatedToken.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/sysvars/associatedToken.ts"],"sourcesContent":["import {\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  SPL_TOKEN_PROGRAM_ID,\n} from '../constants.js';\n\nimport { web3 } from '@coral-xyz/anchor-30';\n\nexport class AssociatedTokenProgram {\n  private constructor() {}\n  /**\n   * Find the associated token address for the given wallet and token mint\n   */\n  findAssociatedTokenAddress(\n    walletAddress: web3.PublicKey,\n    tokenMintAddress: web3.PublicKey\n  ): [web3.PublicKey, number] {\n    return web3.PublicKey.findProgramAddressSync(\n      [\n        walletAddress.toBuffer(),\n        SPL_TOKEN_PROGRAM_ID.toBuffer(),\n        tokenMintAddress.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EACL,uCAAuC,EACvC,oBAAoB,GACrB,MAAM,iBAAiB,CAAC;;AAEzB,OAAO,EAAE,IAAI,EAAE,MAAM,sBAAsB,CAAC;;;AAEtC,MAAO,sBAAsB;IACjC,aAAA,CAAuB,CAAC;IACxB;;OAEG,CACH,0BAA0B,CACxB,aAA6B,EAC7B,gBAAgC,EAAA;QAEhC,OAAO,kTAAI,CAAC,SAAS,CAAC,sBAAsB,CAC1C;YACE,aAAa,CAAC,QAAQ,EAAE;YACxB,mXAAoB,CAAC,QAAQ,EAAE;YAC/B,gBAAgB,CAAC,QAAQ,EAAE;SAC5B,EACD,sYAAuC,CACxC,CAAC;IACJ,CAAC;CACF"}},
    {"offset": {"line": 4780, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/sysvars/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/sysvars/index.ts"],"sourcesContent":["export * from './associatedToken.js';\nexport * from './recentSlothashes.js';\n"],"names":[],"mappings":";AAAA,cAAc,sBAAsB,CAAC;AACrC,cAAc,uBAAuB,CAAC"}},
    {"offset": {"line": 4789, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/dashboard/node_modules/.pnpm/@switchboard-xyz+on-demand@2.4.1_@switchboard-xyz+common@3.0.14_typescript@5.9.3/node_modules/@switchboard-xyz/on-demand/dist/esm/index.js","sources":["file:///Users/madhavbansal/Documents/lomen/poc/drift-perps/dashboard/node_modules/.pnpm/%40switchboard-xyz%2Bon-demand%402.4.1_%40switchboard-xyz%2Bcommon%403.0.14_typescript%405.9.3/node_modules/%40switchboard-xyz/on-demand/src/index.ts"],"sourcesContent":["import { InstructionUtils } from './instruction-utils/index.js';\n\nexport * from './accounts/index.js';\nexport * from './anchor-utils/index.js';\nexport * from './constants.js';\nexport * from './event-utils/index.js';\nexport * as EVM from './evm/index.js';\nexport * from './instruction-utils/index.js';\nexport * from './oracle-interfaces/index.js';\nexport * from './sysvars/index.js';\nexport * from './utils/index.js';\n\nexport const asV0Tx = InstructionUtils.asV0TxWithComputeIxs;\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,8BAA8B,CAAC;AAEhE,cAAc,qBAAqB,CAAC;AACpC,cAAc,yBAAyB,CAAC;AACxC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,wBAAwB,CAAC;AACvC,OAAO,KAAK,GAAG,MAAM,gBAAgB,CAAC;AAEtC,cAAc,8BAA8B,CAAC;AAC7C,cAAc,oBAAoB,CAAC;AACnC,cAAc,kBAAkB,CAAC;;;;;;;;;;;AAE1B,MAAM,MAAM,GAAG,8YAAgB,CAAC,oBAAoB,CAAC"}}]
}